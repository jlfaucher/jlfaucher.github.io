<!-- HTML header for doxygen 1.9.2-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.2"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>ooRexx: MemorySegment.cpp Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<!--
    Removed completely the TITLEAREA because I don't like the loss of space.
    I want the title in the condensed index (tabs) at top of each HTML page.
    The insertion of the title is managed by javascript code in the footer,
    because this code must be executed AFTER the creation of the condensed index.
    Must have this setting to display the condensed index:
    DISABLE_INDEX = NO
-->
<!-- end header part -->
<!-- Generated by Doxygen 1.9.2 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('_memory_segment_8cpp_source.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">MemorySegment.cpp</div>  </div>
</div><!--header-->
<div class="contents">
<a href="_memory_segment_8cpp.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="comment">/*----------------------------------------------------------------------------*/</span></div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="comment">/*                                                                            */</span></div>
<div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="comment">/* Copyright (c) 1995, 2004 IBM Corporation. All rights reserved.             */</span></div>
<div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="comment">/* Copyright (c) 2005-2024 Rexx Language Association. All rights reserved.    */</span></div>
<div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="comment">/*                                                                            */</span></div>
<div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="comment">/* This program and the accompanying materials are made available under       */</span></div>
<div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="comment">/* the terms of the Common Public License v1.0 which accompanies this         */</span></div>
<div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="comment">/* distribution. A copy is also available at the following address:           */</span></div>
<div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="comment">/* https://www.oorexx.org/license.html                                        */</span></div>
<div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;<span class="comment">/*                                                                            */</span></div>
<div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;<span class="comment">/* Redistribution and use in source and binary forms, with or                 */</span></div>
<div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;<span class="comment">/* without modification, are permitted provided that the following            */</span></div>
<div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;<span class="comment">/* conditions are met:                                                        */</span></div>
<div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;<span class="comment">/*                                                                            */</span></div>
<div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;<span class="comment">/* Redistributions of source code must retain the above copyright             */</span></div>
<div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;<span class="comment">/* notice, this list of conditions and the following disclaimer.              */</span></div>
<div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;<span class="comment">/* Redistributions in binary form must reproduce the above copyright          */</span></div>
<div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;<span class="comment">/* notice, this list of conditions and the following disclaimer in            */</span></div>
<div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;<span class="comment">/* the documentation and/or other materials provided with the distribution.   */</span></div>
<div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;<span class="comment">/*                                                                            */</span></div>
<div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;<span class="comment">/* Neither the name of Rexx Language Association nor the names                */</span></div>
<div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;<span class="comment">/* of its contributors may be used to endorse or promote products             */</span></div>
<div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;<span class="comment">/* derived from this software without specific prior written permission.      */</span></div>
<div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;<span class="comment">/*                                                                            */</span></div>
<div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;<span class="comment">/* THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS        */</span></div>
<div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;<span class="comment">/* &quot;AS IS&quot; AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT          */</span></div>
<div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;<span class="comment">/* LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS          */</span></div>
<div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;<span class="comment">/* FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT   */</span></div>
<div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;<span class="comment">/* OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,      */</span></div>
<div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;<span class="comment">/* SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED   */</span></div>
<div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;<span class="comment">/* TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA,        */</span></div>
<div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;<span class="comment">/* OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY     */</span></div>
<div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;<span class="comment">/* OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING    */</span></div>
<div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;<span class="comment">/* NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS         */</span></div>
<div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;<span class="comment">/* SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.               */</span></div>
<div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;<span class="comment">/*                                                                            */</span></div>
<div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;<span class="comment">/*----------------------------------------------------------------------------*/</span></div>
<div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;<span class="comment">/******************************************************************************/</span></div>
<div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;<span class="comment">/* REXX Kernel                                                                */</span></div>
<div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;<span class="comment">/*                                                                            */</span></div>
<div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;<span class="comment">/* Primitive Memory segment management                                        */</span></div>
<div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;<span class="comment">/*                                                                            */</span></div>
<div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;<span class="comment">/******************************************************************************/</span></div>
<div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="_rexx_core_8h.html">RexxCore.h</a>&quot;</span></div>
<div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="_activity_manager_8hpp.html">ActivityManager.hpp</a>&quot;</span></div>
<div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160; </div>
<div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;<span class="preprocessor">#include &lt;stdio.h&gt;</span></div>
<div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160; </div>
<div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;<span class="comment">// the threshold to trigger expansion of the normal segment set.</span></div>
<div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;<span class="keyword">const</span> <span class="keywordtype">double</span> <a class="code" href="class_normal_segment_set.html#aec09944ce68e6df6fc30a8d571b96976">NormalSegmentSet::NormalMemoryExpansionThreshold</a> = .30;</div>
<div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;<span class="comment">// the threshold to trigger expansion of the large segment set. Since these</span></div>
<div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;<span class="comment">// tend to be large blocks and can be frequently longer lived, we try to run with</span></div>
<div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;<span class="comment">// a little more head room than the normal set</span></div>
<div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;<span class="keyword">const</span> <span class="keywordtype">double</span> <a class="code" href="class_large_segment_set.html#a8031f0f6c4a3b279ea3e42d946023d66">LargeSegmentSet::LargeMemoryExpansionThreshold</a> = .40;</div>
<div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;<span class="comment">// the absolute smallest segment we will allocate.</span></div>
<div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;<span class="keyword">const</span> <span class="keywordtype">size_t</span> <a class="code" href="class_memory_segment_set.html#a05e9bdea24904522b3f602d3382c80da">MemorySegmentSet::MinimumSegmentSize</a> = (<a class="code" href="class_memory_segment.html#aec264de299ef2524a1594add22679b87">MemorySegment::SegmentSize</a>/2);</div>
<div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;<span class="comment">// amount of usable space in a minimum sized segment</span></div>
<div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;<span class="keyword">const</span> <span class="keywordtype">size_t</span> <a class="code" href="class_memory_segment_set.html#a1d535b1aba25b63329b99203226c00d4">MemorySegmentSet::MinimumSegmentDeadSpace</a> = (MinimumSegmentSize - <a class="code" href="class_memory_segment.html#add5363bed0478262b2bf2418791c3a18">MemorySegment::MemorySegmentOverhead</a>);</div>
<div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;<span class="comment">// the large segment set handles objects up to segment size, so lets set the default</span></div>
<div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;<span class="comment">// large enough to handle a few of them.</span></div>
<div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;<span class="keyword">const</span> <span class="keywordtype">size_t</span> <a class="code" href="class_memory_segment_set.html#a41c57a1a3b8fb3641153207bab527f6f">MemorySegmentSet::LargeSegmentSize</a> = (<a class="code" href="class_memory_segment.html#aec264de299ef2524a1594add22679b87">MemorySegment::SegmentSize</a> * 4);;</div>
<div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;<span class="comment">// allocation available in a default segment</span></div>
<div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;<span class="keyword">const</span> <span class="keywordtype">size_t</span> <a class="code" href="class_memory_segment_set.html#a5a73d3356c54f5a13b7789989339edd3">MemorySegmentSet::SegmentDeadSpace</a> = (<a class="code" href="class_memory_segment.html#aec264de299ef2524a1594add22679b87">MemorySegment::SegmentSize</a> - <a class="code" href="class_memory_segment.html#add5363bed0478262b2bf2418791c3a18">MemorySegment::MemorySegmentOverhead</a>);</div>
<div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;<span class="comment">// space available in a larger allocation.</span></div>
<div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;<span class="keyword">const</span> <span class="keywordtype">size_t</span> <a class="code" href="class_memory_segment_set.html#a415eb2594ee04255b9f16b7c30131348">MemorySegmentSet::LargeSegmentDeadSpace</a> = (LargeSegmentSize - <a class="code" href="class_memory_segment.html#add5363bed0478262b2bf2418791c3a18">MemorySegment::MemorySegmentOverhead</a>);</div>
<div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;<span class="keyword">const</span> <span class="keywordtype">size_t</span> <a class="code" href="class_normal_segment_set.html#a345e710ccf84d6173992c70e32581bc3">NormalSegmentSet::InitialNormalSegmentSpace</a> = ((<a class="code" href="class_memory_segment.html#aec264de299ef2524a1594add22679b87">MemorySegment::SegmentSize</a> * 12) - <a class="code" href="class_memory_segment.html#add5363bed0478262b2bf2418791c3a18">MemorySegment::MemorySegmentOverhead</a>);</div>
<div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;<span class="keyword">const</span> <span class="keywordtype">size_t</span> <a class="code" href="class_large_segment_set.html#a6bde617989f98a5d2acda8945583bfaf">LargeSegmentSet::InitialLargeSegmentSpace</a> = (LargeSegmentSize - <a class="code" href="class_memory_segment.html#add5363bed0478262b2bf2418791c3a18">MemorySegment::MemorySegmentOverhead</a>);</div>
<div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;<span class="comment">/**</span></div>
<div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;<span class="comment"> * Dump information about an individual segment</span></div>
<div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;<span class="comment"> * @param owner    The name of the owning segment set.</span></div>
<div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;<span class="comment"> * @param counter  The current object counter.</span></div>
<div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;<span class="comment"> * @param keyfile  The output file for the dump information.</span></div>
<div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;<span class="comment"> * @param dumpfile The full dump file.</span></div>
<div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l00077"></a><span class="lineno"><a class="line" href="class_memory_segment.html#a98a4369bac6e25800ea487a331b46561">   77</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="class_memory_segment.html#a98a4369bac6e25800ea487a331b46561">MemorySegment::dump</a>(<span class="keyword">const</span> <span class="keywordtype">char</span> *owner, <span class="keywordtype">size_t</span> <a class="code" href="_interpreter_instance_8cpp.html#a7ed39eecb03f7a63d73133a598a1ab43">counter</a>, FILE *keyfile, FILE *dumpfile)</div>
<div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;{</div>
<div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;                                     <span class="comment">/* print header for segment          */</span></div>
<div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;    fprintf(stderr,<span class="stringliteral">&quot;Dumping %s Segment %zu from %p for %zu\n&quot;</span>, owner, <a class="code" href="_interpreter_instance_8cpp.html#a7ed39eecb03f7a63d73133a598a1ab43">counter</a>, &amp;<a class="code" href="class_memory_segment.html#abd930bc83a178f8d5bb3ff2bacdd7d9e">segmentStart</a>, <a class="code" href="class_memory_segment_header.html#a6c0acd2a09e144750258e317978a2910">segmentSize</a>);</div>
<div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;                                     <span class="comment">/* now dump the segment              */</span></div>
<div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;    fprintf(keyfile, <span class="stringliteral">&quot;%s addr.%zu = %p\n&quot;</span>, owner, <a class="code" href="_interpreter_instance_8cpp.html#a7ed39eecb03f7a63d73133a598a1ab43">counter</a>, &amp;<a class="code" href="class_memory_segment.html#abd930bc83a178f8d5bb3ff2bacdd7d9e">segmentStart</a>);</div>
<div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;    fprintf(keyfile, <span class="stringliteral">&quot;%s size.%zu = %zu\n&quot;</span>, owner, <a class="code" href="_interpreter_instance_8cpp.html#a7ed39eecb03f7a63d73133a598a1ab43">counter</a>, <a class="code" href="class_memory_segment_header.html#a6c0acd2a09e144750258e317978a2910">segmentSize</a>);</div>
<div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;    fwrite(&amp;<a class="code" href="class_memory_segment.html#abd930bc83a178f8d5bb3ff2bacdd7d9e">segmentStart</a>, 1, <a class="code" href="class_memory_segment_header.html#a6c0acd2a09e144750258e317978a2910">segmentSize</a>, dumpfile);</div>
<div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;}</div>
<div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160; </div>
<div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;<span class="comment">/**</span></div>
<div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;<span class="comment"> * Accumulate memory statistics for a segment</span></div>
<div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;<span class="comment"> * @param memStats The memory stats accumulator</span></div>
<div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;<span class="comment"> * @param stats    The segment stats accumulator</span></div>
<div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l00094"></a><span class="lineno"><a class="line" href="class_memory_segment.html#a32b221f5b8192e3c8f6179e786b49f62">   94</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="class_memory_segment.html#a32b221f5b8192e3c8f6179e786b49f62">MemorySegment::gatherObjectStats</a>(<a class="code" href="class_memory_stats.html">MemoryStats</a> *memStats, <a class="code" href="class_segment_stats.html">SegmentStats</a> *stats)</div>
<div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;{</div>
<div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;    <a class="code" href="class_rexx_internal_object.html">RexxInternalObject</a> *op = <a class="code" href="class_memory_segment.html#a4e532d1281baa23836e24b64e580298e">startObject</a>();</div>
<div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;    <a class="code" href="class_rexx_internal_object.html">RexxInternalObject</a> *ep = <a class="code" href="class_memory_segment.html#aa489ab3956d7b3fefd4108dfe6641c6d">endObject</a>();</div>
<div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160; </div>
<div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;    <span class="comment">// for all objects in this segment, record the object information</span></div>
<div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;    <span class="keywordflow">for</span> (; op &lt; ep; op = op-&gt;<a class="code" href="class_rexx_internal_object.html#a0e6545e24773bc7861c35a4f87984110">nextObject</a>())</div>
<div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;    {</div>
<div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;        stats-&gt;<a class="code" href="class_segment_stats.html#a3323a1d88f3c47bf46dbb39f2597f726">recordObject</a>(memStats, op);</div>
<div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;    }</div>
<div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;}</div>
<div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160; </div>
<div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;<span class="comment">/**</span></div>
<div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;<span class="comment"> * Dump information about the each of the segments</span></div>
<div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;<span class="comment"> * @param keyfile  The keyfile for the output</span></div>
<div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;<span class="comment"> * @param dumpfile The dumpfile for dump information.</span></div>
<div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l00113"></a><span class="lineno"><a class="line" href="class_memory_segment_set.html#a03636135836a91d328829444fd3a453b">  113</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="class_memory_segment_set.html#a03636135836a91d328829444fd3a453b">MemorySegmentSet::dumpSegments</a>(FILE *keyfile, FILE *dumpfile)</div>
<div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;{</div>
<div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;    <span class="keywordtype">size_t</span> <a class="code" href="_interpreter_instance_8cpp.html#a7ed39eecb03f7a63d73133a598a1ab43">counter</a> = 0;</div>
<div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160; </div>
<div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="class_memory_segment.html">MemorySegment</a> *segment = <a class="code" href="class_memory_segment_set.html#a61ed7810741de1e17e28791f0ad673e2">first</a>(); segment != NULL; segment = <a class="code" href="class_memory_segment_set.html#aedcb4e8810fcd3236e073032b8529049">next</a>(segment))</div>
<div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;    {</div>
<div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;        segment-&gt;dump(<a class="code" href="class_memory_segment_set.html#a145bf8586274f7d4a804141e4fa67623">name</a>, ++<a class="code" href="_interpreter_instance_8cpp.html#a7ed39eecb03f7a63d73133a598a1ab43">counter</a>, keyfile, dumpfile);</div>
<div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;    }</div>
<div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;}</div>
<div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160; </div>
<div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;<span class="comment">/**</span></div>
<div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;<span class="comment"> * Dump profile informaton about a segment set (empty for base</span></div>
<div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;<span class="comment"> * class)</span></div>
<div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;<span class="comment"> * @param outfile The profile output file.</span></div>
<div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l00130"></a><span class="lineno"><a class="line" href="class_memory_segment_set.html#ae50003ea8be96293f5ce776ee954822b">  130</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="class_memory_segment_set.html#ae50003ea8be96293f5ce776ee954822b">MemorySegmentSet::dumpMemoryProfile</a>(FILE *outfile)</div>
<div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;{</div>
<div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;}</div>
<div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160; </div>
<div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;<span class="comment">/**</span></div>
<div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;<span class="comment"> * Dump profile informaton about the large allocation segment set</span></div>
<div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;<span class="comment"> * @param outfile The target dump file.</span></div>
<div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l00140"></a><span class="lineno"><a class="line" href="class_large_segment_set.html#ab661934df97756ee34f1b294a063470a">  140</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="class_large_segment_set.html#ab661934df97756ee34f1b294a063470a">LargeSegmentSet::dumpMemoryProfile</a>(FILE *outfile)</div>
<div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;{</div>
<div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;<span class="preprocessor">#ifdef MEMPROFILE                      </span><span class="comment">/* doing memory profiling            */</span><span class="preprocessor"></span></div>
<div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;    fprintf(outfile, <span class="stringliteral">&quot;Memory profile for large object allocations\n\n&quot;</span>);</div>
<div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;    <span class="comment">// all the work is done by the dead caches</span></div>
<div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;    <a class="code" href="class_large_segment_set.html#a084c3dbb390dc5ac34132c37918514b5">deadCache</a>.<a class="code" href="class_dead_object_pool.html#a457703fb40e02ac8330dde5d359e3ffb">dumpMemoryProfile</a>(outfile);</div>
<div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;}</div>
<div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160; </div>
<div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;<span class="comment">/**</span></div>
<div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;<span class="comment"> * Dump profile informaton about the single object allocation</span></div>
<div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;<span class="comment"> * segment set</span></div>
<div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;<span class="comment"> * @param outfile The target dump file.</span></div>
<div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l00156"></a><span class="lineno"><a class="line" href="class_single_object_segment_set.html#af2bd029fc332fbaaa17c7924d04b18b3">  156</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="class_single_object_segment_set.html#af2bd029fc332fbaaa17c7924d04b18b3">SingleObjectSegmentSet::dumpMemoryProfile</a>(FILE *outfile)</div>
<div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;{</div>
<div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;<span class="preprocessor">#ifdef MEMPROFILE                      </span><span class="comment">/* doing memory profiling            */</span><span class="preprocessor"></span></div>
<div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;    fprintf(outFile, <span class="stringliteral">&quot;Statistics for Largest Object Pool %s\n, id&quot;</span>);</div>
<div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;    fprintf(outFile, <span class="stringliteral">&quot;    Total memory allocations:  %zu\n&quot;</span>, <a class="code" href="class_single_object_segment_set.html#a7fbf0dfaa86f3c6ff79abd00dbdb3393">allocationCount</a>);</div>
<div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;    fprintf(outFile, <span class="stringliteral">&quot;    Segments return to system:  %zu\n&quot;</span>, <a class="code" href="class_single_object_segment_set.html#ac67669d37a41f6e421c89a587bcdee72">returnCount</a>);</div>
<div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;    fprintf(outFile, <span class="stringliteral">&quot;    Largest object allocated:  %zu\n&quot;</span>, largestObject);</div>
<div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;    fprintf(outFile, <span class="stringliteral">&quot;    Smallest object allocated:  %zu\n&quot;</span>, smallestObject);</div>
<div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;}</div>
<div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160; </div>
<div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;<span class="comment">/**</span></div>
<div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;<span class="comment"> * Dump profile informaton about the normal allocation segment set</span></div>
<div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;<span class="comment"> * @param outfile The target dump file.</span></div>
<div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l00173"></a><span class="lineno"><a class="line" href="class_normal_segment_set.html#a097e8c67981d9ab6a9894c21b39f643c">  173</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="class_normal_segment_set.html#a097e8c67981d9ab6a9894c21b39f643c">NormalSegmentSet::dumpMemoryProfile</a>(FILE *outfile)</div>
<div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;{</div>
<div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;<span class="preprocessor">#ifdef MEMPROFILE                      </span><span class="comment">/* doing memory profiling            */</span><span class="preprocessor"></span></div>
<div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;    fprintf(outfile, <span class="stringliteral">&quot;Memory profile for normal object allocations\n\n&quot;</span>);</div>
<div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;    <span class="comment">// all the work is done by the dead caches</span></div>
<div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;    <a class="code" href="class_normal_segment_set.html#a766ab6a1566c1302bd4b8e4b449a300a">largeDead</a>.<a class="code" href="class_dead_object_pool.html#a457703fb40e02ac8330dde5d359e3ffb">dumpMemoryProfile</a>(outfile);</div>
<div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160; </div>
<div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = <a class="code" href="class_normal_segment_set.html#aea0339c96baed969ffc0eaa296475639">FirstDeadPool</a>; i &lt; <a class="code" href="class_normal_segment_set.html#a5865c5b2831a666beb8bf2e59bf13209">DeadPools</a>; i++)</div>
<div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;    {</div>
<div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;        <a class="code" href="class_normal_segment_set.html#a6931728c87ac47644de894630e6e291d">subpools</a>[i].<a class="code" href="class_dead_object_pool.html#a457703fb40e02ac8330dde5d359e3ffb">dumpMemoryProfile</a>(outfile);</div>
<div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;    }</div>
<div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;}</div>
<div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160; </div>
<div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;<span class="comment">/**</span></div>
<div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;<span class="comment"> * do dead object overlap validation checking.</span></div>
<div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;<span class="comment"> * @param obj    The object to check.</span></div>
<div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l00193"></a><span class="lineno"><a class="line" href="class_normal_segment_set.html#a92fb3c72b863ae7ffa9d2deb67bda275">  193</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="class_normal_segment_set.html#a92fb3c72b863ae7ffa9d2deb67bda275">NormalSegmentSet::checkObjectOverlap</a>(<a class="code" href="class_dead_object.html">DeadObject</a> *obj)</div>
<div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;{</div>
<div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;    <span class="comment">// all the work is done by the dead caches</span></div>
<div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;    <a class="code" href="class_normal_segment_set.html#a766ab6a1566c1302bd4b8e4b449a300a">largeDead</a>.<a class="code" href="class_dead_object_pool.html#a93b6edd6b4300f451734432734445fa5">checkObjectOverlap</a>(obj);</div>
<div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160; </div>
<div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = <a class="code" href="class_normal_segment_set.html#aea0339c96baed969ffc0eaa296475639">FirstDeadPool</a> - 1; i &lt; <a class="code" href="class_normal_segment_set.html#a5865c5b2831a666beb8bf2e59bf13209">DeadPools</a>; i++)</div>
<div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;    {</div>
<div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;        <a class="code" href="class_normal_segment_set.html#a6931728c87ac47644de894630e6e291d">subpools</a>[i].<a class="code" href="class_dead_object_pool.html#a93b6edd6b4300f451734432734445fa5">checkObjectOverlap</a>(obj);</div>
<div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;    }</div>
<div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;}</div>
<div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160; </div>
<div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;<span class="comment">/**</span></div>
<div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;<span class="comment"> * Constructor for the large segment pool.</span></div>
<div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;<span class="comment"> * @param mem    The hosting memory object.</span></div>
<div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l00210"></a><span class="lineno"><a class="line" href="class_large_segment_set.html#a988b4db07caefc45c4901b09bf5901cf">  210</a></span>&#160;<a class="code" href="class_large_segment_set.html#a6589632e959b5f5a5df501d1ca8e54ff">LargeSegmentSet::LargeSegmentSet</a>(<a class="code" href="class_memory_object.html">MemoryObject</a> *mem) :</div>
<div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;    <a class="code" href="class_memory_segment_set.html">MemorySegmentSet</a>(mem, SET_NORMAL, <span class="stringliteral">&quot;Large Allocation Segments&quot;</span>),</div>
<div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;    deadCache(<span class="stringliteral">&quot;Large Block Allocation Pool&quot;</span>), requests(0), smallestObject(0), largestObject(0) { }</div>
<div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160; </div>
<div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;<span class="comment">/**</span></div>
<div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;<span class="comment"> * Constructor for a single object segment set.</span></div>
<div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;<span class="comment"> * @param mem    The hosting memory object.</span></div>
<div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l00220"></a><span class="lineno"><a class="line" href="class_single_object_segment_set.html#a1a52edb4916ad1ca6b19fad7d21042f0">  220</a></span>&#160;<a class="code" href="class_single_object_segment_set.html#afb04312fc502cb7c11999978930e8862">SingleObjectSegmentSet::SingleObjectSegmentSet</a>(<a class="code" href="class_memory_object.html">MemoryObject</a> *mem) :</div>
<div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;    <a class="code" href="class_memory_segment_set.html">MemorySegmentSet</a>(mem, SET_SINGLEOBJECT, <span class="stringliteral">&quot;Single Object Segments&quot;</span>),</div>
<div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;    allocationsSinceLastGC(0), allocationCount(0), returnCount(0) { }</div>
<div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160; </div>
<div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;<span class="comment">/**</span></div>
<div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;<span class="comment"> * Constructor for the oldspace segment pool.</span></div>
<div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;<span class="comment"> * @param mem    The master memory object instance</span></div>
<div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l00230"></a><span class="lineno"><a class="line" href="class_old_space_segment_set.html#aabf344c6bb7dfef6b6a40938b6663e57">  230</a></span>&#160;<a class="code" href="class_old_space_segment_set.html#a62c07fdcd9edf1838dc5033e9266cc6c">OldSpaceSegmentSet::OldSpaceSegmentSet</a>(<a class="code" href="class_memory_object.html">MemoryObject</a> *mem) :</div>
<div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;    <a class="code" href="class_memory_segment_set.html">MemorySegmentSet</a>(mem, SET_OLDSPACE, <span class="stringliteral">&quot;Old Space Segments&quot;</span>),</div>
<div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;    deadCache(<span class="stringliteral">&quot;Old Space Allocation Pool&quot;</span>) {</div>
<div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;}</div>
<div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160; </div>
<div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;<span class="comment">/**</span></div>
<div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;<span class="comment"> * Constructor for the normal segment pool.</span></div>
<div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;<span class="comment"> * @param mem    The master memory object.</span></div>
<div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l00241"></a><span class="lineno"><a class="line" href="class_normal_segment_set.html#ad728fff0a5a1c53087b7cc5583bd7c64">  241</a></span>&#160;<a class="code" href="class_normal_segment_set.html#ac782818c3b2b503faeebba5af4421262">NormalSegmentSet::NormalSegmentSet</a>(<a class="code" href="class_memory_object.html">MemoryObject</a> *mem) :</div>
<div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;    <a class="code" href="class_memory_segment_set.html">MemorySegmentSet</a>(mem, SET_NORMAL, <span class="stringliteral">&quot;Normal Allocation Segments&quot;</span>),</div>
<div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;    largeDead(<span class="stringliteral">&quot;Large Normal Allocation Pool&quot;</span>)</div>
<div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;{</div>
<div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;    <span class="comment">// finish setting up the allocation subpools.  We set up one</span></div>
<div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;    <span class="comment">// additional one, to act as a guard pool to redirect things to</span></div>
<div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;    <span class="comment">// the large pool.</span></div>
<div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160; </div>
<div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;    <span class="comment">// there are only</span></div>
<div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;    <span class="comment">// DeadPools subpools! (&lt;, not &lt;=)</span></div>
<div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; <a class="code" href="class_normal_segment_set.html#a5865c5b2831a666beb8bf2e59bf13209">DeadPools</a>; i++)</div>
<div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;    {</div>
<div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;        <span class="keywordtype">char</span> buffer[100];</div>
<div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;        snprintf(buffer, <span class="keyword">sizeof</span>(buffer), <span class="stringliteral">&quot;Normal allocation subpool %d for blocks of size %zu&quot;</span>, i, <a class="code" href="class_normal_segment_set.html#a16c03544380b4017e5b1f8e0d5d2d902">deadPoolToLength</a>(i));</div>
<div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;        <a class="code" href="class_normal_segment_set.html#a6931728c87ac47644de894630e6e291d">subpools</a>[i].<a class="code" href="class_dead_object_pool.html#a0e54863d918466ac6b65187a02a034d9">setID</a>(buffer);</div>
<div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;        <span class="comment">// make sure these are properly set up as single size keepers</span></div>
<div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;        <a class="code" href="class_normal_segment_set.html#a6931728c87ac47644de894630e6e291d">subpools</a>[i].<a class="code" href="class_dead_object_pool.html#a508d03b5240889c90370969df2b885d8">emptySingle</a>();</div>
<div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;        <span class="comment">// initially, all subpools are empty, so have them skip</span></div>
<div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;        <span class="comment">// directly to the dead chains.</span></div>
<div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;        <a class="code" href="class_normal_segment_set.html#ab83fecc011405c69e0b15849144cf571">lastUsedSubpool</a>[i] = <a class="code" href="class_normal_segment_set.html#a5865c5b2831a666beb8bf2e59bf13209">DeadPools</a>;</div>
<div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;    }</div>
<div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;    <span class="comment">// add the final entry in the lastUsedSubpool table (extra)</span></div>
<div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;    <a class="code" href="class_normal_segment_set.html#ab83fecc011405c69e0b15849144cf571">lastUsedSubpool</a>[<a class="code" href="class_normal_segment_set.html#a5865c5b2831a666beb8bf2e59bf13209">DeadPools</a>] = <a class="code" href="class_normal_segment_set.html#a5865c5b2831a666beb8bf2e59bf13209">DeadPools</a>;</div>
<div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160; </div>
<div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;    <span class="comment">// This must be the first seg created. Create a segment to give use some space</span></div>
<div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;    <span class="comment">// to potentiall recover from errors in case there is an out of memory error. This</span></div>
<div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;    <span class="comment">// doesn&#39;t need to be a full segment worth, 1/2 should do</span></div>
<div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;    <a class="code" href="class_normal_segment_set.html#a46247417b1f4b4fece9559c00c3328ef">recoverSegment</a> = <a class="code" href="class_memory_segment_set.html#a2f5846486a053e2563f99fe17d4f0455">memory</a>-&gt;<a class="code" href="class_memory_object.html#a1b624530853fcd1c684a038b8f45ccb2">newSegment</a>(<a class="code" href="class_normal_segment_set.html#aa9ee603ec69df6cf7759484ec49bb437">RecoverSegmentSize</a>, <a class="code" href="class_normal_segment_set.html#aa9ee603ec69df6cf7759484ec49bb437">RecoverSegmentSize</a>);</div>
<div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;}</div>
<div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160; </div>
<div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;<span class="comment">/**</span></div>
<div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;<span class="comment"> * Set up the intial normal memory allocation.</span></div>
<div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l00275"></a><span class="lineno"><a class="line" href="class_normal_segment_set.html#a6a863dffe8483a6d557016748c9cc117">  275</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="class_normal_segment_set.html#a6a863dffe8483a6d557016748c9cc117">NormalSegmentSet::getInitialSet</a>()</div>
<div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;{</div>
<div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;    <span class="comment">// get our first set of segments (well, one big one really)</span></div>
<div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;    <a class="code" href="class_memory_segment_set.html#aeedd3721553ad8312d07ad4895166265">newSegment</a>(<a class="code" href="class_normal_segment_set.html#a345e710ccf84d6173992c70e32581bc3">InitialNormalSegmentSpace</a>, <a class="code" href="class_normal_segment_set.html#a345e710ccf84d6173992c70e32581bc3">InitialNormalSegmentSpace</a>);</div>
<div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;}</div>
<div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160; </div>
<div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;<span class="comment">/**</span></div>
<div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;<span class="comment"> * Set up the intial normal memory allocation.</span></div>
<div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l00285"></a><span class="lineno"><a class="line" href="class_large_segment_set.html#a2efd071bdfe9192a875dce9ae0c5f454">  285</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="class_large_segment_set.html#a2efd071bdfe9192a875dce9ae0c5f454">LargeSegmentSet::getInitialSet</a>()</div>
<div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;{</div>
<div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;    <span class="comment">// get our first set of segments (well, one big one really)</span></div>
<div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;    <a class="code" href="class_memory_segment_set.html#aeedd3721553ad8312d07ad4895166265">newSegment</a>(<a class="code" href="class_large_segment_set.html#a6bde617989f98a5d2acda8945583bfaf">InitialLargeSegmentSpace</a>, <a class="code" href="class_large_segment_set.html#a6bde617989f98a5d2acda8945583bfaf">InitialLargeSegmentSpace</a>);</div>
<div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;}</div>
<div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160; </div>
<div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;<span class="comment">/**</span></div>
<div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;<span class="comment"> * Allocate a segment...designed for subclass overrides to provide specialized handling.</span></div>
<div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;<span class="comment"> * @param requestLength</span></div>
<div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;<span class="comment"> *               The requested segment size.</span></div>
<div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;<span class="comment"> * @param minimumLength</span></div>
<div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;<span class="comment"> *               The minimum segment size we can take as a fall back</span></div>
<div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;<span class="comment"> * @return A newly allocated memory segment or NULL if there is an allocation failure.</span></div>
<div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l00302"></a><span class="lineno"><a class="line" href="class_memory_segment_set.html#a7bf421c9c93bf255135415e55814e6a7">  302</a></span>&#160;<a class="code" href="class_memory_segment.html">MemorySegment</a> *<a class="code" href="class_memory_segment_set.html#a7bf421c9c93bf255135415e55814e6a7">MemorySegmentSet::allocateSegment</a>(<span class="keywordtype">size_t</span> requestLength, <span class="keywordtype">size_t</span> minimumLength)</div>
<div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;{</div>
<div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="class_memory_segment_set.html#a2f5846486a053e2563f99fe17d4f0455">memory</a>-&gt;<a class="code" href="class_memory_object.html#a1b624530853fcd1c684a038b8f45ccb2">newSegment</a>(requestLength, minimumLength);</div>
<div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;}</div>
<div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160; </div>
<div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;<span class="comment">/**</span></div>
<div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;<span class="comment"> * Allocate a segment for the larget segment set.</span></div>
<div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;<span class="comment"> * @param requestLength</span></div>
<div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;<span class="comment"> *               The requested segment size.</span></div>
<div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;<span class="comment"> * @param minimumLength</span></div>
<div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;<span class="comment"> *               The minimum size we can take as a fallback.</span></div>
<div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;<span class="comment"> * @return The newly allocated segment or NULL if there was an allocation failure.</span></div>
<div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l00318"></a><span class="lineno"><a class="line" href="class_large_segment_set.html#a1eab1cc57fee31edf8eac1ca1e0c3c20">  318</a></span>&#160;<a class="code" href="class_memory_segment.html">MemorySegment</a> *<a class="code" href="class_large_segment_set.html#a1eab1cc57fee31edf8eac1ca1e0c3c20">LargeSegmentSet::allocateSegment</a>(<span class="keywordtype">size_t</span> requestLength, <span class="keywordtype">size_t</span> minimumLength)</div>
<div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;{</div>
<div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="class_memory_segment_set.html#a2f5846486a053e2563f99fe17d4f0455">memory</a>-&gt;<a class="code" href="class_memory_object.html#afe6f12cca10597f4eff03f65145f02ca">newLargeSegment</a>(requestLength, minimumLength);</div>
<div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;}</div>
<div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160; </div>
<div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;<span class="comment">/**</span></div>
<div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;<span class="comment"> * Allocate a memory segment for the SingleObject set. This will allocate</span></div>
<div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;<span class="comment"> * the object to the minimum size.</span></div>
<div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;<span class="comment"> * @param requestLength</span></div>
<div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;<span class="comment"> *               The requested length.</span></div>
<div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;<span class="comment"> * @param minimumLength</span></div>
<div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;<span class="comment"> *               The minimum length that will satisfy the request.</span></div>
<div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;<span class="comment"> * @return A new memory segment object, or NULL if this could not be allocated.</span></div>
<div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l00335"></a><span class="lineno"><a class="line" href="class_single_object_segment_set.html#a6adda9dd24d13a15d7ab3e126f63fe3f">  335</a></span>&#160;<a class="code" href="class_memory_segment.html">MemorySegment</a> *<a class="code" href="class_single_object_segment_set.html#a6adda9dd24d13a15d7ab3e126f63fe3f">SingleObjectSegmentSet::allocateSegment</a>(<span class="keywordtype">size_t</span> requestLength, <span class="keywordtype">size_t</span> minimumLength)</div>
<div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;{</div>
<div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;    <span class="comment">// use the minimum length for both because we want a best-fit here.</span></div>
<div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="class_memory_segment_set.html#a2f5846486a053e2563f99fe17d4f0455">memory</a>-&gt;<a class="code" href="class_memory_object.html#afe6f12cca10597f4eff03f65145f02ca">newLargeSegment</a>(requestLength, requestLength);</div>
<div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;}</div>
<div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160; </div>
<div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;<span class="comment">/**</span></div>
<div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;<span class="comment"> * Allocate a segment and add it to the segment pool</span></div>
<div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;<span class="comment"> * @param requestLength</span></div>
<div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;<span class="comment"> *               The length requested.</span></div>
<div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;<span class="comment"> * @param minimumLength</span></div>
<div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;<span class="comment"> *               A minimum acceptable length</span></div>
<div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;<span class="comment"> * @return true if the allocation succeeded, false otherwise. If allocated, this</span></div>
<div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;<span class="comment"> *         is also added to the segment set memory pool.</span></div>
<div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l00353"></a><span class="lineno"><a class="line" href="class_memory_segment_set.html#aeedd3721553ad8312d07ad4895166265">  353</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="class_memory_segment_set.html#aeedd3721553ad8312d07ad4895166265">MemorySegmentSet::newSegment</a>(<span class="keywordtype">size_t</span> requestLength, <span class="keywordtype">size_t</span> minimumLength)</div>
<div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;{</div>
<div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;    <span class="comment">// try to allocate a segment, and add it to the list if</span></div>
<div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;    <span class="comment">// successful.  This also adds the space to our dead object pool</span></div>
<div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;    <a class="code" href="class_memory_segment.html">MemorySegment</a> *segment = <a class="code" href="class_memory_segment_set.html#a7bf421c9c93bf255135415e55814e6a7">allocateSegment</a>(requestLength, minimumLength);</div>
<div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;    <span class="keywordflow">if</span> (segment != NULL)</div>
<div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;    {</div>
<div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;        <a class="code" href="class_memory_segment_set.html#a6636fce68844e8349e24f70d2e0b3ec6">addSegment</a>(segment);</div>
<div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;    }</div>
<div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;}</div>
<div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160; </div>
<div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;<span class="comment">/**</span></div>
<div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;<span class="comment"> * Add a dead object to the segment set.</span></div>
<div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;<span class="comment"> * @param object The newly swept up dead object.</span></div>
<div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l00372"></a><span class="lineno"><a class="line" href="class_memory_segment_set.html#afcf45cd1bb986f7c3541fc577a69def3">  372</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="class_memory_segment_set.html#afcf45cd1bb986f7c3541fc577a69def3">MemorySegmentSet::addDeadObject</a>(<a class="code" href="class_dead_object.html">DeadObject</a> *<span class="keywordtype">object</span>)</div>
<div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;{</div>
<div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160; <span class="comment">// The base class doesn&#39;t maintain a dead object pool, so this is a nop</span></div>
<div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;}</div>
<div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160; </div>
<div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;<span class="comment">/**</span></div>
<div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;<span class="comment"> * Add a dead object to the segment set.</span></div>
<div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;<span class="comment"> * @param object The newly swept up dead object.</span></div>
<div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l00383"></a><span class="lineno"><a class="line" href="class_large_segment_set.html#adc93820c32c0c55424d5e996fde636bc">  383</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="class_large_segment_set.html#adc93820c32c0c55424d5e996fde636bc">LargeSegmentSet::addDeadObject</a>(<a class="code" href="class_dead_object.html">DeadObject</a> *<span class="keywordtype">object</span>)</div>
<div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;{</div>
<div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;    <span class="comment">// we want to keep our cache sorted by the size.</span></div>
<div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;    <a class="code" href="class_large_segment_set.html#a084c3dbb390dc5ac34132c37918514b5">deadCache</a>.<a class="code" href="class_dead_object_pool.html#a8155c6ba4af04d8a7c055ef34a764005">addSortedBySize</a>(<span class="keywordtype">object</span>);</div>
<div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;}</div>
<div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160; </div>
<div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;<span class="comment">/**</span></div>
<div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;<span class="comment"> * Add a dead object to the segment set during the sweep operation.</span></div>
<div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;<span class="comment"> * @param object The newly dead object.</span></div>
<div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l00395"></a><span class="lineno"><a class="line" href="class_single_object_segment_set.html#a8db8a439aaad7b380cad79e197d10005">  395</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="class_single_object_segment_set.html#a8db8a439aaad7b380cad79e197d10005">SingleObjectSegmentSet::addDeadObject</a>(<a class="code" href="class_dead_object.html">DeadObject</a> *<span class="keywordtype">object</span>)</div>
<div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;{</div>
<div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;    <span class="comment">// Normally, we are a single object and after the garbage collection the segment</span></div>
<div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;    <span class="comment">// will not contain any live objects, so this dead object represents the entire</span></div>
<div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;    <span class="comment">// segment. However, it is possible that an array was initially allocated from this</span></div>
<div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;    <span class="comment">// storage pool and needed to be expanded. In that case, we have a short array object</span></div>
<div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;    <span class="comment">// at the front of the segment followed by the remnants of the original array as dead</span></div>
<div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;    <span class="comment">// space. We have two choices, we can do nothing, which means a lot of storage is dead</span></div>
<div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;    <span class="comment">// unused space until the array stub gets GC&#39;d or we can move this segment into the normal</span></div>
<div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;    <span class="comment">// storage pool. It will never end up getting released, but at least the memory won&#39;t be</span></div>
<div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;    <span class="comment">// going to waste. However, we ourselves do not keep any objects in a cache because</span></div>
<div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;    <span class="comment">// we never hand them out.</span></div>
<div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;}</div>
<div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160; </div>
<div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;<span class="comment">/**</span></div>
<div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;<span class="comment"> * Add a dead object to the segment set during the sweep operation.</span></div>
<div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;<span class="comment"> * @param object The newly dead object.</span></div>
<div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l00415"></a><span class="lineno"><a class="line" href="class_old_space_segment_set.html#a3066373d91adffe9121805a5a27329d6">  415</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="class_old_space_segment_set.html#a3066373d91adffe9121805a5a27329d6">OldSpaceSegmentSet::addDeadObject</a>(<a class="code" href="class_dead_object.html">DeadObject</a> *<span class="keywordtype">object</span>)</div>
<div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;{</div>
<div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;    <span class="comment">/* we want to keep our cache sorted by the size. */</span></div>
<div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;    <a class="code" href="class_old_space_segment_set.html#abc73af5db4e6fe3ef7afe56cbd752660">deadCache</a>.<a class="code" href="class_dead_object_pool.html#a8155c6ba4af04d8a7c055ef34a764005">addSortedBySize</a>(<span class="keywordtype">object</span>);</div>
<div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;}</div>
<div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160; </div>
<div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;<span class="comment">/**</span></div>
<div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;<span class="comment"> * Add a dead object to the segment set during the sweep operation.</span></div>
<div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;<span class="comment"> * @param object The newly dead object.</span></div>
<div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l00427"></a><span class="lineno"><a class="line" href="class_normal_segment_set.html#a01e4eb09b4c1c84b957e1eaa55fbb5a0">  427</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="class_normal_segment_set.html#a01e4eb09b4c1c84b957e1eaa55fbb5a0">NormalSegmentSet::addDeadObject</a>(<a class="code" href="class_dead_object.html">DeadObject</a> *<span class="keywordtype">object</span>)</div>
<div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;{</div>
<div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;<span class="comment">//  checkObjectOverlap(object);</span></div>
<div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;    <span class="keywordtype">size_t</span> length = <span class="keywordtype">object</span>-&gt;getObjectSize();</div>
<div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160; </div>
<div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;    <span class="comment">// if the length is larger than the biggest subpool we</span></div>
<div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;    <span class="comment">// maintain, we add this to the large block list.</span></div>
<div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;    <span class="keywordflow">if</span> (length &gt; <a class="code" href="class_normal_segment_set.html#a2216c6e3a18510de391e9ba6d99df3ae">LargestSubpool</a>)</div>
<div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;    {</div>
<div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;        <span class="comment">// ideally, we&#39;d like to add this sorted by size, but</span></div>
<div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;        <span class="comment">// this is called so frequently, attempting to sort</span></div>
<div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;        <span class="comment">// degrades performance by about 10%.</span></div>
<div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;        <a class="code" href="class_normal_segment_set.html#a766ab6a1566c1302bd4b8e4b449a300a">largeDead</a>.<a class="code" href="class_dead_object_pool.html#ab77431236ca8dd7daee695df8bbd14e2">add</a>(<span class="keywordtype">object</span>);</div>
<div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;    }</div>
<div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;    {</div>
<div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;        <span class="comment">// calculate the dead chain</span></div>
<div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;        <span class="comment">// and add that to the appropriate chain</span></div>
<div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;        <span class="keywordtype">size_t</span> deadChain = <a class="code" href="class_normal_segment_set.html#ac6b3593d62d010acfde8c339d24c6bca">lengthToDeadPool</a>(length);</div>
<div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;        <a class="code" href="class_normal_segment_set.html#a6931728c87ac47644de894630e6e291d">subpools</a>[deadChain].<a class="code" href="class_dead_object_pool.html#acd4f081dc71cb164e4271ada01da5e73">addSingle</a>(<span class="keywordtype">object</span>);</div>
<div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;        <span class="comment">// we can mark this subpool as having items again</span></div>
<div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;        <a class="code" href="class_normal_segment_set.html#ab83fecc011405c69e0b15849144cf571">lastUsedSubpool</a>[deadChain] = deadChain;</div>
<div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;    }</div>
<div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;}</div>
<div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160; </div>
<div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;<span class="comment">/**</span></div>
<div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;<span class="comment"> * Add a block of storage to the dead object chains</span></div>
<div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;<span class="comment"> * @param object The pointer to the start of the object.</span></div>
<div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;<span class="comment"> * @param length The length of the object.</span></div>
<div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l00459"></a><span class="lineno"><a class="line" href="class_memory_segment_set.html#a06daaaf4c5a3a1b42eb47a9c68f8d8c6">  459</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="class_memory_segment_set.html#afcf45cd1bb986f7c3541fc577a69def3">MemorySegmentSet::addDeadObject</a>(<span class="keywordtype">char</span> *<span class="keywordtype">object</span>, <span class="keywordtype">size_t</span> length)</div>
<div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;{</div>
<div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160; <span class="comment">// The base class doesn&#39;t maintain a dead object pool, so this is a nop</span></div>
<div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;}</div>
<div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160; </div>
<div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160;<span class="comment">/**</span></div>
<div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160;<span class="comment"> * Add a block of storage to the dead object chains</span></div>
<div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160;<span class="comment"> * @param object The pointer to the start of the object.</span></div>
<div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;<span class="comment"> * @param length The length of the object.</span></div>
<div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l00471"></a><span class="lineno"><a class="line" href="class_large_segment_set.html#a3da979744f7094ecdda1223b8482794e">  471</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="class_large_segment_set.html#adc93820c32c0c55424d5e996fde636bc">LargeSegmentSet::addDeadObject</a>(<span class="keywordtype">char</span> *<span class="keywordtype">object</span>, <span class="keywordtype">size_t</span> length)</div>
<div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160;{</div>
<div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160;<span class="preprocessor">#ifdef VERBOSE_GC</span></div>
<div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;    <span class="keywordflow">if</span> (length &gt; <a class="code" href="class_large_segment_set.html#a6e70daef4cd5141ef6fd0c7af65f72e0">largestObject</a>)</div>
<div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;    {</div>
<div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160;        <a class="code" href="class_large_segment_set.html#a6e70daef4cd5141ef6fd0c7af65f72e0">largestObject</a> = length;</div>
<div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160;    }</div>
<div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160;    <span class="keywordflow">if</span> (length &lt; <a class="code" href="class_large_segment_set.html#abe5f58ce25f514baf594af822ab29a3a">smallestObject</a>)</div>
<div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160;    {</div>
<div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160;        <a class="code" href="class_large_segment_set.html#abe5f58ce25f514baf594af822ab29a3a">smallestObject</a> = length;</div>
<div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160;    }</div>
<div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160;    <span class="comment">// we want to keep our cache sorted by the size.</span></div>
<div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160;    <a class="code" href="class_large_segment_set.html#a084c3dbb390dc5ac34132c37918514b5">deadCache</a>.<a class="code" href="class_dead_object_pool.html#a8155c6ba4af04d8a7c055ef34a764005">addSortedBySize</a>(<span class="keyword">new</span> (<span class="keywordtype">object</span>) <a class="code" href="class_dead_object.html">DeadObject</a>(length));</div>
<div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160;}</div>
<div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160; </div>
<div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160;<span class="comment">/**</span></div>
<div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160;<span class="comment"> * Add a section of memory as a dead object to our pool.</span></div>
<div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160;<span class="comment"> * @param object The address of the memory.</span></div>
<div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160;<span class="comment"> * @param length The length of the dead memory.</span></div>
<div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l00494"></a><span class="lineno"><a class="line" href="class_single_object_segment_set.html#a52e573ac5fd10bdbedf8aeef3ee1d517">  494</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="class_single_object_segment_set.html#a8db8a439aaad7b380cad79e197d10005">SingleObjectSegmentSet::addDeadObject</a>(<span class="keywordtype">char</span> *<span class="keywordtype">object</span>, <span class="keywordtype">size_t</span> length)</div>
<div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160;{</div>
<div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160;    <span class="comment">// we don&#39;t keep a deadpool cache, but we do want to mark this as a dead object</span></div>
<div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160;    <span class="comment">// so that we know the segment is a candidate for releasing</span></div>
<div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160;    <span class="keyword">new</span> (object) <a class="code" href="class_dead_object.html">DeadObject</a>(length);</div>
<div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160;}</div>
<div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160; </div>
<div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160;<span class="comment">/**</span></div>
<div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160;<span class="comment"> * Add a section of memory as a dead object to our pool.</span></div>
<div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160;<span class="comment"> * @param object The address of the memory.</span></div>
<div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160;<span class="comment"> * @param length The length of the dead memory.</span></div>
<div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l00508"></a><span class="lineno"><a class="line" href="class_old_space_segment_set.html#add1089c8c140631d41d53454da263863">  508</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="class_old_space_segment_set.html#a3066373d91adffe9121805a5a27329d6">OldSpaceSegmentSet::addDeadObject</a>(<span class="keywordtype">char</span> *<span class="keywordtype">object</span>, <span class="keywordtype">size_t</span> length)</div>
<div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160;{</div>
<div class="line"><a name="l00510"></a><span class="lineno">  510</span>&#160;    <span class="comment">// we want to keep our cache sorted by the size.</span></div>
<div class="line"><a name="l00511"></a><span class="lineno">  511</span>&#160;    <a class="code" href="class_old_space_segment_set.html#abc73af5db4e6fe3ef7afe56cbd752660">deadCache</a>.<a class="code" href="class_dead_object_pool.html#a8155c6ba4af04d8a7c055ef34a764005">addSortedBySize</a>(<span class="keyword">new</span> (<span class="keywordtype">object</span>) <a class="code" href="class_dead_object.html">DeadObject</a>(length));</div>
<div class="line"><a name="l00512"></a><span class="lineno">  512</span>&#160;}</div>
<div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160; </div>
<div class="line"><a name="l00514"></a><span class="lineno">  514</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160;<span class="comment">/**</span></div>
<div class="line"><a name="l00516"></a><span class="lineno">  516</span>&#160;<span class="comment"> * Add a section of memory as a dead object to our pool.</span></div>
<div class="line"><a name="l00517"></a><span class="lineno">  517</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160;<span class="comment"> * @param object The address of the memory.</span></div>
<div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160;<span class="comment"> * @param length The length of the dead memory.</span></div>
<div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l00521"></a><span class="lineno"><a class="line" href="class_normal_segment_set.html#aeff3daade8c976ae2e9b2ced989ddb85">  521</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="class_normal_segment_set.html#a01e4eb09b4c1c84b957e1eaa55fbb5a0">NormalSegmentSet::addDeadObject</a>(<span class="keywordtype">char</span> *<span class="keywordtype">object</span>, <span class="keywordtype">size_t</span> length)</div>
<div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160;{</div>
<div class="line"><a name="l00523"></a><span class="lineno">  523</span>&#160;    <span class="comment">// if the length is larger than the biggest subpool we</span></div>
<div class="line"><a name="l00524"></a><span class="lineno">  524</span>&#160;    <span class="comment">// maintain, we add this to the large block list.</span></div>
<div class="line"><a name="l00525"></a><span class="lineno">  525</span>&#160;    <span class="keywordflow">if</span> (length &gt; <a class="code" href="class_normal_segment_set.html#a2216c6e3a18510de391e9ba6d99df3ae">LargestSubpool</a>)</div>
<div class="line"><a name="l00526"></a><span class="lineno">  526</span>&#160;    {</div>
<div class="line"><a name="l00527"></a><span class="lineno">  527</span>&#160;        <span class="comment">// ideally, we&#39;d like to add this sorted by size, but</span></div>
<div class="line"><a name="l00528"></a><span class="lineno">  528</span>&#160;        <span class="comment">// this is called so frequently, attempting to sort</span></div>
<div class="line"><a name="l00529"></a><span class="lineno">  529</span>&#160;        <span class="comment">// degrades performance by about 10%.</span></div>
<div class="line"><a name="l00530"></a><span class="lineno">  530</span>&#160;        <a class="code" href="class_normal_segment_set.html#a766ab6a1566c1302bd4b8e4b449a300a">largeDead</a>.<a class="code" href="class_dead_object_pool.html#ab77431236ca8dd7daee695df8bbd14e2">add</a>(<span class="keyword">new</span> (<span class="keywordtype">object</span>) <a class="code" href="class_dead_object.html">DeadObject</a>(length));</div>
<div class="line"><a name="l00531"></a><span class="lineno">  531</span>&#160;    }</div>
<div class="line"><a name="l00532"></a><span class="lineno">  532</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l00533"></a><span class="lineno">  533</span>&#160;    {</div>
<div class="line"><a name="l00534"></a><span class="lineno">  534</span>&#160;        <span class="comment">// calculate the dead chain</span></div>
<div class="line"><a name="l00535"></a><span class="lineno">  535</span>&#160;        <span class="comment">// and add that to the appropriate chain</span></div>
<div class="line"><a name="l00536"></a><span class="lineno">  536</span>&#160;        <span class="keywordtype">size_t</span> deadChain = <a class="code" href="class_normal_segment_set.html#ac6b3593d62d010acfde8c339d24c6bca">lengthToDeadPool</a>(length);</div>
<div class="line"><a name="l00537"></a><span class="lineno">  537</span>&#160;        <a class="code" href="class_normal_segment_set.html#a6931728c87ac47644de894630e6e291d">subpools</a>[deadChain].<a class="code" href="class_dead_object_pool.html#acd4f081dc71cb164e4271ada01da5e73">addSingle</a>(<span class="keyword">new</span> (<span class="keywordtype">object</span>) <a class="code" href="class_dead_object.html">DeadObject</a>(length));</div>
<div class="line"><a name="l00538"></a><span class="lineno">  538</span>&#160;        <span class="comment">// we can mark this subpool as having items again</span></div>
<div class="line"><a name="l00539"></a><span class="lineno">  539</span>&#160;        <a class="code" href="class_normal_segment_set.html#ab83fecc011405c69e0b15849144cf571">lastUsedSubpool</a>[deadChain] = deadChain;</div>
<div class="line"><a name="l00540"></a><span class="lineno">  540</span>&#160;    }</div>
<div class="line"><a name="l00541"></a><span class="lineno">  541</span>&#160;}</div>
<div class="line"><a name="l00542"></a><span class="lineno">  542</span>&#160; </div>
<div class="line"><a name="l00543"></a><span class="lineno">  543</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00544"></a><span class="lineno">  544</span>&#160;<span class="comment">/**</span></div>
<div class="line"><a name="l00545"></a><span class="lineno">  545</span>&#160;<span class="comment"> * Add a segment to the segment pool.</span></div>
<div class="line"><a name="l00546"></a><span class="lineno">  546</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00547"></a><span class="lineno">  547</span>&#160;<span class="comment"> * @param segment The new segment to insert</span></div>
<div class="line"><a name="l00548"></a><span class="lineno">  548</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l00549"></a><span class="lineno"><a class="line" href="class_memory_segment_set.html#a6636fce68844e8349e24f70d2e0b3ec6">  549</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="class_memory_segment_set.html#a6636fce68844e8349e24f70d2e0b3ec6">MemorySegmentSet::addSegment</a>(<a class="code" href="class_memory_segment.html">MemorySegment</a> *segment)</div>
<div class="line"><a name="l00550"></a><span class="lineno">  550</span>&#160;{</div>
<div class="line"><a name="l00551"></a><span class="lineno">  551</span>&#160;    <a class="code" href="class_memory_segment_set.html#a2f5846486a053e2563f99fe17d4f0455">memory</a>-&gt;<a class="code" href="class_memory_object.html#a4babf41ab5e88ec6773cae4ddc83ab10">verboseMessage</a>(<span class="stringliteral">&quot;Adding a segment of %zu bytes to %s&quot;</span> <a class="code" href="unix_2_platform_definitions_8h.html#a58f38f0d2d91763ecd599af6f16291e6">line_end</a>, segment-&gt;<a class="code" href="class_memory_segment.html#a2ddc33173de811d5a32dadab64218e69">size</a>(), <a class="code" href="class_memory_segment_set.html#a145bf8586274f7d4a804141e4fa67623">name</a>);</div>
<div class="line"><a name="l00552"></a><span class="lineno">  552</span>&#160; </div>
<div class="line"><a name="l00553"></a><span class="lineno">  553</span>&#160;    <a class="code" href="class_memory_segment.html">MemorySegment</a> *insertPosition = <a class="code" href="class_memory_segment_set.html#a124455ab929d1b2eb35e7a1b7f19e743">anchor</a>.<a class="code" href="class_memory_segment_header.html#a79d5ea5c0d969eaea4442d3fed563090">next</a>;</div>
<div class="line"><a name="l00554"></a><span class="lineno">  554</span>&#160; </div>
<div class="line"><a name="l00555"></a><span class="lineno">  555</span>&#160;    <span class="comment">// insert this at the head of the chain.</span></div>
<div class="line"><a name="l00556"></a><span class="lineno">  556</span>&#160;    insertPosition-&gt;<a class="code" href="class_memory_segment.html#af5eedb6412193837c0e0bdc6f909f7a7">insertBefore</a>(segment);</div>
<div class="line"><a name="l00557"></a><span class="lineno">  557</span>&#160;    <span class="comment">// all of the storage in the segment is added as a dead object.</span></div>
<div class="line"><a name="l00558"></a><span class="lineno">  558</span>&#160;    <a class="code" href="class_dead_object.html">DeadObject</a> *ptr = segment-&gt;<a class="code" href="class_memory_segment.html#aac924598f86a8bfb94375e83784238a4">createDeadObject</a>();</div>
<div class="line"><a name="l00559"></a><span class="lineno">  559</span>&#160;    <a class="code" href="class_memory_segment_set.html#afcf45cd1bb986f7c3541fc577a69def3">addDeadObject</a>(ptr);</div>
<div class="line"><a name="l00560"></a><span class="lineno">  560</span>&#160;}</div>
<div class="line"><a name="l00561"></a><span class="lineno">  561</span>&#160; </div>
<div class="line"><a name="l00562"></a><span class="lineno">  562</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00563"></a><span class="lineno">  563</span>&#160;<span class="comment">/**</span></div>
<div class="line"><a name="l00564"></a><span class="lineno">  564</span>&#160;<span class="comment"> * Accept transfer of a memory segment from another segment set. This</span></div>
<div class="line"><a name="l00565"></a><span class="lineno">  565</span>&#160;<span class="comment"> * occurs at the end of the sweep phase, so we will add the segment to</span></div>
<div class="line"><a name="l00566"></a><span class="lineno">  566</span>&#160;<span class="comment"> * our list and then perform a sweep on it to add the dead storage</span></div>
<div class="line"><a name="l00567"></a><span class="lineno">  567</span>&#160;<span class="comment"> * to our chains. Normally this segment will have just one live object</span></div>
<div class="line"><a name="l00568"></a><span class="lineno">  568</span>&#160;<span class="comment"> * and one large dead object.</span></div>
<div class="line"><a name="l00569"></a><span class="lineno">  569</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00570"></a><span class="lineno">  570</span>&#160;<span class="comment"> * @param segment The segment to transfer.</span></div>
<div class="line"><a name="l00571"></a><span class="lineno">  571</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l00572"></a><span class="lineno"><a class="line" href="class_memory_segment_set.html#a676ae7d0969d7b72919e5be31ae39f90">  572</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="class_memory_segment_set.html#a676ae7d0969d7b72919e5be31ae39f90">MemorySegmentSet::transferSegment</a>(<a class="code" href="class_memory_segment.html">MemorySegment</a> *segment)</div>
<div class="line"><a name="l00573"></a><span class="lineno">  573</span>&#160;{</div>
<div class="line"><a name="l00574"></a><span class="lineno">  574</span>&#160;    <a class="code" href="class_memory_segment_set.html#a2f5846486a053e2563f99fe17d4f0455">memory</a>-&gt;<a class="code" href="class_memory_object.html#a4babf41ab5e88ec6773cae4ddc83ab10">verboseMessage</a>(<span class="stringliteral">&quot;Segment of %zu bytes transferred to %s&quot;</span> <a class="code" href="unix_2_platform_definitions_8h.html#a58f38f0d2d91763ecd599af6f16291e6">line_end</a>, segment-&gt;<a class="code" href="class_memory_segment.html#a2ddc33173de811d5a32dadab64218e69">size</a>(), <a class="code" href="class_memory_segment_set.html#a145bf8586274f7d4a804141e4fa67623">name</a>);</div>
<div class="line"><a name="l00575"></a><span class="lineno">  575</span>&#160;    <a class="code" href="class_memory_segment.html">MemorySegment</a> *insertPosition = <a class="code" href="class_memory_segment_set.html#a124455ab929d1b2eb35e7a1b7f19e743">anchor</a>.<a class="code" href="class_memory_segment_header.html#a79d5ea5c0d969eaea4442d3fed563090">next</a>;</div>
<div class="line"><a name="l00576"></a><span class="lineno">  576</span>&#160; </div>
<div class="line"><a name="l00577"></a><span class="lineno">  577</span>&#160;    <span class="comment">// insert this at the head of the chain.</span></div>
<div class="line"><a name="l00578"></a><span class="lineno">  578</span>&#160;    insertPosition-&gt;<a class="code" href="class_memory_segment.html#af5eedb6412193837c0e0bdc6f909f7a7">insertBefore</a>(segment);</div>
<div class="line"><a name="l00579"></a><span class="lineno">  579</span>&#160;    <span class="comment">// now perform a sweep on this segment</span></div>
<div class="line"><a name="l00580"></a><span class="lineno">  580</span>&#160;    <a class="code" href="class_memory_segment_set.html#abffe4faab8b9008faa40acf1d94f3d5d">sweepSingleSegment</a>(segment);</div>
<div class="line"><a name="l00581"></a><span class="lineno">  581</span>&#160;}</div>
<div class="line"><a name="l00582"></a><span class="lineno">  582</span>&#160; </div>
<div class="line"><a name="l00583"></a><span class="lineno">  583</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00584"></a><span class="lineno">  584</span>&#160;<span class="comment">/**</span></div>
<div class="line"><a name="l00585"></a><span class="lineno">  585</span>&#160;<span class="comment"> * Search the cache of dead objects for an object of sufficient</span></div>
<div class="line"><a name="l00586"></a><span class="lineno">  586</span>&#160;<span class="comment"> * size to fulfill this request.  For the default implementation, we always</span></div>
<div class="line"><a name="l00587"></a><span class="lineno">  587</span>&#160;<span class="comment"> * return NULL.  Different segment sets may have different strategies for</span></div>
<div class="line"><a name="l00588"></a><span class="lineno">  588</span>&#160;<span class="comment"> * determining which block is most suitable for donation.</span></div>
<div class="line"><a name="l00589"></a><span class="lineno">  589</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00590"></a><span class="lineno">  590</span>&#160;<span class="comment"> * @param allocationLength</span></div>
<div class="line"><a name="l00591"></a><span class="lineno">  591</span>&#160;<span class="comment"> *               The size of the object needed.</span></div>
<div class="line"><a name="l00592"></a><span class="lineno">  592</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00593"></a><span class="lineno">  593</span>&#160;<span class="comment"> * @return Either a pointer to a dead object or NULL if none are available in the size required.</span></div>
<div class="line"><a name="l00594"></a><span class="lineno">  594</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l00595"></a><span class="lineno"><a class="line" href="class_memory_segment_set.html#acdc687287a5eb7de71eb924daba194d5">  595</a></span>&#160;<a class="code" href="class_dead_object.html">DeadObject</a> *<a class="code" href="class_memory_segment_set.html#acdc687287a5eb7de71eb924daba194d5">MemorySegmentSet::donateObject</a>(<span class="keywordtype">size_t</span> allocationLength)</div>
<div class="line"><a name="l00596"></a><span class="lineno">  596</span>&#160;{</div>
<div class="line"><a name="l00597"></a><span class="lineno">  597</span>&#160;    <span class="keywordflow">return</span> NULL;</div>
<div class="line"><a name="l00598"></a><span class="lineno">  598</span>&#160;}</div>
<div class="line"><a name="l00599"></a><span class="lineno">  599</span>&#160; </div>
<div class="line"><a name="l00600"></a><span class="lineno">  600</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00601"></a><span class="lineno">  601</span>&#160;<span class="comment">/**</span></div>
<div class="line"><a name="l00602"></a><span class="lineno">  602</span>&#160;<span class="comment"> * Search the cache of dead objects for an object of sufficient</span></div>
<div class="line"><a name="l00603"></a><span class="lineno">  603</span>&#160;<span class="comment"> * size to fulfill this request.  This just uses normal large block</span></div>
<div class="line"><a name="l00604"></a><span class="lineno">  604</span>&#160;<span class="comment"> * allocation strategy to decide on the block to donate, give a best fit</span></div>
<div class="line"><a name="l00605"></a><span class="lineno">  605</span>&#160;<span class="comment"> * for the allocation.</span></div>
<div class="line"><a name="l00606"></a><span class="lineno">  606</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00607"></a><span class="lineno">  607</span>&#160;<span class="comment"> * @param allocationLength</span></div>
<div class="line"><a name="l00608"></a><span class="lineno">  608</span>&#160;<span class="comment"> *               The required object size</span></div>
<div class="line"><a name="l00609"></a><span class="lineno">  609</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00610"></a><span class="lineno">  610</span>&#160;<span class="comment"> * @return A DeadObject of the required size.</span></div>
<div class="line"><a name="l00611"></a><span class="lineno">  611</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l00612"></a><span class="lineno"><a class="line" href="class_normal_segment_set.html#a3e0494f82fc154fe6af9f2057725e76e">  612</a></span>&#160;<a class="code" href="class_dead_object.html">DeadObject</a> *<a class="code" href="class_normal_segment_set.html#a3e0494f82fc154fe6af9f2057725e76e">NormalSegmentSet::donateObject</a>(<span class="keywordtype">size_t</span> allocationLength)</div>
<div class="line"><a name="l00613"></a><span class="lineno">  613</span>&#160;{</div>
<div class="line"><a name="l00614"></a><span class="lineno">  614</span>&#160;    <span class="comment">// If we&#39;re being asked to donate an object, then the request is larger</span></div>
<div class="line"><a name="l00615"></a><span class="lineno">  615</span>&#160;    <span class="comment">// than the threshold for objects we manage. Therefore, we can look directly</span></div>
<div class="line"><a name="l00616"></a><span class="lineno">  616</span>&#160;    <span class="comment">// in our large object cache.</span></div>
<div class="line"><a name="l00617"></a><span class="lineno">  617</span>&#160;    <span class="keywordflow">return</span> (<a class="code" href="class_dead_object.html">DeadObject</a> *)<a class="code" href="class_normal_segment_set.html#af7b385b632c9a226a9ec36085a0df82c">findLargeDeadObject</a>(allocationLength);</div>
<div class="line"><a name="l00618"></a><span class="lineno">  618</span>&#160;}</div>
<div class="line"><a name="l00619"></a><span class="lineno">  619</span>&#160; </div>
<div class="line"><a name="l00620"></a><span class="lineno">  620</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00621"></a><span class="lineno">  621</span>&#160;<span class="comment">/**</span></div>
<div class="line"><a name="l00622"></a><span class="lineno">  622</span>&#160;<span class="comment"> * Search the cache of dead objects for an object of sufficient</span></div>
<div class="line"><a name="l00623"></a><span class="lineno">  623</span>&#160;<span class="comment"> * size to fulfill this request.  This just uses normal large block</span></div>
<div class="line"><a name="l00624"></a><span class="lineno">  624</span>&#160;<span class="comment"> * allocation strategy to decide on the block to donate, give a best fit</span></div>
<div class="line"><a name="l00625"></a><span class="lineno">  625</span>&#160;<span class="comment"> * for the allocation.</span></div>
<div class="line"><a name="l00626"></a><span class="lineno">  626</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00627"></a><span class="lineno">  627</span>&#160;<span class="comment"> * @param allocationLength</span></div>
<div class="line"><a name="l00628"></a><span class="lineno">  628</span>&#160;<span class="comment"> *               The required object size</span></div>
<div class="line"><a name="l00629"></a><span class="lineno">  629</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00630"></a><span class="lineno">  630</span>&#160;<span class="comment"> * @return A DeadObject of the required size.</span></div>
<div class="line"><a name="l00631"></a><span class="lineno">  631</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l00632"></a><span class="lineno"><a class="line" href="class_large_segment_set.html#aafee994e80a84473f94fd63f380b6397">  632</a></span>&#160;<a class="code" href="class_dead_object.html">DeadObject</a> *<a class="code" href="class_large_segment_set.html#aafee994e80a84473f94fd63f380b6397">LargeSegmentSet::donateObject</a>(<span class="keywordtype">size_t</span> allocationLength)</div>
<div class="line"><a name="l00633"></a><span class="lineno">  633</span>&#160;{</div>
<div class="line"><a name="l00634"></a><span class="lineno">  634</span>&#160;    <span class="comment">// find an object in the cache return it.  This will likely be</span></div>
<div class="line"><a name="l00635"></a><span class="lineno">  635</span>&#160;    <span class="comment">// larger than the request, as we shouldn&#39;t have may small</span></div>
<div class="line"><a name="l00636"></a><span class="lineno">  636</span>&#160;    <span class="comment">// objects in the dead chains. */</span></div>
<div class="line"><a name="l00637"></a><span class="lineno">  637</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="class_large_segment_set.html#a084c3dbb390dc5ac34132c37918514b5">deadCache</a>.<a class="code" href="class_dead_object_pool.html#a2996357280429e455965f05231479ce4">findSmallestFit</a>(allocationLength);</div>
<div class="line"><a name="l00638"></a><span class="lineno">  638</span>&#160;}</div>
<div class="line"><a name="l00639"></a><span class="lineno">  639</span>&#160; </div>
<div class="line"><a name="l00640"></a><span class="lineno">  640</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00641"></a><span class="lineno">  641</span>&#160;<span class="comment">/**</span></div>
<div class="line"><a name="l00642"></a><span class="lineno">  642</span>&#160;<span class="comment"> * Decide if we should add additional segments to the normal heap</span></div>
<div class="line"><a name="l00643"></a><span class="lineno">  643</span>&#160;<span class="comment"> * based on the amount of free space we have after a garbage collection.  If</span></div>
<div class="line"><a name="l00644"></a><span class="lineno">  644</span>&#160;<span class="comment"> * we&#39;re starting to run full, then we should expand the heap to prevent</span></div>
<div class="line"><a name="l00645"></a><span class="lineno">  645</span>&#160;<span class="comment"> * recycling the garbage collector to reclaim minimal amounts of storage that</span></div>
<div class="line"><a name="l00646"></a><span class="lineno">  646</span>&#160;<span class="comment"> * is immediately reused, causing another GC cycle.</span></div>
<div class="line"><a name="l00647"></a><span class="lineno">  647</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00648"></a><span class="lineno">  648</span>&#160;<span class="comment"> * @return A recommended expansion size.</span></div>
<div class="line"><a name="l00649"></a><span class="lineno">  649</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l00650"></a><span class="lineno"><a class="line" href="class_memory_segment_set.html#a8b91ff7fd6370e4f54900a99ef9b4f27">  650</a></span>&#160;<span class="keywordtype">size_t</span> <a class="code" href="class_memory_segment_set.html#a8b91ff7fd6370e4f54900a99ef9b4f27">MemorySegmentSet::suggestMemoryExpansion</a>()</div>
<div class="line"><a name="l00651"></a><span class="lineno">  651</span>&#160;{</div>
<div class="line"><a name="l00652"></a><span class="lineno">  652</span>&#160;    <span class="comment">// the base memory set has no expansion algorithm...always return 0</span></div>
<div class="line"><a name="l00653"></a><span class="lineno">  653</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00654"></a><span class="lineno">  654</span>&#160;}</div>
<div class="line"><a name="l00655"></a><span class="lineno">  655</span>&#160; </div>
<div class="line"><a name="l00656"></a><span class="lineno">  656</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00657"></a><span class="lineno">  657</span>&#160;<span class="comment">/**</span></div>
<div class="line"><a name="l00658"></a><span class="lineno">  658</span>&#160;<span class="comment"> * Decide if we should add additional segments to the normal heap</span></div>
<div class="line"><a name="l00659"></a><span class="lineno">  659</span>&#160;<span class="comment"> * based on the amount of free space we have after a garbage collection.  If</span></div>
<div class="line"><a name="l00660"></a><span class="lineno">  660</span>&#160;<span class="comment"> * we&#39;re starting to run full, then we should expand the heap to prevent</span></div>
<div class="line"><a name="l00661"></a><span class="lineno">  661</span>&#160;<span class="comment"> * recycling the garbage collector to reclaim minimal amounts of storage that</span></div>
<div class="line"><a name="l00662"></a><span class="lineno">  662</span>&#160;<span class="comment"> * is immediately reused, causing another GC cycle.</span></div>
<div class="line"><a name="l00663"></a><span class="lineno">  663</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00664"></a><span class="lineno">  664</span>&#160;<span class="comment"> * @return A recommended expansion size.</span></div>
<div class="line"><a name="l00665"></a><span class="lineno">  665</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l00666"></a><span class="lineno"><a class="line" href="class_normal_segment_set.html#a0818283bedff2836b230c25c70b79237">  666</a></span>&#160;<span class="keywordtype">size_t</span> <a class="code" href="class_normal_segment_set.html#a0818283bedff2836b230c25c70b79237">NormalSegmentSet::suggestMemoryExpansion</a>()</div>
<div class="line"><a name="l00667"></a><span class="lineno">  667</span>&#160;{</div>
<div class="line"><a name="l00668"></a><span class="lineno">  668</span>&#160;    <span class="comment">// since we have just done a GC, we have metrics on the size of live</span></div>
<div class="line"><a name="l00669"></a><span class="lineno">  669</span>&#160;    <span class="comment">// and dead storage. Get the current percentage</span></div>
<div class="line"><a name="l00670"></a><span class="lineno">  670</span>&#160;    <span class="keywordtype">float</span> freePercent = <a class="code" href="class_memory_segment_set.html#aabdb564ac4a2f34cbffc741817bfddc9">freeMemoryPercentage</a>();</div>
<div class="line"><a name="l00671"></a><span class="lineno">  671</span>&#160; </div>
<div class="line"><a name="l00672"></a><span class="lineno">  672</span>&#160;    <a class="code" href="class_memory_segment_set.html#a2f5846486a053e2563f99fe17d4f0455">memory</a>-&gt;<a class="code" href="class_memory_object.html#a4babf41ab5e88ec6773cae4ddc83ab10">verboseMessage</a>(<span class="stringliteral">&quot;Normal segment set free memory percentage is %d&quot;</span> <a class="code" href="unix_2_platform_definitions_8h.html#a58f38f0d2d91763ecd599af6f16291e6">line_end</a>, (<span class="keywordtype">int</span>)(freePercent * 100.0));</div>
<div class="line"><a name="l00673"></a><span class="lineno">  673</span>&#160; </div>
<div class="line"><a name="l00674"></a><span class="lineno">  674</span>&#160;    <span class="comment">// if we are less than 30% full, we should try to expand to the</span></div>
<div class="line"><a name="l00675"></a><span class="lineno">  675</span>&#160;    <span class="comment">// 30% mark.</span></div>
<div class="line"><a name="l00676"></a><span class="lineno">  676</span>&#160;    <span class="keywordflow">if</span> (freePercent &lt; <a class="code" href="class_normal_segment_set.html#aec09944ce68e6df6fc30a8d571b96976">NormalMemoryExpansionThreshold</a>)</div>
<div class="line"><a name="l00677"></a><span class="lineno">  677</span>&#160;    {</div>
<div class="line"><a name="l00678"></a><span class="lineno">  678</span>&#160;        <span class="comment">// get a recommendation on how large the heap should be</span></div>
<div class="line"><a name="l00679"></a><span class="lineno">  679</span>&#160;        <span class="keywordtype">size_t</span> recommendedSize = <a class="code" href="class_normal_segment_set.html#ac61049646d46e3293f706cfb6557643d">recommendedMemorySize</a>();</div>
<div class="line"><a name="l00680"></a><span class="lineno">  680</span>&#160;        <span class="keywordtype">size_t</span> newDeadBytes = recommendedSize - <a class="code" href="class_memory_segment_set.html#a3d3811d09e36ae1fe1060a585534ffea">liveObjectBytes</a>;</div>
<div class="line"><a name="l00681"></a><span class="lineno">  681</span>&#160;        <span class="comment">// calculate the number of new bytes we need to add reach</span></div>
<div class="line"><a name="l00682"></a><span class="lineno">  682</span>&#160;        <span class="comment">// our memory threshold.  It will be the job of others to</span></div>
<div class="line"><a name="l00683"></a><span class="lineno">  683</span>&#160;        <span class="comment">// translate this into segment sized units.</span></div>
<div class="line"><a name="l00684"></a><span class="lineno">  684</span>&#160;        <span class="keywordtype">size_t</span> expansionSize = newDeadBytes - <a class="code" href="class_memory_segment_set.html#a7261a480da3ecae054b3cd1be0b30ead">deadObjectBytes</a>;</div>
<div class="line"><a name="l00685"></a><span class="lineno">  685</span>&#160;        <span class="keywordflow">return</span> expansionSize;</div>
<div class="line"><a name="l00686"></a><span class="lineno">  686</span>&#160;    }</div>
<div class="line"><a name="l00687"></a><span class="lineno">  687</span>&#160;    <span class="comment">// no expansion required yet.</span></div>
<div class="line"><a name="l00688"></a><span class="lineno">  688</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00689"></a><span class="lineno">  689</span>&#160;}</div>
<div class="line"><a name="l00690"></a><span class="lineno">  690</span>&#160; </div>
<div class="line"><a name="l00691"></a><span class="lineno">  691</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00692"></a><span class="lineno">  692</span>&#160;<span class="comment">/**</span></div>
<div class="line"><a name="l00693"></a><span class="lineno">  693</span>&#160;<span class="comment"> * Decide if we should add additional segments to the normal heap</span></div>
<div class="line"><a name="l00694"></a><span class="lineno">  694</span>&#160;<span class="comment"> * based on the amount of free space we have after a garbage collection.  If</span></div>
<div class="line"><a name="l00695"></a><span class="lineno">  695</span>&#160;<span class="comment"> * we&#39;re starting to run full, then we should expand the heap to prevent</span></div>
<div class="line"><a name="l00696"></a><span class="lineno">  696</span>&#160;<span class="comment"> * recycling the garbage collector to reclaim minimal amounts of storage that</span></div>
<div class="line"><a name="l00697"></a><span class="lineno">  697</span>&#160;<span class="comment"> * is immediately reused, causing another GC cycle.</span></div>
<div class="line"><a name="l00698"></a><span class="lineno">  698</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00699"></a><span class="lineno">  699</span>&#160;<span class="comment"> * @return A recommended expansion size.</span></div>
<div class="line"><a name="l00700"></a><span class="lineno">  700</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l00701"></a><span class="lineno"><a class="line" href="class_large_segment_set.html#a625d886243ef18cf5e11add7ca883f07">  701</a></span>&#160;<span class="keywordtype">size_t</span> <a class="code" href="class_large_segment_set.html#a625d886243ef18cf5e11add7ca883f07">LargeSegmentSet::suggestMemoryExpansion</a>()</div>
<div class="line"><a name="l00702"></a><span class="lineno">  702</span>&#160;{</div>
<div class="line"><a name="l00703"></a><span class="lineno">  703</span>&#160;    <span class="comment">// since we have just done a GC, we have metrics on the size of live</span></div>
<div class="line"><a name="l00704"></a><span class="lineno">  704</span>&#160;    <span class="comment">// and dead storage. Get the current percentage</span></div>
<div class="line"><a name="l00705"></a><span class="lineno">  705</span>&#160;    <span class="keywordtype">float</span> freePercent = <a class="code" href="class_memory_segment_set.html#aabdb564ac4a2f34cbffc741817bfddc9">freeMemoryPercentage</a>();</div>
<div class="line"><a name="l00706"></a><span class="lineno">  706</span>&#160; </div>
<div class="line"><a name="l00707"></a><span class="lineno">  707</span>&#160;    <a class="code" href="class_memory_segment_set.html#a2f5846486a053e2563f99fe17d4f0455">memory</a>-&gt;<a class="code" href="class_memory_object.html#a4babf41ab5e88ec6773cae4ddc83ab10">verboseMessage</a>(<span class="stringliteral">&quot;Large segment set free memory percentage is %d&quot;</span> <a class="code" href="unix_2_platform_definitions_8h.html#a58f38f0d2d91763ecd599af6f16291e6">line_end</a>, (<span class="keywordtype">int</span>)(freePercent * 100.0));</div>
<div class="line"><a name="l00708"></a><span class="lineno">  708</span>&#160; </div>
<div class="line"><a name="l00709"></a><span class="lineno">  709</span>&#160;    <span class="comment">// We use different percentages for the large object pool and the normal</span></div>
<div class="line"><a name="l00710"></a><span class="lineno">  710</span>&#160;    <span class="comment">// pool, attempting to give the large pool a better opportunity to fit in large size blocks.</span></div>
<div class="line"><a name="l00711"></a><span class="lineno">  711</span>&#160;    <span class="keywordflow">if</span> (freePercent &lt; <a class="code" href="class_large_segment_set.html#a8031f0f6c4a3b279ea3e42d946023d66">LargeMemoryExpansionThreshold</a>)</div>
<div class="line"><a name="l00712"></a><span class="lineno">  712</span>&#160;    {</div>
<div class="line"><a name="l00713"></a><span class="lineno">  713</span>&#160;        <span class="comment">// get a recommendation on how large the heap should be</span></div>
<div class="line"><a name="l00714"></a><span class="lineno">  714</span>&#160;        <span class="keywordtype">size_t</span> recommendedSize = <a class="code" href="class_large_segment_set.html#a0b67dc9c2ee77fdad8f025fe98a7772d">recommendedMemorySize</a>();</div>
<div class="line"><a name="l00715"></a><span class="lineno">  715</span>&#160;        <span class="keywordtype">size_t</span> newDeadBytes = recommendedSize - <a class="code" href="class_memory_segment_set.html#a3d3811d09e36ae1fe1060a585534ffea">liveObjectBytes</a>;</div>
<div class="line"><a name="l00716"></a><span class="lineno">  716</span>&#160;        <span class="comment">// calculate the number of new bytes we need to add reach</span></div>
<div class="line"><a name="l00717"></a><span class="lineno">  717</span>&#160;        <span class="comment">// our memory threshold.  It will be the job of others to</span></div>
<div class="line"><a name="l00718"></a><span class="lineno">  718</span>&#160;        <span class="comment">// translate this into segment sized units.</span></div>
<div class="line"><a name="l00719"></a><span class="lineno">  719</span>&#160;        <span class="keywordtype">size_t</span> expansionSize = newDeadBytes - <a class="code" href="class_memory_segment_set.html#a7261a480da3ecae054b3cd1be0b30ead">deadObjectBytes</a>;</div>
<div class="line"><a name="l00720"></a><span class="lineno">  720</span>&#160;        <span class="keywordflow">return</span> expansionSize;</div>
<div class="line"><a name="l00721"></a><span class="lineno">  721</span>&#160;    }</div>
<div class="line"><a name="l00722"></a><span class="lineno">  722</span>&#160;    <span class="comment">// no expansion required yet.</span></div>
<div class="line"><a name="l00723"></a><span class="lineno">  723</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00724"></a><span class="lineno">  724</span>&#160;}</div>
<div class="line"><a name="l00725"></a><span class="lineno">  725</span>&#160; </div>
<div class="line"><a name="l00726"></a><span class="lineno">  726</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00727"></a><span class="lineno">  727</span>&#160;<span class="comment">/**</span></div>
<div class="line"><a name="l00728"></a><span class="lineno">  728</span>&#160;<span class="comment"> * Decide if we should add  segments from the segment set based</span></div>
<div class="line"><a name="l00729"></a><span class="lineno">  729</span>&#160;<span class="comment"> * on the current state of the heap immediately following a sweep.</span></div>
<div class="line"><a name="l00730"></a><span class="lineno">  730</span>&#160;<span class="comment"> * We want to avoid thrashing the garbage collector because of chronic low</span></div>
<div class="line"><a name="l00731"></a><span class="lineno">  731</span>&#160;<span class="comment"> * memory conditions.  If we wait until we get an actual allocation failure,</span></div>
<div class="line"><a name="l00732"></a><span class="lineno">  732</span>&#160;<span class="comment"> * we will end up in a state where we&#39;re constantly running a mark-and-sweep</span></div>
<div class="line"><a name="l00733"></a><span class="lineno">  733</span>&#160;<span class="comment"> * to  reclaim just a tiny amount of storage, and then repeat.  We will try to</span></div>
<div class="line"><a name="l00734"></a><span class="lineno">  734</span>&#160;<span class="comment"> * keep the heap with appropriate free space limits.</span></div>
<div class="line"><a name="l00735"></a><span class="lineno">  735</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l00736"></a><span class="lineno"><a class="line" href="class_memory_segment_set.html#a11b567e97ec08847b5f4c4cd01bceafc">  736</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="class_memory_segment_set.html#a11b567e97ec08847b5f4c4cd01bceafc">MemorySegmentSet::adjustMemorySize</a>()</div>
<div class="line"><a name="l00737"></a><span class="lineno">  737</span>&#160;{</div>
<div class="line"><a name="l00738"></a><span class="lineno">  738</span>&#160;    <span class="comment">// see if a proactive expansion is advised, based on our</span></div>
<div class="line"><a name="l00739"></a><span class="lineno">  739</span>&#160;    <span class="comment">// current state.</span></div>
<div class="line"><a name="l00740"></a><span class="lineno">  740</span>&#160;    <span class="keywordtype">size_t</span> suggestedExpansion = <a class="code" href="class_memory_segment_set.html#a8b91ff7fd6370e4f54900a99ef9b4f27">suggestMemoryExpansion</a>();</div>
<div class="line"><a name="l00741"></a><span class="lineno">  741</span>&#160;    <span class="comment">// if we&#39;ve decided we need to expand,</span></div>
<div class="line"><a name="l00742"></a><span class="lineno">  742</span>&#160;    <span class="keywordflow">if</span> (suggestedExpansion &gt; 0)</div>
<div class="line"><a name="l00743"></a><span class="lineno">  743</span>&#160;    {</div>
<div class="line"><a name="l00744"></a><span class="lineno">  744</span>&#160;        <span class="comment">// go add as many segments as are required to reach that</span></div>
<div class="line"><a name="l00745"></a><span class="lineno">  745</span>&#160;        <span class="comment">// level.</span></div>
<div class="line"><a name="l00746"></a><span class="lineno">  746</span>&#160;        <a class="code" href="class_memory_segment_set.html#a2f5846486a053e2563f99fe17d4f0455">memory</a>-&gt;<a class="code" href="class_memory_object.html#a4babf41ab5e88ec6773cae4ddc83ab10">verboseMessage</a>(<span class="stringliteral">&quot;Expanding %s by %zu bytes&quot;</span> <a class="code" href="unix_2_platform_definitions_8h.html#a58f38f0d2d91763ecd599af6f16291e6">line_end</a>, <a class="code" href="class_memory_segment_set.html#a145bf8586274f7d4a804141e4fa67623">name</a>, suggestedExpansion);</div>
<div class="line"><a name="l00747"></a><span class="lineno">  747</span>&#160;        <a class="code" href="class_memory_segment_set.html#a7925bd1039f535cadff00ad2a5b9f7d2">addSegments</a>(suggestedExpansion);</div>
<div class="line"><a name="l00748"></a><span class="lineno">  748</span>&#160;    }</div>
<div class="line"><a name="l00749"></a><span class="lineno">  749</span>&#160;}</div>
<div class="line"><a name="l00750"></a><span class="lineno">  750</span>&#160; </div>
<div class="line"><a name="l00751"></a><span class="lineno">  751</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00752"></a><span class="lineno">  752</span>&#160;<span class="comment">/**</span></div>
<div class="line"><a name="l00753"></a><span class="lineno">  753</span>&#160;<span class="comment"> * Add segments to the segment set until the required space is</span></div>
<div class="line"><a name="l00754"></a><span class="lineno">  754</span>&#160;<span class="comment"> * achieved or we&#39;ve had a real memory failure.  Our preference is to add this</span></div>
<div class="line"><a name="l00755"></a><span class="lineno">  755</span>&#160;<span class="comment"> * in one chunk, but we&#39;ll subdivide down to smaller units as long as we&#39;re</span></div>
<div class="line"><a name="l00756"></a><span class="lineno">  756</span>&#160;<span class="comment"> * still getting the segments we require.</span></div>
<div class="line"><a name="l00757"></a><span class="lineno">  757</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00758"></a><span class="lineno">  758</span>&#160;<span class="comment"> * @param requiredSpace</span></div>
<div class="line"><a name="l00759"></a><span class="lineno">  759</span>&#160;<span class="comment"> *               The required total memory we need.</span></div>
<div class="line"><a name="l00760"></a><span class="lineno">  760</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l00761"></a><span class="lineno"><a class="line" href="class_memory_segment_set.html#a7925bd1039f535cadff00ad2a5b9f7d2">  761</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="class_memory_segment_set.html#a7925bd1039f535cadff00ad2a5b9f7d2">MemorySegmentSet::addSegments</a>(<span class="keywordtype">size_t</span> requiredSpace)</div>
<div class="line"><a name="l00762"></a><span class="lineno">  762</span>&#160;{</div>
<div class="line"><a name="l00763"></a><span class="lineno">  763</span>&#160;    <span class="comment">// this may take several passes to achieve, but typically works the first time.</span></div>
<div class="line"><a name="l00764"></a><span class="lineno">  764</span>&#160;    <span class="keywordflow">for</span> (;;)</div>
<div class="line"><a name="l00765"></a><span class="lineno">  765</span>&#160;    {</div>
<div class="line"><a name="l00766"></a><span class="lineno">  766</span>&#160;        <span class="comment">// figure out how large this should be</span></div>
<div class="line"><a name="l00767"></a><span class="lineno">  767</span>&#160;        <span class="keywordtype">size_t</span> segmentSize = <a class="code" href="class_memory_segment_set.html#a5047a2cb5b670257e525747da90c70af">calculateSegmentAllocation</a>(requiredSpace);</div>
<div class="line"><a name="l00768"></a><span class="lineno">  768</span>&#160;        <span class="comment">// we have a minimum size segment based on how large the request is</span></div>
<div class="line"><a name="l00769"></a><span class="lineno">  769</span>&#160;        <span class="keywordtype">size_t</span> minSize = segmentSize &gt;= <a class="code" href="class_memory_segment_set.html#a415eb2594ee04255b9f16b7c30131348">LargeSegmentDeadSpace</a> ? <a class="code" href="class_memory_segment_set.html#a415eb2594ee04255b9f16b7c30131348">LargeSegmentDeadSpace</a> : <a class="code" href="class_memory_segment_set.html#a5a73d3356c54f5a13b7789989339edd3">SegmentDeadSpace</a>;</div>
<div class="line"><a name="l00770"></a><span class="lineno">  770</span>&#160;        <span class="comment">// try to allocate a new segment</span></div>
<div class="line"><a name="l00771"></a><span class="lineno">  771</span>&#160;        <a class="code" href="class_memory_segment.html">MemorySegment</a> *newSeg = <a class="code" href="class_memory_segment_set.html#a7bf421c9c93bf255135415e55814e6a7">allocateSegment</a>(segmentSize, minSize);</div>
<div class="line"><a name="l00772"></a><span class="lineno">  772</span>&#160;        <span class="keywordflow">if</span> (newSeg == NULL)</div>
<div class="line"><a name="l00773"></a><span class="lineno">  773</span>&#160;        {</div>
<div class="line"><a name="l00774"></a><span class="lineno">  774</span>&#160;            <span class="comment">// if we already failed to get our &quot;minimum minimum&quot;, just quit now.</span></div>
<div class="line"><a name="l00775"></a><span class="lineno">  775</span>&#160;            <span class="keywordflow">if</span> (minSize == <a class="code" href="class_memory_segment_set.html#a5a73d3356c54f5a13b7789989339edd3">SegmentDeadSpace</a>)</div>
<div class="line"><a name="l00776"></a><span class="lineno">  776</span>&#160;            {</div>
<div class="line"><a name="l00777"></a><span class="lineno">  777</span>&#160;                <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00778"></a><span class="lineno">  778</span>&#160;            }</div>
<div class="line"><a name="l00779"></a><span class="lineno">  779</span>&#160;            <span class="comment">// try for a single minimum segment allocation.  If that</span></div>
<div class="line"><a name="l00780"></a><span class="lineno">  780</span>&#160;            <span class="comment">// fails...we have nothing else we can do.</span></div>
<div class="line"><a name="l00781"></a><span class="lineno">  781</span>&#160;            newSeg = <a class="code" href="class_memory_segment_set.html#a7bf421c9c93bf255135415e55814e6a7">allocateSegment</a>(<a class="code" href="class_memory_segment_set.html#a5a73d3356c54f5a13b7789989339edd3">SegmentDeadSpace</a>, <a class="code" href="class_memory_segment_set.html#a5a73d3356c54f5a13b7789989339edd3">SegmentDeadSpace</a>);</div>
<div class="line"><a name="l00782"></a><span class="lineno">  782</span>&#160;            <span class="keywordflow">if</span> (newSeg == NULL)</div>
<div class="line"><a name="l00783"></a><span class="lineno">  783</span>&#160;            {</div>
<div class="line"><a name="l00784"></a><span class="lineno">  784</span>&#160;                <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00785"></a><span class="lineno">  785</span>&#160;            }</div>
<div class="line"><a name="l00786"></a><span class="lineno">  786</span>&#160;        }</div>
<div class="line"><a name="l00787"></a><span class="lineno">  787</span>&#160; </div>
<div class="line"><a name="l00788"></a><span class="lineno">  788</span>&#160;        <span class="comment">// we have a segment.  Add this to the segment pool</span></div>
<div class="line"><a name="l00789"></a><span class="lineno">  789</span>&#160;        <span class="comment">// (and add the dead space to the available memory).</span></div>
<div class="line"><a name="l00790"></a><span class="lineno">  790</span>&#160;        <a class="code" href="class_memory_segment_set.html#a6636fce68844e8349e24f70d2e0b3ec6">addSegment</a>(newSeg);</div>
<div class="line"><a name="l00791"></a><span class="lineno">  791</span>&#160;        segmentSize = newSeg-&gt;<a class="code" href="class_memory_segment.html#a2ddc33173de811d5a32dadab64218e69">size</a>();</div>
<div class="line"><a name="l00792"></a><span class="lineno">  792</span>&#160;        <span class="comment">// if we&#39;ve got what&#39;s needed, we&#39;re out of here+</span></div>
<div class="line"><a name="l00793"></a><span class="lineno">  793</span>&#160;        <span class="keywordflow">if</span> (segmentSize &gt;= requiredSpace)</div>
<div class="line"><a name="l00794"></a><span class="lineno">  794</span>&#160;        {</div>
<div class="line"><a name="l00795"></a><span class="lineno">  795</span>&#160;            <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00796"></a><span class="lineno">  796</span>&#160;        }</div>
<div class="line"><a name="l00797"></a><span class="lineno">  797</span>&#160;        <span class="comment">// reduce the size and try for some more</span></div>
<div class="line"><a name="l00798"></a><span class="lineno">  798</span>&#160;        requiredSpace -= segmentSize;</div>
<div class="line"><a name="l00799"></a><span class="lineno">  799</span>&#160;    }</div>
<div class="line"><a name="l00800"></a><span class="lineno">  800</span>&#160;}</div>
<div class="line"><a name="l00801"></a><span class="lineno">  801</span>&#160; </div>
<div class="line"><a name="l00802"></a><span class="lineno">  802</span>&#160; </div>
<div class="line"><a name="l00803"></a><span class="lineno"><a class="line" href="class_memory_segment_set.html#aa2caa0bde362ae2ff82b82f33bd536e7">  803</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="class_memory_segment_set.html#aa2caa0bde362ae2ff82b82f33bd536e7">MemorySegmentSet::prepareForSweep</a>()</div>
<div class="line"><a name="l00804"></a><span class="lineno">  804</span>&#160;{</div>
<div class="line"><a name="l00805"></a><span class="lineno">  805</span>&#160;    <span class="comment">// reset the collection counters</span></div>
<div class="line"><a name="l00806"></a><span class="lineno">  806</span>&#160;    <a class="code" href="class_memory_segment_set.html#a3d3811d09e36ae1fe1060a585534ffea">liveObjectBytes</a> = 0;</div>
<div class="line"><a name="l00807"></a><span class="lineno">  807</span>&#160;    <a class="code" href="class_memory_segment_set.html#a7261a480da3ecae054b3cd1be0b30ead">deadObjectBytes</a> = 0;</div>
<div class="line"><a name="l00808"></a><span class="lineno">  808</span>&#160;}</div>
<div class="line"><a name="l00809"></a><span class="lineno">  809</span>&#160; </div>
<div class="line"><a name="l00810"></a><span class="lineno">  810</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00811"></a><span class="lineno">  811</span>&#160;<span class="comment">/**</span></div>
<div class="line"><a name="l00812"></a><span class="lineno">  812</span>&#160;<span class="comment"> * Handle all segment set pre-sweep initialization.</span></div>
<div class="line"><a name="l00813"></a><span class="lineno">  813</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l00814"></a><span class="lineno"><a class="line" href="class_normal_segment_set.html#af0e6bacd769a645c9dcf5483b2ba3b27">  814</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="class_normal_segment_set.html#af0e6bacd769a645c9dcf5483b2ba3b27">NormalSegmentSet::prepareForSweep</a>()</div>
<div class="line"><a name="l00815"></a><span class="lineno">  815</span>&#160;{</div>
<div class="line"><a name="l00816"></a><span class="lineno">  816</span>&#160;    <a class="code" href="class_memory_segment_set.html#aa2caa0bde362ae2ff82b82f33bd536e7">MemorySegmentSet::prepareForSweep</a>();</div>
<div class="line"><a name="l00817"></a><span class="lineno">  817</span>&#160; </div>
<div class="line"><a name="l00818"></a><span class="lineno">  818</span>&#160;    <span class="comment">// we&#39;re about to rebuild the dead chains during the sweep, so</span></div>
<div class="line"><a name="l00819"></a><span class="lineno">  819</span>&#160;    <span class="comment">// initialize all of these now.</span></div>
<div class="line"><a name="l00820"></a><span class="lineno">  820</span>&#160;    <a class="code" href="class_normal_segment_set.html#a766ab6a1566c1302bd4b8e4b449a300a">largeDead</a>.<a class="code" href="class_dead_object_pool.html#a305566ec5dba8c4e41f940933589db79">empty</a>();</div>
<div class="line"><a name="l00821"></a><span class="lineno">  821</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = <a class="code" href="class_normal_segment_set.html#aea0339c96baed969ffc0eaa296475639">FirstDeadPool</a>; i &lt; <a class="code" href="class_normal_segment_set.html#a5865c5b2831a666beb8bf2e59bf13209">DeadPools</a>; i++)</div>
<div class="line"><a name="l00822"></a><span class="lineno">  822</span>&#160;    {</div>
<div class="line"><a name="l00823"></a><span class="lineno">  823</span>&#160;        <a class="code" href="class_normal_segment_set.html#a6931728c87ac47644de894630e6e291d">subpools</a>[i].<a class="code" href="class_dead_object_pool.html#a508d03b5240889c90370969df2b885d8">emptySingle</a>();</div>
<div class="line"><a name="l00824"></a><span class="lineno">  824</span>&#160;    }</div>
<div class="line"><a name="l00825"></a><span class="lineno">  825</span>&#160;}</div>
<div class="line"><a name="l00826"></a><span class="lineno">  826</span>&#160; </div>
<div class="line"><a name="l00827"></a><span class="lineno">  827</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00828"></a><span class="lineno">  828</span>&#160;<span class="comment">/**</span></div>
<div class="line"><a name="l00829"></a><span class="lineno">  829</span>&#160;<span class="comment"> * Handle all segment set pre-sweep initialization.</span></div>
<div class="line"><a name="l00830"></a><span class="lineno">  830</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l00831"></a><span class="lineno"><a class="line" href="class_large_segment_set.html#a627b3a7ab90754f1a763b60cb46aaadf">  831</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="class_large_segment_set.html#a627b3a7ab90754f1a763b60cb46aaadf">LargeSegmentSet::prepareForSweep</a>()</div>
<div class="line"><a name="l00832"></a><span class="lineno">  832</span>&#160;{</div>
<div class="line"><a name="l00833"></a><span class="lineno">  833</span>&#160;    <a class="code" href="class_memory_segment_set.html#aa2caa0bde362ae2ff82b82f33bd536e7">MemorySegmentSet::prepareForSweep</a>();</div>
<div class="line"><a name="l00834"></a><span class="lineno">  834</span>&#160; </div>
<div class="line"><a name="l00835"></a><span class="lineno">  835</span>&#160;    <span class="comment">// we&#39;re about to rebuild the dead chains during the sweep, so</span></div>
<div class="line"><a name="l00836"></a><span class="lineno">  836</span>&#160;    <span class="comment">// initialize all of these now.</span></div>
<div class="line"><a name="l00837"></a><span class="lineno">  837</span>&#160;    <a class="code" href="class_large_segment_set.html#a084c3dbb390dc5ac34132c37918514b5">deadCache</a>.<a class="code" href="class_dead_object_pool.html#a305566ec5dba8c4e41f940933589db79">empty</a>();</div>
<div class="line"><a name="l00838"></a><span class="lineno">  838</span>&#160;    <a class="code" href="class_large_segment_set.html#a5e3a6cfdc23172c833c8bbf2227afa66">requests</a> = 0;</div>
<div class="line"><a name="l00839"></a><span class="lineno">  839</span>&#160;    <a class="code" href="class_large_segment_set.html#a6e70daef4cd5141ef6fd0c7af65f72e0">largestObject</a> = 0;</div>
<div class="line"><a name="l00840"></a><span class="lineno">  840</span>&#160;    <a class="code" href="class_large_segment_set.html#abe5f58ce25f514baf594af822ab29a3a">smallestObject</a> = 999999999;</div>
<div class="line"><a name="l00841"></a><span class="lineno">  841</span>&#160;}</div>
<div class="line"><a name="l00842"></a><span class="lineno">  842</span>&#160; </div>
<div class="line"><a name="l00843"></a><span class="lineno">  843</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00844"></a><span class="lineno">  844</span>&#160;<span class="comment">/**</span></div>
<div class="line"><a name="l00845"></a><span class="lineno">  845</span>&#160;<span class="comment"> * Handle all segment set post sweep activities.</span></div>
<div class="line"><a name="l00846"></a><span class="lineno">  846</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l00847"></a><span class="lineno"><a class="line" href="class_memory_segment_set.html#a7c1385f115ca05b55e03dc9468e08f39">  847</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="class_memory_segment_set.html#a7c1385f115ca05b55e03dc9468e08f39">MemorySegmentSet::completeSweepOperation</a>()</div>
<div class="line"><a name="l00848"></a><span class="lineno">  848</span>&#160;{</div>
<div class="line"><a name="l00849"></a><span class="lineno">  849</span>&#160;    <span class="comment">// This is a NOP for the base class.</span></div>
<div class="line"><a name="l00850"></a><span class="lineno">  850</span>&#160;}</div>
<div class="line"><a name="l00851"></a><span class="lineno">  851</span>&#160; </div>
<div class="line"><a name="l00852"></a><span class="lineno">  852</span>&#160; </div>
<div class="line"><a name="l00853"></a><span class="lineno"><a class="line" href="class_normal_segment_set.html#ab6e00fafbb8f0d65807936be6864cc0f">  853</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="class_normal_segment_set.html#ab6e00fafbb8f0d65807936be6864cc0f">NormalSegmentSet::completeSweepOperation</a>()</div>
<div class="line"><a name="l00854"></a><span class="lineno">  854</span>&#160;{</div>
<div class="line"><a name="l00855"></a><span class="lineno">  855</span>&#160;    <span class="comment">// Now we can optimize the look-aside entries for the small</span></div>
<div class="line"><a name="l00856"></a><span class="lineno">  856</span>&#160;    <span class="comment">// dead chains.  By checking to see which chains have blocks in</span></div>
<div class="line"><a name="l00857"></a><span class="lineno">  857</span>&#160;    <span class="comment">// them, we can potentially skip a lot of check/searching on an</span></div>
<div class="line"><a name="l00858"></a><span class="lineno">  858</span>&#160;    <span class="comment">// allocation request.</span></div>
<div class="line"><a name="l00859"></a><span class="lineno">  859</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = <a class="code" href="class_normal_segment_set.html#aea0339c96baed969ffc0eaa296475639">FirstDeadPool</a>; i &lt; <a class="code" href="class_normal_segment_set.html#a5865c5b2831a666beb8bf2e59bf13209">DeadPools</a>; i++)</div>
<div class="line"><a name="l00860"></a><span class="lineno">  860</span>&#160;    {</div>
<div class="line"><a name="l00861"></a><span class="lineno">  861</span>&#160;        <span class="keywordflow">if</span> (!<a class="code" href="class_normal_segment_set.html#a6931728c87ac47644de894630e6e291d">subpools</a>[i].isEmptySingle())</div>
<div class="line"><a name="l00862"></a><span class="lineno">  862</span>&#160;        {</div>
<div class="line"><a name="l00863"></a><span class="lineno">  863</span>&#160;            <span class="comment">// point this back at itself</span></div>
<div class="line"><a name="l00864"></a><span class="lineno">  864</span>&#160;            <a class="code" href="class_normal_segment_set.html#ab83fecc011405c69e0b15849144cf571">lastUsedSubpool</a>[i] = i;</div>
<div class="line"><a name="l00865"></a><span class="lineno">  865</span>&#160;        }</div>
<div class="line"><a name="l00866"></a><span class="lineno">  866</span>&#160;        <span class="keywordflow">else</span></div>
<div class="line"><a name="l00867"></a><span class="lineno">  867</span>&#160;        {</div>
<div class="line"><a name="l00868"></a><span class="lineno">  868</span>&#160;            <span class="comment">// default to the &quot;skip to the end&quot; location</span></div>
<div class="line"><a name="l00869"></a><span class="lineno">  869</span>&#160;            <span class="keywordtype">int</span> usePool = <a class="code" href="class_normal_segment_set.html#a5865c5b2831a666beb8bf2e59bf13209">DeadPools</a>;</div>
<div class="line"><a name="l00870"></a><span class="lineno">  870</span>&#160;            <span class="keywordtype">int</span> j;</div>
<div class="line"><a name="l00871"></a><span class="lineno">  871</span>&#160;            <span class="comment">// scan all of the higher pools looking for the first hit</span></div>
<div class="line"><a name="l00872"></a><span class="lineno">  872</span>&#160;            <span class="keywordflow">for</span> (j = i + 1; j &lt; <a class="code" href="class_normal_segment_set.html#a5865c5b2831a666beb8bf2e59bf13209">DeadPools</a>; j++)</div>
<div class="line"><a name="l00873"></a><span class="lineno">  873</span>&#160;            {</div>
<div class="line"><a name="l00874"></a><span class="lineno">  874</span>&#160;                <span class="keywordflow">if</span> (!<a class="code" href="class_normal_segment_set.html#a6931728c87ac47644de894630e6e291d">subpools</a>[i].isEmptySingle())</div>
<div class="line"><a name="l00875"></a><span class="lineno">  875</span>&#160;                {</div>
<div class="line"><a name="l00876"></a><span class="lineno">  876</span>&#160;                    usePool = j;</div>
<div class="line"><a name="l00877"></a><span class="lineno">  877</span>&#160;                    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00878"></a><span class="lineno">  878</span>&#160;                }</div>
<div class="line"><a name="l00879"></a><span class="lineno">  879</span>&#160;            }</div>
<div class="line"><a name="l00880"></a><span class="lineno">  880</span>&#160; </div>
<div class="line"><a name="l00881"></a><span class="lineno">  881</span>&#160;            <span class="comment">// this will now be guaranteed to go to the correct</span></div>
<div class="line"><a name="l00882"></a><span class="lineno">  882</span>&#160;            <span class="comment">// location on each request.</span></div>
<div class="line"><a name="l00883"></a><span class="lineno">  883</span>&#160;            <a class="code" href="class_normal_segment_set.html#ab83fecc011405c69e0b15849144cf571">lastUsedSubpool</a>[i] = usePool;</div>
<div class="line"><a name="l00884"></a><span class="lineno">  884</span>&#160;        }</div>
<div class="line"><a name="l00885"></a><span class="lineno">  885</span>&#160;    }</div>
<div class="line"><a name="l00886"></a><span class="lineno">  886</span>&#160;}</div>
<div class="line"><a name="l00887"></a><span class="lineno">  887</span>&#160; </div>
<div class="line"><a name="l00888"></a><span class="lineno">  888</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00889"></a><span class="lineno">  889</span>&#160;<span class="comment">/**</span></div>
<div class="line"><a name="l00890"></a><span class="lineno">  890</span>&#160;<span class="comment"> * Handle post-sweep processing for the set.</span></div>
<div class="line"><a name="l00891"></a><span class="lineno">  891</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l00892"></a><span class="lineno"><a class="line" href="class_large_segment_set.html#adf88a331b8cb23f1d89f456aa0fdc60a">  892</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="class_large_segment_set.html#adf88a331b8cb23f1d89f456aa0fdc60a">LargeSegmentSet::completeSweepOperation</a>()</div>
<div class="line"><a name="l00893"></a><span class="lineno">  893</span>&#160;{</div>
<div class="line"><a name="l00894"></a><span class="lineno">  894</span>&#160;    <a class="code" href="class_memory_segment_set.html#a2f5846486a053e2563f99fe17d4f0455">memory</a>-&gt;<a class="code" href="class_memory_object.html#a4babf41ab5e88ec6773cae4ddc83ab10">verboseMessage</a>(<span class="stringliteral">&quot;Large segment sweep complete.  Largest block is %zu, smallest block is %zu&quot;</span> <a class="code" href="unix_2_platform_definitions_8h.html#a58f38f0d2d91763ecd599af6f16291e6">line_end</a>, <a class="code" href="class_large_segment_set.html#a6e70daef4cd5141ef6fd0c7af65f72e0">largestObject</a>, <a class="code" href="class_large_segment_set.html#abe5f58ce25f514baf594af822ab29a3a">smallestObject</a>);</div>
<div class="line"><a name="l00895"></a><span class="lineno">  895</span>&#160;}</div>
<div class="line"><a name="l00896"></a><span class="lineno">  896</span>&#160; </div>
<div class="line"><a name="l00897"></a><span class="lineno">  897</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00898"></a><span class="lineno">  898</span>&#160;<span class="comment">/**</span></div>
<div class="line"><a name="l00899"></a><span class="lineno">  899</span>&#160;<span class="comment"> * Handle post-sweep processing for the set.</span></div>
<div class="line"><a name="l00900"></a><span class="lineno">  900</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l00901"></a><span class="lineno"><a class="line" href="class_single_object_segment_set.html#a19f592fe0ecffc436618ea2e91a75731">  901</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="class_single_object_segment_set.html#a19f592fe0ecffc436618ea2e91a75731">SingleObjectSegmentSet::completeSweepOperation</a>()</div>
<div class="line"><a name="l00902"></a><span class="lineno">  902</span>&#160;{</div>
<div class="line"><a name="l00903"></a><span class="lineno">  903</span>&#160;    <span class="comment">// Run the chain of segments checking for A) empty segments or B) segments where there is one</span></div>
<div class="line"><a name="l00904"></a><span class="lineno">  904</span>&#160;    <span class="comment">// large object that is smaller than the segment. The first segment type can be returned to</span></div>
<div class="line"><a name="l00905"></a><span class="lineno">  905</span>&#160;    <span class="comment">// the system. Category B) is a top-level array object that has been expanded so the</span></div>
<div class="line"><a name="l00906"></a><span class="lineno">  906</span>&#160;    <span class="comment">// segment contains a small array stub and a very large dead object.</span></div>
<div class="line"><a name="l00907"></a><span class="lineno">  907</span>&#160;    <a class="code" href="class_memory_segment.html">MemorySegment</a> *sweepSegment = <a class="code" href="class_memory_segment_set.html#a61ed7810741de1e17e28791f0ad673e2">first</a>();</div>
<div class="line"><a name="l00908"></a><span class="lineno">  908</span>&#160;    <span class="keywordflow">while</span> (sweepSegment != NULL)</div>
<div class="line"><a name="l00909"></a><span class="lineno">  909</span>&#160;    {</div>
<div class="line"><a name="l00910"></a><span class="lineno">  910</span>&#160;        <span class="comment">// Since we might be removing this current segment,</span></div>
<div class="line"><a name="l00911"></a><span class="lineno">  911</span>&#160;        <span class="comment">// get the next one in the chain now.</span></div>
<div class="line"><a name="l00912"></a><span class="lineno">  912</span>&#160;        <a class="code" href="class_memory_segment.html">MemorySegment</a> *nextSegment = <a class="code" href="class_memory_segment_set.html#aedcb4e8810fcd3236e073032b8529049">next</a>(sweepSegment);</div>
<div class="line"><a name="l00913"></a><span class="lineno">  913</span>&#160;        <span class="comment">// the sweep operation keeps a counter of live objects, so this is a</span></div>
<div class="line"><a name="l00914"></a><span class="lineno">  914</span>&#160;        <span class="comment">// quick test for whether we can return the storage for this segment</span></div>
<div class="line"><a name="l00915"></a><span class="lineno">  915</span>&#160;        <span class="keywordflow">if</span> (sweepSegment-&gt;<a class="code" href="class_memory_segment.html#a600233405db51678164f8553bb73d938">isEmpty</a>())</div>
<div class="line"><a name="l00916"></a><span class="lineno">  916</span>&#160;        {</div>
<div class="line"><a name="l00917"></a><span class="lineno">  917</span>&#160;            <span class="comment">// remove this from the segment set chain and asked the memory object to return</span></div>
<div class="line"><a name="l00918"></a><span class="lineno">  918</span>&#160;            <span class="comment">// it to the system.</span></div>
<div class="line"><a name="l00919"></a><span class="lineno">  919</span>&#160;            sweepSegment-&gt;<a class="code" href="class_memory_segment.html#a05f1080941e07fa90af5978ab4c1123a">remove</a>();</div>
<div class="line"><a name="l00920"></a><span class="lineno">  920</span>&#160;            <a class="code" href="class_memory_segment_set.html#a2f5846486a053e2563f99fe17d4f0455">memory</a>-&gt;<a class="code" href="class_memory_object.html#a4babf41ab5e88ec6773cae4ddc83ab10">verboseMessage</a>(<span class="stringliteral">&quot;Returning memory segment of %zu bytes&quot;</span> <a class="code" href="unix_2_platform_definitions_8h.html#a58f38f0d2d91763ecd599af6f16291e6">line_end</a>, sweepSegment-&gt;<a class="code" href="class_memory_segment.html#a2ddc33173de811d5a32dadab64218e69">size</a>());</div>
<div class="line"><a name="l00921"></a><span class="lineno">  921</span>&#160;            <a class="code" href="class_memory_segment_set.html#a2f5846486a053e2563f99fe17d4f0455">memory</a>-&gt;<a class="code" href="class_memory_object.html#a2a533297c554aeea9a8662ef7e0aea0f">freeSegment</a>(sweepSegment);</div>
<div class="line"><a name="l00922"></a><span class="lineno">  922</span>&#160;        }</div>
<div class="line"><a name="l00923"></a><span class="lineno">  923</span>&#160;        <span class="keywordflow">else</span></div>
<div class="line"><a name="l00924"></a><span class="lineno">  924</span>&#160;        {</div>
<div class="line"><a name="l00925"></a><span class="lineno">  925</span>&#160;            <a class="code" href="class_rexx_internal_object.html">RexxInternalObject</a> *objectPtr = sweepSegment-&gt;<a class="code" href="class_memory_segment.html#a4e532d1281baa23836e24b64e580298e">startObject</a>();</div>
<div class="line"><a name="l00926"></a><span class="lineno">  926</span>&#160;            <span class="comment">// Get size of object for stats and</span></div>
<div class="line"><a name="l00927"></a><span class="lineno">  927</span>&#160;            <span class="keywordtype">size_t</span> bytes = objectPtr-&gt;<a class="code" href="class_rexx_internal_object.html#a035eb8bf67ca1b43d4238e806a0db0a0">getObjectSize</a>();</div>
<div class="line"><a name="l00928"></a><span class="lineno">  928</span>&#160;            <span class="comment">// if the object does not take up the entire segment, then we have had an</span></div>
<div class="line"><a name="l00929"></a><span class="lineno">  929</span>&#160;            <span class="comment">// object split. We need to transfer this segment into the Normal pool so</span></div>
<div class="line"><a name="l00930"></a><span class="lineno">  930</span>&#160;            <span class="comment">// the rest of the segment can be used.</span></div>
<div class="line"><a name="l00931"></a><span class="lineno">  931</span>&#160;            <span class="keywordflow">if</span> (bytes != sweepSegment-&gt;<a class="code" href="class_memory_segment.html#a2ddc33173de811d5a32dadab64218e69">size</a>())</div>
<div class="line"><a name="l00932"></a><span class="lineno">  932</span>&#160;            {</div>
<div class="line"><a name="l00933"></a><span class="lineno">  933</span>&#160;                sweepSegment-&gt;<a class="code" href="class_memory_segment.html#a05f1080941e07fa90af5978ab4c1123a">remove</a>();</div>
<div class="line"><a name="l00934"></a><span class="lineno">  934</span>&#160;                <a class="code" href="class_memory_segment_set.html#a2f5846486a053e2563f99fe17d4f0455">memory</a>-&gt;<a class="code" href="class_memory_object.html#a4babf41ab5e88ec6773cae4ddc83ab10">verboseMessage</a>(<span class="stringliteral">&quot;Transfering memory segment of %zu bytes to the Normal segment set&quot;</span> <a class="code" href="unix_2_platform_definitions_8h.html#a58f38f0d2d91763ecd599af6f16291e6">line_end</a>, sweepSegment-&gt;<a class="code" href="class_memory_segment.html#a2ddc33173de811d5a32dadab64218e69">size</a>());</div>
<div class="line"><a name="l00935"></a><span class="lineno">  935</span>&#160;                <a class="code" href="class_memory_segment_set.html#a2f5846486a053e2563f99fe17d4f0455">memory</a>-&gt;<a class="code" href="class_memory_object.html#a1db678cca2a0c0e802aaf7e36af30b4e">transferSegmentToNormalSet</a>(sweepSegment);</div>
<div class="line"><a name="l00936"></a><span class="lineno">  936</span>&#160;            }</div>
<div class="line"><a name="l00937"></a><span class="lineno">  937</span>&#160;        }</div>
<div class="line"><a name="l00938"></a><span class="lineno">  938</span>&#160;        <span class="comment">// go to the next segment in the pool</span></div>
<div class="line"><a name="l00939"></a><span class="lineno">  939</span>&#160;        sweepSegment = nextSegment;</div>
<div class="line"><a name="l00940"></a><span class="lineno">  940</span>&#160;    }</div>
<div class="line"><a name="l00941"></a><span class="lineno">  941</span>&#160;}</div>
<div class="line"><a name="l00942"></a><span class="lineno">  942</span>&#160; </div>
<div class="line"><a name="l00943"></a><span class="lineno">  943</span>&#160; </div>
<div class="line"><a name="l00944"></a><span class="lineno"><a class="line" href="_memory_segment_8cpp.html#aec62b2e84adb188bf3eacb70ca54d974">  944</a></span>&#160;<span class="keyword">inline</span> <span class="keywordtype">bool</span> <a class="code" href="_memory_segment_8cpp.html#aec62b2e84adb188bf3eacb70ca54d974">objectIsLive</a>(<span class="keywordtype">char</span> *obj, <span class="keywordtype">size_t</span> mark) {<span class="keywordflow">return</span> ((<a class="code" href="class_rexx_internal_object.html">RexxInternalObject</a> *)obj)-&gt;isObjectLive(mark); }</div>
<div class="line"><a name="l00945"></a><span class="lineno"><a class="line" href="_memory_segment_8cpp.html#a7df9091edeb14c7634b59d608c9df708">  945</a></span>&#160;<span class="keyword">inline</span> <span class="keywordtype">bool</span> <a class="code" href="_memory_segment_8cpp.html#a7df9091edeb14c7634b59d608c9df708">objectIsNotLive</a>(<span class="keywordtype">char</span> *obj, <span class="keywordtype">size_t</span> mark) {<span class="keywordflow">return</span> ((<a class="code" href="class_rexx_internal_object.html">RexxInternalObject</a> *)obj)-&gt;isObjectDead(mark); }</div>
<div class="line"><a name="l00946"></a><span class="lineno">  946</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00947"></a><span class="lineno">  947</span>&#160;<span class="comment">/**</span></div>
<div class="line"><a name="l00948"></a><span class="lineno">  948</span>&#160;<span class="comment"> * Perform a sweep of all segments controlled by this segment</span></div>
<div class="line"><a name="l00949"></a><span class="lineno">  949</span>&#160;<span class="comment"> * set.</span></div>
<div class="line"><a name="l00950"></a><span class="lineno">  950</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l00951"></a><span class="lineno"><a class="line" href="class_memory_segment_set.html#a4e6465f0009cd59107df1bee01627c4b">  951</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="class_memory_segment_set.html#a4e6465f0009cd59107df1bee01627c4b">MemorySegmentSet::sweep</a>()</div>
<div class="line"><a name="l00952"></a><span class="lineno">  952</span>&#160;{</div>
<div class="line"><a name="l00953"></a><span class="lineno">  953</span>&#160;    <span class="keywordtype">size_t</span> mark = <a class="code" href="_rexx_memory_8cpp.html#a1170e885c5c4c6a777736390e000ef15">memoryObject</a>.<a class="code" href="class_memory_object.html#aa87672fee1c0175d0a7012d29be7332e">markWord</a>;</div>
<div class="line"><a name="l00954"></a><span class="lineno">  954</span>&#160; </div>
<div class="line"><a name="l00955"></a><span class="lineno">  955</span>&#160;    <span class="comment">// do the sweep preparation (this differs for particular segment</span></div>
<div class="line"><a name="l00956"></a><span class="lineno">  956</span>&#160;    <span class="comment">// set implemenation</span></div>
<div class="line"><a name="l00957"></a><span class="lineno">  957</span>&#160;    <a class="code" href="class_memory_segment_set.html#aa2caa0bde362ae2ff82b82f33bd536e7">prepareForSweep</a>();</div>
<div class="line"><a name="l00958"></a><span class="lineno">  958</span>&#160;    <span class="comment">// go through the segments in order, until we&#39;ve swept the</span></div>
<div class="line"><a name="l00959"></a><span class="lineno">  959</span>&#160;    <span class="comment">// entire set */</span></div>
<div class="line"><a name="l00960"></a><span class="lineno">  960</span>&#160;    <a class="code" href="class_memory_segment.html">MemorySegment</a> *sweepSegment = <a class="code" href="class_memory_segment_set.html#a61ed7810741de1e17e28791f0ad673e2">first</a>();</div>
<div class="line"><a name="l00961"></a><span class="lineno">  961</span>&#160;    <span class="keywordflow">while</span> (sweepSegment != NULL)</div>
<div class="line"><a name="l00962"></a><span class="lineno">  962</span>&#160;    {</div>
<div class="line"><a name="l00963"></a><span class="lineno">  963</span>&#160;        <span class="comment">// go sweep that segment</span></div>
<div class="line"><a name="l00964"></a><span class="lineno">  964</span>&#160;        <a class="code" href="class_memory_segment_set.html#abffe4faab8b9008faa40acf1d94f3d5d">sweepSingleSegment</a>(sweepSegment);</div>
<div class="line"><a name="l00965"></a><span class="lineno">  965</span>&#160;        <span class="comment">// go to the next segment in the pool</span></div>
<div class="line"><a name="l00966"></a><span class="lineno">  966</span>&#160;        sweepSegment = <a class="code" href="class_memory_segment_set.html#aedcb4e8810fcd3236e073032b8529049">next</a>(sweepSegment);</div>
<div class="line"><a name="l00967"></a><span class="lineno">  967</span>&#160;    }</div>
<div class="line"><a name="l00968"></a><span class="lineno">  968</span>&#160;    <span class="comment">// now do any of the sweep post-processing.</span></div>
<div class="line"><a name="l00969"></a><span class="lineno">  969</span>&#160;    <a class="code" href="class_memory_segment_set.html#a7c1385f115ca05b55e03dc9468e08f39">completeSweepOperation</a>();</div>
<div class="line"><a name="l00970"></a><span class="lineno">  970</span>&#160;}</div>
<div class="line"><a name="l00971"></a><span class="lineno">  971</span>&#160; </div>
<div class="line"><a name="l00972"></a><span class="lineno">  972</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00973"></a><span class="lineno">  973</span>&#160;<span class="comment">/**</span></div>
<div class="line"><a name="l00974"></a><span class="lineno">  974</span>&#160;<span class="comment"> * Sweep a single memory segment and return the dead objects to the</span></div>
<div class="line"><a name="l00975"></a><span class="lineno">  975</span>&#160;<span class="comment"> * segment set dead object cache for reuse.</span></div>
<div class="line"><a name="l00976"></a><span class="lineno">  976</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00977"></a><span class="lineno">  977</span>&#160;<span class="comment"> * @param sweepSegment</span></div>
<div class="line"><a name="l00978"></a><span class="lineno">  978</span>&#160;<span class="comment"> *               The segment to sweep.</span></div>
<div class="line"><a name="l00979"></a><span class="lineno">  979</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l00980"></a><span class="lineno"><a class="line" href="class_memory_segment_set.html#abffe4faab8b9008faa40acf1d94f3d5d">  980</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="class_memory_segment_set.html#abffe4faab8b9008faa40acf1d94f3d5d">MemorySegmentSet::sweepSingleSegment</a>(<a class="code" href="class_memory_segment.html">MemorySegment</a> *sweepSegment)</div>
<div class="line"><a name="l00981"></a><span class="lineno">  981</span>&#160;{</div>
<div class="line"><a name="l00982"></a><span class="lineno">  982</span>&#160;    <span class="keywordtype">size_t</span> mark = <a class="code" href="_rexx_memory_8cpp.html#a1170e885c5c4c6a777736390e000ef15">memoryObject</a>.<a class="code" href="class_memory_object.html#aa87672fee1c0175d0a7012d29be7332e">markWord</a>;</div>
<div class="line"><a name="l00983"></a><span class="lineno">  983</span>&#160; </div>
<div class="line"><a name="l00984"></a><span class="lineno">  984</span>&#160;    <span class="comment">// clear the live objects counter for tracking</span></div>
<div class="line"><a name="l00985"></a><span class="lineno">  985</span>&#160;    sweepSegment-&gt;<a class="code" href="class_memory_segment_header.html#aa6555c2a4239d9911f4f8a177a4c2c8b">liveObjects</a> = 0;</div>
<div class="line"><a name="l00986"></a><span class="lineno">  986</span>&#160; </div>
<div class="line"><a name="l00987"></a><span class="lineno">  987</span>&#160;    <a class="code" href="class_rexx_internal_object.html">RexxInternalObject</a> *objectPtr = sweepSegment-&gt;<a class="code" href="class_memory_segment.html#a4e532d1281baa23836e24b64e580298e">startObject</a>();</div>
<div class="line"><a name="l00988"></a><span class="lineno">  988</span>&#160;    <a class="code" href="class_rexx_internal_object.html">RexxInternalObject</a> *endPtr = sweepSegment-&gt;<a class="code" href="class_memory_segment.html#aa489ab3956d7b3fefd4108dfe6641c6d">endObject</a>();</div>
<div class="line"><a name="l00989"></a><span class="lineno">  989</span>&#160; </div>
<div class="line"><a name="l00990"></a><span class="lineno">  990</span>&#160;    <span class="comment">// now we need to look at all of the objects in the segment looking</span></div>
<div class="line"><a name="l00991"></a><span class="lineno">  991</span>&#160;    <span class="comment">// for ones that don&#39;t have the current live mark.</span></div>
<div class="line"><a name="l00992"></a><span class="lineno">  992</span>&#160;    <span class="keywordflow">while</span> (objectPtr &lt; endPtr)</div>
<div class="line"><a name="l00993"></a><span class="lineno">  993</span>&#160;    {</div>
<div class="line"><a name="l00994"></a><span class="lineno">  994</span>&#160;        <span class="comment">// live objects have been tagged by the marking operation.</span></div>
<div class="line"><a name="l00995"></a><span class="lineno">  995</span>&#160;        <span class="keywordflow">if</span> (objectPtr-&gt;<a class="code" href="class_rexx_internal_object.html#a5c0ce096e06a4ed2bdf3173b38b80e08">isObjectLive</a>(mark))</div>
<div class="line"><a name="l00996"></a><span class="lineno">  996</span>&#160;        {</div>
<div class="line"><a name="l00997"></a><span class="lineno">  997</span>&#160;            <span class="comment">// Get size of object for stats and do validation if in debug mode</span></div>
<div class="line"><a name="l00998"></a><span class="lineno">  998</span>&#160;            <span class="keywordtype">size_t</span> bytes = objectPtr-&gt;<a class="code" href="class_rexx_internal_object.html#a035eb8bf67ca1b43d4238e806a0db0a0">getObjectSize</a>();</div>
<div class="line"><a name="l00999"></a><span class="lineno">  999</span>&#160;            <a class="code" href="class_memory_segment_set.html#ae4d7151125dc2900264c1f0c2eff9e2e">validateObject</a>(objectPtr);</div>
<div class="line"><a name="l01000"></a><span class="lineno"> 1000</span>&#160;            <span class="comment">// update our live object counters</span></div>
<div class="line"><a name="l01001"></a><span class="lineno"> 1001</span>&#160;            <a class="code" href="class_memory_segment_set.html#a3d3811d09e36ae1fe1060a585534ffea">liveObjectBytes</a> += bytes;</div>
<div class="line"><a name="l01002"></a><span class="lineno"> 1002</span>&#160;            sweepSegment-&gt;<a class="code" href="class_memory_segment_header.html#aa6555c2a4239d9911f4f8a177a4c2c8b">liveObjects</a>++;</div>
<div class="line"><a name="l01003"></a><span class="lineno"> 1003</span>&#160;            <span class="comment">// point to next object in segment.</span></div>
<div class="line"><a name="l01004"></a><span class="lineno"> 1004</span>&#160;            objectPtr = objectPtr-&gt;<a class="code" href="class_rexx_internal_object.html#a0e6545e24773bc7861c35a4f87984110">nextObject</a>();</div>
<div class="line"><a name="l01005"></a><span class="lineno"> 1005</span>&#160;        }</div>
<div class="line"><a name="l01006"></a><span class="lineno"> 1006</span>&#160;        <span class="comment">// this is a dead object (the first in a potential string of dead objects. We&#39;ll</span></div>
<div class="line"><a name="l01007"></a><span class="lineno"> 1007</span>&#160;        <span class="comment">// scan to the next live object (or the end) looking to combine all of these</span></div>
<div class="line"><a name="l01008"></a><span class="lineno"> 1008</span>&#160;        <span class="comment">// dead objects into a single block</span></div>
<div class="line"><a name="l01009"></a><span class="lineno"> 1009</span>&#160;        <span class="keywordflow">else</span></div>
<div class="line"><a name="l01010"></a><span class="lineno"> 1010</span>&#160;        {</div>
<div class="line"><a name="l01011"></a><span class="lineno"> 1011</span>&#160;            <span class="comment">// get the size of the first object and validate things if in debug mode.</span></div>
<div class="line"><a name="l01012"></a><span class="lineno"> 1012</span>&#160;            <span class="keywordtype">size_t</span> deadLength = objectPtr-&gt;<a class="code" href="class_rexx_internal_object.html#a035eb8bf67ca1b43d4238e806a0db0a0">getObjectSize</a>();</div>
<div class="line"><a name="l01013"></a><span class="lineno"> 1013</span>&#160;            <a class="code" href="class_memory_segment_set.html#ae4d7151125dc2900264c1f0c2eff9e2e">validateObject</a>(objectPtr);</div>
<div class="line"><a name="l01014"></a><span class="lineno"> 1014</span>&#160; </div>
<div class="line"><a name="l01015"></a><span class="lineno"> 1015</span>&#160;            <span class="comment">// now scan forward to sweep up as many dead objects as we can.</span></div>
<div class="line"><a name="l01016"></a><span class="lineno"> 1016</span>&#160;            <a class="code" href="class_rexx_internal_object.html">RexxInternalObject</a> *nextObjectPtr = objectPtr-&gt;<a class="code" href="class_rexx_internal_object.html#a0e6545e24773bc7861c35a4f87984110">nextObject</a>();</div>
<div class="line"><a name="l01017"></a><span class="lineno"> 1017</span>&#160; </div>
<div class="line"><a name="l01018"></a><span class="lineno"> 1018</span>&#160;            <span class="keywordflow">for</span> (; (nextObjectPtr &lt; endPtr) &amp;&amp; nextObjectPtr-&gt;<a class="code" href="class_rexx_internal_object.html#ac2985a59a55bb9b00f6f94613138b514">isObjectDead</a>(mark); nextObjectPtr = nextObjectPtr-&gt;<a class="code" href="class_rexx_internal_object.html#a0e6545e24773bc7861c35a4f87984110">nextObject</a>())</div>
<div class="line"><a name="l01019"></a><span class="lineno"> 1019</span>&#160;            {</div>
<div class="line"><a name="l01020"></a><span class="lineno"> 1020</span>&#160;                <span class="comment">// get the size and add to the accumulator</span></div>
<div class="line"><a name="l01021"></a><span class="lineno"> 1021</span>&#160;                <span class="keywordtype">size_t</span> bytes = nextObjectPtr-&gt;<a class="code" href="class_rexx_internal_object.html#a035eb8bf67ca1b43d4238e806a0db0a0">getObjectSize</a>();</div>
<div class="line"><a name="l01022"></a><span class="lineno"> 1022</span>&#160;                <a class="code" href="class_memory_segment_set.html#ae4d7151125dc2900264c1f0c2eff9e2e">validateObject</a>(nextObjectPtr);</div>
<div class="line"><a name="l01023"></a><span class="lineno"> 1023</span>&#160;                deadLength += bytes;</div>
<div class="line"><a name="l01024"></a><span class="lineno"> 1024</span>&#160;            }</div>
<div class="line"><a name="l01025"></a><span class="lineno"> 1025</span>&#160;            <span class="comment">// add this value to the accumulators we use to make</span></div>
<div class="line"><a name="l01026"></a><span class="lineno"> 1026</span>&#160;            <span class="comment">// expansion decisions</span></div>
<div class="line"><a name="l01027"></a><span class="lineno"> 1027</span>&#160;            <a class="code" href="class_memory_segment_set.html#a7261a480da3ecae054b3cd1be0b30ead">deadObjectBytes</a> += deadLength;</div>
<div class="line"><a name="l01028"></a><span class="lineno"> 1028</span>&#160;            <span class="comment">// objectPtr points to the start of the string of dead objects,</span></div>
<div class="line"><a name="l01029"></a><span class="lineno"> 1029</span>&#160;            <span class="comment">// deadLength is the total deadlength. We add this to the</span></div>
<div class="line"><a name="l01030"></a><span class="lineno"> 1030</span>&#160;            <span class="comment">// segment set dead object caches.</span></div>
<div class="line"><a name="l01031"></a><span class="lineno"> 1031</span>&#160;            <a class="code" href="class_memory_segment_set.html#afcf45cd1bb986f7c3541fc577a69def3">addDeadObject</a>((<span class="keywordtype">char</span> *)objectPtr, deadLength);</div>
<div class="line"><a name="l01032"></a><span class="lineno"> 1032</span>&#160;            <span class="comment">// adding this block created a DeadObject instance with the appropriate</span></div>
<div class="line"><a name="l01033"></a><span class="lineno"> 1033</span>&#160;            <span class="comment">// length, so we use that to step to the next object.</span></div>
<div class="line"><a name="l01034"></a><span class="lineno"> 1034</span>&#160;            objectPtr = objectPtr-&gt;nextObject(deadLength);</div>
<div class="line"><a name="l01035"></a><span class="lineno"> 1035</span>&#160;        }</div>
<div class="line"><a name="l01036"></a><span class="lineno"> 1036</span>&#160;    }</div>
<div class="line"><a name="l01037"></a><span class="lineno"> 1037</span>&#160;}</div>
<div class="line"><a name="l01038"></a><span class="lineno"> 1038</span>&#160; </div>
<div class="line"><a name="l01039"></a><span class="lineno"> 1039</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l01040"></a><span class="lineno"> 1040</span>&#160;<span class="comment">/**</span></div>
<div class="line"><a name="l01041"></a><span class="lineno"> 1041</span>&#160;<span class="comment"> * Process a dead object and potentially split the object into</span></div>
<div class="line"><a name="l01042"></a><span class="lineno"> 1042</span>&#160;<span class="comment"> * an allocated object and a second dead object that will be added back into</span></div>
<div class="line"><a name="l01043"></a><span class="lineno"> 1043</span>&#160;<span class="comment"> * the appropriate pool of dead objects.</span></div>
<div class="line"><a name="l01044"></a><span class="lineno"> 1044</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l01045"></a><span class="lineno"> 1045</span>&#160;<span class="comment"> * @param object The object to split.</span></div>
<div class="line"><a name="l01046"></a><span class="lineno"> 1046</span>&#160;<span class="comment"> * @param allocationLength</span></div>
<div class="line"><a name="l01047"></a><span class="lineno"> 1047</span>&#160;<span class="comment"> *               The front length we require, already rounded to</span></div>
<div class="line"><a name="l01048"></a><span class="lineno"> 1048</span>&#160;<span class="comment"> *               the appropriate grain size.</span></div>
<div class="line"><a name="l01049"></a><span class="lineno"> 1049</span>&#160;<span class="comment"> * @param splitMinimum</span></div>
<div class="line"><a name="l01050"></a><span class="lineno"> 1050</span>&#160;<span class="comment"> *               The minimum required length for the back object. If the trailing</span></div>
<div class="line"><a name="l01051"></a><span class="lineno"> 1051</span>&#160;<span class="comment"> *               portion is short than this, then the original dead object is</span></div>
<div class="line"><a name="l01052"></a><span class="lineno"> 1052</span>&#160;<span class="comment"> *               left the same size.</span></div>
<div class="line"><a name="l01053"></a><span class="lineno"> 1053</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l01054"></a><span class="lineno"> 1054</span>&#160;<span class="comment"> * @return The split off real object.</span></div>
<div class="line"><a name="l01055"></a><span class="lineno"> 1055</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l01056"></a><span class="lineno"><a class="line" href="class_memory_segment_set.html#ab3cfbce21761e05940b967acf23ab5d4"> 1056</a></span>&#160;<a class="code" href="class_rexx_internal_object.html">RexxInternalObject</a> *<a class="code" href="class_memory_segment_set.html#ab3cfbce21761e05940b967acf23ab5d4">MemorySegmentSet::splitDeadObject</a>(<a class="code" href="class_dead_object.html">DeadObject</a> *<span class="keywordtype">object</span>, <span class="keywordtype">size_t</span> allocationLength, <span class="keywordtype">size_t</span> splitMinimum)</div>
<div class="line"><a name="l01057"></a><span class="lineno"> 1057</span>&#160;{</div>
<div class="line"><a name="l01058"></a><span class="lineno"> 1058</span>&#160;    <span class="keywordtype">size_t</span> deadLength = <span class="keywordtype">object</span>-&gt;<a class="code" href="class_rexx_internal_object.html#a035eb8bf67ca1b43d4238e806a0db0a0">getObjectSize</a>() - allocationLength;</div>
<div class="line"><a name="l01059"></a><span class="lineno"> 1059</span>&#160; </div>
<div class="line"><a name="l01060"></a><span class="lineno"> 1060</span>&#160;    <span class="comment">// remainder too small or this is a very large request</span></div>
<div class="line"><a name="l01061"></a><span class="lineno"> 1061</span>&#160;    <span class="comment">// is the remainder two small to reuse?</span></div>
<div class="line"><a name="l01062"></a><span class="lineno"> 1062</span>&#160;    <span class="keywordflow">if</span> (deadLength &lt; splitMinimum)</div>
<div class="line"><a name="l01063"></a><span class="lineno"> 1063</span>&#160;    {</div>
<div class="line"><a name="l01064"></a><span class="lineno"> 1064</span>&#160;        <span class="comment">// over allocate this object</span></div>
<div class="line"><a name="l01065"></a><span class="lineno"> 1065</span>&#160;        allocationLength += deadLength;</div>
<div class="line"><a name="l01066"></a><span class="lineno"> 1066</span>&#160;    }</div>
<div class="line"><a name="l01067"></a><span class="lineno"> 1067</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l01068"></a><span class="lineno"> 1068</span>&#160;    {</div>
<div class="line"><a name="l01069"></a><span class="lineno"> 1069</span>&#160;        <span class="comment">// Yes, so pull new object out of the front of the dead</span></div>
<div class="line"><a name="l01070"></a><span class="lineno"> 1070</span>&#160;        <span class="comment">// object, adjust the size of the Dead object.</span></div>
<div class="line"><a name="l01071"></a><span class="lineno"> 1071</span>&#160;        <span class="keywordtype">char</span> *largeObject = ((<span class="keywordtype">char</span> *)<span class="keywordtype">object</span>) + allocationLength;</div>
<div class="line"><a name="l01072"></a><span class="lineno"> 1072</span>&#160;        <span class="comment">// and reinsert into the the dead object pool</span></div>
<div class="line"><a name="l01073"></a><span class="lineno"> 1073</span>&#160;        <a class="code" href="class_memory_segment_set.html#afcf45cd1bb986f7c3541fc577a69def3">addDeadObject</a>((<span class="keywordtype">char</span> *)largeObject, deadLength);</div>
<div class="line"><a name="l01074"></a><span class="lineno"> 1074</span>&#160;    }</div>
<div class="line"><a name="l01075"></a><span class="lineno"> 1075</span>&#160;    <span class="comment">// Adjust the size of this object to the requested allocation length</span></div>
<div class="line"><a name="l01076"></a><span class="lineno"> 1076</span>&#160;    <span class="comment">// and return it as an object pointer</span></div>
<div class="line"><a name="l01077"></a><span class="lineno"> 1077</span>&#160;    ((<a class="code" href="class_rexx_internal_object.html">RexxInternalObject</a> *)<span class="keywordtype">object</span>)-&gt;setObjectSize(allocationLength);</div>
<div class="line"><a name="l01078"></a><span class="lineno"> 1078</span>&#160;    <span class="keywordflow">return</span>(<a class="code" href="class_rexx_internal_object.html">RexxInternalObject</a> *)object;</div>
<div class="line"><a name="l01079"></a><span class="lineno"> 1079</span>&#160;}</div>
<div class="line"><a name="l01080"></a><span class="lineno"> 1080</span>&#160; </div>
<div class="line"><a name="l01081"></a><span class="lineno"> 1081</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l01082"></a><span class="lineno"> 1082</span>&#160;<span class="comment">/**</span></div>
<div class="line"><a name="l01083"></a><span class="lineno"> 1083</span>&#160;<span class="comment"> * Search the segment set for a block of the requested length.</span></div>
<div class="line"><a name="l01084"></a><span class="lineno"> 1084</span>&#160;<span class="comment"> * If a block is found, the block will be subdivided if necessary, with the</span></div>
<div class="line"><a name="l01085"></a><span class="lineno"> 1085</span>&#160;<span class="comment"> * remainder portion placed back on the proper chain.</span></div>
<div class="line"><a name="l01086"></a><span class="lineno"> 1086</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l01087"></a><span class="lineno"> 1087</span>&#160;<span class="comment"> * @param allocationLength</span></div>
<div class="line"><a name="l01088"></a><span class="lineno"> 1088</span>&#160;<span class="comment"> *               The required object length (already rounded to an appropriate grain size).</span></div>
<div class="line"><a name="l01089"></a><span class="lineno"> 1089</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l01090"></a><span class="lineno"> 1090</span>&#160;<span class="comment"> * @return An appropriately sized object or NULL if one was not found.</span></div>
<div class="line"><a name="l01091"></a><span class="lineno"> 1091</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l01092"></a><span class="lineno"><a class="line" href="class_normal_segment_set.html#af7b385b632c9a226a9ec36085a0df82c"> 1092</a></span>&#160;<a class="code" href="class_rexx_internal_object.html">RexxInternalObject</a> *<a class="code" href="class_normal_segment_set.html#af7b385b632c9a226a9ec36085a0df82c">NormalSegmentSet::findLargeDeadObject</a>(<span class="keywordtype">size_t</span> allocationLength)</div>
<div class="line"><a name="l01093"></a><span class="lineno"> 1093</span>&#160;{</div>
<div class="line"><a name="l01094"></a><span class="lineno"> 1094</span>&#160;    <span class="comment">// Go through the LARGEDEAD object looking for the 1st</span></div>
<div class="line"><a name="l01095"></a><span class="lineno"> 1095</span>&#160;    <span class="comment">// one we can use either our object is too big for all the</span></div>
<div class="line"><a name="l01096"></a><span class="lineno"> 1096</span>&#160;    <span class="comment">// small chains, or the small chains are depleted....</span></div>
<div class="line"><a name="l01097"></a><span class="lineno"> 1097</span>&#160;    <a class="code" href="class_dead_object.html">DeadObject</a> *largeObject = <a class="code" href="class_normal_segment_set.html#a766ab6a1566c1302bd4b8e4b449a300a">largeDead</a>.<a class="code" href="class_dead_object_pool.html#ad9bfe30ddf396486fa47c7e90f383d6b">findFit</a>(allocationLength);</div>
<div class="line"><a name="l01098"></a><span class="lineno"> 1098</span>&#160;    <span class="keywordflow">if</span> (largeObject != NULL)</div>
<div class="line"><a name="l01099"></a><span class="lineno"> 1099</span>&#160;    {</div>
<div class="line"><a name="l01100"></a><span class="lineno"> 1100</span>&#160;        <span class="comment">// if we found an object that will fit, try to split an object off from</span></div>
<div class="line"><a name="l01101"></a><span class="lineno"> 1101</span>&#160;        <span class="comment">// from the whole. There must be at least a minimum size object left.</span></div>
<div class="line"><a name="l01102"></a><span class="lineno"> 1102</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="class_memory_segment_set.html#ab3cfbce21761e05940b967acf23ab5d4">splitDeadObject</a>(largeObject, allocationLength, <a class="code" href="class_memory.html#a091509cd3ad7378c57c9375ef266484e">Memory::MinimumObjectSize</a>);</div>
<div class="line"><a name="l01103"></a><span class="lineno"> 1103</span>&#160;    }</div>
<div class="line"><a name="l01104"></a><span class="lineno"> 1104</span>&#160;    <span class="comment">// nothing found, return NULL</span></div>
<div class="line"><a name="l01105"></a><span class="lineno"> 1105</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="_rexx_core_8h.html#a181a36438ba4535dd7d22ab63239d1e1">OREF_NULL</a>;</div>
<div class="line"><a name="l01106"></a><span class="lineno"> 1106</span>&#160;}</div>
<div class="line"><a name="l01107"></a><span class="lineno"> 1107</span>&#160; </div>
<div class="line"><a name="l01108"></a><span class="lineno"> 1108</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l01109"></a><span class="lineno"> 1109</span>&#160;<span class="comment">/**</span></div>
<div class="line"><a name="l01110"></a><span class="lineno"> 1110</span>&#160;<span class="comment"> * Find a dead object in the caches for the NormalSegmentSet.</span></div>
<div class="line"><a name="l01111"></a><span class="lineno"> 1111</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l01112"></a><span class="lineno"> 1112</span>&#160;<span class="comment"> * @param allocationLength</span></div>
<div class="line"><a name="l01113"></a><span class="lineno"> 1113</span>&#160;<span class="comment"> *               The required allocation size.</span></div>
<div class="line"><a name="l01114"></a><span class="lineno"> 1114</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l01115"></a><span class="lineno"> 1115</span>&#160;<span class="comment"> * @return A located object or NULL if unable to allocate.</span></div>
<div class="line"><a name="l01116"></a><span class="lineno"> 1116</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l01117"></a><span class="lineno"><a class="line" href="class_normal_segment_set.html#a994996286516a0d75304a65678c7db50"> 1117</a></span>&#160;<a class="code" href="class_rexx_internal_object.html">RexxInternalObject</a> *<a class="code" href="class_normal_segment_set.html#a994996286516a0d75304a65678c7db50">NormalSegmentSet::findObject</a>(<span class="keywordtype">size_t</span> allocationLength)</div>
<div class="line"><a name="l01118"></a><span class="lineno"> 1118</span>&#160;{</div>
<div class="line"><a name="l01119"></a><span class="lineno"> 1119</span>&#160;    <span class="comment">// this is just a non-inline virtual version of the allocation routine</span></div>
<div class="line"><a name="l01120"></a><span class="lineno"> 1120</span>&#160;    <span class="comment">// routine to be used during low memory situations.</span></div>
<div class="line"><a name="l01121"></a><span class="lineno"> 1121</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="class_normal_segment_set.html#ad2ff1b5b7a2ed5b037eb09610513fef2">allocateObject</a>(allocationLength);</div>
<div class="line"><a name="l01122"></a><span class="lineno"> 1122</span>&#160;}</div>
<div class="line"><a name="l01123"></a><span class="lineno"> 1123</span>&#160; </div>
<div class="line"><a name="l01124"></a><span class="lineno"> 1124</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l01125"></a><span class="lineno"> 1125</span>&#160;<span class="comment">/**</span></div>
<div class="line"><a name="l01126"></a><span class="lineno"> 1126</span>&#160;<span class="comment"> * Handle an allocation failure for a request that was directed to the</span></div>
<div class="line"><a name="l01127"></a><span class="lineno"> 1127</span>&#160;<span class="comment"> * normal allocation segment set.</span></div>
<div class="line"><a name="l01128"></a><span class="lineno"> 1128</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l01129"></a><span class="lineno"> 1129</span>&#160;<span class="comment"> * @param allocationLength</span></div>
<div class="line"><a name="l01130"></a><span class="lineno"> 1130</span>&#160;<span class="comment"> *               The length of the failing allocation attempt.</span></div>
<div class="line"><a name="l01131"></a><span class="lineno"> 1131</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l01132"></a><span class="lineno"> 1132</span>&#160;<span class="comment"> * @return An allocated object, or NULL if this still fails after the all failure</span></div>
<div class="line"><a name="l01133"></a><span class="lineno"> 1133</span>&#160;<span class="comment"> *         methods have been attempted.</span></div>
<div class="line"><a name="l01134"></a><span class="lineno"> 1134</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l01135"></a><span class="lineno"><a class="line" href="class_normal_segment_set.html#aec590c8fd58d3b1b6f4d929c5f576652"> 1135</a></span>&#160;<a class="code" href="class_rexx_internal_object.html">RexxInternalObject</a> *<a class="code" href="class_normal_segment_set.html#aec590c8fd58d3b1b6f4d929c5f576652">NormalSegmentSet::handleAllocationFailure</a>(<span class="keywordtype">size_t</span> allocationLength)</div>
<div class="line"><a name="l01136"></a><span class="lineno"> 1136</span>&#160;{</div>
<div class="line"><a name="l01137"></a><span class="lineno"> 1137</span>&#160;    <a class="code" href="class_memory_segment_set.html#a2f5846486a053e2563f99fe17d4f0455">memory</a>-&gt;<a class="code" href="class_memory_object.html#a4babf41ab5e88ec6773cae4ddc83ab10">verboseMessage</a>(<span class="stringliteral">&quot;Normal allocation failure for %zu bytes&quot;</span> <a class="code" href="unix_2_platform_definitions_8h.html#a58f38f0d2d91763ecd599af6f16291e6">line_end</a>, allocationLength);</div>
<div class="line"><a name="l01138"></a><span class="lineno"> 1138</span>&#160; </div>
<div class="line"><a name="l01139"></a><span class="lineno"> 1139</span>&#160;    <span class="comment">// Step 1, force a GC</span></div>
<div class="line"><a name="l01140"></a><span class="lineno"> 1140</span>&#160;    <a class="code" href="class_memory_segment_set.html#a2f5846486a053e2563f99fe17d4f0455">memory</a>-&gt;<a class="code" href="class_memory_object.html#a7a1e9d3dc36b531b0f5d621a839df6ff">collect</a>();</div>
<div class="line"><a name="l01141"></a><span class="lineno"> 1141</span>&#160;    <span class="comment">// Step 2, now that we have good GC data, decide if we need to adjust</span></div>
<div class="line"><a name="l01142"></a><span class="lineno"> 1142</span>&#160;    <span class="comment">// the heap size.</span></div>
<div class="line"><a name="l01143"></a><span class="lineno"> 1143</span>&#160;    <a class="code" href="class_memory_segment_set.html#a11b567e97ec08847b5f4c4cd01bceafc">adjustMemorySize</a>();</div>
<div class="line"><a name="l01144"></a><span class="lineno"> 1144</span>&#160;    <span class="comment">// Step 3, see if can allocate now</span></div>
<div class="line"><a name="l01145"></a><span class="lineno"> 1145</span>&#160;    <a class="code" href="class_rexx_internal_object.html">RexxInternalObject</a> *newObject = <a class="code" href="class_normal_segment_set.html#a994996286516a0d75304a65678c7db50">findObject</a>(allocationLength);</div>
<div class="line"><a name="l01146"></a><span class="lineno"> 1146</span>&#160;    <span class="comment">// still no luck?</span></div>
<div class="line"><a name="l01147"></a><span class="lineno"> 1147</span>&#160;    <span class="keywordflow">if</span> (newObject == <a class="code" href="_rexx_core_8h.html#a181a36438ba4535dd7d22ab63239d1e1">OREF_NULL</a>)</div>
<div class="line"><a name="l01148"></a><span class="lineno"> 1148</span>&#160;    {</div>
<div class="line"><a name="l01149"></a><span class="lineno"> 1149</span>&#160;        <span class="comment">// it is possible that the adjustment routines did not add</span></div>
<div class="line"><a name="l01150"></a><span class="lineno"> 1150</span>&#160;        <span class="comment">// anything, yet we were unable to allocate a block</span></div>
<div class="line"><a name="l01151"></a><span class="lineno"> 1151</span>&#160;        <span class="comment">// because we&#39;re highly fragmented.  Try adding a new segment</span></div>
<div class="line"><a name="l01152"></a><span class="lineno"> 1152</span>&#160;        <span class="comment">// now, before going to the extreme methods.</span></div>
<div class="line"><a name="l01153"></a><span class="lineno"> 1153</span>&#160;        <a class="code" href="class_memory_segment_set.html#a7925bd1039f535cadff00ad2a5b9f7d2">addSegments</a>(<a class="code" href="class_memory_segment.html#aec264de299ef2524a1594add22679b87">MemorySegment::SegmentSize</a>);</div>
<div class="line"><a name="l01154"></a><span class="lineno"> 1154</span>&#160;        <span class="comment">// see if can allocate now</span></div>
<div class="line"><a name="l01155"></a><span class="lineno"> 1155</span>&#160;        newObject = <a class="code" href="class_normal_segment_set.html#a994996286516a0d75304a65678c7db50">findObject</a>(allocationLength);</div>
<div class="line"><a name="l01156"></a><span class="lineno"> 1156</span>&#160;        <span class="comment">// still no luck? We need to go to more extreme lengths</span></div>
<div class="line"><a name="l01157"></a><span class="lineno"> 1157</span>&#160;        <span class="comment">// to try find a block to satisfy this request.</span></div>
<div class="line"><a name="l01158"></a><span class="lineno"> 1158</span>&#160;        <span class="keywordflow">if</span> (newObject == <a class="code" href="_rexx_core_8h.html#a181a36438ba4535dd7d22ab63239d1e1">OREF_NULL</a>)</div>
<div class="line"><a name="l01159"></a><span class="lineno"> 1159</span>&#160;        {</div>
<div class="line"><a name="l01160"></a><span class="lineno"> 1160</span>&#160;            <span class="comment">// We might be able to steal something from the</span></div>
<div class="line"><a name="l01161"></a><span class="lineno"> 1161</span>&#160;            <span class="comment">// large allocations.  This will also steal the recovery</span></div>
<div class="line"><a name="l01162"></a><span class="lineno"> 1162</span>&#160;            <span class="comment">// segment as a last ditch effort</span></div>
<div class="line"><a name="l01163"></a><span class="lineno"> 1163</span>&#160;            <a class="code" href="class_memory_segment_set.html#a2f5846486a053e2563f99fe17d4f0455">memory</a>-&gt;<a class="code" href="class_memory_object.html#a2f1ca2bd2c304e9211d3e02871d3191d">scavengeSegmentSets</a>(<span class="keyword">this</span>, allocationLength);</div>
<div class="line"><a name="l01164"></a><span class="lineno"> 1164</span>&#160;            <span class="comment">// see if can allocate now</span></div>
<div class="line"><a name="l01165"></a><span class="lineno"> 1165</span>&#160;            newObject = <a class="code" href="class_normal_segment_set.html#a994996286516a0d75304a65678c7db50">findObject</a>(allocationLength);</div>
<div class="line"><a name="l01166"></a><span class="lineno"> 1166</span>&#160;            <span class="comment">// still no luck?</span></div>
<div class="line"><a name="l01167"></a><span class="lineno"> 1167</span>&#160;            <span class="keywordflow">if</span> (newObject == <a class="code" href="_rexx_core_8h.html#a181a36438ba4535dd7d22ab63239d1e1">OREF_NULL</a>)</div>
<div class="line"><a name="l01168"></a><span class="lineno"> 1168</span>&#160;            {</div>
<div class="line"><a name="l01169"></a><span class="lineno"> 1169</span>&#160;                <span class="comment">// We have a recovery segment in our back pocket, but this</span></div>
<div class="line"><a name="l01170"></a><span class="lineno"> 1170</span>&#160;                <span class="comment">// is needed to allow us to actually report that we have an</span></div>
<div class="line"><a name="l01171"></a><span class="lineno"> 1171</span>&#160;                <span class="comment">// out of memory condition. We add this to the segment set, but</span></div>
<div class="line"><a name="l01172"></a><span class="lineno"> 1172</span>&#160;                <span class="comment">// we will not try to use it to satisfy this request. We need this</span></div>
<div class="line"><a name="l01173"></a><span class="lineno"> 1173</span>&#160;                <span class="comment">// to keep from crashing.</span></div>
<div class="line"><a name="l01174"></a><span class="lineno"> 1174</span>&#160;                <span class="keywordflow">if</span> (<a class="code" href="class_normal_segment_set.html#a46247417b1f4b4fece9559c00c3328ef">recoverSegment</a> != NULL)</div>
<div class="line"><a name="l01175"></a><span class="lineno"> 1175</span>&#160;                {</div>
<div class="line"><a name="l01176"></a><span class="lineno"> 1176</span>&#160;                    <a class="code" href="class_memory_segment_set.html#a6636fce68844e8349e24f70d2e0b3ec6">addSegment</a>(<a class="code" href="class_normal_segment_set.html#a46247417b1f4b4fece9559c00c3328ef">recoverSegment</a>);</div>
<div class="line"><a name="l01177"></a><span class="lineno"> 1177</span>&#160;                    <a class="code" href="class_normal_segment_set.html#a46247417b1f4b4fece9559c00c3328ef">recoverSegment</a> = NULL;</div>
<div class="line"><a name="l01178"></a><span class="lineno"> 1178</span>&#160;                }</div>
<div class="line"><a name="l01179"></a><span class="lineno"> 1179</span>&#160; </div>
<div class="line"><a name="l01180"></a><span class="lineno"> 1180</span>&#160;                <span class="comment">// if we have gone through all of that and still have nothing,</span></div>
<div class="line"><a name="l01181"></a><span class="lineno"> 1181</span>&#160;                <span class="comment">// this is a real out-of-memory situation.</span></div>
<div class="line"><a name="l01182"></a><span class="lineno"> 1182</span>&#160;                <span class="comment">// can&#39;t allocate, report resource error.</span></div>
<div class="line"><a name="l01183"></a><span class="lineno"> 1183</span>&#160;                <a class="code" href="_activity_manager_8hpp.html#ab278a90c36b1ea34f0d6a7e280799eaa">reportException</a>(<a class="code" href="_rexx_error_codes_8h.html#ab78d722675e696d37b9b75e363a8b358a7f886e2719ae8d2942954fb090f538eb">Error_System_resources</a>);</div>
<div class="line"><a name="l01184"></a><span class="lineno"> 1184</span>&#160;            }</div>
<div class="line"><a name="l01185"></a><span class="lineno"> 1185</span>&#160;        }</div>
<div class="line"><a name="l01186"></a><span class="lineno"> 1186</span>&#160;    }</div>
<div class="line"><a name="l01187"></a><span class="lineno"> 1187</span>&#160;    <span class="keywordflow">return</span> newObject;</div>
<div class="line"><a name="l01188"></a><span class="lineno"> 1188</span>&#160;}</div>
<div class="line"><a name="l01189"></a><span class="lineno"> 1189</span>&#160; </div>
<div class="line"><a name="l01190"></a><span class="lineno"> 1190</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l01191"></a><span class="lineno"> 1191</span>&#160;<span class="comment">/**</span></div>
<div class="line"><a name="l01192"></a><span class="lineno"> 1192</span>&#160;<span class="comment"> * Locate an object is the dead object cache maintained for large</span></div>
<div class="line"><a name="l01193"></a><span class="lineno"> 1193</span>&#160;<span class="comment"> * object allocations.</span></div>
<div class="line"><a name="l01194"></a><span class="lineno"> 1194</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l01195"></a><span class="lineno"> 1195</span>&#160;<span class="comment"> * @param allocationLength</span></div>
<div class="line"><a name="l01196"></a><span class="lineno"> 1196</span>&#160;<span class="comment"> *               The required object size.</span></div>
<div class="line"><a name="l01197"></a><span class="lineno"> 1197</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l01198"></a><span class="lineno"> 1198</span>&#160;<span class="comment"> * @return A located object form the dead space or NULL if unable to allocate.</span></div>
<div class="line"><a name="l01199"></a><span class="lineno"> 1199</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l01200"></a><span class="lineno"><a class="line" href="class_large_segment_set.html#a7038811a309f01aec8d4dbfc31d704d1"> 1200</a></span>&#160;<a class="code" href="class_rexx_internal_object.html">RexxInternalObject</a> *<a class="code" href="class_large_segment_set.html#a7038811a309f01aec8d4dbfc31d704d1">LargeSegmentSet::findObject</a>(<span class="keywordtype">size_t</span> allocationLength)</div>
<div class="line"><a name="l01201"></a><span class="lineno"> 1201</span>&#160;{</div>
<div class="line"><a name="l01202"></a><span class="lineno"> 1202</span>&#160;    <span class="comment">/* this is just a space-saving non-inline version of allocateObject */</span></div>
<div class="line"><a name="l01203"></a><span class="lineno"> 1203</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="class_large_segment_set.html#aecba2e06efa8817d3959456ab4562cb9">allocateObject</a>(allocationLength);</div>
<div class="line"><a name="l01204"></a><span class="lineno"> 1204</span>&#160;}</div>
<div class="line"><a name="l01205"></a><span class="lineno"> 1205</span>&#160; </div>
<div class="line"><a name="l01206"></a><span class="lineno"> 1206</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l01207"></a><span class="lineno"> 1207</span>&#160;<span class="comment">/**</span></div>
<div class="line"><a name="l01208"></a><span class="lineno"> 1208</span>&#160;<span class="comment"> * Handle a first-attempt allocation failure from the large block segment</span></div>
<div class="line"><a name="l01209"></a><span class="lineno"> 1209</span>&#160;<span class="comment"> * set. This will decide whether to expand and/or perofrom a garbage collection in</span></div>
<div class="line"><a name="l01210"></a><span class="lineno"> 1210</span>&#160;<span class="comment"> * order to allocate a block of the requested size.</span></div>
<div class="line"><a name="l01211"></a><span class="lineno"> 1211</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l01212"></a><span class="lineno"> 1212</span>&#160;<span class="comment"> * @param allocationLength</span></div>
<div class="line"><a name="l01213"></a><span class="lineno"> 1213</span>&#160;<span class="comment"> *               The size of the object that caused the original allocation failure.</span></div>
<div class="line"><a name="l01214"></a><span class="lineno"> 1214</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l01215"></a><span class="lineno"> 1215</span>&#160;<span class="comment"> * @return An allocated object. If unable to allocate, this raised the resource</span></div>
<div class="line"><a name="l01216"></a><span class="lineno"> 1216</span>&#160;<span class="comment"> *         exception.</span></div>
<div class="line"><a name="l01217"></a><span class="lineno"> 1217</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l01218"></a><span class="lineno"><a class="line" href="class_large_segment_set.html#af2e250f01d568897cac871dc75eed37c"> 1218</a></span>&#160;<a class="code" href="class_rexx_internal_object.html">RexxInternalObject</a> *<a class="code" href="class_large_segment_set.html#af2e250f01d568897cac871dc75eed37c">LargeSegmentSet::handleAllocationFailure</a>(<span class="keywordtype">size_t</span> allocationLength)</div>
<div class="line"><a name="l01219"></a><span class="lineno"> 1219</span>&#160;{</div>
<div class="line"><a name="l01220"></a><span class="lineno"> 1220</span>&#160;    <a class="code" href="class_memory_segment_set.html#a2f5846486a053e2563f99fe17d4f0455">memory</a>-&gt;<a class="code" href="class_memory_object.html#a4babf41ab5e88ec6773cae4ddc83ab10">verboseMessage</a>(<span class="stringliteral">&quot;Large object allocation failure for %zu bytes&quot;</span> <a class="code" href="unix_2_platform_definitions_8h.html#a58f38f0d2d91763ecd599af6f16291e6">line_end</a>, allocationLength);</div>
<div class="line"><a name="l01221"></a><span class="lineno"> 1221</span>&#160; </div>
<div class="line"><a name="l01222"></a><span class="lineno"> 1222</span>&#160;    <span class="comment">// Step 1, force a GC</span></div>
<div class="line"><a name="l01223"></a><span class="lineno"> 1223</span>&#160;    <a class="code" href="class_memory_segment_set.html#a2f5846486a053e2563f99fe17d4f0455">memory</a>-&gt;<a class="code" href="class_memory_object.html#a7a1e9d3dc36b531b0f5d621a839df6ff">collect</a>();</div>
<div class="line"><a name="l01224"></a><span class="lineno"> 1224</span>&#160;    <span class="comment">// Step 2, now that we have good GC data, decide if we need to adjust</span></div>
<div class="line"><a name="l01225"></a><span class="lineno"> 1225</span>&#160;    <span class="comment">// the heap size.</span></div>
<div class="line"><a name="l01226"></a><span class="lineno"> 1226</span>&#160;    <a class="code" href="class_memory_segment_set.html#a11b567e97ec08847b5f4c4cd01bceafc">adjustMemorySize</a>();</div>
<div class="line"><a name="l01227"></a><span class="lineno"> 1227</span>&#160;    <span class="comment">// Step 2, see if can allocate now</span></div>
<div class="line"><a name="l01228"></a><span class="lineno"> 1228</span>&#160;    <a class="code" href="class_rexx_internal_object.html">RexxInternalObject</a> *newObject = <a class="code" href="class_large_segment_set.html#a7038811a309f01aec8d4dbfc31d704d1">findObject</a>(allocationLength);</div>
<div class="line"><a name="l01229"></a><span class="lineno"> 1229</span>&#160;    <span class="comment">// Nothing in the current space?</span></div>
<div class="line"><a name="l01230"></a><span class="lineno"> 1230</span>&#160;    <span class="keywordflow">if</span> (newObject == <a class="code" href="_rexx_core_8h.html#a181a36438ba4535dd7d22ab63239d1e1">OREF_NULL</a>)</div>
<div class="line"><a name="l01231"></a><span class="lineno"> 1231</span>&#160;    {</div>
<div class="line"><a name="l01232"></a><span class="lineno"> 1232</span>&#160;        <span class="comment">// Step 4, force a heap expansion, if we can</span></div>
<div class="line"><a name="l01233"></a><span class="lineno"> 1233</span>&#160;        <span class="comment">// this is a more targeted size</span></div>
<div class="line"><a name="l01234"></a><span class="lineno"> 1234</span>&#160;        <a class="code" href="class_large_segment_set.html#ace7f34cf0d63489a930972159d52a3a6">expandSegmentSet</a>(allocationLength);</div>
<div class="line"><a name="l01235"></a><span class="lineno"> 1235</span>&#160;        <span class="comment">// Step 4, see if can allocate now */</span></div>
<div class="line"><a name="l01236"></a><span class="lineno"> 1236</span>&#160;        newObject = <a class="code" href="class_large_segment_set.html#a7038811a309f01aec8d4dbfc31d704d1">findObject</a>(allocationLength);</div>
<div class="line"><a name="l01237"></a><span class="lineno"> 1237</span>&#160;        <span class="comment">// still no luck?                    */</span></div>
<div class="line"><a name="l01238"></a><span class="lineno"> 1238</span>&#160;        <span class="keywordflow">if</span> (newObject == <a class="code" href="_rexx_core_8h.html#a181a36438ba4535dd7d22ab63239d1e1">OREF_NULL</a>)</div>
<div class="line"><a name="l01239"></a><span class="lineno"> 1239</span>&#160;        {</div>
<div class="line"><a name="l01240"></a><span class="lineno"> 1240</span>&#160;            <span class="comment">// We&#39;ll take one last chance.  We don&#39;t really like</span></div>
<div class="line"><a name="l01241"></a><span class="lineno"> 1241</span>&#160;            <span class="comment">// to do this, but we might be able to steal a block</span></div>
<div class="line"><a name="l01242"></a><span class="lineno"> 1242</span>&#160;            <span class="comment">// off of the normal allocation chain. We will managed</span></div>
<div class="line"><a name="l01243"></a><span class="lineno"> 1243</span>&#160;            <span class="comment">// this as one of ours until the next GC cycle.</span></div>
<div class="line"><a name="l01244"></a><span class="lineno"> 1244</span>&#160;            <a class="code" href="class_memory_segment_set.html#a2f5846486a053e2563f99fe17d4f0455">memory</a>-&gt;<a class="code" href="class_memory_object.html#a2f1ca2bd2c304e9211d3e02871d3191d">scavengeSegmentSets</a>(<span class="keyword">this</span>, allocationLength);</div>
<div class="line"><a name="l01245"></a><span class="lineno"> 1245</span>&#160;            <span class="comment">// Last chance, see if can allocate now</span></div>
<div class="line"><a name="l01246"></a><span class="lineno"> 1246</span>&#160;            newObject = <a class="code" href="class_large_segment_set.html#a7038811a309f01aec8d4dbfc31d704d1">findObject</a>(allocationLength);</div>
<div class="line"><a name="l01247"></a><span class="lineno"> 1247</span>&#160;            <span class="comment">// if still nothing, we are really and truly out of memory.</span></div>
<div class="line"><a name="l01248"></a><span class="lineno"> 1248</span>&#160;            <span class="keywordflow">if</span> (newObject == <a class="code" href="_rexx_core_8h.html#a181a36438ba4535dd7d22ab63239d1e1">OREF_NULL</a>)</div>
<div class="line"><a name="l01249"></a><span class="lineno"> 1249</span>&#160;            {</div>
<div class="line"><a name="l01250"></a><span class="lineno"> 1250</span>&#160;                <a class="code" href="_activity_manager_8hpp.html#ab278a90c36b1ea34f0d6a7e280799eaa">reportException</a>(<a class="code" href="_rexx_error_codes_8h.html#ab78d722675e696d37b9b75e363a8b358a7f886e2719ae8d2942954fb090f538eb">Error_System_resources</a>);</div>
<div class="line"><a name="l01251"></a><span class="lineno"> 1251</span>&#160;            }</div>
<div class="line"><a name="l01252"></a><span class="lineno"> 1252</span>&#160;        }</div>
<div class="line"><a name="l01253"></a><span class="lineno"> 1253</span>&#160;    }</div>
<div class="line"><a name="l01254"></a><span class="lineno"> 1254</span>&#160;    <span class="comment">// if we got a real object, count this....</span></div>
<div class="line"><a name="l01255"></a><span class="lineno"> 1255</span>&#160;    <span class="keywordflow">if</span> (newObject != <a class="code" href="_rexx_core_8h.html#a181a36438ba4535dd7d22ab63239d1e1">OREF_NULL</a>)</div>
<div class="line"><a name="l01256"></a><span class="lineno"> 1256</span>&#160;    {</div>
<div class="line"><a name="l01257"></a><span class="lineno"> 1257</span>&#160;        <a class="code" href="class_large_segment_set.html#a5e3a6cfdc23172c833c8bbf2227afa66">requests</a>++;</div>
<div class="line"><a name="l01258"></a><span class="lineno"> 1258</span>&#160;    }</div>
<div class="line"><a name="l01259"></a><span class="lineno"> 1259</span>&#160;    <span class="comment">// return our allocated object</span></div>
<div class="line"><a name="l01260"></a><span class="lineno"> 1260</span>&#160;    <span class="keywordflow">return</span> newObject;</div>
<div class="line"><a name="l01261"></a><span class="lineno"> 1261</span>&#160;}</div>
<div class="line"><a name="l01262"></a><span class="lineno"> 1262</span>&#160; </div>
<div class="line"><a name="l01263"></a><span class="lineno"> 1263</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l01264"></a><span class="lineno"> 1264</span>&#160;<span class="comment">/**</span></div>
<div class="line"><a name="l01265"></a><span class="lineno"> 1265</span>&#160;<span class="comment"> * Handle a first-attempt allocation failure from the single</span></div>
<div class="line"><a name="l01266"></a><span class="lineno"> 1266</span>&#160;<span class="comment"> * object segment set. A failure here means we were unable to obtain</span></div>
<div class="line"><a name="l01267"></a><span class="lineno"> 1267</span>&#160;<span class="comment"> * a block of the required size from the system. Our only option</span></div>
<div class="line"><a name="l01268"></a><span class="lineno"> 1268</span>&#160;<span class="comment"> * now is to force a garbage collection which might free up enough</span></div>
<div class="line"><a name="l01269"></a><span class="lineno"> 1269</span>&#160;<span class="comment"> * memory that the system can fullfil the request.</span></div>
<div class="line"><a name="l01270"></a><span class="lineno"> 1270</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l01271"></a><span class="lineno"> 1271</span>&#160;<span class="comment"> * @param allocationLength</span></div>
<div class="line"><a name="l01272"></a><span class="lineno"> 1272</span>&#160;<span class="comment"> *               The size of the object that caused the original allocation failure.</span></div>
<div class="line"><a name="l01273"></a><span class="lineno"> 1273</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l01274"></a><span class="lineno"> 1274</span>&#160;<span class="comment"> * @return An allocated object. If unable to allocate, this raised the resource</span></div>
<div class="line"><a name="l01275"></a><span class="lineno"> 1275</span>&#160;<span class="comment"> *         exception.</span></div>
<div class="line"><a name="l01276"></a><span class="lineno"> 1276</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l01277"></a><span class="lineno"><a class="line" href="class_single_object_segment_set.html#ac7dcc7066403c1136641e682a60d6ff9"> 1277</a></span>&#160;<a class="code" href="class_rexx_internal_object.html">RexxInternalObject</a> *<a class="code" href="class_single_object_segment_set.html#ac7dcc7066403c1136641e682a60d6ff9">SingleObjectSegmentSet::handleAllocationFailure</a>(<span class="keywordtype">size_t</span> allocationLength)</div>
<div class="line"><a name="l01278"></a><span class="lineno"> 1278</span>&#160;{</div>
<div class="line"><a name="l01279"></a><span class="lineno"> 1279</span>&#160;    <a class="code" href="class_memory_segment_set.html#a2f5846486a053e2563f99fe17d4f0455">memory</a>-&gt;<a class="code" href="class_memory_object.html#a4babf41ab5e88ec6773cae4ddc83ab10">verboseMessage</a>(<span class="stringliteral">&quot;Single object allocation failure for %zu bytes&quot;</span> <a class="code" href="unix_2_platform_definitions_8h.html#a58f38f0d2d91763ecd599af6f16291e6">line_end</a>, allocationLength);</div>
<div class="line"><a name="l01280"></a><span class="lineno"> 1280</span>&#160; </div>
<div class="line"><a name="l01281"></a><span class="lineno"> 1281</span>&#160;    <span class="comment">// to ahead and do the collection. If we&#39;re lucky, we can free up enough memory</span></div>
<div class="line"><a name="l01282"></a><span class="lineno"> 1282</span>&#160;    <span class="comment">// to satisify this request.</span></div>
<div class="line"><a name="l01283"></a><span class="lineno"> 1283</span>&#160;    <a class="code" href="class_memory_segment_set.html#a2f5846486a053e2563f99fe17d4f0455">memory</a>-&gt;<a class="code" href="class_memory_object.html#a7a1e9d3dc36b531b0f5d621a839df6ff">collect</a>();</div>
<div class="line"><a name="l01284"></a><span class="lineno"> 1284</span>&#160; </div>
<div class="line"><a name="l01285"></a><span class="lineno"> 1285</span>&#160;    <span class="comment">// reset the allocations trap</span></div>
<div class="line"><a name="l01286"></a><span class="lineno"> 1286</span>&#160;    <a class="code" href="class_single_object_segment_set.html#afcd683bc1c99696b60fac438cca212dd">allocationsSinceLastGC</a> = 0;</div>
<div class="line"><a name="l01287"></a><span class="lineno"> 1287</span>&#160;    <a class="code" href="class_rexx_internal_object.html">RexxInternalObject</a> *newObject = <a class="code" href="class_single_object_segment_set.html#ae48b330218485bf525031dcf5901f91a">allocateObject</a>(allocationLength);</div>
<div class="line"><a name="l01288"></a><span class="lineno"> 1288</span>&#160;    <span class="comment">// if still nothing, we are really and truly out of memory.</span></div>
<div class="line"><a name="l01289"></a><span class="lineno"> 1289</span>&#160;    <span class="keywordflow">if</span> (newObject == <a class="code" href="_rexx_core_8h.html#a181a36438ba4535dd7d22ab63239d1e1">OREF_NULL</a>)</div>
<div class="line"><a name="l01290"></a><span class="lineno"> 1290</span>&#160;    {</div>
<div class="line"><a name="l01291"></a><span class="lineno"> 1291</span>&#160;        <a class="code" href="_activity_manager_8hpp.html#ab278a90c36b1ea34f0d6a7e280799eaa">reportException</a>(<a class="code" href="_rexx_error_codes_8h.html#ab78d722675e696d37b9b75e363a8b358a7f886e2719ae8d2942954fb090f538eb">Error_System_resources</a>);</div>
<div class="line"><a name="l01292"></a><span class="lineno"> 1292</span>&#160;    }</div>
<div class="line"><a name="l01293"></a><span class="lineno"> 1293</span>&#160;    <span class="keywordflow">return</span> newObject;</div>
<div class="line"><a name="l01294"></a><span class="lineno"> 1294</span>&#160;}</div>
<div class="line"><a name="l01295"></a><span class="lineno"> 1295</span>&#160; </div>
<div class="line"><a name="l01296"></a><span class="lineno"> 1296</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l01297"></a><span class="lineno"> 1297</span>&#160;<span class="comment">/**</span></div>
<div class="line"><a name="l01298"></a><span class="lineno"> 1298</span>&#160;<span class="comment"> * Locate an object is the dead object cache maintained for old space</span></div>
<div class="line"><a name="l01299"></a><span class="lineno"> 1299</span>&#160;<span class="comment"> * object allocations.</span></div>
<div class="line"><a name="l01300"></a><span class="lineno"> 1300</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l01301"></a><span class="lineno"> 1301</span>&#160;<span class="comment"> * @param allocationLength</span></div>
<div class="line"><a name="l01302"></a><span class="lineno"> 1302</span>&#160;<span class="comment"> *               The required object size</span></div>
<div class="line"><a name="l01303"></a><span class="lineno"> 1303</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l01304"></a><span class="lineno"> 1304</span>&#160;<span class="comment"> * @return An allocated object, or NULL if not enough there.</span></div>
<div class="line"><a name="l01305"></a><span class="lineno"> 1305</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l01306"></a><span class="lineno"><a class="line" href="class_old_space_segment_set.html#aa668483032d422f659a0ca9311c76aef"> 1306</a></span>&#160;<a class="code" href="class_rexx_internal_object.html">RexxInternalObject</a> *<a class="code" href="class_old_space_segment_set.html#aa668483032d422f659a0ca9311c76aef">OldSpaceSegmentSet::findObject</a>(<span class="keywordtype">size_t</span> allocationLength)</div>
<div class="line"><a name="l01307"></a><span class="lineno"> 1307</span>&#160;{</div>
<div class="line"><a name="l01308"></a><span class="lineno"> 1308</span>&#160;    <span class="comment">// go through the LARGEDEAD object looking for the 1st one we can</span></div>
<div class="line"><a name="l01309"></a><span class="lineno"> 1309</span>&#160;    <span class="comment">// use</span></div>
<div class="line"><a name="l01310"></a><span class="lineno"> 1310</span>&#160;    <a class="code" href="class_dead_object.html">DeadObject</a> *largeObject = <a class="code" href="class_old_space_segment_set.html#abc73af5db4e6fe3ef7afe56cbd752660">deadCache</a>.<a class="code" href="class_dead_object_pool.html#ad9bfe30ddf396486fa47c7e90f383d6b">findFit</a>(allocationLength);</div>
<div class="line"><a name="l01311"></a><span class="lineno"> 1311</span>&#160;    <span class="comment">// if we found something, split off the ammount we need and return it.</span></div>
<div class="line"><a name="l01312"></a><span class="lineno"> 1312</span>&#160;    <span class="keywordflow">if</span> (largeObject != NULL)</div>
<div class="line"><a name="l01313"></a><span class="lineno"> 1313</span>&#160;    {</div>
<div class="line"><a name="l01314"></a><span class="lineno"> 1314</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="class_memory_segment_set.html#ab3cfbce21761e05940b967acf23ab5d4">splitDeadObject</a>(largeObject, allocationLength, <a class="code" href="class_memory.html#a9550606e99df158757e045e7739c3e7f">Memory::LargeAllocationUnit</a>);</div>
<div class="line"><a name="l01315"></a><span class="lineno"> 1315</span>&#160;    }</div>
<div class="line"><a name="l01316"></a><span class="lineno"> 1316</span>&#160;    <span class="comment">// nothing of sufficient size here.</span></div>
<div class="line"><a name="l01317"></a><span class="lineno"> 1317</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="_rexx_core_8h.html#a181a36438ba4535dd7d22ab63239d1e1">OREF_NULL</a>;</div>
<div class="line"><a name="l01318"></a><span class="lineno"> 1318</span>&#160;}</div>
<div class="line"><a name="l01319"></a><span class="lineno"> 1319</span>&#160; </div>
<div class="line"><a name="l01320"></a><span class="lineno"> 1320</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l01321"></a><span class="lineno"> 1321</span>&#160;<span class="comment">/**</span></div>
<div class="line"><a name="l01322"></a><span class="lineno"> 1322</span>&#160;<span class="comment"> * Allocate an extremely large object. These are contained in a single</span></div>
<div class="line"><a name="l01323"></a><span class="lineno"> 1323</span>&#160;<span class="comment"> * segment so that we can release the large blocks of storage once</span></div>
<div class="line"><a name="l01324"></a><span class="lineno"> 1324</span>&#160;<span class="comment"> * the object is dead.</span></div>
<div class="line"><a name="l01325"></a><span class="lineno"> 1325</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l01326"></a><span class="lineno"> 1326</span>&#160;<span class="comment"> * @param requestLength</span></div>
<div class="line"><a name="l01327"></a><span class="lineno"> 1327</span>&#160;<span class="comment"> *               The size of the required object.</span></div>
<div class="line"><a name="l01328"></a><span class="lineno"> 1328</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l01329"></a><span class="lineno"> 1329</span>&#160;<span class="comment"> * @return A newly allocated object or NULL for an allocation failure.</span></div>
<div class="line"><a name="l01330"></a><span class="lineno"> 1330</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l01331"></a><span class="lineno"><a class="line" href="class_single_object_segment_set.html#ae48b330218485bf525031dcf5901f91a"> 1331</a></span>&#160;<a class="code" href="class_rexx_internal_object.html">RexxInternalObject</a> *<a class="code" href="class_single_object_segment_set.html#ae48b330218485bf525031dcf5901f91a">SingleObjectSegmentSet::allocateObject</a>(<span class="keywordtype">size_t</span> requestLength)</div>
<div class="line"><a name="l01332"></a><span class="lineno"> 1332</span>&#160;{</div>
<div class="line"><a name="l01333"></a><span class="lineno"> 1333</span>&#160;    <a class="code" href="class_memory_segment_set.html#a2f5846486a053e2563f99fe17d4f0455">memory</a>-&gt;<a class="code" href="class_memory_object.html#a4babf41ab5e88ec6773cae4ddc83ab10">verboseMessage</a>(<span class="stringliteral">&quot;Allocating a single segment object of %zu bytes to %s&quot;</span> <a class="code" href="unix_2_platform_definitions_8h.html#a58f38f0d2d91763ecd599af6f16291e6">line_end</a>, requestLength, <a class="code" href="class_memory_segment_set.html#a145bf8586274f7d4a804141e4fa67623">name</a>);</div>
<div class="line"><a name="l01334"></a><span class="lineno"> 1334</span>&#160; </div>
<div class="line"><a name="l01335"></a><span class="lineno"> 1335</span>&#160;    <span class="comment">// it is possible that we could have a pattern where a large number of</span></div>
<div class="line"><a name="l01336"></a><span class="lineno"> 1336</span>&#160;    <span class="comment">// short-lived objects get allocated without triggering a garbage collection. Since</span></div>
<div class="line"><a name="l01337"></a><span class="lineno"> 1337</span>&#160;    <span class="comment">// this segment set expands for each object allocation, we would never trigger a GC</span></div>
<div class="line"><a name="l01338"></a><span class="lineno"> 1338</span>&#160;    <span class="comment">// until we had an actual allocation failure. It is better to be proactive and</span></div>
<div class="line"><a name="l01339"></a><span class="lineno"> 1339</span>&#160;    <span class="comment">// prune the dead segments before attempting the allocation if they have been</span></div>
<div class="line"><a name="l01340"></a><span class="lineno"> 1340</span>&#160;    <span class="comment">// accumulating</span></div>
<div class="line"><a name="l01341"></a><span class="lineno"> 1341</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="class_single_object_segment_set.html#afcd683bc1c99696b60fac438cca212dd">allocationsSinceLastGC</a> &gt; <a class="code" href="class_single_object_segment_set.html#a373a6818b73e802b93b18ee11a031ef7">ForceGCThreshold</a>)</div>
<div class="line"><a name="l01342"></a><span class="lineno"> 1342</span>&#160;    {</div>
<div class="line"><a name="l01343"></a><span class="lineno"> 1343</span>&#160;        <a class="code" href="class_memory_segment_set.html#a2f5846486a053e2563f99fe17d4f0455">memory</a>-&gt;<a class="code" href="class_memory_object.html#a4babf41ab5e88ec6773cae4ddc83ab10">verboseMessage</a>(<span class="stringliteral">&quot;Single object force threshold reached&quot;</span> <a class="code" href="unix_2_platform_definitions_8h.html#a58f38f0d2d91763ecd599af6f16291e6">line_end</a>);</div>
<div class="line"><a name="l01344"></a><span class="lineno"> 1344</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="_rexx_core_8h.html#a181a36438ba4535dd7d22ab63239d1e1">OREF_NULL</a>;       <span class="comment">// this will trigger the GC</span></div>
<div class="line"><a name="l01345"></a><span class="lineno"> 1345</span>&#160;    }</div>
<div class="line"><a name="l01346"></a><span class="lineno"> 1346</span>&#160; </div>
<div class="line"><a name="l01347"></a><span class="lineno"> 1347</span>&#160;    <span class="comment">// allocate a memory segment sufficiently large for the requested object</span></div>
<div class="line"><a name="l01348"></a><span class="lineno"> 1348</span>&#160;    <a class="code" href="class_memory_segment.html">MemorySegment</a> *segment = <a class="code" href="class_single_object_segment_set.html#a6adda9dd24d13a15d7ab3e126f63fe3f">allocateSegment</a>(requestLength, requestLength);</div>
<div class="line"><a name="l01349"></a><span class="lineno"> 1349</span>&#160;    <span class="comment">// a real allocation failure, time to take out the trash</span></div>
<div class="line"><a name="l01350"></a><span class="lineno"> 1350</span>&#160;    <span class="keywordflow">if</span> (segment == NULL)</div>
<div class="line"><a name="l01351"></a><span class="lineno"> 1351</span>&#160;    {</div>
<div class="line"><a name="l01352"></a><span class="lineno"> 1352</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="_rexx_core_8h.html#a181a36438ba4535dd7d22ab63239d1e1">OREF_NULL</a>;</div>
<div class="line"><a name="l01353"></a><span class="lineno"> 1353</span>&#160;    }</div>
<div class="line"><a name="l01354"></a><span class="lineno"> 1354</span>&#160; </div>
<div class="line"><a name="l01355"></a><span class="lineno"> 1355</span>&#160;    <a class="code" href="class_single_object_segment_set.html#afcd683bc1c99696b60fac438cca212dd">allocationsSinceLastGC</a>++;          <span class="comment">// update the allocation counters</span></div>
<div class="line"><a name="l01356"></a><span class="lineno"> 1356</span>&#160;    <a class="code" href="class_single_object_segment_set.html#a7fbf0dfaa86f3c6ff79abd00dbdb3393">allocationCount</a>++;</div>
<div class="line"><a name="l01357"></a><span class="lineno"> 1357</span>&#160; </div>
<div class="line"><a name="l01358"></a><span class="lineno"> 1358</span>&#160;    <a class="code" href="class_memory_segment_set.html#a2f5846486a053e2563f99fe17d4f0455">memory</a>-&gt;<a class="code" href="class_memory_object.html#a4babf41ab5e88ec6773cae4ddc83ab10">verboseMessage</a>(<span class="stringliteral">&quot;Adding a segment of %zu bytes to %s&quot;</span> <a class="code" href="unix_2_platform_definitions_8h.html#a58f38f0d2d91763ecd599af6f16291e6">line_end</a>, segment-&gt;<a class="code" href="class_memory_segment.html#a2ddc33173de811d5a32dadab64218e69">size</a>(), <a class="code" href="class_memory_segment_set.html#a145bf8586274f7d4a804141e4fa67623">name</a>);</div>
<div class="line"><a name="l01359"></a><span class="lineno"> 1359</span>&#160; </div>
<div class="line"><a name="l01360"></a><span class="lineno"> 1360</span>&#160;    <span class="comment">// we don&#39;t attempt and recombinations in this set, so just push it on</span></div>
<div class="line"><a name="l01361"></a><span class="lineno"> 1361</span>&#160;    <span class="comment">// to the head of our segment chain</span></div>
<div class="line"><a name="l01362"></a><span class="lineno"> 1362</span>&#160;    <a class="code" href="class_memory_segment_set.html#a124455ab929d1b2eb35e7a1b7f19e743">anchor</a>.<a class="code" href="class_memory_segment_header.html#a79d5ea5c0d969eaea4442d3fed563090">next</a>-&gt;<a class="code" href="class_memory_segment.html#af5eedb6412193837c0e0bdc6f909f7a7">insertBefore</a>(segment);</div>
<div class="line"><a name="l01363"></a><span class="lineno"> 1363</span>&#160;    <span class="comment">// now create a dead object in the segment, that is our return value</span></div>
<div class="line"><a name="l01364"></a><span class="lineno"> 1364</span>&#160;    <a class="code" href="class_dead_object.html">DeadObject</a> *ptr = segment-&gt;<a class="code" href="class_memory_segment.html#aac924598f86a8bfb94375e83784238a4">createDeadObject</a>();</div>
<div class="line"><a name="l01365"></a><span class="lineno"> 1365</span>&#160;    <span class="keywordflow">return</span> (<a class="code" href="class_rexx_internal_object.html">RexxInternalObject</a> *)ptr;</div>
<div class="line"><a name="l01366"></a><span class="lineno"> 1366</span>&#160;}</div>
<div class="line"><a name="l01367"></a><span class="lineno"> 1367</span>&#160; </div>
<div class="line"><a name="l01368"></a><span class="lineno"> 1368</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l01369"></a><span class="lineno"> 1369</span>&#160;<span class="comment">/**</span></div>
<div class="line"><a name="l01370"></a><span class="lineno"> 1370</span>&#160;<span class="comment"> * Allocate an object from the old space.  This is a very simple</span></div>
<div class="line"><a name="l01371"></a><span class="lineno"> 1371</span>&#160;<span class="comment"> * management strategy, with no heroic efforts made to locate memory.  Since</span></div>
<div class="line"><a name="l01372"></a><span class="lineno"> 1372</span>&#160;<span class="comment"> * objects here can only come from the OldSpace area, there is no garbage</span></div>
<div class="line"><a name="l01373"></a><span class="lineno"> 1373</span>&#160;<span class="comment"> * collection forced for failures.</span></div>
<div class="line"><a name="l01374"></a><span class="lineno"> 1374</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l01375"></a><span class="lineno"> 1375</span>&#160;<span class="comment"> * @param requestLength</span></div>
<div class="line"><a name="l01376"></a><span class="lineno"> 1376</span>&#160;<span class="comment"> *               The required object length.</span></div>
<div class="line"><a name="l01377"></a><span class="lineno"> 1377</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l01378"></a><span class="lineno"> 1378</span>&#160;<span class="comment"> * @return An object of appropriate size or NULL if not enough space.</span></div>
<div class="line"><a name="l01379"></a><span class="lineno"> 1379</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l01380"></a><span class="lineno"><a class="line" href="class_old_space_segment_set.html#adcca0179918159e458b4be6a128d8037"> 1380</a></span>&#160;<a class="code" href="class_rexx_internal_object.html">RexxInternalObject</a> *<a class="code" href="class_old_space_segment_set.html#adcca0179918159e458b4be6a128d8037">OldSpaceSegmentSet::allocateObject</a>(<span class="keywordtype">size_t</span> requestLength)</div>
<div class="line"><a name="l01381"></a><span class="lineno"> 1381</span>&#160;{</div>
<div class="line"><a name="l01382"></a><span class="lineno"> 1382</span>&#160;    <span class="comment">// round this allocation up to the appropriate large boundary</span></div>
<div class="line"><a name="l01383"></a><span class="lineno"> 1383</span>&#160;    <span class="keywordtype">size_t</span> allocationLength = <a class="code" href="class_memory.html#abedd5f4428b3a55ac3ef535d96f5d599">Memory::roundLargeObjectAllocation</a>(requestLength);</div>
<div class="line"><a name="l01384"></a><span class="lineno"> 1384</span>&#160;    <span class="comment">// Step 1, try to find an object in the current heap.</span></div>
<div class="line"><a name="l01385"></a><span class="lineno"> 1385</span>&#160;    <a class="code" href="class_rexx_internal_object.html">RexxInternalObject</a> *newObject = <a class="code" href="class_old_space_segment_set.html#aa668483032d422f659a0ca9311c76aef">findObject</a>(allocationLength);</div>
<div class="line"><a name="l01386"></a><span class="lineno"> 1386</span>&#160;    <span class="comment">// can&#39;t allocate one? Add more space and try again. We don&#39;t GC this space.</span></div>
<div class="line"><a name="l01387"></a><span class="lineno"> 1387</span>&#160;    <span class="keywordflow">if</span> (newObject == <a class="code" href="_rexx_core_8h.html#a181a36438ba4535dd7d22ab63239d1e1">OREF_NULL</a>)</div>
<div class="line"><a name="l01388"></a><span class="lineno"> 1388</span>&#160;    {</div>
<div class="line"><a name="l01389"></a><span class="lineno"> 1389</span>&#160;        <span class="comment">// add space to this and try again. Note that this is only used during image builds,</span></div>
<div class="line"><a name="l01390"></a><span class="lineno"> 1390</span>&#160;        <span class="comment">// which are a little more controlled, so we expect this to succeed.</span></div>
<div class="line"><a name="l01391"></a><span class="lineno"> 1391</span>&#160;        <a class="code" href="class_memory_segment_set.html#aeedd3721553ad8312d07ad4895166265">newSegment</a>(allocationLength, allocationLength);</div>
<div class="line"><a name="l01392"></a><span class="lineno"> 1392</span>&#160;        newObject = <a class="code" href="class_old_space_segment_set.html#aa668483032d422f659a0ca9311c76aef">findObject</a>(allocationLength);</div>
<div class="line"><a name="l01393"></a><span class="lineno"> 1393</span>&#160;    }</div>
<div class="line"><a name="l01394"></a><span class="lineno"> 1394</span>&#160;    <span class="keywordflow">return</span> newObject;</div>
<div class="line"><a name="l01395"></a><span class="lineno"> 1395</span>&#160;}</div>
<div class="line"><a name="l01396"></a><span class="lineno"> 1396</span>&#160; </div>
<div class="line"><a name="l01397"></a><span class="lineno"> 1397</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l01398"></a><span class="lineno"> 1398</span>&#160;<span class="comment">/**</span></div>
<div class="line"><a name="l01399"></a><span class="lineno"> 1399</span>&#160;<span class="comment"> * Find the largest segment in the segment set.</span></div>
<div class="line"><a name="l01400"></a><span class="lineno"> 1400</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l01401"></a><span class="lineno"> 1401</span>&#160;<span class="comment"> * @return The largest segment in the set (this assumes the segment set has</span></div>
<div class="line"><a name="l01402"></a><span class="lineno"> 1402</span>&#160;<span class="comment"> *         at least one allocated segment).</span></div>
<div class="line"><a name="l01403"></a><span class="lineno"> 1403</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l01404"></a><span class="lineno"><a class="line" href="class_memory_segment_set.html#af79ceb6b8f31b9852445a6a07f51f605"> 1404</a></span>&#160;<a class="code" href="class_memory_segment.html">MemorySegment</a> *<a class="code" href="class_memory_segment_set.html#af79ceb6b8f31b9852445a6a07f51f605">MemorySegmentSet::largestActiveSegment</a>()</div>
<div class="line"><a name="l01405"></a><span class="lineno"> 1405</span>&#160;{</div>
<div class="line"><a name="l01406"></a><span class="lineno"> 1406</span>&#160;    <a class="code" href="class_memory_segment.html">MemorySegment</a> *largest = &amp;<a class="code" href="class_memory_segment_set.html#a124455ab929d1b2eb35e7a1b7f19e743">anchor</a>;</div>
<div class="line"><a name="l01407"></a><span class="lineno"> 1407</span>&#160;    <a class="code" href="class_memory_segment.html">MemorySegment</a> *segment;</div>
<div class="line"><a name="l01408"></a><span class="lineno"> 1408</span>&#160; </div>
<div class="line"><a name="l01409"></a><span class="lineno"> 1409</span>&#160;    <span class="keywordflow">for</span> (segment = <a class="code" href="class_memory_segment_set.html#a124455ab929d1b2eb35e7a1b7f19e743">anchor</a>.<a class="code" href="class_memory_segment_header.html#a79d5ea5c0d969eaea4442d3fed563090">next</a>; segment-&gt;<a class="code" href="class_memory_segment.html#a724c1d54f0b5e272fcdfb4f63cb90ac3">isReal</a>(); segment = segment-&gt;<a class="code" href="class_memory_segment_header.html#a79d5ea5c0d969eaea4442d3fed563090">next</a>)</div>
<div class="line"><a name="l01410"></a><span class="lineno"> 1410</span>&#160;    {</div>
<div class="line"><a name="l01411"></a><span class="lineno"> 1411</span>&#160;        <span class="keywordflow">if</span> (segment-&gt;<a class="code" href="class_memory_segment.html#a2ddc33173de811d5a32dadab64218e69">size</a>() &gt; largest-&gt;<a class="code" href="class_memory_segment.html#a2ddc33173de811d5a32dadab64218e69">size</a>())</div>
<div class="line"><a name="l01412"></a><span class="lineno"> 1412</span>&#160;        {</div>
<div class="line"><a name="l01413"></a><span class="lineno"> 1413</span>&#160;            largest = segment;</div>
<div class="line"><a name="l01414"></a><span class="lineno"> 1414</span>&#160;        }</div>
<div class="line"><a name="l01415"></a><span class="lineno"> 1415</span>&#160;    }</div>
<div class="line"><a name="l01416"></a><span class="lineno"> 1416</span>&#160; </div>
<div class="line"><a name="l01417"></a><span class="lineno"> 1417</span>&#160;    <span class="comment">// we return this unconditionally, as our anchor segment will</span></div>
<div class="line"><a name="l01418"></a><span class="lineno"> 1418</span>&#160;    <span class="comment">// report a size of zero.</span></div>
<div class="line"><a name="l01419"></a><span class="lineno"> 1419</span>&#160;    <span class="keywordflow">return</span> largest;</div>
<div class="line"><a name="l01420"></a><span class="lineno"> 1420</span>&#160;}</div>
<div class="line"><a name="l01421"></a><span class="lineno"> 1421</span>&#160; </div>
<div class="line"><a name="l01422"></a><span class="lineno"> 1422</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l01423"></a><span class="lineno"> 1423</span>&#160;<span class="comment">/**</span></div>
<div class="line"><a name="l01424"></a><span class="lineno"> 1424</span>&#160;<span class="comment"> * The large allocation heap only handles requests up to the</span></div>
<div class="line"><a name="l01425"></a><span class="lineno"> 1425</span>&#160;<span class="comment"> * size of a Normal segment. Therefore, we will always add in</span></div>
<div class="line"><a name="l01426"></a><span class="lineno"> 1426</span>&#160;<span class="comment"> * large segment increments. If that fails, we will try adding a</span></div>
<div class="line"><a name="l01427"></a><span class="lineno"> 1427</span>&#160;<span class="comment"> * segment just slightly larger than the request size.</span></div>
<div class="line"><a name="l01428"></a><span class="lineno"> 1428</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l01429"></a><span class="lineno"> 1429</span>&#160;<span class="comment"> * @param allocationLength</span></div>
<div class="line"><a name="l01430"></a><span class="lineno"> 1430</span>&#160;<span class="comment"> *               The allocation size that caused the allocation failure.</span></div>
<div class="line"><a name="l01431"></a><span class="lineno"> 1431</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l01432"></a><span class="lineno"><a class="line" href="class_large_segment_set.html#ace7f34cf0d63489a930972159d52a3a6"> 1432</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="class_large_segment_set.html#ace7f34cf0d63489a930972159d52a3a6">LargeSegmentSet::expandSegmentSet</a>(<span class="keywordtype">size_t</span> allocationLength)</div>
<div class="line"><a name="l01433"></a><span class="lineno"> 1433</span>&#160;{</div>
<div class="line"><a name="l01434"></a><span class="lineno"> 1434</span>&#160; </div>
<div class="line"><a name="l01435"></a><span class="lineno"> 1435</span>&#160;    <span class="comment">// We manage allocations in mid-range sizes here. The request will</span></div>
<div class="line"><a name="l01436"></a><span class="lineno"> 1436</span>&#160;    <span class="comment">// always be smaller than our default expansion size, so that is our</span></div>
<div class="line"><a name="l01437"></a><span class="lineno"> 1437</span>&#160;    <span class="comment">// first attempt. If that fails, we&#39;ll round to a page boundary and</span></div>
<div class="line"><a name="l01438"></a><span class="lineno"> 1438</span>&#160;    <span class="comment">// try for the smaller size</span></div>
<div class="line"><a name="l01439"></a><span class="lineno"> 1439</span>&#160;    <a class="code" href="class_memory_segment_set.html#a2f5846486a053e2563f99fe17d4f0455">memory</a>-&gt;<a class="code" href="class_memory_object.html#a4babf41ab5e88ec6773cae4ddc83ab10">verboseMessage</a>(<span class="stringliteral">&quot;Expanding large segment set by %d&quot;</span> <a class="code" href="unix_2_platform_definitions_8h.html#a58f38f0d2d91763ecd599af6f16291e6">line_end</a>, <a class="code" href="class_memory_segment_set.html#a415eb2594ee04255b9f16b7c30131348">LargeSegmentDeadSpace</a>);</div>
<div class="line"><a name="l01440"></a><span class="lineno"> 1440</span>&#160;    <a class="code" href="class_memory_segment_set.html#aeedd3721553ad8312d07ad4895166265">newSegment</a>(<a class="code" href="class_memory_segment_set.html#a415eb2594ee04255b9f16b7c30131348">LargeSegmentDeadSpace</a>, <a class="code" href="class_memory_segment.html#aa1dde8093a907fb0932bca96fa8d8627">MemorySegment::roundSegmentBoundary</a>(allocationLength));</div>
<div class="line"><a name="l01441"></a><span class="lineno"> 1441</span>&#160;}</div>
<div class="line"><a name="l01442"></a><span class="lineno"> 1442</span>&#160; </div>
<div class="line"><a name="l01443"></a><span class="lineno"> 1443</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l01444"></a><span class="lineno"> 1444</span>&#160;<span class="comment">/**</span></div>
<div class="line"><a name="l01445"></a><span class="lineno"> 1445</span>&#160;<span class="comment"> * Accumulate memory statistics for a segment</span></div>
<div class="line"><a name="l01446"></a><span class="lineno"> 1446</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l01447"></a><span class="lineno"> 1447</span>&#160;<span class="comment"> * @param memStats Gather current statistics from each memory segment.</span></div>
<div class="line"><a name="l01448"></a><span class="lineno"> 1448</span>&#160;<span class="comment"> * @param stats</span></div>
<div class="line"><a name="l01449"></a><span class="lineno"> 1449</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l01450"></a><span class="lineno"><a class="line" href="class_memory_segment_set.html#abab6a3bfe74ce7d2ff87a934f667b6ab"> 1450</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="class_memory_segment_set.html#abab6a3bfe74ce7d2ff87a934f667b6ab">MemorySegmentSet::gatherStats</a>(<a class="code" href="class_memory_stats.html">MemoryStats</a> *memStats, <a class="code" href="class_segment_stats.html">SegmentStats</a> *stats)</div>
<div class="line"><a name="l01451"></a><span class="lineno"> 1451</span>&#160;{</div>
<div class="line"><a name="l01452"></a><span class="lineno"> 1452</span>&#160;    stats-&gt;<a class="code" href="class_segment_stats.html#a8568adaea65e4258ef4fb3e25c51ea4f">count</a> = <a class="code" href="class_memory_segment_set.html#a9e1c69fb1b32ca37d643bf839ae665b4">count</a>;</div>
<div class="line"><a name="l01453"></a><span class="lineno"> 1453</span>&#160; </div>
<div class="line"><a name="l01454"></a><span class="lineno"> 1454</span>&#160;    <a class="code" href="class_memory_segment.html">MemorySegment</a> *seg;</div>
<div class="line"><a name="l01455"></a><span class="lineno"> 1455</span>&#160;    <span class="keywordflow">for</span> (seg = <a class="code" href="class_memory_segment_set.html#a61ed7810741de1e17e28791f0ad673e2">first</a>(); seg != NULL; seg = <a class="code" href="class_memory_segment_set.html#aedcb4e8810fcd3236e073032b8529049">next</a>(seg))</div>
<div class="line"><a name="l01456"></a><span class="lineno"> 1456</span>&#160;    {</div>
<div class="line"><a name="l01457"></a><span class="lineno"> 1457</span>&#160;        seg-&gt;<a class="code" href="class_memory_segment.html#a32b221f5b8192e3c8f6179e786b49f62">gatherObjectStats</a>(memStats, stats);</div>
<div class="line"><a name="l01458"></a><span class="lineno"> 1458</span>&#160;        stats-&gt;<a class="code" href="class_segment_stats.html#a593319ffb90cc8b3116dbfaf3f499bb6">largestSegment</a> = std::max(stats-&gt;<a class="code" href="class_segment_stats.html#a593319ffb90cc8b3116dbfaf3f499bb6">largestSegment</a>, seg-&gt;<a class="code" href="class_memory_segment.html#a2ddc33173de811d5a32dadab64218e69">size</a>());</div>
<div class="line"><a name="l01459"></a><span class="lineno"> 1459</span>&#160;        stats-&gt;<a class="code" href="class_segment_stats.html#a01b51d8c43b4c967b3ed7c9c439cf470">smallestSegment</a> = std::max(stats-&gt;<a class="code" href="class_segment_stats.html#a01b51d8c43b4c967b3ed7c9c439cf470">smallestSegment</a>, seg-&gt;<a class="code" href="class_memory_segment.html#a2ddc33173de811d5a32dadab64218e69">size</a>());</div>
<div class="line"><a name="l01460"></a><span class="lineno"> 1460</span>&#160;    }</div>
<div class="line"><a name="l01461"></a><span class="lineno"> 1461</span>&#160;}</div>
<div class="line"><a name="l01462"></a><span class="lineno"> 1462</span>&#160; </div>
<div class="line"><a name="l01463"></a><span class="lineno"> 1463</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l01464"></a><span class="lineno"> 1464</span>&#160;<span class="comment">/**</span></div>
<div class="line"><a name="l01465"></a><span class="lineno"> 1465</span>&#160;<span class="comment"> * Perform a marking operation on all objects in a segment</span></div>
<div class="line"><a name="l01466"></a><span class="lineno"> 1466</span>&#160;<span class="comment"> * (only called for an image restore)</span></div>
<div class="line"><a name="l01467"></a><span class="lineno"> 1467</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l01468"></a><span class="lineno"><a class="line" href="class_memory_segment.html#af64ed95595657c43475b549e2f825279"> 1468</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="class_memory_segment.html#af64ed95595657c43475b549e2f825279">MemorySegment::markAllObjects</a>()</div>
<div class="line"><a name="l01469"></a><span class="lineno"> 1469</span>&#160;{</div>
<div class="line"><a name="l01470"></a><span class="lineno"> 1470</span>&#160;    <a class="code" href="class_rexx_internal_object.html">RexxInternalObject</a> *op = <a class="code" href="class_memory_segment.html#a4e532d1281baa23836e24b64e580298e">startObject</a>();</div>
<div class="line"><a name="l01471"></a><span class="lineno"> 1471</span>&#160;    <a class="code" href="class_rexx_internal_object.html">RexxInternalObject</a> *ep = <a class="code" href="class_memory_segment.html#aa489ab3956d7b3fefd4108dfe6641c6d">endObject</a>();</div>
<div class="line"><a name="l01472"></a><span class="lineno"> 1472</span>&#160;    <span class="keywordflow">while</span> (op &lt; ep)</div>
<div class="line"><a name="l01473"></a><span class="lineno"> 1473</span>&#160;    {</div>
<div class="line"><a name="l01474"></a><span class="lineno"> 1474</span>&#160;        <span class="comment">// all objects have an associated behaviour, make sure it is marked</span></div>
<div class="line"><a name="l01475"></a><span class="lineno"> 1475</span>&#160;        <a class="code" href="_rexx_memory_8hpp.html#ad740c29e8223b639f6f3fcbb910ce21a">memory_mark_general</a>(op-&gt;<a class="code" href="class_rexx_internal_object.html#ad3fef1db4de36cd64d4ef1cf03c9b992">behaviour</a>);</div>
<div class="line"><a name="l01476"></a><span class="lineno"> 1476</span>&#160; </div>
<div class="line"><a name="l01477"></a><span class="lineno"> 1477</span>&#160;        <span class="comment">// not every object has references to other objects (strings are</span></div>
<div class="line"><a name="l01478"></a><span class="lineno"> 1478</span>&#160;        <span class="comment">// a good example). We can skip calling the live method if we know they don&#39;t</span></div>
<div class="line"><a name="l01479"></a><span class="lineno"> 1479</span>&#160;        <span class="keywordflow">if</span> (op-&gt;<a class="code" href="class_rexx_internal_object.html#a66dac26647d4686e06dd66f083493a6c">hasReferences</a>())</div>
<div class="line"><a name="l01480"></a><span class="lineno"> 1480</span>&#160;        {</div>
<div class="line"><a name="l01481"></a><span class="lineno"> 1481</span>&#160;            <span class="comment">// yes, there are references, we need to fix them up.</span></div>
<div class="line"><a name="l01482"></a><span class="lineno"> 1482</span>&#160;            op-&gt;<a class="code" href="class_rexx_virtual_base.html#a2f55b3306d4d61a6ad8b7137a0bc4ad5">liveGeneral</a>(<a class="code" href="_object_class_8hpp.html#a09453535aa429cceaa131b911d4caa73a616602f628d1c90b4ef49d34ea01b820">RESTORINGIMAGE</a>);</div>
<div class="line"><a name="l01483"></a><span class="lineno"> 1483</span>&#160;        }</div>
<div class="line"><a name="l01484"></a><span class="lineno"> 1484</span>&#160;        op =op-&gt;<a class="code" href="class_rexx_internal_object.html#a0e6545e24773bc7861c35a4f87984110">nextObject</a>();   <span class="comment">// we are just marking each object in order.</span></div>
<div class="line"><a name="l01485"></a><span class="lineno"> 1485</span>&#160;    }</div>
<div class="line"><a name="l01486"></a><span class="lineno"> 1486</span>&#160;}</div>
<div class="line"><a name="l01487"></a><span class="lineno"> 1487</span>&#160; </div>
<div class="line"><a name="l01488"></a><span class="lineno"> 1488</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l01489"></a><span class="lineno"> 1489</span>&#160;<span class="comment">/**</span></div>
<div class="line"><a name="l01490"></a><span class="lineno"> 1490</span>&#160;<span class="comment"> * Perform a marking operation on all OldSpace objects</span></div>
<div class="line"><a name="l01491"></a><span class="lineno"> 1491</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l01492"></a><span class="lineno"><a class="line" href="class_old_space_segment_set.html#afe2cb98ec19c68fd39a9914c7547ab57"> 1492</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="class_old_space_segment_set.html#afe2cb98ec19c68fd39a9914c7547ab57">OldSpaceSegmentSet::markOldSpaceObjects</a>()</div>
<div class="line"><a name="l01493"></a><span class="lineno"> 1493</span>&#160;{</div>
<div class="line"><a name="l01494"></a><span class="lineno"> 1494</span>&#160;    <span class="comment">// mark each of the oldspace segments</span></div>
<div class="line"><a name="l01495"></a><span class="lineno"> 1495</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="class_memory_segment.html">MemorySegment</a> *segment = <a class="code" href="class_memory_segment_set.html#a61ed7810741de1e17e28791f0ad673e2">first</a>(); segment != NULL; segment = <a class="code" href="class_memory_segment_set.html#aedcb4e8810fcd3236e073032b8529049">next</a>(segment))</div>
<div class="line"><a name="l01496"></a><span class="lineno"> 1496</span>&#160;    {</div>
<div class="line"><a name="l01497"></a><span class="lineno"> 1497</span>&#160;        segment-&gt;markAllObjects();</div>
<div class="line"><a name="l01498"></a><span class="lineno"> 1498</span>&#160;    }</div>
<div class="line"><a name="l01499"></a><span class="lineno"> 1499</span>&#160;}</div>
<div class="line"><a name="l01500"></a><span class="lineno"> 1500</span>&#160; </div>
<div class="ttc" id="a_activity_manager_8hpp_html"><div class="ttname"><a href="_activity_manager_8hpp.html">ActivityManager.hpp</a></div></div>
<div class="ttc" id="a_activity_manager_8hpp_html_ab278a90c36b1ea34f0d6a7e280799eaa"><div class="ttname"><a href="_activity_manager_8hpp.html#ab278a90c36b1ea34f0d6a7e280799eaa">reportException</a></div><div class="ttdeci">void reportException(RexxErrorCodes error)</div><div class="ttdef"><b>Definition:</b> <a href="_activity_manager_8hpp_source.html#l00211">ActivityManager.hpp:211</a></div></div>
<div class="ttc" id="a_interpreter_instance_8cpp_html_a7ed39eecb03f7a63d73133a598a1ab43"><div class="ttname"><a href="_interpreter_instance_8cpp.html#a7ed39eecb03f7a63d73133a598a1ab43">counter</a></div><div class="ttdeci">static std::atomic&lt; uint32_t &gt; counter(0)</div></div>
<div class="ttc" id="a_memory_segment_8cpp_html_a7df9091edeb14c7634b59d608c9df708"><div class="ttname"><a href="_memory_segment_8cpp.html#a7df9091edeb14c7634b59d608c9df708">objectIsNotLive</a></div><div class="ttdeci">bool objectIsNotLive(char *obj, size_t mark)</div><div class="ttdef"><b>Definition:</b> <a href="_memory_segment_8cpp_source.html#l00945">MemorySegment.cpp:945</a></div></div>
<div class="ttc" id="a_memory_segment_8cpp_html_aec62b2e84adb188bf3eacb70ca54d974"><div class="ttname"><a href="_memory_segment_8cpp.html#aec62b2e84adb188bf3eacb70ca54d974">objectIsLive</a></div><div class="ttdeci">bool objectIsLive(char *obj, size_t mark)</div><div class="ttdef"><b>Definition:</b> <a href="_memory_segment_8cpp_source.html#l00944">MemorySegment.cpp:944</a></div></div>
<div class="ttc" id="a_object_class_8hpp_html_a09453535aa429cceaa131b911d4caa73a616602f628d1c90b4ef49d34ea01b820"><div class="ttname"><a href="_object_class_8hpp.html#a09453535aa429cceaa131b911d4caa73a616602f628d1c90b4ef49d34ea01b820">RESTORINGIMAGE</a></div><div class="ttdeci">@ RESTORINGIMAGE</div><div class="ttdef"><b>Definition:</b> <a href="_object_class_8hpp_source.html#l00084">ObjectClass.hpp:84</a></div></div>
<div class="ttc" id="a_rexx_core_8h_html"><div class="ttname"><a href="_rexx_core_8h.html">RexxCore.h</a></div></div>
<div class="ttc" id="a_rexx_core_8h_html_a181a36438ba4535dd7d22ab63239d1e1"><div class="ttname"><a href="_rexx_core_8h.html#a181a36438ba4535dd7d22ab63239d1e1">OREF_NULL</a></div><div class="ttdeci">#define OREF_NULL</div><div class="ttdef"><b>Definition:</b> <a href="_rexx_core_8h_source.html#l00055">RexxCore.h:55</a></div></div>
<div class="ttc" id="a_rexx_error_codes_8h_html_ab78d722675e696d37b9b75e363a8b358a7f886e2719ae8d2942954fb090f538eb"><div class="ttname"><a href="_rexx_error_codes_8h.html#ab78d722675e696d37b9b75e363a8b358a7f886e2719ae8d2942954fb090f538eb">Error_System_resources</a></div><div class="ttdeci">@ Error_System_resources</div><div class="ttdef"><b>Definition:</b> <a href="_rexx_error_codes_8h_source.html#l00069">RexxErrorCodes.h:69</a></div></div>
<div class="ttc" id="a_rexx_memory_8cpp_html_a1170e885c5c4c6a777736390e000ef15"><div class="ttname"><a href="_rexx_memory_8cpp.html#a1170e885c5c4c6a777736390e000ef15">memoryObject</a></div><div class="ttdeci">MemoryObject memoryObject</div><div class="ttdef"><b>Definition:</b> <a href="_rexx_memory_8cpp_source.html#l00092">RexxMemory.cpp:92</a></div></div>
<div class="ttc" id="a_rexx_memory_8hpp_html_ad740c29e8223b639f6f3fcbb910ce21a"><div class="ttname"><a href="_rexx_memory_8hpp.html#ad740c29e8223b639f6f3fcbb910ce21a">memory_mark_general</a></div><div class="ttdeci">#define memory_mark_general(oref)</div><div class="ttdef"><b>Definition:</b> <a href="_rexx_memory_8hpp_source.html#l00490">RexxMemory.hpp:490</a></div></div>
<div class="ttc" id="aclass_dead_object_html"><div class="ttname"><a href="class_dead_object.html">DeadObject</a></div><div class="ttdef"><b>Definition:</b> <a href="_dead_object_8hpp_source.html#l00063">DeadObject.hpp:64</a></div></div>
<div class="ttc" id="aclass_dead_object_pool_html_a0e54863d918466ac6b65187a02a034d9"><div class="ttname"><a href="class_dead_object_pool.html#a0e54863d918466ac6b65187a02a034d9">DeadObjectPool::setID</a></div><div class="ttdeci">void setID(const char *poolID)</div><div class="ttdef"><b>Definition:</b> <a href="_dead_object_8hpp_source.html#l00169">DeadObject.hpp:169</a></div></div>
<div class="ttc" id="aclass_dead_object_pool_html_a2996357280429e455965f05231479ce4"><div class="ttname"><a href="class_dead_object_pool.html#a2996357280429e455965f05231479ce4">DeadObjectPool::findSmallestFit</a></div><div class="ttdeci">DeadObject * findSmallestFit(size_t minSize)</div><div class="ttdef"><b>Definition:</b> <a href="_dead_object_8cpp_source.html#l00111">DeadObject.cpp:111</a></div></div>
<div class="ttc" id="aclass_dead_object_pool_html_a305566ec5dba8c4e41f940933589db79"><div class="ttname"><a href="class_dead_object_pool.html#a305566ec5dba8c4e41f940933589db79">DeadObjectPool::empty</a></div><div class="ttdeci">void empty()</div><div class="ttdef"><b>Definition:</b> <a href="_dead_object_8hpp_source.html#l00170">DeadObject.hpp:170</a></div></div>
<div class="ttc" id="aclass_dead_object_pool_html_a457703fb40e02ac8330dde5d359e3ffb"><div class="ttname"><a href="class_dead_object_pool.html#a457703fb40e02ac8330dde5d359e3ffb">DeadObjectPool::dumpMemoryProfile</a></div><div class="ttdeci">void dumpMemoryProfile(FILE *outfile)</div><div class="ttdef"><b>Definition:</b> <a href="_dead_object_8cpp_source.html#l00050">DeadObject.cpp:50</a></div></div>
<div class="ttc" id="aclass_dead_object_pool_html_a508d03b5240889c90370969df2b885d8"><div class="ttname"><a href="class_dead_object_pool.html#a508d03b5240889c90370969df2b885d8">DeadObjectPool::emptySingle</a></div><div class="ttdeci">void emptySingle()</div><div class="ttdef"><b>Definition:</b> <a href="_dead_object_8hpp_source.html#l00172">DeadObject.hpp:172</a></div></div>
<div class="ttc" id="aclass_dead_object_pool_html_a8155c6ba4af04d8a7c055ef34a764005"><div class="ttname"><a href="class_dead_object_pool.html#a8155c6ba4af04d8a7c055ef34a764005">DeadObjectPool::addSortedBySize</a></div><div class="ttdeci">void addSortedBySize(DeadObject *obj)</div><div class="ttdef"><b>Definition:</b> <a href="_dead_object_8cpp_source.html#l00147">DeadObject.cpp:147</a></div></div>
<div class="ttc" id="aclass_dead_object_pool_html_a93b6edd6b4300f451734432734445fa5"><div class="ttname"><a href="class_dead_object_pool.html#a93b6edd6b4300f451734432734445fa5">DeadObjectPool::checkObjectOverlap</a></div><div class="ttdeci">void checkObjectOverlap(DeadObject *obj)</div><div class="ttdef"><b>Definition:</b> <a href="_dead_object_8cpp_source.html#l00211">DeadObject.cpp:211</a></div></div>
<div class="ttc" id="aclass_dead_object_pool_html_ab77431236ca8dd7daee695df8bbd14e2"><div class="ttname"><a href="class_dead_object_pool.html#ab77431236ca8dd7daee695df8bbd14e2">DeadObjectPool::add</a></div><div class="ttdeci">void add(DeadObject *obj)</div><div class="ttdef"><b>Definition:</b> <a href="_dead_object_8hpp_source.html#l00175">DeadObject.hpp:175</a></div></div>
<div class="ttc" id="aclass_dead_object_pool_html_acd4f081dc71cb164e4271ada01da5e73"><div class="ttname"><a href="class_dead_object_pool.html#acd4f081dc71cb164e4271ada01da5e73">DeadObjectPool::addSingle</a></div><div class="ttdeci">void addSingle(DeadObject *obj)</div><div class="ttdef"><b>Definition:</b> <a href="_dead_object_8hpp_source.html#l00276">DeadObject.hpp:276</a></div></div>
<div class="ttc" id="aclass_dead_object_pool_html_ad9bfe30ddf396486fa47c7e90f383d6b"><div class="ttname"><a href="class_dead_object_pool.html#ad9bfe30ddf396486fa47c7e90f383d6b">DeadObjectPool::findFit</a></div><div class="ttdeci">DeadObject * findFit(size_t length)</div><div class="ttdef"><b>Definition:</b> <a href="_dead_object_8hpp_source.html#l00207">DeadObject.hpp:207</a></div></div>
<div class="ttc" id="aclass_large_segment_set_html_a084c3dbb390dc5ac34132c37918514b5"><div class="ttname"><a href="class_large_segment_set.html#a084c3dbb390dc5ac34132c37918514b5">LargeSegmentSet::deadCache</a></div><div class="ttdeci">DeadObjectPool deadCache</div><div class="ttdef"><b>Definition:</b> <a href="_memory_segment_8hpp_source.html#l00584">MemorySegment.hpp:584</a></div></div>
<div class="ttc" id="aclass_large_segment_set_html_a0b67dc9c2ee77fdad8f025fe98a7772d"><div class="ttname"><a href="class_large_segment_set.html#a0b67dc9c2ee77fdad8f025fe98a7772d">LargeSegmentSet::recommendedMemorySize</a></div><div class="ttdeci">size_t recommendedMemorySize()</div><div class="ttdef"><b>Definition:</b> <a href="_memory_segment_8hpp_source.html#l00580">MemorySegment.hpp:580</a></div></div>
<div class="ttc" id="aclass_large_segment_set_html_a1eab1cc57fee31edf8eac1ca1e0c3c20"><div class="ttname"><a href="class_large_segment_set.html#a1eab1cc57fee31edf8eac1ca1e0c3c20">LargeSegmentSet::allocateSegment</a></div><div class="ttdeci">MemorySegment * allocateSegment(size_t requestLength, size_t minimumLength) override</div><div class="ttdef"><b>Definition:</b> <a href="_memory_segment_8cpp_source.html#l00318">MemorySegment.cpp:318</a></div></div>
<div class="ttc" id="aclass_large_segment_set_html_a2efd071bdfe9192a875dce9ae0c5f454"><div class="ttname"><a href="class_large_segment_set.html#a2efd071bdfe9192a875dce9ae0c5f454">LargeSegmentSet::getInitialSet</a></div><div class="ttdeci">void getInitialSet()</div><div class="ttdef"><b>Definition:</b> <a href="_memory_segment_8cpp_source.html#l00285">MemorySegment.cpp:285</a></div></div>
<div class="ttc" id="aclass_large_segment_set_html_a5e3a6cfdc23172c833c8bbf2227afa66"><div class="ttname"><a href="class_large_segment_set.html#a5e3a6cfdc23172c833c8bbf2227afa66">LargeSegmentSet::requests</a></div><div class="ttdeci">size_t requests</div><div class="ttdef"><b>Definition:</b> <a href="_memory_segment_8hpp_source.html#l00585">MemorySegment.hpp:585</a></div></div>
<div class="ttc" id="aclass_large_segment_set_html_a625d886243ef18cf5e11add7ca883f07"><div class="ttname"><a href="class_large_segment_set.html#a625d886243ef18cf5e11add7ca883f07">LargeSegmentSet::suggestMemoryExpansion</a></div><div class="ttdeci">size_t suggestMemoryExpansion() override</div><div class="ttdef"><b>Definition:</b> <a href="_memory_segment_8cpp_source.html#l00701">MemorySegment.cpp:701</a></div></div>
<div class="ttc" id="aclass_large_segment_set_html_a627b3a7ab90754f1a763b60cb46aaadf"><div class="ttname"><a href="class_large_segment_set.html#a627b3a7ab90754f1a763b60cb46aaadf">LargeSegmentSet::prepareForSweep</a></div><div class="ttdeci">void prepareForSweep() override</div><div class="ttdef"><b>Definition:</b> <a href="_memory_segment_8cpp_source.html#l00831">MemorySegment.cpp:831</a></div></div>
<div class="ttc" id="aclass_large_segment_set_html_a6589632e959b5f5a5df501d1ca8e54ff"><div class="ttname"><a href="class_large_segment_set.html#a6589632e959b5f5a5df501d1ca8e54ff">LargeSegmentSet::LargeSegmentSet</a></div><div class="ttdeci">LargeSegmentSet()</div><div class="ttdef"><b>Definition:</b> <a href="_memory_segment_8hpp_source.html#l00535">MemorySegment.hpp:535</a></div></div>
<div class="ttc" id="aclass_large_segment_set_html_a6bde617989f98a5d2acda8945583bfaf"><div class="ttname"><a href="class_large_segment_set.html#a6bde617989f98a5d2acda8945583bfaf">LargeSegmentSet::InitialLargeSegmentSpace</a></div><div class="ttdeci">static const size_t InitialLargeSegmentSpace</div><div class="ttdef"><b>Definition:</b> <a href="_memory_segment_8hpp_source.html#l00566">MemorySegment.hpp:566</a></div></div>
<div class="ttc" id="aclass_large_segment_set_html_a6e70daef4cd5141ef6fd0c7af65f72e0"><div class="ttname"><a href="class_large_segment_set.html#a6e70daef4cd5141ef6fd0c7af65f72e0">LargeSegmentSet::largestObject</a></div><div class="ttdeci">size_t largestObject</div><div class="ttdef"><b>Definition:</b> <a href="_memory_segment_8hpp_source.html#l00587">MemorySegment.hpp:587</a></div></div>
<div class="ttc" id="aclass_large_segment_set_html_a7038811a309f01aec8d4dbfc31d704d1"><div class="ttname"><a href="class_large_segment_set.html#a7038811a309f01aec8d4dbfc31d704d1">LargeSegmentSet::findObject</a></div><div class="ttdeci">RexxInternalObject * findObject(size_t allocationLength)</div><div class="ttdef"><b>Definition:</b> <a href="_memory_segment_8cpp_source.html#l01200">MemorySegment.cpp:1200</a></div></div>
<div class="ttc" id="aclass_large_segment_set_html_a8031f0f6c4a3b279ea3e42d946023d66"><div class="ttname"><a href="class_large_segment_set.html#a8031f0f6c4a3b279ea3e42d946023d66">LargeSegmentSet::LargeMemoryExpansionThreshold</a></div><div class="ttdeci">static const double LargeMemoryExpansionThreshold</div><div class="ttdef"><b>Definition:</b> <a href="_memory_segment_8hpp_source.html#l00579">MemorySegment.hpp:579</a></div></div>
<div class="ttc" id="aclass_large_segment_set_html_aafee994e80a84473f94fd63f380b6397"><div class="ttname"><a href="class_large_segment_set.html#aafee994e80a84473f94fd63f380b6397">LargeSegmentSet::donateObject</a></div><div class="ttdeci">DeadObject * donateObject(size_t allocationLength) override</div><div class="ttdef"><b>Definition:</b> <a href="_memory_segment_8cpp_source.html#l00632">MemorySegment.cpp:632</a></div></div>
<div class="ttc" id="aclass_large_segment_set_html_ab661934df97756ee34f1b294a063470a"><div class="ttname"><a href="class_large_segment_set.html#ab661934df97756ee34f1b294a063470a">LargeSegmentSet::dumpMemoryProfile</a></div><div class="ttdeci">void dumpMemoryProfile(FILE *outfile) override</div><div class="ttdef"><b>Definition:</b> <a href="_memory_segment_8cpp_source.html#l00140">MemorySegment.cpp:140</a></div></div>
<div class="ttc" id="aclass_large_segment_set_html_abe5f58ce25f514baf594af822ab29a3a"><div class="ttname"><a href="class_large_segment_set.html#abe5f58ce25f514baf594af822ab29a3a">LargeSegmentSet::smallestObject</a></div><div class="ttdeci">size_t smallestObject</div><div class="ttdef"><b>Definition:</b> <a href="_memory_segment_8hpp_source.html#l00586">MemorySegment.hpp:586</a></div></div>
<div class="ttc" id="aclass_large_segment_set_html_ace7f34cf0d63489a930972159d52a3a6"><div class="ttname"><a href="class_large_segment_set.html#ace7f34cf0d63489a930972159d52a3a6">LargeSegmentSet::expandSegmentSet</a></div><div class="ttdeci">void expandSegmentSet(size_t allocationLength)</div><div class="ttdef"><b>Definition:</b> <a href="_memory_segment_8cpp_source.html#l01432">MemorySegment.cpp:1432</a></div></div>
<div class="ttc" id="aclass_large_segment_set_html_adc93820c32c0c55424d5e996fde636bc"><div class="ttname"><a href="class_large_segment_set.html#adc93820c32c0c55424d5e996fde636bc">LargeSegmentSet::addDeadObject</a></div><div class="ttdeci">void addDeadObject(DeadObject *object) override</div><div class="ttdef"><b>Definition:</b> <a href="_memory_segment_8cpp_source.html#l00383">MemorySegment.cpp:383</a></div></div>
<div class="ttc" id="aclass_large_segment_set_html_adf88a331b8cb23f1d89f456aa0fdc60a"><div class="ttname"><a href="class_large_segment_set.html#adf88a331b8cb23f1d89f456aa0fdc60a">LargeSegmentSet::completeSweepOperation</a></div><div class="ttdeci">void completeSweepOperation() override</div><div class="ttdef"><b>Definition:</b> <a href="_memory_segment_8cpp_source.html#l00892">MemorySegment.cpp:892</a></div></div>
<div class="ttc" id="aclass_large_segment_set_html_aecba2e06efa8817d3959456ab4562cb9"><div class="ttname"><a href="class_large_segment_set.html#aecba2e06efa8817d3959456ab4562cb9">LargeSegmentSet::allocateObject</a></div><div class="ttdeci">RexxInternalObject * allocateObject(size_t allocationLength)</div><div class="ttdef"><b>Definition:</b> <a href="_memory_segment_8hpp_source.html#l00541">MemorySegment.hpp:541</a></div></div>
<div class="ttc" id="aclass_large_segment_set_html_af2e250f01d568897cac871dc75eed37c"><div class="ttname"><a href="class_large_segment_set.html#af2e250f01d568897cac871dc75eed37c">LargeSegmentSet::handleAllocationFailure</a></div><div class="ttdeci">RexxInternalObject * handleAllocationFailure(size_t allocationLength)</div><div class="ttdef"><b>Definition:</b> <a href="_memory_segment_8cpp_source.html#l01218">MemorySegment.cpp:1218</a></div></div>
<div class="ttc" id="aclass_memory_html_a091509cd3ad7378c57c9375ef266484e"><div class="ttname"><a href="class_memory.html#a091509cd3ad7378c57c9375ef266484e">Memory::MinimumObjectSize</a></div><div class="ttdeci">static const size_t MinimumObjectSize</div><div class="ttdef"><b>Definition:</b> <a href="_memory_8hpp_source.html#l00092">Memory.hpp:92</a></div></div>
<div class="ttc" id="aclass_memory_html_a9550606e99df158757e045e7739c3e7f"><div class="ttname"><a href="class_memory.html#a9550606e99df158757e045e7739c3e7f">Memory::LargeAllocationUnit</a></div><div class="ttdeci">static const size_t LargeAllocationUnit</div><div class="ttdef"><b>Definition:</b> <a href="_memory_8hpp_source.html#l00084">Memory.hpp:84</a></div></div>
<div class="ttc" id="aclass_memory_html_abedd5f4428b3a55ac3ef535d96f5d599"><div class="ttname"><a href="class_memory.html#abedd5f4428b3a55ac3ef535d96f5d599">Memory::roundLargeObjectAllocation</a></div><div class="ttdeci">static size_t roundLargeObjectAllocation(size_t n)</div><div class="ttdef"><b>Definition:</b> <a href="_memory_8hpp_source.html#l00067">Memory.hpp:67</a></div></div>
<div class="ttc" id="aclass_memory_object_html"><div class="ttname"><a href="class_memory_object.html">MemoryObject</a></div><div class="ttdef"><b>Definition:</b> <a href="_rexx_memory_8hpp_source.html#l00095">RexxMemory.hpp:96</a></div></div>
<div class="ttc" id="aclass_memory_object_html_a1b624530853fcd1c684a038b8f45ccb2"><div class="ttname"><a href="class_memory_object.html#a1b624530853fcd1c684a038b8f45ccb2">MemoryObject::newSegment</a></div><div class="ttdeci">MemorySegment * newSegment(size_t requestLength)</div><div class="ttdef"><b>Definition:</b> <a href="_rexx_memory_8cpp_source.html#l00505">RexxMemory.cpp:505</a></div></div>
<div class="ttc" id="aclass_memory_object_html_a1db678cca2a0c0e802aaf7e36af30b4e"><div class="ttname"><a href="class_memory_object.html#a1db678cca2a0c0e802aaf7e36af30b4e">MemoryObject::transferSegmentToNormalSet</a></div><div class="ttdeci">void transferSegmentToNormalSet(MemorySegment *segment)</div><div class="ttdef"><b>Definition:</b> <a href="_rexx_memory_8cpp_source.html#l01151">RexxMemory.cpp:1151</a></div></div>
<div class="ttc" id="aclass_memory_object_html_a2a533297c554aeea9a8662ef7e0aea0f"><div class="ttname"><a href="class_memory_object.html#a2a533297c554aeea9a8662ef7e0aea0f">MemoryObject::freeSegment</a></div><div class="ttdeci">void freeSegment(MemorySegment *segment)</div><div class="ttdef"><b>Definition:</b> <a href="_rexx_memory_8cpp_source.html#l00528">RexxMemory.cpp:528</a></div></div>
<div class="ttc" id="aclass_memory_object_html_a2f1ca2bd2c304e9211d3e02871d3191d"><div class="ttname"><a href="class_memory_object.html#a2f1ca2bd2c304e9211d3e02871d3191d">MemoryObject::scavengeSegmentSets</a></div><div class="ttdeci">void scavengeSegmentSets(MemorySegmentSet *requester, size_t allocationLength)</div><div class="ttdef"><b>Definition:</b> <a href="_rexx_memory_8cpp_source.html#l01112">RexxMemory.cpp:1112</a></div></div>
<div class="ttc" id="aclass_memory_object_html_a4babf41ab5e88ec6773cae4ddc83ab10"><div class="ttname"><a href="class_memory_object.html#a4babf41ab5e88ec6773cae4ddc83ab10">MemoryObject::verboseMessage</a></div><div class="ttdeci">void verboseMessage(const char *message)</div><div class="ttdef"><b>Definition:</b> <a href="_rexx_memory_8hpp_source.html#l00143">RexxMemory.hpp:143</a></div></div>
<div class="ttc" id="aclass_memory_object_html_a7a1e9d3dc36b531b0f5d621a839df6ff"><div class="ttname"><a href="class_memory_object.html#a7a1e9d3dc36b531b0f5d621a839df6ff">MemoryObject::collect</a></div><div class="ttdeci">void collect()</div><div class="ttdef"><b>Definition:</b> <a href="_rexx_memory_8cpp_source.html#l00894">RexxMemory.cpp:894</a></div></div>
<div class="ttc" id="aclass_memory_object_html_aa87672fee1c0175d0a7012d29be7332e"><div class="ttname"><a href="class_memory_object.html#aa87672fee1c0175d0a7012d29be7332e">MemoryObject::markWord</a></div><div class="ttdeci">size_t markWord</div><div class="ttdef"><b>Definition:</b> <a href="_rexx_memory_8hpp_source.html#l00229">RexxMemory.hpp:229</a></div></div>
<div class="ttc" id="aclass_memory_object_html_afe6f12cca10597f4eff03f65145f02ca"><div class="ttname"><a href="class_memory_object.html#afe6f12cca10597f4eff03f65145f02ca">MemoryObject::newLargeSegment</a></div><div class="ttdeci">MemorySegment * newLargeSegment(size_t requestLength, size_t minLength)</div><div class="ttdef"><b>Definition:</b> <a href="_rexx_memory_8cpp_source.html#l00601">RexxMemory.cpp:601</a></div></div>
<div class="ttc" id="aclass_memory_segment_header_html_a6c0acd2a09e144750258e317978a2910"><div class="ttname"><a href="class_memory_segment_header.html#a6c0acd2a09e144750258e317978a2910">MemorySegmentHeader::segmentSize</a></div><div class="ttdeci">size_t segmentSize</div><div class="ttdef"><b>Definition:</b> <a href="_memory_segment_8hpp_source.html#l00068">MemorySegment.hpp:68</a></div></div>
<div class="ttc" id="aclass_memory_segment_header_html_a79d5ea5c0d969eaea4442d3fed563090"><div class="ttname"><a href="class_memory_segment_header.html#a79d5ea5c0d969eaea4442d3fed563090">MemorySegmentHeader::next</a></div><div class="ttdeci">MemorySegment * next</div><div class="ttdef"><b>Definition:</b> <a href="_memory_segment_8hpp_source.html#l00070">MemorySegment.hpp:70</a></div></div>
<div class="ttc" id="aclass_memory_segment_header_html_aa6555c2a4239d9911f4f8a177a4c2c8b"><div class="ttname"><a href="class_memory_segment_header.html#aa6555c2a4239d9911f4f8a177a4c2c8b">MemorySegmentHeader::liveObjects</a></div><div class="ttdeci">size_t liveObjects</div><div class="ttdef"><b>Definition:</b> <a href="_memory_segment_8hpp_source.html#l00069">MemorySegment.hpp:69</a></div></div>
<div class="ttc" id="aclass_memory_segment_html"><div class="ttname"><a href="class_memory_segment.html">MemorySegment</a></div><div class="ttdef"><b>Definition:</b> <a href="_memory_segment_8hpp_source.html#l00078">MemorySegment.hpp:79</a></div></div>
<div class="ttc" id="aclass_memory_segment_html_a05f1080941e07fa90af5978ab4c1123a"><div class="ttname"><a href="class_memory_segment.html#a05f1080941e07fa90af5978ab4c1123a">MemorySegment::remove</a></div><div class="ttdeci">void remove()</div><div class="ttdef"><b>Definition:</b> <a href="_memory_segment_8hpp_source.html#l00118">MemorySegment.hpp:118</a></div></div>
<div class="ttc" id="aclass_memory_segment_html_a2ddc33173de811d5a32dadab64218e69"><div class="ttname"><a href="class_memory_segment.html#a2ddc33173de811d5a32dadab64218e69">MemorySegment::size</a></div><div class="ttdeci">size_t size()</div><div class="ttdef"><b>Definition:</b> <a href="_memory_segment_8hpp_source.html#l00139">MemorySegment.hpp:139</a></div></div>
<div class="ttc" id="aclass_memory_segment_html_a32b221f5b8192e3c8f6179e786b49f62"><div class="ttname"><a href="class_memory_segment.html#a32b221f5b8192e3c8f6179e786b49f62">MemorySegment::gatherObjectStats</a></div><div class="ttdeci">void gatherObjectStats(MemoryStats *memStats, SegmentStats *stats)</div><div class="ttdef"><b>Definition:</b> <a href="_memory_segment_8cpp_source.html#l00094">MemorySegment.cpp:94</a></div></div>
<div class="ttc" id="aclass_memory_segment_html_a4e532d1281baa23836e24b64e580298e"><div class="ttname"><a href="class_memory_segment.html#a4e532d1281baa23836e24b64e580298e">MemorySegment::startObject</a></div><div class="ttdeci">RexxInternalObject * startObject()</div><div class="ttdef"><b>Definition:</b> <a href="_memory_segment_8hpp_source.html#l00143">MemorySegment.hpp:143</a></div></div>
<div class="ttc" id="aclass_memory_segment_html_a600233405db51678164f8553bb73d938"><div class="ttname"><a href="class_memory_segment.html#a600233405db51678164f8553bb73d938">MemorySegment::isEmpty</a></div><div class="ttdeci">bool isEmpty()</div><div class="ttdef"><b>Definition:</b> <a href="_memory_segment_8hpp_source.html#l00147">MemorySegment.hpp:147</a></div></div>
<div class="ttc" id="aclass_memory_segment_html_a724c1d54f0b5e272fcdfb4f63cb90ac3"><div class="ttname"><a href="class_memory_segment.html#a724c1d54f0b5e272fcdfb4f63cb90ac3">MemorySegment::isReal</a></div><div class="ttdeci">bool isReal()</div><div class="ttdef"><b>Definition:</b> <a href="_memory_segment_8hpp_source.html#l00146">MemorySegment.hpp:146</a></div></div>
<div class="ttc" id="aclass_memory_segment_html_a98a4369bac6e25800ea487a331b46561"><div class="ttname"><a href="class_memory_segment.html#a98a4369bac6e25800ea487a331b46561">MemorySegment::dump</a></div><div class="ttdeci">void dump(const char *owner, size_t counter, FILE *keyfile, FILE *dumpfile)</div><div class="ttdef"><b>Definition:</b> <a href="_memory_segment_8cpp_source.html#l00077">MemorySegment.cpp:77</a></div></div>
<div class="ttc" id="aclass_memory_segment_html_aa1dde8093a907fb0932bca96fa8d8627"><div class="ttname"><a href="class_memory_segment.html#aa1dde8093a907fb0932bca96fa8d8627">MemorySegment::roundSegmentBoundary</a></div><div class="ttdeci">static size_t roundSegmentBoundary(size_t n)</div><div class="ttdef"><b>Definition:</b> <a href="_memory_segment_8hpp_source.html#l00153">MemorySegment.hpp:153</a></div></div>
<div class="ttc" id="aclass_memory_segment_html_aa489ab3956d7b3fefd4108dfe6641c6d"><div class="ttname"><a href="class_memory_segment.html#aa489ab3956d7b3fefd4108dfe6641c6d">MemorySegment::endObject</a></div><div class="ttdeci">RexxInternalObject * endObject()</div><div class="ttdef"><b>Definition:</b> <a href="_memory_segment_8hpp_source.html#l00144">MemorySegment.hpp:144</a></div></div>
<div class="ttc" id="aclass_memory_segment_html_aac924598f86a8bfb94375e83784238a4"><div class="ttname"><a href="class_memory_segment.html#aac924598f86a8bfb94375e83784238a4">MemorySegment::createDeadObject</a></div><div class="ttdeci">DeadObject * createDeadObject()</div><div class="ttdef"><b>Definition:</b> <a href="_memory_segment_8hpp_source.html#l00136">MemorySegment.hpp:136</a></div></div>
<div class="ttc" id="aclass_memory_segment_html_abd930bc83a178f8d5bb3ff2bacdd7d9e"><div class="ttname"><a href="class_memory_segment.html#abd930bc83a178f8d5bb3ff2bacdd7d9e">MemorySegment::segmentStart</a></div><div class="ttdeci">char segmentStart[sizeof(DeadObject)]</div><div class="ttdef"><b>Definition:</b> <a href="_memory_segment_8hpp_source.html#l00165">MemorySegment.hpp:165</a></div></div>
<div class="ttc" id="aclass_memory_segment_html_add5363bed0478262b2bf2418791c3a18"><div class="ttname"><a href="class_memory_segment.html#add5363bed0478262b2bf2418791c3a18">MemorySegment::MemorySegmentOverhead</a></div><div class="ttdeci">static const size_t MemorySegmentOverhead</div><div class="ttdef"><b>Definition:</b> <a href="_memory_segment_8hpp_source.html#l00155">MemorySegment.hpp:155</a></div></div>
<div class="ttc" id="aclass_memory_segment_html_aec264de299ef2524a1594add22679b87"><div class="ttname"><a href="class_memory_segment.html#aec264de299ef2524a1594add22679b87">MemorySegment::SegmentSize</a></div><div class="ttdeci">static const size_t SegmentSize</div><div class="ttdef"><b>Definition:</b> <a href="_memory_segment_8hpp_source.html#l00158">MemorySegment.hpp:158</a></div></div>
<div class="ttc" id="aclass_memory_segment_html_af5eedb6412193837c0e0bdc6f909f7a7"><div class="ttname"><a href="class_memory_segment.html#af5eedb6412193837c0e0bdc6f909f7a7">MemorySegment::insertBefore</a></div><div class="ttdeci">void insertBefore(MemorySegment *newSegment)</div><div class="ttdef"><b>Definition:</b> <a href="_memory_segment_8hpp_source.html#l00110">MemorySegment.hpp:110</a></div></div>
<div class="ttc" id="aclass_memory_segment_html_af64ed95595657c43475b549e2f825279"><div class="ttname"><a href="class_memory_segment.html#af64ed95595657c43475b549e2f825279">MemorySegment::markAllObjects</a></div><div class="ttdeci">void markAllObjects()</div><div class="ttdef"><b>Definition:</b> <a href="_memory_segment_8cpp_source.html#l01468">MemorySegment.cpp:1468</a></div></div>
<div class="ttc" id="aclass_memory_segment_set_html"><div class="ttname"><a href="class_memory_segment_set.html">MemorySegmentSet</a></div><div class="ttdef"><b>Definition:</b> <a href="_memory_segment_8hpp_source.html#l00173">MemorySegment.hpp:174</a></div></div>
<div class="ttc" id="aclass_memory_segment_set_html_a03636135836a91d328829444fd3a453b"><div class="ttname"><a href="class_memory_segment_set.html#a03636135836a91d328829444fd3a453b">MemorySegmentSet::dumpSegments</a></div><div class="ttdeci">void dumpSegments(FILE *keyfile, FILE *dumpfile)</div><div class="ttdef"><b>Definition:</b> <a href="_memory_segment_8cpp_source.html#l00113">MemorySegment.cpp:113</a></div></div>
<div class="ttc" id="aclass_memory_segment_set_html_a05e9bdea24904522b3f602d3382c80da"><div class="ttname"><a href="class_memory_segment_set.html#a05e9bdea24904522b3f602d3382c80da">MemorySegmentSet::MinimumSegmentSize</a></div><div class="ttdeci">static const size_t MinimumSegmentSize</div><div class="ttdef"><b>Definition:</b> <a href="_memory_segment_8hpp_source.html#l00264">MemorySegment.hpp:264</a></div></div>
<div class="ttc" id="aclass_memory_segment_set_html_a11b567e97ec08847b5f4c4cd01bceafc"><div class="ttname"><a href="class_memory_segment_set.html#a11b567e97ec08847b5f4c4cd01bceafc">MemorySegmentSet::adjustMemorySize</a></div><div class="ttdeci">void adjustMemorySize()</div><div class="ttdef"><b>Definition:</b> <a href="_memory_segment_8cpp_source.html#l00736">MemorySegment.cpp:736</a></div></div>
<div class="ttc" id="aclass_memory_segment_set_html_a124455ab929d1b2eb35e7a1b7f19e743"><div class="ttname"><a href="class_memory_segment_set.html#a124455ab929d1b2eb35e7a1b7f19e743">MemorySegmentSet::anchor</a></div><div class="ttdeci">MemorySegment anchor</div><div class="ttdef"><b>Definition:</b> <a href="_memory_segment_8hpp_source.html#l00318">MemorySegment.hpp:318</a></div></div>
<div class="ttc" id="aclass_memory_segment_set_html_a145bf8586274f7d4a804141e4fa67623"><div class="ttname"><a href="class_memory_segment_set.html#a145bf8586274f7d4a804141e4fa67623">MemorySegmentSet::name</a></div><div class="ttdeci">const char * name</div><div class="ttdef"><b>Definition:</b> <a href="_memory_segment_8hpp_source.html#l00323">MemorySegment.hpp:323</a></div></div>
<div class="ttc" id="aclass_memory_segment_set_html_a1d535b1aba25b63329b99203226c00d4"><div class="ttname"><a href="class_memory_segment_set.html#a1d535b1aba25b63329b99203226c00d4">MemorySegmentSet::MinimumSegmentDeadSpace</a></div><div class="ttdeci">static const size_t MinimumSegmentDeadSpace</div><div class="ttdef"><b>Definition:</b> <a href="_memory_segment_8hpp_source.html#l00266">MemorySegment.hpp:266</a></div></div>
<div class="ttc" id="aclass_memory_segment_set_html_a2f5846486a053e2563f99fe17d4f0455"><div class="ttname"><a href="class_memory_segment_set.html#a2f5846486a053e2563f99fe17d4f0455">MemorySegmentSet::memory</a></div><div class="ttdeci">MemoryObject * memory</div><div class="ttdef"><b>Definition:</b> <a href="_memory_segment_8hpp_source.html#l00324">MemorySegment.hpp:324</a></div></div>
<div class="ttc" id="aclass_memory_segment_set_html_a3d3811d09e36ae1fe1060a585534ffea"><div class="ttname"><a href="class_memory_segment_set.html#a3d3811d09e36ae1fe1060a585534ffea">MemorySegmentSet::liveObjectBytes</a></div><div class="ttdeci">size_t liveObjectBytes</div><div class="ttdef"><b>Definition:</b> <a href="_memory_segment_8hpp_source.html#l00320">MemorySegment.hpp:320</a></div></div>
<div class="ttc" id="aclass_memory_segment_set_html_a415eb2594ee04255b9f16b7c30131348"><div class="ttname"><a href="class_memory_segment_set.html#a415eb2594ee04255b9f16b7c30131348">MemorySegmentSet::LargeSegmentDeadSpace</a></div><div class="ttdeci">static const size_t LargeSegmentDeadSpace</div><div class="ttdef"><b>Definition:</b> <a href="_memory_segment_8hpp_source.html#l00272">MemorySegment.hpp:272</a></div></div>
<div class="ttc" id="aclass_memory_segment_set_html_a41c57a1a3b8fb3641153207bab527f6f"><div class="ttname"><a href="class_memory_segment_set.html#a41c57a1a3b8fb3641153207bab527f6f">MemorySegmentSet::LargeSegmentSize</a></div><div class="ttdeci">static const size_t LargeSegmentSize</div><div class="ttdef"><b>Definition:</b> <a href="_memory_segment_8hpp_source.html#l00268">MemorySegment.hpp:268</a></div></div>
<div class="ttc" id="aclass_memory_segment_set_html_a4e6465f0009cd59107df1bee01627c4b"><div class="ttname"><a href="class_memory_segment_set.html#a4e6465f0009cd59107df1bee01627c4b">MemorySegmentSet::sweep</a></div><div class="ttdeci">void sweep()</div><div class="ttdef"><b>Definition:</b> <a href="_memory_segment_8cpp_source.html#l00951">MemorySegment.cpp:951</a></div></div>
<div class="ttc" id="aclass_memory_segment_set_html_a5047a2cb5b670257e525747da90c70af"><div class="ttname"><a href="class_memory_segment_set.html#a5047a2cb5b670257e525747da90c70af">MemorySegmentSet::calculateSegmentAllocation</a></div><div class="ttdeci">size_t calculateSegmentAllocation(size_t n)</div><div class="ttdef"><b>Definition:</b> <a href="_memory_segment_8hpp_source.html#l00291">MemorySegment.hpp:291</a></div></div>
<div class="ttc" id="aclass_memory_segment_set_html_a5a73d3356c54f5a13b7789989339edd3"><div class="ttname"><a href="class_memory_segment_set.html#a5a73d3356c54f5a13b7789989339edd3">MemorySegmentSet::SegmentDeadSpace</a></div><div class="ttdeci">static const size_t SegmentDeadSpace</div><div class="ttdef"><b>Definition:</b> <a href="_memory_segment_8hpp_source.html#l00270">MemorySegment.hpp:270</a></div></div>
<div class="ttc" id="aclass_memory_segment_set_html_a61ed7810741de1e17e28791f0ad673e2"><div class="ttname"><a href="class_memory_segment_set.html#a61ed7810741de1e17e28791f0ad673e2">MemorySegmentSet::first</a></div><div class="ttdeci">MemorySegment * first()</div><div class="ttdef"><b>Definition:</b> <a href="_memory_segment_8hpp_source.html#l00227">MemorySegment.hpp:227</a></div></div>
<div class="ttc" id="aclass_memory_segment_set_html_a6636fce68844e8349e24f70d2e0b3ec6"><div class="ttname"><a href="class_memory_segment_set.html#a6636fce68844e8349e24f70d2e0b3ec6">MemorySegmentSet::addSegment</a></div><div class="ttdeci">void addSegment(MemorySegment *segment)</div><div class="ttdef"><b>Definition:</b> <a href="_memory_segment_8cpp_source.html#l00549">MemorySegment.cpp:549</a></div></div>
<div class="ttc" id="aclass_memory_segment_set_html_a676ae7d0969d7b72919e5be31ae39f90"><div class="ttname"><a href="class_memory_segment_set.html#a676ae7d0969d7b72919e5be31ae39f90">MemorySegmentSet::transferSegment</a></div><div class="ttdeci">void transferSegment(MemorySegment *segment)</div><div class="ttdef"><b>Definition:</b> <a href="_memory_segment_8cpp_source.html#l00572">MemorySegment.cpp:572</a></div></div>
<div class="ttc" id="aclass_memory_segment_set_html_a7261a480da3ecae054b3cd1be0b30ead"><div class="ttname"><a href="class_memory_segment_set.html#a7261a480da3ecae054b3cd1be0b30ead">MemorySegmentSet::deadObjectBytes</a></div><div class="ttdeci">size_t deadObjectBytes</div><div class="ttdef"><b>Definition:</b> <a href="_memory_segment_8hpp_source.html#l00321">MemorySegment.hpp:321</a></div></div>
<div class="ttc" id="aclass_memory_segment_set_html_a7925bd1039f535cadff00ad2a5b9f7d2"><div class="ttname"><a href="class_memory_segment_set.html#a7925bd1039f535cadff00ad2a5b9f7d2">MemorySegmentSet::addSegments</a></div><div class="ttdeci">void addSegments(size_t requiredSpace)</div><div class="ttdef"><b>Definition:</b> <a href="_memory_segment_8cpp_source.html#l00761">MemorySegment.cpp:761</a></div></div>
<div class="ttc" id="aclass_memory_segment_set_html_a7bf421c9c93bf255135415e55814e6a7"><div class="ttname"><a href="class_memory_segment_set.html#a7bf421c9c93bf255135415e55814e6a7">MemorySegmentSet::allocateSegment</a></div><div class="ttdeci">virtual MemorySegment * allocateSegment(size_t requestLength, size_t minimumLength)</div><div class="ttdef"><b>Definition:</b> <a href="_memory_segment_8cpp_source.html#l00302">MemorySegment.cpp:302</a></div></div>
<div class="ttc" id="aclass_memory_segment_set_html_a7c1385f115ca05b55e03dc9468e08f39"><div class="ttname"><a href="class_memory_segment_set.html#a7c1385f115ca05b55e03dc9468e08f39">MemorySegmentSet::completeSweepOperation</a></div><div class="ttdeci">virtual void completeSweepOperation()</div><div class="ttdef"><b>Definition:</b> <a href="_memory_segment_8cpp_source.html#l00847">MemorySegment.cpp:847</a></div></div>
<div class="ttc" id="aclass_memory_segment_set_html_a8b91ff7fd6370e4f54900a99ef9b4f27"><div class="ttname"><a href="class_memory_segment_set.html#a8b91ff7fd6370e4f54900a99ef9b4f27">MemorySegmentSet::suggestMemoryExpansion</a></div><div class="ttdeci">virtual size_t suggestMemoryExpansion()</div><div class="ttdef"><b>Definition:</b> <a href="_memory_segment_8cpp_source.html#l00650">MemorySegment.cpp:650</a></div></div>
<div class="ttc" id="aclass_memory_segment_set_html_a9e1c69fb1b32ca37d643bf839ae665b4"><div class="ttname"><a href="class_memory_segment_set.html#a9e1c69fb1b32ca37d643bf839ae665b4">MemorySegmentSet::count</a></div><div class="ttdeci">size_t count</div><div class="ttdef"><b>Definition:</b> <a href="_memory_segment_8hpp_source.html#l00319">MemorySegment.hpp:319</a></div></div>
<div class="ttc" id="aclass_memory_segment_set_html_aa2caa0bde362ae2ff82b82f33bd536e7"><div class="ttname"><a href="class_memory_segment_set.html#aa2caa0bde362ae2ff82b82f33bd536e7">MemorySegmentSet::prepareForSweep</a></div><div class="ttdeci">virtual void prepareForSweep()</div><div class="ttdef"><b>Definition:</b> <a href="_memory_segment_8cpp_source.html#l00803">MemorySegment.cpp:803</a></div></div>
<div class="ttc" id="aclass_memory_segment_set_html_aabdb564ac4a2f34cbffc741817bfddc9"><div class="ttname"><a href="class_memory_segment_set.html#aabdb564ac4a2f34cbffc741817bfddc9">MemorySegmentSet::freeMemoryPercentage</a></div><div class="ttdeci">float freeMemoryPercentage()</div><div class="ttdef"><b>Definition:</b> <a href="_memory_segment_8hpp_source.html#l00287">MemorySegment.hpp:287</a></div></div>
<div class="ttc" id="aclass_memory_segment_set_html_ab3cfbce21761e05940b967acf23ab5d4"><div class="ttname"><a href="class_memory_segment_set.html#ab3cfbce21761e05940b967acf23ab5d4">MemorySegmentSet::splitDeadObject</a></div><div class="ttdeci">RexxInternalObject * splitDeadObject(DeadObject *object, size_t allocationLength, size_t splitMinimum)</div><div class="ttdef"><b>Definition:</b> <a href="_memory_segment_8cpp_source.html#l01056">MemorySegment.cpp:1056</a></div></div>
<div class="ttc" id="aclass_memory_segment_set_html_abab6a3bfe74ce7d2ff87a934f667b6ab"><div class="ttname"><a href="class_memory_segment_set.html#abab6a3bfe74ce7d2ff87a934f667b6ab">MemorySegmentSet::gatherStats</a></div><div class="ttdeci">void gatherStats(MemoryStats *memStats, SegmentStats *stats)</div><div class="ttdef"><b>Definition:</b> <a href="_memory_segment_8cpp_source.html#l01450">MemorySegment.cpp:1450</a></div></div>
<div class="ttc" id="aclass_memory_segment_set_html_abffe4faab8b9008faa40acf1d94f3d5d"><div class="ttname"><a href="class_memory_segment_set.html#abffe4faab8b9008faa40acf1d94f3d5d">MemorySegmentSet::sweepSingleSegment</a></div><div class="ttdeci">void sweepSingleSegment(MemorySegment *sweepSegment)</div><div class="ttdef"><b>Definition:</b> <a href="_memory_segment_8cpp_source.html#l00980">MemorySegment.cpp:980</a></div></div>
<div class="ttc" id="aclass_memory_segment_set_html_acdc687287a5eb7de71eb924daba194d5"><div class="ttname"><a href="class_memory_segment_set.html#acdc687287a5eb7de71eb924daba194d5">MemorySegmentSet::donateObject</a></div><div class="ttdeci">virtual DeadObject * donateObject(size_t allocationLength)</div><div class="ttdef"><b>Definition:</b> <a href="_memory_segment_8cpp_source.html#l00595">MemorySegment.cpp:595</a></div></div>
<div class="ttc" id="aclass_memory_segment_set_html_ae4d7151125dc2900264c1f0c2eff9e2e"><div class="ttname"><a href="class_memory_segment_set.html#ae4d7151125dc2900264c1f0c2eff9e2e">MemorySegmentSet::validateObject</a></div><div class="ttdeci">void validateObject(RexxInternalObject *o)</div><div class="ttdef"><b>Definition:</b> <a href="_memory_segment_8hpp_source.html#l00304">MemorySegment.hpp:304</a></div></div>
<div class="ttc" id="aclass_memory_segment_set_html_ae50003ea8be96293f5ce776ee954822b"><div class="ttname"><a href="class_memory_segment_set.html#ae50003ea8be96293f5ce776ee954822b">MemorySegmentSet::dumpMemoryProfile</a></div><div class="ttdeci">virtual void dumpMemoryProfile(FILE *outfile)</div><div class="ttdef"><b>Definition:</b> <a href="_memory_segment_8cpp_source.html#l00130">MemorySegment.cpp:130</a></div></div>
<div class="ttc" id="aclass_memory_segment_set_html_aedcb4e8810fcd3236e073032b8529049"><div class="ttname"><a href="class_memory_segment_set.html#aedcb4e8810fcd3236e073032b8529049">MemorySegmentSet::next</a></div><div class="ttdeci">MemorySegment * next(MemorySegment *segment)</div><div class="ttdef"><b>Definition:</b> <a href="_memory_segment_8hpp_source.html#l00239">MemorySegment.hpp:239</a></div></div>
<div class="ttc" id="aclass_memory_segment_set_html_aeedd3721553ad8312d07ad4895166265"><div class="ttname"><a href="class_memory_segment_set.html#aeedd3721553ad8312d07ad4895166265">MemorySegmentSet::newSegment</a></div><div class="ttdeci">bool newSegment(size_t requestLength, size_t minimumLength)</div><div class="ttdef"><b>Definition:</b> <a href="_memory_segment_8cpp_source.html#l00353">MemorySegment.cpp:353</a></div></div>
<div class="ttc" id="aclass_memory_segment_set_html_af79ceb6b8f31b9852445a6a07f51f605"><div class="ttname"><a href="class_memory_segment_set.html#af79ceb6b8f31b9852445a6a07f51f605">MemorySegmentSet::largestActiveSegment</a></div><div class="ttdeci">MemorySegment * largestActiveSegment()</div><div class="ttdef"><b>Definition:</b> <a href="_memory_segment_8cpp_source.html#l01404">MemorySegment.cpp:1404</a></div></div>
<div class="ttc" id="aclass_memory_segment_set_html_afcf45cd1bb986f7c3541fc577a69def3"><div class="ttname"><a href="class_memory_segment_set.html#afcf45cd1bb986f7c3541fc577a69def3">MemorySegmentSet::addDeadObject</a></div><div class="ttdeci">virtual void addDeadObject(DeadObject *object)</div><div class="ttdef"><b>Definition:</b> <a href="_memory_segment_8cpp_source.html#l00372">MemorySegment.cpp:372</a></div></div>
<div class="ttc" id="aclass_memory_stats_html"><div class="ttname"><a href="class_memory_stats.html">MemoryStats</a></div><div class="ttdef"><b>Definition:</b> <a href="_memory_stats_8hpp_source.html#l00099">MemoryStats.hpp:100</a></div></div>
<div class="ttc" id="aclass_normal_segment_set_html_a01e4eb09b4c1c84b957e1eaa55fbb5a0"><div class="ttname"><a href="class_normal_segment_set.html#a01e4eb09b4c1c84b957e1eaa55fbb5a0">NormalSegmentSet::addDeadObject</a></div><div class="ttdeci">void addDeadObject(DeadObject *object) override</div><div class="ttdef"><b>Definition:</b> <a href="_memory_segment_8cpp_source.html#l00427">MemorySegment.cpp:427</a></div></div>
<div class="ttc" id="aclass_normal_segment_set_html_a0818283bedff2836b230c25c70b79237"><div class="ttname"><a href="class_normal_segment_set.html#a0818283bedff2836b230c25c70b79237">NormalSegmentSet::suggestMemoryExpansion</a></div><div class="ttdeci">size_t suggestMemoryExpansion() override</div><div class="ttdef"><b>Definition:</b> <a href="_memory_segment_8cpp_source.html#l00666">MemorySegment.cpp:666</a></div></div>
<div class="ttc" id="aclass_normal_segment_set_html_a097e8c67981d9ab6a9894c21b39f643c"><div class="ttname"><a href="class_normal_segment_set.html#a097e8c67981d9ab6a9894c21b39f643c">NormalSegmentSet::dumpMemoryProfile</a></div><div class="ttdeci">void dumpMemoryProfile(FILE *outfile) override</div><div class="ttdef"><b>Definition:</b> <a href="_memory_segment_8cpp_source.html#l00173">MemorySegment.cpp:173</a></div></div>
<div class="ttc" id="aclass_normal_segment_set_html_a16c03544380b4017e5b1f8e0d5d2d902"><div class="ttname"><a href="class_normal_segment_set.html#a16c03544380b4017e5b1f8e0d5d2d902">NormalSegmentSet::deadPoolToLength</a></div><div class="ttdeci">static size_t deadPoolToLength(size_t d)</div><div class="ttdef"><b>Definition:</b> <a href="_memory_segment_8hpp_source.html#l00473">MemorySegment.hpp:473</a></div></div>
<div class="ttc" id="aclass_normal_segment_set_html_a2216c6e3a18510de391e9ba6d99df3ae"><div class="ttname"><a href="class_normal_segment_set.html#a2216c6e3a18510de391e9ba6d99df3ae">NormalSegmentSet::LargestSubpool</a></div><div class="ttdeci">static const size_t LargestSubpool</div><div class="ttdef"><b>Definition:</b> <a href="_memory_segment_8hpp_source.html#l00455">MemorySegment.hpp:455</a></div></div>
<div class="ttc" id="aclass_normal_segment_set_html_a345e710ccf84d6173992c70e32581bc3"><div class="ttname"><a href="class_normal_segment_set.html#a345e710ccf84d6173992c70e32581bc3">NormalSegmentSet::InitialNormalSegmentSpace</a></div><div class="ttdeci">static const size_t InitialNormalSegmentSpace</div><div class="ttdef"><b>Definition:</b> <a href="_memory_segment_8hpp_source.html#l00467">MemorySegment.hpp:467</a></div></div>
<div class="ttc" id="aclass_normal_segment_set_html_a3e0494f82fc154fe6af9f2057725e76e"><div class="ttname"><a href="class_normal_segment_set.html#a3e0494f82fc154fe6af9f2057725e76e">NormalSegmentSet::donateObject</a></div><div class="ttdeci">DeadObject * donateObject(size_t allocationLength) override</div><div class="ttdef"><b>Definition:</b> <a href="_memory_segment_8cpp_source.html#l00612">MemorySegment.cpp:612</a></div></div>
<div class="ttc" id="aclass_normal_segment_set_html_a46247417b1f4b4fece9559c00c3328ef"><div class="ttname"><a href="class_normal_segment_set.html#a46247417b1f4b4fece9559c00c3328ef">NormalSegmentSet::recoverSegment</a></div><div class="ttdeci">MemorySegment * recoverSegment</div><div class="ttdef"><b>Definition:</b> <a href="_memory_segment_8hpp_source.html#l00522">MemorySegment.hpp:522</a></div></div>
<div class="ttc" id="aclass_normal_segment_set_html_a5865c5b2831a666beb8bf2e59bf13209"><div class="ttname"><a href="class_normal_segment_set.html#a5865c5b2831a666beb8bf2e59bf13209">NormalSegmentSet::DeadPools</a></div><div class="ttdeci">static const size_t DeadPools</div><div class="ttdef"><b>Definition:</b> <a href="_memory_segment_8hpp_source.html#l00460">MemorySegment.hpp:460</a></div></div>
<div class="ttc" id="aclass_normal_segment_set_html_a6931728c87ac47644de894630e6e291d"><div class="ttname"><a href="class_normal_segment_set.html#a6931728c87ac47644de894630e6e291d">NormalSegmentSet::subpools</a></div><div class="ttdeci">DeadObjectPool subpools[DeadPools]</div><div class="ttdef"><b>Definition:</b> <a href="_memory_segment_8hpp_source.html#l00520">MemorySegment.hpp:520</a></div></div>
<div class="ttc" id="aclass_normal_segment_set_html_a6a863dffe8483a6d557016748c9cc117"><div class="ttname"><a href="class_normal_segment_set.html#a6a863dffe8483a6d557016748c9cc117">NormalSegmentSet::getInitialSet</a></div><div class="ttdeci">void getInitialSet()</div><div class="ttdef"><b>Definition:</b> <a href="_memory_segment_8cpp_source.html#l00275">MemorySegment.cpp:275</a></div></div>
<div class="ttc" id="aclass_normal_segment_set_html_a766ab6a1566c1302bd4b8e4b449a300a"><div class="ttname"><a href="class_normal_segment_set.html#a766ab6a1566c1302bd4b8e4b449a300a">NormalSegmentSet::largeDead</a></div><div class="ttdeci">DeadObjectPool largeDead</div><div class="ttdef"><b>Definition:</b> <a href="_memory_segment_8hpp_source.html#l00519">MemorySegment.hpp:519</a></div></div>
<div class="ttc" id="aclass_normal_segment_set_html_a92fb3c72b863ae7ffa9d2deb67bda275"><div class="ttname"><a href="class_normal_segment_set.html#a92fb3c72b863ae7ffa9d2deb67bda275">NormalSegmentSet::checkObjectOverlap</a></div><div class="ttdeci">void checkObjectOverlap(DeadObject *obj)</div><div class="ttdef"><b>Definition:</b> <a href="_memory_segment_8cpp_source.html#l00193">MemorySegment.cpp:193</a></div></div>
<div class="ttc" id="aclass_normal_segment_set_html_a994996286516a0d75304a65678c7db50"><div class="ttname"><a href="class_normal_segment_set.html#a994996286516a0d75304a65678c7db50">NormalSegmentSet::findObject</a></div><div class="ttdeci">RexxInternalObject * findObject(size_t allocationLength)</div><div class="ttdef"><b>Definition:</b> <a href="_memory_segment_8cpp_source.html#l01117">MemorySegment.cpp:1117</a></div></div>
<div class="ttc" id="aclass_normal_segment_set_html_aa9ee603ec69df6cf7759484ec49bb437"><div class="ttname"><a href="class_normal_segment_set.html#aa9ee603ec69df6cf7759484ec49bb437">NormalSegmentSet::RecoverSegmentSize</a></div><div class="ttdeci">static const size_t RecoverSegmentSize</div><div class="ttdef"><b>Definition:</b> <a href="_memory_segment_8hpp_source.html#l00465">MemorySegment.hpp:465</a></div></div>
<div class="ttc" id="aclass_normal_segment_set_html_ab6e00fafbb8f0d65807936be6864cc0f"><div class="ttname"><a href="class_normal_segment_set.html#ab6e00fafbb8f0d65807936be6864cc0f">NormalSegmentSet::completeSweepOperation</a></div><div class="ttdeci">void completeSweepOperation() override</div><div class="ttdef"><b>Definition:</b> <a href="_memory_segment_8cpp_source.html#l00853">MemorySegment.cpp:853</a></div></div>
<div class="ttc" id="aclass_normal_segment_set_html_ab83fecc011405c69e0b15849144cf571"><div class="ttname"><a href="class_normal_segment_set.html#ab83fecc011405c69e0b15849144cf571">NormalSegmentSet::lastUsedSubpool</a></div><div class="ttdeci">size_t lastUsedSubpool[DeadPools+1]</div><div class="ttdef"><b>Definition:</b> <a href="_memory_segment_8hpp_source.html#l00521">MemorySegment.hpp:521</a></div></div>
<div class="ttc" id="aclass_normal_segment_set_html_ac61049646d46e3293f706cfb6557643d"><div class="ttname"><a href="class_normal_segment_set.html#ac61049646d46e3293f706cfb6557643d">NormalSegmentSet::recommendedMemorySize</a></div><div class="ttdeci">size_t recommendedMemorySize()</div><div class="ttdef"><b>Definition:</b> <a href="_memory_segment_8hpp_source.html#l00477">MemorySegment.hpp:477</a></div></div>
<div class="ttc" id="aclass_normal_segment_set_html_ac6b3593d62d010acfde8c339d24c6bca"><div class="ttname"><a href="class_normal_segment_set.html#ac6b3593d62d010acfde8c339d24c6bca">NormalSegmentSet::lengthToDeadPool</a></div><div class="ttdeci">static size_t lengthToDeadPool(size_t l)</div><div class="ttdef"><b>Definition:</b> <a href="_memory_segment_8hpp_source.html#l00471">MemorySegment.hpp:471</a></div></div>
<div class="ttc" id="aclass_normal_segment_set_html_ac782818c3b2b503faeebba5af4421262"><div class="ttname"><a href="class_normal_segment_set.html#ac782818c3b2b503faeebba5af4421262">NormalSegmentSet::NormalSegmentSet</a></div><div class="ttdeci">NormalSegmentSet()</div><div class="ttdef"><b>Definition:</b> <a href="_memory_segment_8hpp_source.html#l00338">MemorySegment.hpp:338</a></div></div>
<div class="ttc" id="aclass_normal_segment_set_html_ad2ff1b5b7a2ed5b037eb09610513fef2"><div class="ttname"><a href="class_normal_segment_set.html#ad2ff1b5b7a2ed5b037eb09610513fef2">NormalSegmentSet::allocateObject</a></div><div class="ttdeci">RexxInternalObject * allocateObject(size_t allocationLength)</div><div class="ttdef"><b>Definition:</b> <a href="_memory_segment_8hpp_source.html#l00343">MemorySegment.hpp:343</a></div></div>
<div class="ttc" id="aclass_normal_segment_set_html_aea0339c96baed969ffc0eaa296475639"><div class="ttname"><a href="class_normal_segment_set.html#aea0339c96baed969ffc0eaa296475639">NormalSegmentSet::FirstDeadPool</a></div><div class="ttdeci">static const size_t FirstDeadPool</div><div class="ttdef"><b>Definition:</b> <a href="_memory_segment_8hpp_source.html#l00453">MemorySegment.hpp:453</a></div></div>
<div class="ttc" id="aclass_normal_segment_set_html_aec09944ce68e6df6fc30a8d571b96976"><div class="ttname"><a href="class_normal_segment_set.html#aec09944ce68e6df6fc30a8d571b96976">NormalSegmentSet::NormalMemoryExpansionThreshold</a></div><div class="ttdeci">static const double NormalMemoryExpansionThreshold</div><div class="ttdef"><b>Definition:</b> <a href="_memory_segment_8hpp_source.html#l00463">MemorySegment.hpp:463</a></div></div>
<div class="ttc" id="aclass_normal_segment_set_html_aec590c8fd58d3b1b6f4d929c5f576652"><div class="ttname"><a href="class_normal_segment_set.html#aec590c8fd58d3b1b6f4d929c5f576652">NormalSegmentSet::handleAllocationFailure</a></div><div class="ttdeci">RexxInternalObject * handleAllocationFailure(size_t allocationLength)</div><div class="ttdef"><b>Definition:</b> <a href="_memory_segment_8cpp_source.html#l01135">MemorySegment.cpp:1135</a></div></div>
<div class="ttc" id="aclass_normal_segment_set_html_af0e6bacd769a645c9dcf5483b2ba3b27"><div class="ttname"><a href="class_normal_segment_set.html#af0e6bacd769a645c9dcf5483b2ba3b27">NormalSegmentSet::prepareForSweep</a></div><div class="ttdeci">void prepareForSweep() override</div><div class="ttdef"><b>Definition:</b> <a href="_memory_segment_8cpp_source.html#l00814">MemorySegment.cpp:814</a></div></div>
<div class="ttc" id="aclass_normal_segment_set_html_af7b385b632c9a226a9ec36085a0df82c"><div class="ttname"><a href="class_normal_segment_set.html#af7b385b632c9a226a9ec36085a0df82c">NormalSegmentSet::findLargeDeadObject</a></div><div class="ttdeci">RexxInternalObject * findLargeDeadObject(size_t allocationLength)</div><div class="ttdef"><b>Definition:</b> <a href="_memory_segment_8cpp_source.html#l01092">MemorySegment.cpp:1092</a></div></div>
<div class="ttc" id="aclass_old_space_segment_set_html_a3066373d91adffe9121805a5a27329d6"><div class="ttname"><a href="class_old_space_segment_set.html#a3066373d91adffe9121805a5a27329d6">OldSpaceSegmentSet::addDeadObject</a></div><div class="ttdeci">void addDeadObject(DeadObject *object) override</div><div class="ttdef"><b>Definition:</b> <a href="_memory_segment_8cpp_source.html#l00415">MemorySegment.cpp:415</a></div></div>
<div class="ttc" id="aclass_old_space_segment_set_html_a62c07fdcd9edf1838dc5033e9266cc6c"><div class="ttname"><a href="class_old_space_segment_set.html#a62c07fdcd9edf1838dc5033e9266cc6c">OldSpaceSegmentSet::OldSpaceSegmentSet</a></div><div class="ttdeci">OldSpaceSegmentSet()</div><div class="ttdef"><b>Definition:</b> <a href="_memory_segment_8hpp_source.html#l00637">MemorySegment.hpp:637</a></div></div>
<div class="ttc" id="aclass_old_space_segment_set_html_aa668483032d422f659a0ca9311c76aef"><div class="ttname"><a href="class_old_space_segment_set.html#aa668483032d422f659a0ca9311c76aef">OldSpaceSegmentSet::findObject</a></div><div class="ttdeci">RexxInternalObject * findObject(size_t allocationLength)</div><div class="ttdef"><b>Definition:</b> <a href="_memory_segment_8cpp_source.html#l01306">MemorySegment.cpp:1306</a></div></div>
<div class="ttc" id="aclass_old_space_segment_set_html_abc73af5db4e6fe3ef7afe56cbd752660"><div class="ttname"><a href="class_old_space_segment_set.html#abc73af5db4e6fe3ef7afe56cbd752660">OldSpaceSegmentSet::deadCache</a></div><div class="ttdeci">DeadObjectPool deadCache</div><div class="ttdef"><b>Definition:</b> <a href="_memory_segment_8hpp_source.html#l00651">MemorySegment.hpp:651</a></div></div>
<div class="ttc" id="aclass_old_space_segment_set_html_adcca0179918159e458b4be6a128d8037"><div class="ttname"><a href="class_old_space_segment_set.html#adcca0179918159e458b4be6a128d8037">OldSpaceSegmentSet::allocateObject</a></div><div class="ttdeci">RexxInternalObject * allocateObject(size_t allocationLength)</div><div class="ttdef"><b>Definition:</b> <a href="_memory_segment_8cpp_source.html#l01380">MemorySegment.cpp:1380</a></div></div>
<div class="ttc" id="aclass_old_space_segment_set_html_afe2cb98ec19c68fd39a9914c7547ab57"><div class="ttname"><a href="class_old_space_segment_set.html#afe2cb98ec19c68fd39a9914c7547ab57">OldSpaceSegmentSet::markOldSpaceObjects</a></div><div class="ttdeci">void markOldSpaceObjects()</div><div class="ttdef"><b>Definition:</b> <a href="_memory_segment_8cpp_source.html#l01492">MemorySegment.cpp:1492</a></div></div>
<div class="ttc" id="aclass_rexx_internal_object_html"><div class="ttname"><a href="class_rexx_internal_object.html">RexxInternalObject</a></div><div class="ttdef"><b>Definition:</b> <a href="_object_class_8hpp_source.html#l00238">ObjectClass.hpp:239</a></div></div>
<div class="ttc" id="aclass_rexx_internal_object_html_a035eb8bf67ca1b43d4238e806a0db0a0"><div class="ttname"><a href="class_rexx_internal_object.html#a035eb8bf67ca1b43d4238e806a0db0a0">RexxInternalObject::getObjectSize</a></div><div class="ttdeci">size_t getObjectSize()</div><div class="ttdef"><b>Definition:</b> <a href="_object_class_8hpp_source.html#l00256">ObjectClass.hpp:256</a></div></div>
<div class="ttc" id="aclass_rexx_internal_object_html_a0e6545e24773bc7861c35a4f87984110"><div class="ttname"><a href="class_rexx_internal_object.html#a0e6545e24773bc7861c35a4f87984110">RexxInternalObject::nextObject</a></div><div class="ttdeci">RexxInternalObject * nextObject()</div><div class="ttdef"><b>Definition:</b> <a href="_object_class_8hpp_source.html#l00274">ObjectClass.hpp:274</a></div></div>
<div class="ttc" id="aclass_rexx_internal_object_html_a5c0ce096e06a4ed2bdf3173b38b80e08"><div class="ttname"><a href="class_rexx_internal_object.html#a5c0ce096e06a4ed2bdf3173b38b80e08">RexxInternalObject::isObjectLive</a></div><div class="ttdeci">bool isObjectLive(size_t mark)</div><div class="ttdef"><b>Definition:</b> <a href="_object_class_8hpp_source.html#l00305">ObjectClass.hpp:305</a></div></div>
<div class="ttc" id="aclass_rexx_internal_object_html_a66dac26647d4686e06dd66f083493a6c"><div class="ttname"><a href="class_rexx_internal_object.html#a66dac26647d4686e06dd66f083493a6c">RexxInternalObject::hasReferences</a></div><div class="ttdeci">bool hasReferences()</div><div class="ttdef"><b>Definition:</b> <a href="_object_class_8hpp_source.html#l00296">ObjectClass.hpp:296</a></div></div>
<div class="ttc" id="aclass_rexx_internal_object_html_ac2985a59a55bb9b00f6f94613138b514"><div class="ttname"><a href="class_rexx_internal_object.html#ac2985a59a55bb9b00f6f94613138b514">RexxInternalObject::isObjectDead</a></div><div class="ttdeci">bool isObjectDead(size_t mark)</div><div class="ttdef"><b>Definition:</b> <a href="_object_class_8hpp_source.html#l00306">ObjectClass.hpp:306</a></div></div>
<div class="ttc" id="aclass_rexx_internal_object_html_ad3fef1db4de36cd64d4ef1cf03c9b992"><div class="ttname"><a href="class_rexx_internal_object.html#ad3fef1db4de36cd64d4ef1cf03c9b992">RexxInternalObject::behaviour</a></div><div class="ttdeci">RexxBehaviour * behaviour</div><div class="ttdef"><b>Definition:</b> <a href="_object_class_8hpp_source.html#l00397">ObjectClass.hpp:397</a></div></div>
<div class="ttc" id="aclass_rexx_virtual_base_html_a2f55b3306d4d61a6ad8b7137a0bc4ad5"><div class="ttname"><a href="class_rexx_virtual_base.html#a2f55b3306d4d61a6ad8b7137a0bc4ad5">RexxVirtualBase::liveGeneral</a></div><div class="ttdeci">virtual void liveGeneral(MarkReason reason)</div><div class="ttdef"><b>Definition:</b> <a href="_object_class_8hpp_source.html#l00204">ObjectClass.hpp:204</a></div></div>
<div class="ttc" id="aclass_segment_stats_html"><div class="ttname"><a href="class_segment_stats.html">SegmentStats</a></div><div class="ttdef"><b>Definition:</b> <a href="_memory_stats_8hpp_source.html#l00069">MemoryStats.hpp:70</a></div></div>
<div class="ttc" id="aclass_segment_stats_html_a01b51d8c43b4c967b3ed7c9c439cf470"><div class="ttname"><a href="class_segment_stats.html#a01b51d8c43b4c967b3ed7c9c439cf470">SegmentStats::smallestSegment</a></div><div class="ttdeci">size_t smallestSegment</div><div class="ttdef"><b>Definition:</b> <a href="_memory_stats_8hpp_source.html#l00089">MemoryStats.hpp:89</a></div></div>
<div class="ttc" id="aclass_segment_stats_html_a3323a1d88f3c47bf46dbb39f2597f726"><div class="ttname"><a href="class_segment_stats.html#a3323a1d88f3c47bf46dbb39f2597f726">SegmentStats::recordObject</a></div><div class="ttdeci">void recordObject(MemoryStats *memStats, RexxInternalObject *obj)</div><div class="ttdef"><b>Definition:</b> <a href="_memory_stats_8cpp_source.html#l00070">MemoryStats.cpp:70</a></div></div>
<div class="ttc" id="aclass_segment_stats_html_a593319ffb90cc8b3116dbfaf3f499bb6"><div class="ttname"><a href="class_segment_stats.html#a593319ffb90cc8b3116dbfaf3f499bb6">SegmentStats::largestSegment</a></div><div class="ttdeci">size_t largestSegment</div><div class="ttdef"><b>Definition:</b> <a href="_memory_stats_8hpp_source.html#l00088">MemoryStats.hpp:88</a></div></div>
<div class="ttc" id="aclass_segment_stats_html_a8568adaea65e4258ef4fb3e25c51ea4f"><div class="ttname"><a href="class_segment_stats.html#a8568adaea65e4258ef4fb3e25c51ea4f">SegmentStats::count</a></div><div class="ttdeci">size_t count</div><div class="ttdef"><b>Definition:</b> <a href="_memory_stats_8hpp_source.html#l00087">MemoryStats.hpp:87</a></div></div>
<div class="ttc" id="aclass_single_object_segment_set_html_a19f592fe0ecffc436618ea2e91a75731"><div class="ttname"><a href="class_single_object_segment_set.html#a19f592fe0ecffc436618ea2e91a75731">SingleObjectSegmentSet::completeSweepOperation</a></div><div class="ttdeci">void completeSweepOperation() override</div><div class="ttdef"><b>Definition:</b> <a href="_memory_segment_8cpp_source.html#l00901">MemorySegment.cpp:901</a></div></div>
<div class="ttc" id="aclass_single_object_segment_set_html_a373a6818b73e802b93b18ee11a031ef7"><div class="ttname"><a href="class_single_object_segment_set.html#a373a6818b73e802b93b18ee11a031ef7">SingleObjectSegmentSet::ForceGCThreshold</a></div><div class="ttdeci">static const size_t ForceGCThreshold</div><div class="ttdef"><b>Definition:</b> <a href="_memory_segment_8hpp_source.html#l00621">MemorySegment.hpp:621</a></div></div>
<div class="ttc" id="aclass_single_object_segment_set_html_a6adda9dd24d13a15d7ab3e126f63fe3f"><div class="ttname"><a href="class_single_object_segment_set.html#a6adda9dd24d13a15d7ab3e126f63fe3f">SingleObjectSegmentSet::allocateSegment</a></div><div class="ttdeci">MemorySegment * allocateSegment(size_t requestLength, size_t minimumLength) override</div><div class="ttdef"><b>Definition:</b> <a href="_memory_segment_8cpp_source.html#l00335">MemorySegment.cpp:335</a></div></div>
<div class="ttc" id="aclass_single_object_segment_set_html_a7fbf0dfaa86f3c6ff79abd00dbdb3393"><div class="ttname"><a href="class_single_object_segment_set.html#a7fbf0dfaa86f3c6ff79abd00dbdb3393">SingleObjectSegmentSet::allocationCount</a></div><div class="ttdeci">size_t allocationCount</div><div class="ttdef"><b>Definition:</b> <a href="_memory_segment_8hpp_source.html#l00624">MemorySegment.hpp:624</a></div></div>
<div class="ttc" id="aclass_single_object_segment_set_html_a8db8a439aaad7b380cad79e197d10005"><div class="ttname"><a href="class_single_object_segment_set.html#a8db8a439aaad7b380cad79e197d10005">SingleObjectSegmentSet::addDeadObject</a></div><div class="ttdeci">void addDeadObject(DeadObject *object) override</div><div class="ttdef"><b>Definition:</b> <a href="_memory_segment_8cpp_source.html#l00395">MemorySegment.cpp:395</a></div></div>
<div class="ttc" id="aclass_single_object_segment_set_html_ac67669d37a41f6e421c89a587bcdee72"><div class="ttname"><a href="class_single_object_segment_set.html#ac67669d37a41f6e421c89a587bcdee72">SingleObjectSegmentSet::returnCount</a></div><div class="ttdeci">size_t returnCount</div><div class="ttdef"><b>Definition:</b> <a href="_memory_segment_8hpp_source.html#l00625">MemorySegment.hpp:625</a></div></div>
<div class="ttc" id="aclass_single_object_segment_set_html_ac7dcc7066403c1136641e682a60d6ff9"><div class="ttname"><a href="class_single_object_segment_set.html#ac7dcc7066403c1136641e682a60d6ff9">SingleObjectSegmentSet::handleAllocationFailure</a></div><div class="ttdeci">RexxInternalObject * handleAllocationFailure(size_t allocationLength)</div><div class="ttdef"><b>Definition:</b> <a href="_memory_segment_8cpp_source.html#l01277">MemorySegment.cpp:1277</a></div></div>
<div class="ttc" id="aclass_single_object_segment_set_html_ae48b330218485bf525031dcf5901f91a"><div class="ttname"><a href="class_single_object_segment_set.html#ae48b330218485bf525031dcf5901f91a">SingleObjectSegmentSet::allocateObject</a></div><div class="ttdeci">RexxInternalObject * allocateObject(size_t allocationLength)</div><div class="ttdef"><b>Definition:</b> <a href="_memory_segment_8cpp_source.html#l01331">MemorySegment.cpp:1331</a></div></div>
<div class="ttc" id="aclass_single_object_segment_set_html_af2bd029fc332fbaaa17c7924d04b18b3"><div class="ttname"><a href="class_single_object_segment_set.html#af2bd029fc332fbaaa17c7924d04b18b3">SingleObjectSegmentSet::dumpMemoryProfile</a></div><div class="ttdeci">void dumpMemoryProfile(FILE *outfile) override</div><div class="ttdef"><b>Definition:</b> <a href="_memory_segment_8cpp_source.html#l00156">MemorySegment.cpp:156</a></div></div>
<div class="ttc" id="aclass_single_object_segment_set_html_afb04312fc502cb7c11999978930e8862"><div class="ttname"><a href="class_single_object_segment_set.html#afb04312fc502cb7c11999978930e8862">SingleObjectSegmentSet::SingleObjectSegmentSet</a></div><div class="ttdeci">SingleObjectSegmentSet()</div><div class="ttdef"><b>Definition:</b> <a href="_memory_segment_8hpp_source.html#l00601">MemorySegment.hpp:601</a></div></div>
<div class="ttc" id="aclass_single_object_segment_set_html_afcd683bc1c99696b60fac438cca212dd"><div class="ttname"><a href="class_single_object_segment_set.html#afcd683bc1c99696b60fac438cca212dd">SingleObjectSegmentSet::allocationsSinceLastGC</a></div><div class="ttdeci">size_t allocationsSinceLastGC</div><div class="ttdef"><b>Definition:</b> <a href="_memory_segment_8hpp_source.html#l00623">MemorySegment.hpp:623</a></div></div>
<div class="ttc" id="aunix_2_platform_definitions_8h_html_a58f38f0d2d91763ecd599af6f16291e6"><div class="ttname"><a href="unix_2_platform_definitions_8h.html#a58f38f0d2d91763ecd599af6f16291e6">line_end</a></div><div class="ttdeci">#define line_end</div><div class="ttdef"><b>Definition:</b> <a href="unix_2_platform_definitions_8h_source.html#l00112">unix/PlatformDefinitions.h:112</a></div></div>
</div><!-- fragment --></div><!-- contents -->
</div><!-- doc-content -->
<!-- HTML footer for doxygen 1.9.2-->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_2b8d323c7289fed1299e6f1b6909d41b.html">oorexx</a></li><li class="navelem"><a class="el" href="dir_2dfb7423ce64cb60f62cee208bb73ae3.html">official</a></li><li class="navelem"><a class="el" href="dir_63144926d93644d0b571decfac4c5baa.html">main</a></li><li class="navelem"><a class="el" href="dir_5131a42d519b9b019d5264fc1f0fe4ab.html">trunk</a></li><li class="navelem"><a class="el" href="dir_07b471ff108ade29d714c67783960c47.html">interpreter</a></li><li class="navelem"><a class="el" href="dir_37bc88a9be8529c8a24789d5bf33f59a.html">memory</a></li><li class="navelem"><a class="el" href="_memory_segment_8cpp.html">MemorySegment.cpp</a></li>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.2 </li>
  </ul>
</div>
<!-- javascript code to insert the title in the condensed index (tabs) -->
<!-- See the function initMenu in menu.js:
     The condensed index is a list <ul> of several items <li>: Main Page, Classes, Files.
     I append a new item <li> which display the project name. -->
<script type="text/javascript">
$(function() {
  $('#main-menu').append('<li class="title" style="margin-left:3mm">ooRexx</li>')
});
</script>
<!-- end of javascript code -->
</body>
</html>
