<!-- HTML header for doxygen 1.9.2-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.2"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>ooRexx: ProgramMetaData.cpp Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<!--
    Removed completely the TITLEAREA because I don't like the loss of space.
    I want the title in the condensed index (tabs) at top of each HTML page.
    The insertion of the title is managed by javascript code in the footer,
    because this code must be executed AFTER the creation of the condensed index.
    Must have this setting to display the condensed index:
    DISABLE_INDEX = NO
-->
<!-- end header part -->
<!-- Generated by Doxygen 1.9.2 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('_program_meta_data_8cpp_source.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">ProgramMetaData.cpp</div>  </div>
</div><!--header-->
<div class="contents">
<a href="_program_meta_data_8cpp.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="comment">/*----------------------------------------------------------------------------*/</span></div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="comment">/*                                                                            */</span></div>
<div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="comment">/* Copyright (c) 1995, 2004 IBM Corporation. All rights reserved.             */</span></div>
<div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="comment">/* Copyright (c) 2005-2019 Rexx Language Association. All rights reserved.    */</span></div>
<div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="comment">/*                                                                            */</span></div>
<div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="comment">/* This program and the accompanying materials are made available under       */</span></div>
<div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="comment">/* the terms of the Common Public License v1.0 which accompanies this         */</span></div>
<div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="comment">/* distribution. A copy is also available at the following address:           */</span></div>
<div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="comment">/* https://www.oorexx.org/license.html                                        */</span></div>
<div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;<span class="comment">/*                                                                            */</span></div>
<div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;<span class="comment">/* Redistribution and use in source and binary forms, with or                 */</span></div>
<div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;<span class="comment">/* without modification, are permitted provided that the following            */</span></div>
<div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;<span class="comment">/* conditions are met:                                                        */</span></div>
<div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;<span class="comment">/*                                                                            */</span></div>
<div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;<span class="comment">/* Redistributions of source code must retain the above copyright             */</span></div>
<div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;<span class="comment">/* notice, this list of conditions and the following disclaimer.              */</span></div>
<div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;<span class="comment">/* Redistributions in binary form must reproduce the above copyright          */</span></div>
<div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;<span class="comment">/* notice, this list of conditions and the following disclaimer in            */</span></div>
<div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;<span class="comment">/* the documentation and/or other materials provided with the distribution.   */</span></div>
<div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;<span class="comment">/*                                                                            */</span></div>
<div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;<span class="comment">/* Neither the name of Rexx Language Association nor the names                */</span></div>
<div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;<span class="comment">/* of its contributors may be used to endorse or promote products             */</span></div>
<div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;<span class="comment">/* derived from this software without specific prior written permission.      */</span></div>
<div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;<span class="comment">/*                                                                            */</span></div>
<div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;<span class="comment">/* THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS        */</span></div>
<div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;<span class="comment">/* &quot;AS IS&quot; AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT          */</span></div>
<div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;<span class="comment">/* LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS          */</span></div>
<div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;<span class="comment">/* FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT   */</span></div>
<div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;<span class="comment">/* OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,      */</span></div>
<div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;<span class="comment">/* SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED   */</span></div>
<div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;<span class="comment">/* TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA,        */</span></div>
<div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;<span class="comment">/* OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY     */</span></div>
<div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;<span class="comment">/* OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING    */</span></div>
<div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;<span class="comment">/* NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS         */</span></div>
<div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;<span class="comment">/* SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.               */</span></div>
<div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;<span class="comment">/*                                                                            */</span></div>
<div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;<span class="comment">/*----------------------------------------------------------------------------*/</span></div>
<div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160; </div>
<div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160; </div>
<div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="_rexx_core_8h.html">RexxCore.h</a>&quot;</span></div>
<div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="_program_meta_data_8hpp.html">ProgramMetaData.hpp</a>&quot;</span></div>
<div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="_buffer_class_8hpp.html">BufferClass.hpp</a>&quot;</span></div>
<div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="_interpreter_8hpp.html">Interpreter.hpp</a>&quot;</span></div>
<div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="_activity_manager_8hpp.html">ActivityManager.hpp</a>&quot;</span></div>
<div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="_language_parser_8hpp.html">LanguageParser.hpp</a>&quot;</span></div>
<div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="_protected_object_8hpp.html">ProtectedObject.hpp</a>&quot;</span></div>
<div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;<span class="preprocessor">#include &quot;SysFile.hpp&quot;</span></div>
<div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="_routine_class_8hpp.html">RoutineClass.hpp</a>&quot;</span></div>
<div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="_package_class_8hpp.html">PackageClass.hpp</a>&quot;</span></div>
<div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="_string_util_8hpp.html">StringUtil.hpp</a>&quot;</span></div>
<div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="_mutable_buffer_class_8hpp.html">MutableBufferClass.hpp</a>&quot;</span></div>
<div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160; </div>
<div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;<span class="preprocessor">#include &lt;stdio.h&gt;</span></div>
<div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160; </div>
<div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160; </div>
<div class="line"><a name="l00056"></a><span class="lineno"><a class="line" href="_program_meta_data_8cpp.html#a3e2846d51d196c8ab7e1892f1ac7b8b7">   56</a></span>&#160;<span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="_program_meta_data_8cpp.html#a3e2846d51d196c8ab7e1892f1ac7b8b7">compiledHeader</a> = <span class="stringliteral">&quot;/**/@REXX&quot;</span>;</div>
<div class="line"><a name="l00057"></a><span class="lineno"><a class="line" href="_program_meta_data_8cpp.html#a154f32e104ce987d524692d17bb86669">   57</a></span>&#160;<span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="_program_meta_data_8cpp.html#a154f32e104ce987d524692d17bb86669">encodedHeader</a> = <span class="stringliteral">&quot;/**/@REXX@\n&quot;</span>;</div>
<div class="line"><a name="l00058"></a><span class="lineno"><a class="line" href="_program_meta_data_8cpp.html#ab2825846d290787302ef2b61feb69b44">   58</a></span>&#160;<span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="_program_meta_data_8cpp.html#ab2825846d290787302ef2b61feb69b44">standardShebang</a> = <span class="stringliteral">&quot;#!/usr/bin/env rexx\n&quot;</span>;</div>
<div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160; </div>
<div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;<span class="comment">/**</span></div>
<div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;<span class="comment"> * Allocate a combined metadata object with the flattened</span></div>
<div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;<span class="comment"> * program data after it.</span></div>
<div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;<span class="comment"> * @param size   The size of the object</span></div>
<div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;<span class="comment"> * @param buff   The appended buffer.</span></div>
<div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;<span class="comment"> * @return The storage allocated for the new instance.</span></div>
<div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l00070"></a><span class="lineno"><a class="line" href="class_program_meta_data.html#a208672074cea86e8189707d3f7ac25ad">   70</a></span>&#160;<span class="keywordtype">void</span> *ProgramMetaData::operator <span class="keyword">new</span> (<span class="keywordtype">size_t</span> size, <a class="code" href="class_buffer_class.html">BufferClass</a> *buff)</div>
<div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;{</div>
<div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;    <span class="comment">// allocate a new buffer for this</span></div>
<div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="class_system_interpreter.html#a50564ea403980e775c5509f7d0ecb973">SystemInterpreter::allocateResultMemory</a>(buff-&gt;getDataLength() + size - <span class="keyword">sizeof</span>(<span class="keywordtype">char</span>[4]));</div>
<div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;}</div>
<div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160; </div>
<div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;<span class="comment">/**</span></div>
<div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;<span class="comment"> * Initialize the meta data directly from a buffer.</span></div>
<div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;<span class="comment"> * @param level  The language level required for the code stored in the buffer.</span></div>
<div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;<span class="comment"> * @param image  The image buffer.</span></div>
<div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l00083"></a><span class="lineno"><a class="line" href="class_program_meta_data.html#a14285fb5777981c2bbe433f8deca5e1b">   83</a></span>&#160;<a class="code" href="class_program_meta_data.html#a14285fb5777981c2bbe433f8deca5e1b">ProgramMetaData::ProgramMetaData</a>(<a class="code" href="_language_level_8hpp.html#a516fbc83b0dd864f538da93688569753">LanguageLevel</a> level, <a class="code" href="class_buffer_class.html">BufferClass</a> *image)</div>
<div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;{</div>
<div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;    <span class="comment">// add the leading header, zero out remainder</span></div>
<div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;    memset(&amp;<a class="code" href="class_program_meta_data.html#ace43ba16c042323bf84d085cbaf500bd">fileTag</a>, <span class="charliteral">&#39;\0&#39;</span>, <span class="keyword">sizeof</span>(<a class="code" href="class_program_meta_data.html#ace43ba16c042323bf84d085cbaf500bd">fileTag</a>));</div>
<div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;    strcpy(<a class="code" href="class_program_meta_data.html#ace43ba16c042323bf84d085cbaf500bd">fileTag</a>, <a class="code" href="_program_meta_data_8cpp.html#a3e2846d51d196c8ab7e1892f1ac7b8b7">compiledHeader</a>);</div>
<div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;    <span class="comment">// fill in the version specifics and the hardware architecture type</span></div>
<div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;    <a class="code" href="class_program_meta_data.html#a03a967ab746eb3165cec9fd3b623b441">magicNumber</a> = <a class="code" href="class_program_meta_data.html#aad664d5ed6212eb00d9e976bba4b879ba00f74ec9ac66338d69276e49de9367ab">MAGICNUMBER</a>;</div>
<div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;    <a class="code" href="class_program_meta_data.html#aa591b723437f6771db774cb53219db35">imageVersion</a> = <a class="code" href="class_program_meta_data.html#aad664d5ed6212eb00d9e976bba4b879ba02dd3c316c211b62fd3560be942f41f9">METAVERSION</a>;</div>
<div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;    <span class="comment">// this is the number of bits in a word</span></div>
<div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;    <a class="code" href="class_program_meta_data.html#ab4f4143ed35462af197b1eb0dfaf17ff">wordSize</a> = <a class="code" href="class_interpreter.html#ad7a76540eee0e0a3c8143fa398665ffb">Interpreter::getWordSize</a>();</div>
<div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;    <a class="code" href="class_program_meta_data.html#a4f644b2ba8c1b54332819bcacf75c4f4">bigEndian</a> = <a class="code" href="class_interpreter.html#aa745286edf0e86180e93cdb9037d6c65">Interpreter::isBigEndian</a>();</div>
<div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;    <span class="comment">// this is the language level required to execute this program</span></div>
<div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;    <a class="code" href="class_program_meta_data.html#ab2ca2d652b71079f5ae88e538da7ab29">requiredLevel</a> = level;</div>
<div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;    memset(&amp;<a class="code" href="class_program_meta_data.html#a2e2f4d2e7cef8c16fad29a7ab177fc01">reserved</a>, <span class="charliteral">&#39;\0&#39;</span>, <span class="keyword">sizeof</span>(<a class="code" href="class_program_meta_data.html#a2e2f4d2e7cef8c16fad29a7ab177fc01">reserved</a>));</div>
<div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160; </div>
<div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;    <span class="comment">// copy in the image information</span></div>
<div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;    <a class="code" href="class_program_meta_data.html#a70ad3bccc24d13e61423c27996d81a3a">imageSize</a> = image-&gt;<a class="code" href="class_buffer_class_base.html#ac69e1aa513281794d97c188500777cf2">getDataLength</a>();</div>
<div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;    memcpy(<a class="code" href="class_program_meta_data.html#adcd3c56c44d30bb1ee7c2030424be237">imageData</a>, image-&gt;<a class="code" href="class_buffer_class.html#a50f839199283aeaeba79ad986cb7851a">getData</a>(), <a class="code" href="class_program_meta_data.html#a70ad3bccc24d13e61423c27996d81a3a">imageSize</a>);</div>
<div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;}</div>
<div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160; </div>
<div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;<span class="comment">/**</span></div>
<div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;<span class="comment"> * Initialize the meta data for a given data size.</span></div>
<div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;<span class="comment"> * @param level      The language level required for the saved program.</span></div>
<div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;<span class="comment"> * @param bufferSize The size of the program data.</span></div>
<div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l00110"></a><span class="lineno"><a class="line" href="class_program_meta_data.html#a0138c50591f20729811769b896c71f59">  110</a></span>&#160;<a class="code" href="class_program_meta_data.html#a14285fb5777981c2bbe433f8deca5e1b">ProgramMetaData::ProgramMetaData</a>(<a class="code" href="_language_level_8hpp.html#a516fbc83b0dd864f538da93688569753">LanguageLevel</a> level, <span class="keywordtype">size_t</span> bufferSize)</div>
<div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;{</div>
<div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;    <span class="comment">// add the leading header, zero out remainder</span></div>
<div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;    memset(&amp;<a class="code" href="class_program_meta_data.html#ace43ba16c042323bf84d085cbaf500bd">fileTag</a>, <span class="charliteral">&#39;\0&#39;</span>, <span class="keyword">sizeof</span>(<a class="code" href="class_program_meta_data.html#ace43ba16c042323bf84d085cbaf500bd">fileTag</a>));</div>
<div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;    strcpy(<a class="code" href="class_program_meta_data.html#ace43ba16c042323bf84d085cbaf500bd">fileTag</a>, <a class="code" href="_program_meta_data_8cpp.html#a3e2846d51d196c8ab7e1892f1ac7b8b7">compiledHeader</a>);</div>
<div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;    <span class="comment">// fill in the version specifics and the hardward architecture type</span></div>
<div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;    <a class="code" href="class_program_meta_data.html#a03a967ab746eb3165cec9fd3b623b441">magicNumber</a> = <a class="code" href="class_program_meta_data.html#aad664d5ed6212eb00d9e976bba4b879ba00f74ec9ac66338d69276e49de9367ab">MAGICNUMBER</a>;</div>
<div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;    <a class="code" href="class_program_meta_data.html#aa591b723437f6771db774cb53219db35">imageVersion</a> = <a class="code" href="class_program_meta_data.html#aad664d5ed6212eb00d9e976bba4b879ba02dd3c316c211b62fd3560be942f41f9">METAVERSION</a>;</div>
<div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;    <span class="comment">// this is the number of bits in a word</span></div>
<div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;    <a class="code" href="class_program_meta_data.html#ab4f4143ed35462af197b1eb0dfaf17ff">wordSize</a> = <a class="code" href="class_interpreter.html#ad7a76540eee0e0a3c8143fa398665ffb">Interpreter::getWordSize</a>();</div>
<div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;    <a class="code" href="class_program_meta_data.html#a4f644b2ba8c1b54332819bcacf75c4f4">bigEndian</a> = <a class="code" href="class_interpreter.html#aa745286edf0e86180e93cdb9037d6c65">Interpreter::isBigEndian</a>();</div>
<div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;    <span class="comment">// this is the language level required to execute this program</span></div>
<div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;    <a class="code" href="class_program_meta_data.html#ab2ca2d652b71079f5ae88e538da7ab29">requiredLevel</a> = level;</div>
<div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;    memset(&amp;<a class="code" href="class_program_meta_data.html#a2e2f4d2e7cef8c16fad29a7ab177fc01">reserved</a>, <span class="charliteral">&#39;\0&#39;</span>, <span class="keyword">sizeof</span>(<a class="code" href="class_program_meta_data.html#a2e2f4d2e7cef8c16fad29a7ab177fc01">reserved</a>));</div>
<div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160; </div>
<div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;    <span class="comment">// copy in the image information</span></div>
<div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;    <a class="code" href="class_program_meta_data.html#a70ad3bccc24d13e61423c27996d81a3a">imageSize</a> = bufferSize;</div>
<div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;}</div>
<div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160; </div>
<div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;<span class="comment">/**</span></div>
<div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;<span class="comment"> * Get the final size of a copied buffer</span></div>
<div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;<span class="comment"> * @return The data image size.</span></div>
<div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l00135"></a><span class="lineno"><a class="line" href="class_program_meta_data.html#a8faa4be5b8f5588a4acc4b05b1de11b9">  135</a></span>&#160;<span class="keywordtype">size_t</span> <a class="code" href="class_program_meta_data.html#a8faa4be5b8f5588a4acc4b05b1de11b9">ProgramMetaData::getDataSize</a>()</div>
<div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;{</div>
<div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="class_program_meta_data.html#a70ad3bccc24d13e61423c27996d81a3a">imageSize</a> + <span class="keyword">sizeof</span>(*this) - <span class="keyword">sizeof</span>(<a class="code" href="class_program_meta_data.html#adcd3c56c44d30bb1ee7c2030424be237">imageData</a>);</div>
<div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;}</div>
<div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160; </div>
<div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;<span class="comment">/**</span></div>
<div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;<span class="comment"> * Get the final size of a copied buffer</span></div>
<div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;<span class="comment"> * @return The data image size.</span></div>
<div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l00146"></a><span class="lineno"><a class="line" href="class_program_meta_data.html#aaa7483ca39079944129b077d26a02642">  146</a></span>&#160;<span class="keywordtype">size_t</span> <a class="code" href="class_program_meta_data.html#aaa7483ca39079944129b077d26a02642">ProgramMetaData::getHeaderSize</a>()</div>
<div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;{</div>
<div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;   <span class="keywordflow">return</span> (<span class="keywordtype">char</span> *)&amp;<a class="code" href="class_program_meta_data.html#adcd3c56c44d30bb1ee7c2030424be237">imageData</a> - (<span class="keywordtype">char</span> *)<span class="keyword">this</span>;</div>
<div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;}</div>
<div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160; </div>
<div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;<span class="comment">/**</span></div>
<div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;<span class="comment"> * Return a pointer to the inline image data.</span></div>
<div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;<span class="comment"> * @return The pointer to the image data following the metadata header.</span></div>
<div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l00157"></a><span class="lineno"><a class="line" href="class_program_meta_data.html#a668fb75e44e432a03f58c726dadd20ed">  157</a></span>&#160;<span class="keywordtype">char</span> *<a class="code" href="class_program_meta_data.html#a668fb75e44e432a03f58c726dadd20ed">ProgramMetaData::getImageData</a>()</div>
<div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;{</div>
<div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="class_program_meta_data.html#adcd3c56c44d30bb1ee7c2030424be237">imageData</a>;</div>
<div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;}</div>
<div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160; </div>
<div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;<span class="comment">/**</span></div>
<div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;<span class="comment"> * Restore a saved program from the metadata.</span></div>
<div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;<span class="comment"> * @param name   The program name being restored</span></div>
<div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;<span class="comment"> * @param buffer A buffer object that contains the image data</span></div>
<div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;<span class="comment"> * @return The restored Routine object, or NULL if this was not a saved program image.</span></div>
<div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l00171"></a><span class="lineno"><a class="line" href="class_program_meta_data.html#ad3454ba205e01631a3f4822b791603bb">  171</a></span>&#160;<a class="code" href="class_routine_class.html">RoutineClass</a> *<a class="code" href="class_program_meta_data.html#ad3454ba205e01631a3f4822b791603bb">ProgramMetaData::restore</a>(<a class="code" href="class_rexx_string.html">RexxString</a> *name, <a class="code" href="class_buffer_class.html">BufferClass</a> *buffer)</div>
<div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;{</div>
<div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;    <a class="code" href="class_program_meta_data.html">ProgramMetaData</a> *metaData;</div>
<div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160; </div>
<div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;    <span class="comment">// check to see if this is already translated</span></div>
<div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="class_program_meta_data.html#a3bf23ea7bf0f4ff27beb191ce0361063">processRestoreData</a>(name, buffer, metaData))</div>
<div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;    {</div>
<div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;        <span class="comment">// nope, can&#39;t restore this</span></div>
<div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="_rexx_core_8h.html#a181a36438ba4535dd7d22ab63239d1e1">OREF_NULL</a>;</div>
<div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;    }</div>
<div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160; </div>
<div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;    <span class="comment">// make sure this is valid for interpreter</span></div>
<div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;    <span class="keywordflow">if</span> (!metaData-&gt;<a class="code" href="class_program_meta_data.html#a8dfb7c4578e3be4b03047eaafd11bfa4">validate</a>(name))</div>
<div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;    {</div>
<div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="_rexx_core_8h.html#a181a36438ba4535dd7d22ab63239d1e1">OREF_NULL</a>;</div>
<div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;    }</div>
<div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160; </div>
<div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;    <span class="comment">// this should be valid...try to restore.</span></div>
<div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;    <a class="code" href="class_protected.html">Protected&lt;RoutineClass&gt;</a> routine = <a class="code" href="class_routine_class.html#a22784ca8d29f6fe026833498a2def5f5">RoutineClass::restore</a>(buffer, metaData-&gt;<a class="code" href="class_program_meta_data.html#a668fb75e44e432a03f58c726dadd20ed">getImageData</a>(), metaData-&gt;<a class="code" href="class_program_meta_data.html#a321801ae895a05cdd1bb324298ccbfa0">getImageSize</a>());</div>
<div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;    <span class="comment">// change the program name to match the file this was restored from</span></div>
<div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;    routine-&gt;getPackageObject()-&gt;setProgramName(name);</div>
<div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;    <span class="keywordflow">return</span> routine;</div>
<div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;}</div>
<div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160; </div>
<div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;<span class="comment">/**</span></div>
<div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;<span class="comment"> * Validate that this saved program image is valid for this</span></div>
<div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;<span class="comment"> * interpreter.</span></div>
<div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;<span class="comment"> * @param fileName The filename this metadata belongs to. Used for errors.</span></div>
<div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;<span class="comment"> * @return true if this is good data, false otherwise.</span></div>
<div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l00204"></a><span class="lineno"><a class="line" href="class_program_meta_data.html#a8dfb7c4578e3be4b03047eaafd11bfa4">  204</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="class_program_meta_data.html#a8dfb7c4578e3be4b03047eaafd11bfa4">ProgramMetaData::validate</a>(<a class="code" href="class_rexx_string.html">RexxString</a> *fileName)</div>
<div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;{</div>
<div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;    <span class="comment">// we always add the compiled program tag to the front</span></div>
<div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;    <span class="keywordflow">if</span> (strcmp(<a class="code" href="class_program_meta_data.html#ace43ba16c042323bf84d085cbaf500bd">fileTag</a>, <a class="code" href="_program_meta_data_8cpp.html#a3e2846d51d196c8ab7e1892f1ac7b8b7">compiledHeader</a>) != 0)</div>
<div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;    {</div>
<div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;    }</div>
<div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160; </div>
<div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;    <span class="comment">// check all of the version specifics</span></div>
<div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="class_program_meta_data.html#a03a967ab746eb3165cec9fd3b623b441">magicNumber</a> != <a class="code" href="class_program_meta_data.html#aad664d5ed6212eb00d9e976bba4b879ba00f74ec9ac66338d69276e49de9367ab">MAGICNUMBER</a> || <a class="code" href="class_program_meta_data.html#aa591b723437f6771db774cb53219db35">imageVersion</a> != <a class="code" href="class_program_meta_data.html#aad664d5ed6212eb00d9e976bba4b879ba02dd3c316c211b62fd3560be942f41f9">METAVERSION</a> || <a class="code" href="class_program_meta_data.html#ab4f4143ed35462af197b1eb0dfaf17ff">wordSize</a> != <a class="code" href="class_interpreter.html#ad7a76540eee0e0a3c8143fa398665ffb">Interpreter::getWordSize</a>() ||</div>
<div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;        (<a class="code" href="class_program_meta_data.html#a4f644b2ba8c1b54332819bcacf75c4f4">bigEndian</a> != 0) != <a class="code" href="class_interpreter.html#aa745286edf0e86180e93cdb9037d6c65">Interpreter::isBigEndian</a>() || !<a class="code" href="class_language_parser.html#ab438c1eefd98265f44d1ccda6440f354">LanguageParser::canExecute</a>((<a class="code" href="_language_level_8hpp.html#a516fbc83b0dd864f538da93688569753">LanguageLevel</a>)<a class="code" href="class_program_meta_data.html#ab2ca2d652b71079f5ae88e538da7ab29">requiredLevel</a>))</div>
<div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;    {</div>
<div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;        <span class="comment">// this is a version failure, mark it as such</span></div>
<div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;        <a class="code" href="_activity_manager_8hpp.html#ab278a90c36b1ea34f0d6a7e280799eaa">reportException</a>(<a class="code" href="_rexx_error_codes_8h.html#ab78d722675e696d37b9b75e363a8b358a0749290b326ecf9abc9db98aa0efd11d">Error_Program_unreadable_version</a>, fileName);</div>
<div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;    }</div>
<div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;    <span class="comment">// good to go.</span></div>
<div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;}</div>
<div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160; </div>
<div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;<span class="comment">/**</span></div>
<div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;<span class="comment"> * Write the metadata to a file.</span></div>
<div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;<span class="comment"> * @param handle  The handle of the output file.</span></div>
<div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;<span class="comment"> * @param program The program buffer data (also written out).</span></div>
<div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l00231"></a><span class="lineno"><a class="line" href="class_program_meta_data.html#a68d4a6f05eaf6456b4df8ccc0bd623c1">  231</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="class_program_meta_data.html#a68d4a6f05eaf6456b4df8ccc0bd623c1">ProgramMetaData::write</a>(<a class="code" href="class_sys_file.html">SysFile</a> &amp;target, <a class="code" href="class_buffer_class.html">BufferClass</a> *program, <span class="keywordtype">bool</span> encode)</div>
<div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;{</div>
<div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;    <span class="keywordtype">size_t</span> written = 0;</div>
<div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160; </div>
<div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;    <span class="comment">// non-encoded is the easy way. We can just write the data directly to the file</span></div>
<div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;    <span class="keywordflow">if</span> (!encode)</div>
<div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;    {</div>
<div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;        <a class="code" href="class_unsafe_block.html">UnsafeBlock</a> releaser;</div>
<div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160; </div>
<div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;        <span class="comment">// add a standard shebang line as a courtesy for the unix-based systems.</span></div>
<div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;        target.<a class="code" href="class_sys_file.html#ad1b4b4f0b7d69f8daaf33243a17916b5">write</a>(<a class="code" href="_program_meta_data_8cpp.html#ab2825846d290787302ef2b61feb69b44">standardShebang</a>, strlen(<a class="code" href="_program_meta_data_8cpp.html#ab2825846d290787302ef2b61feb69b44">standardShebang</a>), written);</div>
<div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;        target.<a class="code" href="class_sys_file.html#ad1b4b4f0b7d69f8daaf33243a17916b5">write</a>((<span class="keyword">const</span> <span class="keywordtype">char</span> *)<span class="keyword">this</span>, <a class="code" href="class_program_meta_data.html#aaa7483ca39079944129b077d26a02642">getHeaderSize</a>(), written);</div>
<div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;        <span class="comment">/* and finally the flattened method  */</span></div>
<div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;        target.<a class="code" href="class_sys_file.html#ad1b4b4f0b7d69f8daaf33243a17916b5">write</a>(program-&gt;<a class="code" href="class_buffer_class.html#a50f839199283aeaeba79ad986cb7851a">getData</a>(), program-&gt;<a class="code" href="class_buffer_class_base.html#ac69e1aa513281794d97c188500777cf2">getDataLength</a>(), written);</div>
<div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;    }</div>
<div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;    <span class="comment">// encoding is a pain, we need to copy everything into a single string, base64-encode</span></div>
<div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;    <span class="comment">// the whole lot, then write it out with a special header that says it is encoded.</span></div>
<div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;    {</div>
<div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;        <a class="code" href="class_protected.html">Protected&lt;RexxString&gt;</a> fullBuffer = <a class="code" href="_string_class_8hpp.html#ab9649942d2a3392acb289716bd1e4ee7">raw_string</a>(<a class="code" href="class_program_meta_data.html#aaa7483ca39079944129b077d26a02642">getHeaderSize</a>() + program-&gt;<a class="code" href="class_buffer_class_base.html#ac69e1aa513281794d97c188500777cf2">getDataLength</a>());</div>
<div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160; </div>
<div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;        <span class="comment">// copy in the stem name and the tail piece.</span></div>
<div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;        <span class="keywordtype">char</span> *bufferData = fullBuffer-&gt;getWritableData();</div>
<div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;        <span class="comment">// copy the metadata structure to the string</span></div>
<div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;        memcpy(bufferData, (<span class="keyword">const</span> <span class="keywordtype">char</span> *)<span class="keyword">this</span>, <a class="code" href="class_program_meta_data.html#aaa7483ca39079944129b077d26a02642">getHeaderSize</a>());</div>
<div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;        <span class="comment">// append the program data</span></div>
<div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;        memcpy(bufferData + <a class="code" href="class_program_meta_data.html#aaa7483ca39079944129b077d26a02642">getHeaderSize</a>(), program-&gt;<a class="code" href="class_buffer_class.html#a50f839199283aeaeba79ad986cb7851a">getData</a>(), program-&gt;<a class="code" href="class_buffer_class_base.html#ac69e1aa513281794d97c188500777cf2">getDataLength</a>());</div>
<div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160; </div>
<div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;        <span class="keywordtype">size_t</span> estimatedSize = ((program-&gt;<a class="code" href="class_buffer_class_base.html#ac69e1aa513281794d97c188500777cf2">getDataLength</a>() / 3) * 4 + 1) + (program-&gt;<a class="code" href="class_buffer_class_base.html#ac69e1aa513281794d97c188500777cf2">getDataLength</a>() / <a class="code" href="class_program_meta_data.html#a7924bb967ea163e0beeb2635f8821e0f">encodingChunkLength</a>) + 1;</div>
<div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160; </div>
<div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;        <a class="code" href="class_protected.html">Protected&lt;MutableBuffer&gt;</a> encodedBuffer = <span class="keyword">new</span> <a class="code" href="class_mutable_buffer.html">MutableBuffer</a>(estimatedSize, estimatedSize);</div>
<div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160; </div>
<div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;        <a class="code" href="class_string_util.html#af10892ef6b05cf9d44491fc9379df77f">StringUtil::encodeBase64</a>(bufferData, fullBuffer-&gt;getLength(), encodedBuffer, <a class="code" href="class_program_meta_data.html#a7924bb967ea163e0beeb2635f8821e0f">encodingChunkLength</a>);</div>
<div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160; </div>
<div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;        {</div>
<div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;            <a class="code" href="class_unsafe_block.html">UnsafeBlock</a> releaser;</div>
<div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160; </div>
<div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;            <span class="comment">// add a standard shebang line as a courtesy for the unix-based systems.</span></div>
<div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;            target.<a class="code" href="class_sys_file.html#ad1b4b4f0b7d69f8daaf33243a17916b5">write</a>(<a class="code" href="_program_meta_data_8cpp.html#ab2825846d290787302ef2b61feb69b44">standardShebang</a>, strlen(<a class="code" href="_program_meta_data_8cpp.html#ab2825846d290787302ef2b61feb69b44">standardShebang</a>), written);</div>
<div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;            target.<a class="code" href="class_sys_file.html#ad1b4b4f0b7d69f8daaf33243a17916b5">write</a>(<a class="code" href="_program_meta_data_8cpp.html#a154f32e104ce987d524692d17bb86669">encodedHeader</a>, strlen(<a class="code" href="_program_meta_data_8cpp.html#a154f32e104ce987d524692d17bb86669">encodedHeader</a>), written);</div>
<div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;            <span class="comment">// and finally the encoded metadata and method</span></div>
<div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;            target.<a class="code" href="class_sys_file.html#ad1b4b4f0b7d69f8daaf33243a17916b5">write</a>(encodedBuffer-&gt;getData(), encodedBuffer-&gt;getLength(), written);</div>
<div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;        }</div>
<div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;    }</div>
<div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;}</div>
<div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160; </div>
<div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;<span class="comment">/**</span></div>
<div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;<span class="comment"> * If restore data was base64 encoded, decode and copy the decoded data to the appropriate place in the received buffer</span></div>
<div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;<span class="comment"> * @param fileName The name of the file being checked</span></div>
<div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;<span class="comment"> * @param buffer   The buffer object containing the program data. If this is a compiled program that has been string encoded, the data will be decoded in place.</span></div>
<div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;<span class="comment"> * @param metaData The pointer to the start of the saved metadata.</span></div>
<div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;<span class="comment"> * @return true if this is a compiled program, false if this needs to be translated.</span></div>
<div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l00287"></a><span class="lineno"><a class="line" href="class_program_meta_data.html#a3bf23ea7bf0f4ff27beb191ce0361063">  287</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="class_program_meta_data.html#a3bf23ea7bf0f4ff27beb191ce0361063">ProgramMetaData::processRestoreData</a>(<a class="code" href="class_rexx_string.html">RexxString</a> *fileName, <a class="code" href="class_buffer_class.html">BufferClass</a> *buffer, <a class="code" href="class_program_meta_data.html">ProgramMetaData</a> *&amp;metaData)</div>
<div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;{</div>
<div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;    <span class="keywordtype">char</span> *data = buffer-&gt;<a class="code" href="class_buffer_class.html#a50f839199283aeaeba79ad986cb7851a">getData</a>();</div>
<div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;    <span class="keywordtype">size_t</span> length = buffer-&gt;<a class="code" href="class_buffer_class_base.html#ac69e1aa513281794d97c188500777cf2">getDataLength</a>();</div>
<div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160; </div>
<div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;    metaData = NULL;</div>
<div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160; </div>
<div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;    <span class="comment">// does this start with a hash-bang?  Need to scan forward to the first</span></div>
<div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;    <span class="comment">// newline character</span></div>
<div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;    <span class="keywordflow">if</span> (data[0] == <span class="charliteral">&#39;#&#39;</span> &amp;&amp; data[1] == <span class="charliteral">&#39;!&#39;</span>)</div>
<div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;    {</div>
<div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;        data = (<span class="keywordtype">char</span> *)<a class="code" href="class_utilities.html#a26aa32563e1248068e3355f02d24a8f0">Utilities::strnchr</a>(data, length, <span class="charliteral">&#39;\n&#39;</span>);</div>
<div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;        <span class="keywordflow">if</span> (data == <a class="code" href="_rexx_core_8h.html#a181a36438ba4535dd7d22ab63239d1e1">OREF_NULL</a>)</div>
<div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;        {</div>
<div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;            <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;        }</div>
<div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;        <span class="comment">// step over the linend</span></div>
<div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;        data++;</div>
<div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;    }</div>
<div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160; </div>
<div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;    <span class="comment">// adjust the length for everything after the shebang</span></div>
<div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;    length -= data - buffer-&gt;<a class="code" href="class_buffer_class.html#a50f839199283aeaeba79ad986cb7851a">getData</a>();</div>
<div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160; </div>
<div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;    <span class="comment">// Now check in binary form of the compiled version</span></div>
<div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;    <span class="keywordflow">if</span> (length &gt; strlen(<a class="code" href="_program_meta_data_8cpp.html#a3e2846d51d196c8ab7e1892f1ac7b8b7">compiledHeader</a>) &amp;&amp; strcmp(data, <a class="code" href="_program_meta_data_8cpp.html#a3e2846d51d196c8ab7e1892f1ac7b8b7">compiledHeader</a>) == 0)</div>
<div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;    {</div>
<div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;        <span class="comment">// the problem with having a shebang in front of the data is that it opens the</span></div>
<div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;        <span class="comment">// possibility that the flattened program data is not aligned on an object grain</span></div>
<div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;        <span class="comment">// boundary. This can either cause invalid objects to created on the heap or even</span></div>
<div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;        <span class="comment">// result in data exceptions if the fields are not aligned on a proper word boundary.</span></div>
<div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;        <span class="comment">// If this is anywhere other than the front of the buffer, we need to shift it to</span></div>
<div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;        <span class="comment">// the front.</span></div>
<div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160; </div>
<div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;        <span class="comment">// the returned metadata will be at the beginning</span></div>
<div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;        metaData = (<a class="code" href="class_program_meta_data.html">ProgramMetaData</a> *)buffer-&gt;<a class="code" href="class_buffer_class.html#a50f839199283aeaeba79ad986cb7851a">getData</a>();</div>
<div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160; </div>
<div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;        <span class="comment">// once we&#39;ve shifted it</span></div>
<div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;        <span class="keywordflow">if</span> (data != buffer-&gt;<a class="code" href="class_buffer_class.html#a50f839199283aeaeba79ad986cb7851a">getData</a>())</div>
<div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;        {</div>
<div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;           memmove((<span class="keywordtype">void</span> *)buffer-&gt;<a class="code" href="class_buffer_class.html#a50f839199283aeaeba79ad986cb7851a">getData</a>(), (<span class="keywordtype">void</span> *)data, length);</div>
<div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;        }</div>
<div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;    }</div>
<div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160; </div>
<div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;    <span class="keywordtype">size_t</span> encodedHeaderLength = strlen(<a class="code" href="_program_meta_data_8cpp.html#a154f32e104ce987d524692d17bb86669">encodedHeader</a>);</div>
<div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160; </div>
<div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;    <span class="comment">// if this is an encoded header, we need to decode this first</span></div>
<div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;    <span class="keywordflow">if</span> (length &gt; encodedHeaderLength &amp;&amp; memcmp(data, <a class="code" href="_program_meta_data_8cpp.html#a154f32e104ce987d524692d17bb86669">encodedHeader</a>, encodedHeaderLength) == 0)</div>
<div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;    {</div>
<div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;        <span class="keywordtype">char</span> *beginEncodedData = data + encodedHeaderLength;</div>
<div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;        <span class="keywordtype">size_t</span> encodedLength   = length - encodedHeaderLength;</div>
<div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160; </div>
<div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;        <span class="keywordtype">size_t</span> decodedLength;</div>
<div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160; </div>
<div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;        <span class="comment">// Note that we are decoding to the beginning of the buffer, which overwrites any</span></div>
<div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;        <span class="comment">// shebang and the binary header while also ensuring the data is aligned on a proper</span></div>
<div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;        <span class="comment">// object grain boundary,</span></div>
<div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;        metaData = (<a class="code" href="class_program_meta_data.html">ProgramMetaData</a> *)buffer-&gt;<a class="code" href="class_buffer_class.html#a50f839199283aeaeba79ad986cb7851a">getData</a>();</div>
<div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160; </div>
<div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;        <span class="comment">// we now have the encoded data, decode it in place, overwriting the compiled header</span></div>
<div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;        <span class="keywordflow">if</span> (!<a class="code" href="class_string_util.html#aafd27dbcb05f192a464b731f331b354b">StringUtil::decodeBase64</a>(beginEncodedData, encodedLength, buffer-&gt;<a class="code" href="class_buffer_class.html#a50f839199283aeaeba79ad986cb7851a">getData</a>(), decodedLength))</div>
<div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;        {</div>
<div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;            <a class="code" href="_activity_manager_8hpp.html#ab278a90c36b1ea34f0d6a7e280799eaa">reportException</a>(<a class="code" href="_rexx_error_codes_8h.html#ab78d722675e696d37b9b75e363a8b358a86c1b268c27a521ad755f8774b7d57ff">Error_Program_unreadable_invalid_encoding</a>, fileName);</div>
<div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;        }</div>
<div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;    }</div>
<div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;}</div>
<div class="ttc" id="a_activity_manager_8hpp_html"><div class="ttname"><a href="_activity_manager_8hpp.html">ActivityManager.hpp</a></div></div>
<div class="ttc" id="a_activity_manager_8hpp_html_ab278a90c36b1ea34f0d6a7e280799eaa"><div class="ttname"><a href="_activity_manager_8hpp.html#ab278a90c36b1ea34f0d6a7e280799eaa">reportException</a></div><div class="ttdeci">void reportException(RexxErrorCodes error)</div><div class="ttdef"><b>Definition:</b> <a href="_activity_manager_8hpp_source.html#l00211">ActivityManager.hpp:211</a></div></div>
<div class="ttc" id="a_buffer_class_8hpp_html"><div class="ttname"><a href="_buffer_class_8hpp.html">BufferClass.hpp</a></div></div>
<div class="ttc" id="a_interpreter_8hpp_html"><div class="ttname"><a href="_interpreter_8hpp.html">Interpreter.hpp</a></div></div>
<div class="ttc" id="a_language_level_8hpp_html_a516fbc83b0dd864f538da93688569753"><div class="ttname"><a href="_language_level_8hpp.html#a516fbc83b0dd864f538da93688569753">LanguageLevel</a></div><div class="ttdeci">LanguageLevel</div><div class="ttdef"><b>Definition:</b> <a href="_language_level_8hpp_source.html#l00059">LanguageLevel.hpp:60</a></div></div>
<div class="ttc" id="a_language_parser_8hpp_html"><div class="ttname"><a href="_language_parser_8hpp.html">LanguageParser.hpp</a></div></div>
<div class="ttc" id="a_mutable_buffer_class_8hpp_html"><div class="ttname"><a href="_mutable_buffer_class_8hpp.html">MutableBufferClass.hpp</a></div></div>
<div class="ttc" id="a_package_class_8hpp_html"><div class="ttname"><a href="_package_class_8hpp.html">PackageClass.hpp</a></div></div>
<div class="ttc" id="a_program_meta_data_8cpp_html_a154f32e104ce987d524692d17bb86669"><div class="ttname"><a href="_program_meta_data_8cpp.html#a154f32e104ce987d524692d17bb86669">encodedHeader</a></div><div class="ttdeci">const char * encodedHeader</div><div class="ttdef"><b>Definition:</b> <a href="_program_meta_data_8cpp_source.html#l00057">ProgramMetaData.cpp:57</a></div></div>
<div class="ttc" id="a_program_meta_data_8cpp_html_a3e2846d51d196c8ab7e1892f1ac7b8b7"><div class="ttname"><a href="_program_meta_data_8cpp.html#a3e2846d51d196c8ab7e1892f1ac7b8b7">compiledHeader</a></div><div class="ttdeci">const char * compiledHeader</div><div class="ttdef"><b>Definition:</b> <a href="_program_meta_data_8cpp_source.html#l00056">ProgramMetaData.cpp:56</a></div></div>
<div class="ttc" id="a_program_meta_data_8cpp_html_ab2825846d290787302ef2b61feb69b44"><div class="ttname"><a href="_program_meta_data_8cpp.html#ab2825846d290787302ef2b61feb69b44">standardShebang</a></div><div class="ttdeci">const char * standardShebang</div><div class="ttdef"><b>Definition:</b> <a href="_program_meta_data_8cpp_source.html#l00058">ProgramMetaData.cpp:58</a></div></div>
<div class="ttc" id="a_program_meta_data_8hpp_html"><div class="ttname"><a href="_program_meta_data_8hpp.html">ProgramMetaData.hpp</a></div></div>
<div class="ttc" id="a_protected_object_8hpp_html"><div class="ttname"><a href="_protected_object_8hpp.html">ProtectedObject.hpp</a></div></div>
<div class="ttc" id="a_rexx_core_8h_html"><div class="ttname"><a href="_rexx_core_8h.html">RexxCore.h</a></div></div>
<div class="ttc" id="a_rexx_core_8h_html_a181a36438ba4535dd7d22ab63239d1e1"><div class="ttname"><a href="_rexx_core_8h.html#a181a36438ba4535dd7d22ab63239d1e1">OREF_NULL</a></div><div class="ttdeci">#define OREF_NULL</div><div class="ttdef"><b>Definition:</b> <a href="_rexx_core_8h_source.html#l00055">RexxCore.h:55</a></div></div>
<div class="ttc" id="a_rexx_error_codes_8h_html_ab78d722675e696d37b9b75e363a8b358a0749290b326ecf9abc9db98aa0efd11d"><div class="ttname"><a href="_rexx_error_codes_8h.html#ab78d722675e696d37b9b75e363a8b358a0749290b326ecf9abc9db98aa0efd11d">Error_Program_unreadable_version</a></div><div class="ttdeci">@ Error_Program_unreadable_version</div><div class="ttdef"><b>Definition:</b> <a href="_rexx_error_codes_8h_source.html#l00064">RexxErrorCodes.h:64</a></div></div>
<div class="ttc" id="a_rexx_error_codes_8h_html_ab78d722675e696d37b9b75e363a8b358a86c1b268c27a521ad755f8774b7d57ff"><div class="ttname"><a href="_rexx_error_codes_8h.html#ab78d722675e696d37b9b75e363a8b358a86c1b268c27a521ad755f8774b7d57ff">Error_Program_unreadable_invalid_encoding</a></div><div class="ttdeci">@ Error_Program_unreadable_invalid_encoding</div><div class="ttdef"><b>Definition:</b> <a href="_rexx_error_codes_8h_source.html#l00065">RexxErrorCodes.h:65</a></div></div>
<div class="ttc" id="a_routine_class_8hpp_html"><div class="ttname"><a href="_routine_class_8hpp.html">RoutineClass.hpp</a></div></div>
<div class="ttc" id="a_string_class_8hpp_html_ab9649942d2a3392acb289716bd1e4ee7"><div class="ttname"><a href="_string_class_8hpp.html#ab9649942d2a3392acb289716bd1e4ee7">raw_string</a></div><div class="ttdeci">RexxString * raw_string(size_t l)</div><div class="ttdef"><b>Definition:</b> <a href="_string_class_8hpp_source.html#l00836">StringClass.hpp:836</a></div></div>
<div class="ttc" id="a_string_util_8hpp_html"><div class="ttname"><a href="_string_util_8hpp.html">StringUtil.hpp</a></div></div>
<div class="ttc" id="aclass_buffer_class_base_html_ac69e1aa513281794d97c188500777cf2"><div class="ttname"><a href="class_buffer_class_base.html#ac69e1aa513281794d97c188500777cf2">BufferClassBase::getDataLength</a></div><div class="ttdeci">size_t getDataLength()</div><div class="ttdef"><b>Definition:</b> <a href="_buffer_class_8hpp_source.html#l00055">BufferClass.hpp:55</a></div></div>
<div class="ttc" id="aclass_buffer_class_html"><div class="ttname"><a href="class_buffer_class.html">BufferClass</a></div><div class="ttdef"><b>Definition:</b> <a href="_buffer_class_8hpp_source.html#l00094">BufferClass.hpp:95</a></div></div>
<div class="ttc" id="aclass_buffer_class_html_a50f839199283aeaeba79ad986cb7851a"><div class="ttname"><a href="class_buffer_class.html#a50f839199283aeaeba79ad986cb7851a">BufferClass::getData</a></div><div class="ttdeci">char * getData() override</div><div class="ttdef"><b>Definition:</b> <a href="_buffer_class_8hpp_source.html#l00113">BufferClass.hpp:113</a></div></div>
<div class="ttc" id="aclass_interpreter_html_aa745286edf0e86180e93cdb9037d6c65"><div class="ttname"><a href="class_interpreter.html#aa745286edf0e86180e93cdb9037d6c65">Interpreter::isBigEndian</a></div><div class="ttdeci">static bool isBigEndian()</div><div class="ttdef"><b>Definition:</b> <a href="_interpreter_8hpp_source.html#l00113">Interpreter.hpp:113</a></div></div>
<div class="ttc" id="aclass_interpreter_html_ad7a76540eee0e0a3c8143fa398665ffb"><div class="ttname"><a href="class_interpreter.html#ad7a76540eee0e0a3c8143fa398665ffb">Interpreter::getWordSize</a></div><div class="ttdeci">static int getWordSize()</div><div class="ttdef"><b>Definition:</b> <a href="_interpreter_8hpp_source.html#l00108">Interpreter.hpp:108</a></div></div>
<div class="ttc" id="aclass_language_parser_html_ab438c1eefd98265f44d1ccda6440f354"><div class="ttname"><a href="class_language_parser.html#ab438c1eefd98265f44d1ccda6440f354">LanguageParser::canExecute</a></div><div class="ttdeci">static bool canExecute(LanguageLevel l)</div><div class="ttdef"><b>Definition:</b> <a href="_language_parser_8cpp_source.html#l00823">LanguageParser.cpp:823</a></div></div>
<div class="ttc" id="aclass_mutable_buffer_html"><div class="ttname"><a href="class_mutable_buffer.html">MutableBuffer</a></div><div class="ttdef"><b>Definition:</b> <a href="_mutable_buffer_class_8hpp_source.html#l00055">MutableBufferClass.hpp:56</a></div></div>
<div class="ttc" id="aclass_program_meta_data_html"><div class="ttname"><a href="class_program_meta_data.html">ProgramMetaData</a></div><div class="ttdef"><b>Definition:</b> <a href="_program_meta_data_8hpp_source.html#l00048">ProgramMetaData.hpp:49</a></div></div>
<div class="ttc" id="aclass_program_meta_data_html_a03a967ab746eb3165cec9fd3b623b441"><div class="ttname"><a href="class_program_meta_data.html#a03a967ab746eb3165cec9fd3b623b441">ProgramMetaData::magicNumber</a></div><div class="ttdeci">uint16_t magicNumber</div><div class="ttdef"><b>Definition:</b> <a href="_program_meta_data_8hpp_source.html#l00079">ProgramMetaData.hpp:79</a></div></div>
<div class="ttc" id="aclass_program_meta_data_html_a14285fb5777981c2bbe433f8deca5e1b"><div class="ttname"><a href="class_program_meta_data.html#a14285fb5777981c2bbe433f8deca5e1b">ProgramMetaData::ProgramMetaData</a></div><div class="ttdeci">ProgramMetaData(LanguageLevel, BufferClass *)</div><div class="ttdef"><b>Definition:</b> <a href="_program_meta_data_8cpp_source.html#l00083">ProgramMetaData.cpp:83</a></div></div>
<div class="ttc" id="aclass_program_meta_data_html_a2e2f4d2e7cef8c16fad29a7ab177fc01"><div class="ttname"><a href="class_program_meta_data.html#a2e2f4d2e7cef8c16fad29a7ab177fc01">ProgramMetaData::reserved</a></div><div class="ttdeci">uint32_t reserved</div><div class="ttdef"><b>Definition:</b> <a href="_program_meta_data_8hpp_source.html#l00084">ProgramMetaData.hpp:84</a></div></div>
<div class="ttc" id="aclass_program_meta_data_html_a321801ae895a05cdd1bb324298ccbfa0"><div class="ttname"><a href="class_program_meta_data.html#a321801ae895a05cdd1bb324298ccbfa0">ProgramMetaData::getImageSize</a></div><div class="ttdeci">size_t getImageSize()</div><div class="ttdef"><b>Definition:</b> <a href="_program_meta_data_8hpp_source.html#l00060">ProgramMetaData.hpp:60</a></div></div>
<div class="ttc" id="aclass_program_meta_data_html_a3bf23ea7bf0f4ff27beb191ce0361063"><div class="ttname"><a href="class_program_meta_data.html#a3bf23ea7bf0f4ff27beb191ce0361063">ProgramMetaData::processRestoreData</a></div><div class="ttdeci">static bool processRestoreData(RexxString *fileName, BufferClass *data, ProgramMetaData *&amp;metaData)</div><div class="ttdef"><b>Definition:</b> <a href="_program_meta_data_8cpp_source.html#l00287">ProgramMetaData.cpp:287</a></div></div>
<div class="ttc" id="aclass_program_meta_data_html_a4f644b2ba8c1b54332819bcacf75c4f4"><div class="ttname"><a href="class_program_meta_data.html#a4f644b2ba8c1b54332819bcacf75c4f4">ProgramMetaData::bigEndian</a></div><div class="ttdeci">uint16_t bigEndian</div><div class="ttdef"><b>Definition:</b> <a href="_program_meta_data_8hpp_source.html#l00082">ProgramMetaData.hpp:82</a></div></div>
<div class="ttc" id="aclass_program_meta_data_html_a668fb75e44e432a03f58c726dadd20ed"><div class="ttname"><a href="class_program_meta_data.html#a668fb75e44e432a03f58c726dadd20ed">ProgramMetaData::getImageData</a></div><div class="ttdeci">char * getImageData()</div><div class="ttdef"><b>Definition:</b> <a href="_program_meta_data_8cpp_source.html#l00157">ProgramMetaData.cpp:157</a></div></div>
<div class="ttc" id="aclass_program_meta_data_html_a68d4a6f05eaf6456b4df8ccc0bd623c1"><div class="ttname"><a href="class_program_meta_data.html#a68d4a6f05eaf6456b4df8ccc0bd623c1">ProgramMetaData::write</a></div><div class="ttdeci">void write(SysFile &amp;target, BufferClass *program, bool encode)</div><div class="ttdef"><b>Definition:</b> <a href="_program_meta_data_8cpp_source.html#l00231">ProgramMetaData.cpp:231</a></div></div>
<div class="ttc" id="aclass_program_meta_data_html_a70ad3bccc24d13e61423c27996d81a3a"><div class="ttname"><a href="class_program_meta_data.html#a70ad3bccc24d13e61423c27996d81a3a">ProgramMetaData::imageSize</a></div><div class="ttdeci">size_t imageSize</div><div class="ttdef"><b>Definition:</b> <a href="_program_meta_data_8hpp_source.html#l00093">ProgramMetaData.hpp:93</a></div></div>
<div class="ttc" id="aclass_program_meta_data_html_a7924bb967ea163e0beeb2635f8821e0f"><div class="ttname"><a href="class_program_meta_data.html#a7924bb967ea163e0beeb2635f8821e0f">ProgramMetaData::encodingChunkLength</a></div><div class="ttdeci">static const size_t encodingChunkLength</div><div class="ttdef"><b>Definition:</b> <a href="_program_meta_data_8hpp_source.html#l00068">ProgramMetaData.hpp:68</a></div></div>
<div class="ttc" id="aclass_program_meta_data_html_a8dfb7c4578e3be4b03047eaafd11bfa4"><div class="ttname"><a href="class_program_meta_data.html#a8dfb7c4578e3be4b03047eaafd11bfa4">ProgramMetaData::validate</a></div><div class="ttdeci">bool validate(RexxString *fileName)</div><div class="ttdef"><b>Definition:</b> <a href="_program_meta_data_8cpp_source.html#l00204">ProgramMetaData.cpp:204</a></div></div>
<div class="ttc" id="aclass_program_meta_data_html_a8faa4be5b8f5588a4acc4b05b1de11b9"><div class="ttname"><a href="class_program_meta_data.html#a8faa4be5b8f5588a4acc4b05b1de11b9">ProgramMetaData::getDataSize</a></div><div class="ttdeci">size_t getDataSize()</div><div class="ttdef"><b>Definition:</b> <a href="_program_meta_data_8cpp_source.html#l00135">ProgramMetaData.cpp:135</a></div></div>
<div class="ttc" id="aclass_program_meta_data_html_aa591b723437f6771db774cb53219db35"><div class="ttname"><a href="class_program_meta_data.html#aa591b723437f6771db774cb53219db35">ProgramMetaData::imageVersion</a></div><div class="ttdeci">uint16_t imageVersion</div><div class="ttdef"><b>Definition:</b> <a href="_program_meta_data_8hpp_source.html#l00080">ProgramMetaData.hpp:80</a></div></div>
<div class="ttc" id="aclass_program_meta_data_html_aaa7483ca39079944129b077d26a02642"><div class="ttname"><a href="class_program_meta_data.html#aaa7483ca39079944129b077d26a02642">ProgramMetaData::getHeaderSize</a></div><div class="ttdeci">size_t getHeaderSize()</div><div class="ttdef"><b>Definition:</b> <a href="_program_meta_data_8cpp_source.html#l00146">ProgramMetaData.cpp:146</a></div></div>
<div class="ttc" id="aclass_program_meta_data_html_aad664d5ed6212eb00d9e976bba4b879ba00f74ec9ac66338d69276e49de9367ab"><div class="ttname"><a href="class_program_meta_data.html#aad664d5ed6212eb00d9e976bba4b879ba00f74ec9ac66338d69276e49de9367ab">ProgramMetaData::MAGICNUMBER</a></div><div class="ttdeci">@ MAGICNUMBER</div><div class="ttdef"><b>Definition:</b> <a href="_program_meta_data_8hpp_source.html#l00073">ProgramMetaData.hpp:73</a></div></div>
<div class="ttc" id="aclass_program_meta_data_html_aad664d5ed6212eb00d9e976bba4b879ba02dd3c316c211b62fd3560be942f41f9"><div class="ttname"><a href="class_program_meta_data.html#aad664d5ed6212eb00d9e976bba4b879ba02dd3c316c211b62fd3560be942f41f9">ProgramMetaData::METAVERSION</a></div><div class="ttdeci">@ METAVERSION</div><div class="ttdef"><b>Definition:</b> <a href="_program_meta_data_8hpp_source.html#l00075">ProgramMetaData.hpp:74</a></div></div>
<div class="ttc" id="aclass_program_meta_data_html_ab2ca2d652b71079f5ae88e538da7ab29"><div class="ttname"><a href="class_program_meta_data.html#ab2ca2d652b71079f5ae88e538da7ab29">ProgramMetaData::requiredLevel</a></div><div class="ttdeci">uint32_t requiredLevel</div><div class="ttdef"><b>Definition:</b> <a href="_program_meta_data_8hpp_source.html#l00083">ProgramMetaData.hpp:83</a></div></div>
<div class="ttc" id="aclass_program_meta_data_html_ab4f4143ed35462af197b1eb0dfaf17ff"><div class="ttname"><a href="class_program_meta_data.html#ab4f4143ed35462af197b1eb0dfaf17ff">ProgramMetaData::wordSize</a></div><div class="ttdeci">uint16_t wordSize</div><div class="ttdef"><b>Definition:</b> <a href="_program_meta_data_8hpp_source.html#l00081">ProgramMetaData.hpp:81</a></div></div>
<div class="ttc" id="aclass_program_meta_data_html_ace43ba16c042323bf84d085cbaf500bd"><div class="ttname"><a href="class_program_meta_data.html#ace43ba16c042323bf84d085cbaf500bd">ProgramMetaData::fileTag</a></div><div class="ttdeci">char fileTag[16]</div><div class="ttdef"><b>Definition:</b> <a href="_program_meta_data_8hpp_source.html#l00078">ProgramMetaData.hpp:78</a></div></div>
<div class="ttc" id="aclass_program_meta_data_html_ad3454ba205e01631a3f4822b791603bb"><div class="ttname"><a href="class_program_meta_data.html#ad3454ba205e01631a3f4822b791603bb">ProgramMetaData::restore</a></div><div class="ttdeci">static RoutineClass * restore(RexxString *fileName, BufferClass *buffer)</div><div class="ttdef"><b>Definition:</b> <a href="_program_meta_data_8cpp_source.html#l00171">ProgramMetaData.cpp:171</a></div></div>
<div class="ttc" id="aclass_program_meta_data_html_adcd3c56c44d30bb1ee7c2030424be237"><div class="ttname"><a href="class_program_meta_data.html#adcd3c56c44d30bb1ee7c2030424be237">ProgramMetaData::imageData</a></div><div class="ttdeci">char imageData[4]</div><div class="ttdef"><b>Definition:</b> <a href="_program_meta_data_8hpp_source.html#l00094">ProgramMetaData.hpp:94</a></div></div>
<div class="ttc" id="aclass_protected_html"><div class="ttname"><a href="class_protected.html">Protected</a></div><div class="ttdef"><b>Definition:</b> <a href="_protected_object_8hpp_source.html#l00186">ProtectedObject.hpp:187</a></div></div>
<div class="ttc" id="aclass_rexx_string_html"><div class="ttname"><a href="class_rexx_string.html">RexxString</a></div><div class="ttdef"><b>Definition:</b> <a href="_string_class_8hpp_source.html#l00068">StringClass.hpp:69</a></div></div>
<div class="ttc" id="aclass_routine_class_html"><div class="ttname"><a href="class_routine_class.html">RoutineClass</a></div><div class="ttdef"><b>Definition:</b> <a href="_routine_class_8hpp_source.html#l00051">RoutineClass.hpp:52</a></div></div>
<div class="ttc" id="aclass_routine_class_html_a22784ca8d29f6fe026833498a2def5f5"><div class="ttname"><a href="class_routine_class.html#a22784ca8d29f6fe026833498a2def5f5">RoutineClass::restore</a></div><div class="ttdeci">static RoutineClass * restore(BufferClass *, char *, size_t length)</div><div class="ttdef"><b>Definition:</b> <a href="_routine_class_8cpp_source.html#l00386">RoutineClass.cpp:386</a></div></div>
<div class="ttc" id="aclass_string_util_html_aafd27dbcb05f192a464b731f331b354b"><div class="ttname"><a href="class_string_util.html#aafd27dbcb05f192a464b731f331b354b">StringUtil::decodeBase64</a></div><div class="ttdeci">static bool decodeBase64(const char *source, size_t inputLength, char *destination, size_t &amp;outputLength)</div><div class="ttdef"><b>Definition:</b> <a href="_string_util_8cpp_source.html#l01743">StringUtil.cpp:1743</a></div></div>
<div class="ttc" id="aclass_string_util_html_af10892ef6b05cf9d44491fc9379df77f"><div class="ttname"><a href="class_string_util.html#af10892ef6b05cf9d44491fc9379df77f">StringUtil::encodeBase64</a></div><div class="ttdeci">static void encodeBase64(const char *source, size_t inputLength, MutableBuffer *destination, size_t chunkSize)</div><div class="ttdef"><b>Definition:</b> <a href="_string_util_8cpp_source.html#l01886">StringUtil.cpp:1886</a></div></div>
<div class="ttc" id="aclass_sys_file_html"><div class="ttname"><a href="class_sys_file.html">SysFile</a></div><div class="ttdef"><b>Definition:</b> <a href="unix_2_sys_file_8hpp_source.html#l00070">unix/SysFile.hpp:71</a></div></div>
<div class="ttc" id="aclass_sys_file_html_ad1b4b4f0b7d69f8daaf33243a17916b5"><div class="ttname"><a href="class_sys_file.html#ad1b4b4f0b7d69f8daaf33243a17916b5">SysFile::write</a></div><div class="ttdeci">bool write(const char *data, size_t len, size_t &amp;bytesWritten)</div><div class="ttdef"><b>Definition:</b> <a href="unix_2_sys_file_8cpp_source.html#l00518">unix/SysFile.cpp:518</a></div></div>
<div class="ttc" id="aclass_system_interpreter_html_a50564ea403980e775c5509f7d0ecb973"><div class="ttname"><a href="class_system_interpreter.html#a50564ea403980e775c5509f7d0ecb973">SystemInterpreter::allocateResultMemory</a></div><div class="ttdeci">static void * allocateResultMemory(size_t)</div><div class="ttdef"><b>Definition:</b> <a href="unix_2_memory_support_8cpp_source.html#l00062">unix/MemorySupport.cpp:62</a></div></div>
<div class="ttc" id="aclass_unsafe_block_html"><div class="ttname"><a href="class_unsafe_block.html">UnsafeBlock</a></div><div class="ttdef"><b>Definition:</b> <a href="_activity_manager_8hpp_source.html#l00336">ActivityManager.hpp:337</a></div></div>
<div class="ttc" id="aclass_utilities_html_a26aa32563e1248068e3355f02d24a8f0"><div class="ttname"><a href="class_utilities.html#a26aa32563e1248068e3355f02d24a8f0">Utilities::strnchr</a></div><div class="ttdeci">static const char * strnchr(const char *, size_t n, char ch)</div><div class="ttdef"><b>Definition:</b> <a href="_utilities_8cpp_source.html#l00181">Utilities.cpp:181</a></div></div>
</div><!-- fragment --></div><!-- contents -->
</div><!-- doc-content -->
<!-- HTML footer for doxygen 1.9.2-->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_2b8d323c7289fed1299e6f1b6909d41b.html">oorexx</a></li><li class="navelem"><a class="el" href="dir_2dfb7423ce64cb60f62cee208bb73ae3.html">official</a></li><li class="navelem"><a class="el" href="dir_63144926d93644d0b571decfac4c5baa.html">main</a></li><li class="navelem"><a class="el" href="dir_5131a42d519b9b019d5264fc1f0fe4ab.html">trunk</a></li><li class="navelem"><a class="el" href="dir_07b471ff108ade29d714c67783960c47.html">interpreter</a></li><li class="navelem"><a class="el" href="dir_9d4fe1fff3cfc096e62a288f8d60ec08.html">classes</a></li><li class="navelem"><a class="el" href="dir_c86a213b6f712d5f72ecc6c13dc4f3d2.html">support</a></li><li class="navelem"><a class="el" href="_program_meta_data_8cpp.html">ProgramMetaData.cpp</a></li>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.2 </li>
  </ul>
</div>
<!-- javascript code to insert the title in the condensed index (tabs) -->
<!-- See the function initMenu in menu.js:
     The condensed index is a list <ul> of several items <li>: Main Page, Classes, Files.
     I append a new item <li> which display the project name. -->
<script type="text/javascript">
$(function() {
  $('#main-menu').append('<li class="title" style="margin-left:3mm">ooRexx</li>')
});
</script>
<!-- end of javascript code -->
</body>
</html>
