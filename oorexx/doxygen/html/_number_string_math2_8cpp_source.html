<!-- HTML header for doxygen 1.9.2-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.2"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>ooRexx: NumberStringMath2.cpp Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<!--
    Removed completely the TITLEAREA because I don't like the loss of space.
    I want the title in the condensed index (tabs) at top of each HTML page.
    The insertion of the title is managed by javascript code in the footer,
    because this code must be executed AFTER the creation of the condensed index.
    Must have this setting to display the condensed index:
    DISABLE_INDEX = NO
-->
<!-- end header part -->
<!-- Generated by Doxygen 1.9.2 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('_number_string_math2_8cpp_source.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">NumberStringMath2.cpp</div>  </div>
</div><!--header-->
<div class="contents">
<a href="_number_string_math2_8cpp.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="comment">/*----------------------------------------------------------------------------*/</span></div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="comment">/*                                                                            */</span></div>
<div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="comment">/* Copyright (c) 1995, 2004 IBM Corporation. All rights reserved.             */</span></div>
<div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="comment">/* Copyright (c) 2005-2018 Rexx Language Association. All rights reserved.    */</span></div>
<div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="comment">/*                                                                            */</span></div>
<div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="comment">/* This program and the accompanying materials are made available under       */</span></div>
<div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="comment">/* the terms of the Common Public License v1.0 which accompanies this         */</span></div>
<div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="comment">/* distribution. A copy is also available at the following address:           */</span></div>
<div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="comment">/* https://www.oorexx.org/license.html                                        */</span></div>
<div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;<span class="comment">/*                                                                            */</span></div>
<div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;<span class="comment">/* Redistribution and use in source and binary forms, with or                 */</span></div>
<div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;<span class="comment">/* without modification, are permitted provided that the following            */</span></div>
<div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;<span class="comment">/* conditions are met:                                                        */</span></div>
<div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;<span class="comment">/*                                                                            */</span></div>
<div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;<span class="comment">/* Redistributions of source code must retain the above copyright             */</span></div>
<div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;<span class="comment">/* notice, this list of conditions and the following disclaimer.              */</span></div>
<div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;<span class="comment">/* Redistributions in binary form must reproduce the above copyright          */</span></div>
<div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;<span class="comment">/* notice, this list of conditions and the following disclaimer in            */</span></div>
<div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;<span class="comment">/* the documentation and/or other materials provided with the distribution.   */</span></div>
<div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;<span class="comment">/*                                                                            */</span></div>
<div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;<span class="comment">/* Neither the name of Rexx Language Association nor the names                */</span></div>
<div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;<span class="comment">/* of its contributors may be used to endorse or promote products             */</span></div>
<div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;<span class="comment">/* derived from this software without specific prior written permission.      */</span></div>
<div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;<span class="comment">/*                                                                            */</span></div>
<div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;<span class="comment">/* THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS        */</span></div>
<div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;<span class="comment">/* &quot;AS IS&quot; AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT          */</span></div>
<div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;<span class="comment">/* LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS          */</span></div>
<div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;<span class="comment">/* FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT   */</span></div>
<div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;<span class="comment">/* OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,      */</span></div>
<div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;<span class="comment">/* SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED   */</span></div>
<div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;<span class="comment">/* TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA,        */</span></div>
<div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;<span class="comment">/* OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY     */</span></div>
<div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;<span class="comment">/* OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING    */</span></div>
<div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;<span class="comment">/* NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS         */</span></div>
<div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;<span class="comment">/* SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.               */</span></div>
<div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;<span class="comment">/*                                                                            */</span></div>
<div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;<span class="comment">/*----------------------------------------------------------------------------*/</span></div>
<div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;<span class="comment">/******************************************************************************/</span></div>
<div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;<span class="comment">/* REXX Kernel                                                                */</span></div>
<div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;<span class="comment">/*                                                                            */</span></div>
<div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;<span class="comment">/* Arithmetic function for the NumberString Class                             */</span></div>
<div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;<span class="comment">/*  Multiply/Divide/Power                                                     */</span></div>
<div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;<span class="comment">/*                                                                            */</span></div>
<div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;<span class="comment">/******************************************************************************/</span></div>
<div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="_rexx_core_8h.html">RexxCore.h</a>&quot;</span></div>
<div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="_number_string_class_8hpp.html">NumberStringClass.hpp</a>&quot;</span></div>
<div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="_array_class_8hpp.html">ArrayClass.hpp</a>&quot;</span></div>
<div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="_buffer_class_8hpp.html">BufferClass.hpp</a>&quot;</span></div>
<div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="_activity_8hpp.html">Activity.hpp</a>&quot;</span></div>
<div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="_activity_manager_8hpp.html">ActivityManager.hpp</a>&quot;</span></div>
<div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="_method_arguments_8hpp.html">MethodArguments.hpp</a>&quot;</span></div>
<div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="_protected_object_8hpp.html">ProtectedObject.hpp</a>&quot;</span></div>
<div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160; </div>
<div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;<span class="comment">/**</span></div>
<div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;<span class="comment"> * Multiply current digit through &quot;top&quot; number and add</span></div>
<div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;<span class="comment"> * result to the accumulator.</span></div>
<div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;<span class="comment"> * @param top      the pointer to the top number first digit</span></div>
<div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;<span class="comment"> * @param topLen   The length of the top number.</span></div>
<div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;<span class="comment"> * @param accumPtr The pointer to the last digit of the accumulator.</span></div>
<div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;<span class="comment"> * @param multChar The character to multiply by.</span></div>
<div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;<span class="comment"> * @return The new accumulator top bounds.</span></div>
<div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l00066"></a><span class="lineno"><a class="line" href="class_number_string.html#ab149da0e8328a56475058f3e24d5b3e8">   66</a></span>&#160;<span class="keywordtype">char</span> *<a class="code" href="class_number_string.html#ab149da0e8328a56475058f3e24d5b3e8">NumberString::addMultiplier</a>(<span class="keyword">const</span> <span class="keywordtype">char</span> *top, <a class="code" href="rexx_8h.html#aa0199524ada35d939fa20d4625d27d55">wholenumber_t</a> topLen, <span class="keywordtype">char</span> *accumPtr, <span class="keywordtype">int</span> multChar)</div>
<div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;{</div>
<div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;    <span class="comment">// no carry at the start</span></div>
<div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;    <span class="keywordtype">int</span> carry = 0;</div>
<div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;    <span class="comment">// we do this starting from the least significant digit of the top number</span></div>
<div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;    top += (topLen - 1);</div>
<div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160; </div>
<div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;    <span class="comment">// while we have a more digits to process, do the</span></div>
<div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;    <span class="comment">// multiplication addition.</span></div>
<div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;    <span class="keywordflow">while</span> (topLen-- )</div>
<div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;    {</div>
<div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;        <span class="comment">// Multiply char by top digit and add the accumvalue for position and</span></div>
<div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;        <span class="comment">// and carry. and adjust pointer to the next digit positions.</span></div>
<div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;        <span class="keywordtype">int</span> resultChar = carry + *accumPtr + (multChar * *top--);</div>
<div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;        <span class="comment">// and handle possible carries (the carry can be more than just</span></div>
<div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;        <span class="comment">// one for a multiply)</span></div>
<div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;        carry = resultChar / 10;</div>
<div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;        resultChar = resultChar % 10;</div>
<div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160; </div>
<div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;        <span class="comment">// add the character to the accumulator buffer</span></div>
<div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;        *accumPtr-- =  resultChar;</div>
<div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160; </div>
<div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;    }</div>
<div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;    <span class="comment">// if we still had a carry, add this to the accumulator in the front position</span></div>
<div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;    <span class="keywordflow">if</span> (carry != 0)</div>
<div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;    {</div>
<div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;        *accumPtr-- = (char)carry;</div>
<div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;    }</div>
<div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;    <span class="comment">// return a pointer to the first accumulator character</span></div>
<div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;    <span class="keywordflow">return</span> ++accumPtr;</div>
<div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;}</div>
<div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160; </div>
<div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;<span class="comment">/**</span></div>
<div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;<span class="comment"> * Multiply two NumberString objects</span></div>
<div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;<span class="comment"> * @param other  The other object.</span></div>
<div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;<span class="comment"> * @return A new numberstring that is the product of the two number strings.</span></div>
<div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l00106"></a><span class="lineno"><a class="line" href="class_number_string.html#a42a268049c6180a6441ea4447f3d35c2">  106</a></span>&#160;<a class="code" href="class_number_string.html">NumberString</a> *<a class="code" href="class_number_string.html#a42a268049c6180a6441ea4447f3d35c2">NumberString::Multiply</a>(<a class="code" href="class_number_string.html">NumberString</a> *other)</div>
<div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;{</div>
<div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;    <a class="code" href="class_protected.html">Protected&lt;BufferClass&gt;</a> outputBuffer;</div>
<div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160; </div>
<div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;    <a class="code" href="rexx_8h.html#aa0199524ada35d939fa20d4625d27d55">wholenumber_t</a> digits = <a class="code" href="_numerics_8hpp.html#a771bafb9b89d652ba22051991fbf6845">number_digits</a>();</div>
<div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160; </div>
<div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;    <span class="comment">// prepare both numbers, copying and rounding if necessary.</span></div>
<div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;    <a class="code" href="class_number_string.html">NumberString</a> *left = <a class="code" href="class_number_string.html#ae547274d2645c1a939556a0e43590aab">checkNumber</a>(digits);</div>
<div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;    <a class="code" href="class_number_string.html">NumberString</a> *right = other-&gt;<a class="code" href="class_number_string.html#ae547274d2645c1a939556a0e43590aab">checkNumber</a>(digits);</div>
<div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160; </div>
<div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160; </div>
<div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;    <span class="comment">// if either string is zero, then the result is also zero</span></div>
<div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;    <span class="keywordflow">if</span> (left-&gt;<a class="code" href="class_number_string.html#a07cf2889441f4a47e7c6e21ebd7ac74f">isZero</a>() || right-&gt;<a class="code" href="class_number_string.html#a07cf2889441f4a47e7c6e21ebd7ac74f">isZero</a>())</div>
<div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;    {</div>
<div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="_number_string_class_8hpp.html#a82cffa3aff54c95bee546eccce73135f">new_numberstring</a>(<span class="stringliteral">&quot;0&quot;</span>, 1);</div>
<div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;    }</div>
<div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160; </div>
<div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;    <span class="comment">// we can optimize things by using the smaller number for</span></div>
<div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;    <span class="comment">// the individual digit multiplcation, which will need fewer passes.</span></div>
<div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;    <a class="code" href="class_number_string.html">NumberString</a> *largeNum = left;</div>
<div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;    <a class="code" href="class_number_string.html">NumberString</a> *smallNum = right;</div>
<div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160; </div>
<div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;    <span class="keywordflow">if</span> (left-&gt;<a class="code" href="class_number_string_base.html#a69c6fa53326f051165bbad19f21314d9">digitsCount</a> &lt; right-&gt;<a class="code" href="class_number_string_base.html#a69c6fa53326f051165bbad19f21314d9">digitsCount</a>)</div>
<div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;    {</div>
<div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;        largeNum = right;</div>
<div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;        smallNum = left;</div>
<div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;    }</div>
<div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160; </div>
<div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;    <span class="comment">// get our buffer size</span></div>
<div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;    <span class="keywordtype">size_t</span> totalDigits = ((digits +1) * 2) + 1;</div>
<div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160; </div>
<div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;    <span class="comment">// fast allocation buffer</span></div>
<div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;    <span class="keywordtype">char</span> resultBufFast[<a class="code" href="class_number_string.html#a400f341e1df9809d972dc3860f080c64">FAST_BUFFER</a>];</div>
<div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;    <span class="keywordtype">char</span> *outPtr = resultBufFast;</div>
<div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160; </div>
<div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;    <span class="comment">// if the digits are really big, then we need to allocate a larger buffer.</span></div>
<div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;    <span class="comment">// just allocate a buffer object and allow it to get garbage collected after</span></div>
<div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;    <span class="comment">// we&#39;re done.</span></div>
<div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;    <span class="keywordflow">if</span> (totalDigits &gt; <a class="code" href="class_number_string.html#a400f341e1df9809d972dc3860f080c64">FAST_BUFFER</a>)</div>
<div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;    {</div>
<div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;        outputBuffer = <a class="code" href="_buffer_class_8hpp.html#a434bb1dd35461c9cf3f44e16a8d60c47">new_buffer</a>(totalDigits);</div>
<div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;        outPtr = outputBuffer-&gt;getData();</div>
<div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;    }</div>
<div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;    <span class="comment">// make sure this is cleared out</span></div>
<div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;    memset(outPtr, <span class="charliteral">&#39;\0&#39;</span>, totalDigits);</div>
<div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160; </div>
<div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;    <span class="comment">// set up the initial accumulator</span></div>
<div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;    <span class="keywordtype">char</span> *accumPtr = outPtr;</div>
<div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;    <a class="code" href="rexx_8h.html#aa0199524ada35d939fa20d4625d27d55">wholenumber_t</a> accumLen = 0;</div>
<div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160; </div>
<div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;    <span class="comment">// this is where we start laying out the data...starting from the</span></div>
<div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;    <span class="comment">// far end of the buffer.</span></div>
<div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;    <span class="keywordtype">char</span> *resultPtr = accumPtr + totalDigits - 1;</div>
<div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;    <span class="comment">// we iterate through the small number multiplying with each of the</span></div>
<div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;    <span class="comment">// digits in the smaller number</span></div>
<div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">char</span> *current = smallNum-&gt;<a class="code" href="class_number_string.html#a909e26debed7dc0853fb78a2eb12f34b">numberDigits</a> + smallNum-&gt;<a class="code" href="class_number_string_base.html#a69c6fa53326f051165bbad19f21314d9">digitsCount</a>;</div>
<div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160; </div>
<div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;    <span class="comment">// now process all of the digits</span></div>
<div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> i = smallNum-&gt;<a class="code" href="class_number_string_base.html#a69c6fa53326f051165bbad19f21314d9">digitsCount</a> ; i &gt; 0 ; i-- )</div>
<div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;    {</div>
<div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;        current--;</div>
<div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;        <span class="comment">// get the current multiplier character</span></div>
<div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;        <span class="keywordtype">int</span> multChar = *current;</div>
<div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;        <span class="comment">// we don&#39;t need to do anything with zero digits.  Other digits</span></div>
<div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;        <span class="comment">// we multiply and add</span></div>
<div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;        <span class="keywordflow">if</span> (multChar != 0)</div>
<div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;        {</div>
<div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;            <span class="comment">// multiply the larger number by the current digit and add to the accumulator</span></div>
<div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;            accumPtr = <a class="code" href="class_number_string.html#ab149da0e8328a56475058f3e24d5b3e8">addMultiplier</a>(largeNum-&gt;<a class="code" href="class_number_string.html#a909e26debed7dc0853fb78a2eb12f34b">numberDigits</a>, largeNum-&gt;<a class="code" href="class_number_string_base.html#a69c6fa53326f051165bbad19f21314d9">digitsCount</a>, resultPtr,  multChar);</div>
<div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;        }</div>
<div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160; </div>
<div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;        <span class="comment">// back up the result pointer for the next add position and handle the next digit.</span></div>
<div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;        resultPtr--;</div>
<div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;    }</div>
<div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;    <span class="comment">// update the accumulator length for the final result.</span></div>
<div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;    accumLen = (++resultPtr - accumPtr) + smallNum-&gt;<a class="code" href="class_number_string_base.html#a69c6fa53326f051165bbad19f21314d9">digitsCount</a>;</div>
<div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160; </div>
<div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;    <span class="comment">// accumPtr now points to result,</span></div>
<div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;    <span class="comment">//  the len of result is in accumLen</span></div>
<div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160; </div>
<div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;    <a class="code" href="rexx_8h.html#aa0199524ada35d939fa20d4625d27d55">wholenumber_t</a> extraDigits = 0;</div>
<div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;    <span class="comment">// if this is longer than the current digits, the excess is added into the</span></div>
<div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;    <span class="comment">// exponent</span></div>
<div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;    <a class="code" href="cmdparse_8cpp.html#ab3454b1e7e7c4c0b732dfeb74a0c040f">if</a> (accumLen &gt; digits)</div>
<div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;    {</div>
<div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;        <span class="comment">// we also need to chop the length to digits + 1 (we&#39;ll use that to round</span></div>
<div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;        <span class="comment">// the final result)</span></div>
<div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;        extraDigits = accumLen -(digits + 1);</div>
<div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;        accumLen = digits + 1;</div>
<div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;    }</div>
<div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160; </div>
<div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;    <span class="comment">// now get a numberstring object large enough to hold this result</span></div>
<div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;    <a class="code" href="class_number_string.html">NumberString</a> *result = <a class="code" href="_number_string_class_8hpp.html#a82cffa3aff54c95bee546eccce73135f">new_numberstring</a>(NULL, accumLen);</div>
<div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;    <span class="comment">// the result exponent is the sum of the two operand exponents + the adjustment amount</span></div>
<div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;    result-&gt;<a class="code" href="class_number_string_base.html#a7ca743677b8bfd7cf13b652bac72e279">numberExponent</a> = largeNum-&gt;<a class="code" href="class_number_string_base.html#a7ca743677b8bfd7cf13b652bac72e279">numberExponent</a> + smallNum-&gt;<a class="code" href="class_number_string_base.html#a7ca743677b8bfd7cf13b652bac72e279">numberExponent</a> + extraDigits;</div>
<div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;    <span class="comment">// the sign is computed by multiplying the signs</span></div>
<div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;    result-&gt;<a class="code" href="class_number_string_base.html#a89de4786d9655048c6f2ebe870ada73a">numberSign</a> = largeNum-&gt;<a class="code" href="class_number_string_base.html#a89de4786d9655048c6f2ebe870ada73a">numberSign</a> * smallNum-&gt;<a class="code" href="class_number_string_base.html#a89de4786d9655048c6f2ebe870ada73a">numberSign</a>;</div>
<div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;    result-&gt;<a class="code" href="class_number_string_base.html#a69c6fa53326f051165bbad19f21314d9">digitsCount</a> = accumLen;</div>
<div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160; </div>
<div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;    <span class="comment">// make sure this is in the correct precision (also copies the digits into</span></div>
<div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;    <span class="comment">// the result object).</span></div>
<div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;    result-&gt;<a class="code" href="class_number_string.html#a3a133b8af60754777d2d45bedd871708">adjustPrecision</a>(accumPtr, digits);</div>
<div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;    <span class="keywordflow">return</span> result;</div>
<div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;}</div>
<div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160; </div>
<div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;<span class="comment">/**</span></div>
<div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;<span class="comment"> * Perform a subtraction during division.</span></div>
<div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;<span class="comment"> * @param data1   The data to subtract from.</span></div>
<div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;<span class="comment"> * @param length1 The length of the string subtract from.</span></div>
<div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;<span class="comment"> * @param data2   The dividend string.</span></div>
<div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;<span class="comment"> * @param length2 The length of the dividend.</span></div>
<div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;<span class="comment"> * @param result  The location to place the subtraction result.</span></div>
<div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;<span class="comment"> * @param mult    The multiplier for the subtraction.</span></div>
<div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;<span class="comment"> * @return the pointer to the first character of the result.</span></div>
<div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l00224"></a><span class="lineno"><a class="line" href="class_number_string.html#a6564042d9236475269dc6072c0aba6f1">  224</a></span>&#160;<span class="keywordtype">char</span> *<a class="code" href="class_number_string.html#a6564042d9236475269dc6072c0aba6f1">NumberString::subtractDivisor</a>(<span class="keyword">const</span> <span class="keywordtype">char</span> *divisor, <a class="code" href="rexx_8h.html#aa0199524ada35d939fa20d4625d27d55">wholenumber_t</a> divisorLength,</div>
<div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">char</span> *dividend, <a class="code" href="rexx_8h.html#aa0199524ada35d939fa20d4625d27d55">wholenumber_t</a> dividendLength, <span class="keywordtype">char</span> *result, <span class="keywordtype">int</span> mult)</div>
<div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;{</div>
<div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;    <span class="comment">// This rountine actually does the divide of the Best Guess</span></div>
<div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;    <span class="comment">//  Mult.  This Best guess is a guess at how many times the</span></div>
<div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;    <span class="comment">//  dividend will go into the divisor, since it is only a</span></div>
<div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;    <span class="comment">//  guess we make sure we guess to the low side, if low we</span></div>
<div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;    <span class="comment">//  always adjust our guess and recompute.</span></div>
<div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;    <span class="comment">// We multiply the Dividend(Data2) by mult and then subtract</span></div>
<div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;    <span class="comment">//  the result from the Divisor (Data1) and this result is</span></div>
<div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;    <span class="comment">//  put into RESULT.  Since Mult is guaranteed to be correct</span></div>
<div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;    <span class="comment">//  or low, the result is guaranteed to never be negative.</span></div>
<div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;    <span class="comment">//</span></div>
<div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;    <span class="comment">//            xxMxxx           &lt;- M signifies this Mult</span></div>
<div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;    <span class="comment">//          ______________</span></div>
<div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;    <span class="comment">// dividend ) divisor</span></div>
<div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;    <span class="comment">//           -iiiiiiiii        &lt;- result of M x Divisor</span></div>
<div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;    <span class="comment">//           ===========</span></div>
<div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;    <span class="comment">//            rrrrrrrrr        &lt;- result returned</span></div>
<div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160; </div>
<div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160; </div>
<div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;    <span class="comment">// point to the least significant character of both operands</span></div>
<div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">char</span> *divisorData = divisor + (divisorLength - 1);</div>
<div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">char</span> *dividendData = dividend + (dividendLength -1);</div>
<div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160; </div>
<div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;    <span class="comment">// set up the result pointer for the subtraction</span></div>
<div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;    <span class="keywordtype">char</span> *outPtr = result + 1;</div>
<div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;    <span class="keywordtype">int</span> carry = 0;</div>
<div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;    <span class="comment">// get the differench in length</span></div>
<div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;    <a class="code" href="rexx_8h.html#aa0199524ada35d939fa20d4625d27d55">wholenumber_t</a> extra = divisorLength - dividendLength;</div>
<div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160; </div>
<div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;    <span class="comment">// process all digits in the dividend number</span></div>
<div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;    <span class="keywordflow">while</span> (dividendLength--)</div>
<div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;    {</div>
<div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;        <span class="keywordtype">int</span> divChar = carry + *divisorData-- - (*dividendData-- * mult);</div>
<div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;        <span class="comment">// if this went negative, we&#39;ve got a borrow, and it could be a</span></div>
<div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;        <span class="comment">// pretty large borrow (the mult result can be as large as 81)</span></div>
<div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;        <span class="keywordflow">if</span> (divChar &lt; 0)</div>
<div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;        {</div>
<div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;            <span class="comment">// make positive by adding 100</span></div>
<div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;            divChar += 100;</div>
<div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;            <span class="comment">// calculate the borrow out (will be a negative number after subtracting 10)</span></div>
<div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;            carry = (divChar/10) - 10;</div>
<div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;            <span class="comment">// the character at this position is the remainder</span></div>
<div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;            divChar %= 10;</div>
<div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;        }</div>
<div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;        <span class="comment">// no carry on this iteration</span></div>
<div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;        <span class="keywordflow">else</span></div>
<div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;        {</div>
<div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;            carry = 0;</div>
<div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;        }</div>
<div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;        <span class="comment">// set the result character</span></div>
<div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;        *--outPtr = (char)divChar;</div>
<div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;    }</div>
<div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160; </div>
<div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;    <span class="comment">// are their extra characters to process?</span></div>
<div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;    <span class="comment">// we need to propagate any carries until this stops</span></div>
<div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;    <span class="keywordflow">if</span> (extra &gt; 0)</div>
<div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;    {</div>
<div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;        <span class="comment">// if the carry is zero, we can just copy the remaining</span></div>
<div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;        <span class="comment">// digits over</span></div>
<div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;        <span class="keywordflow">if</span> (carry == 0)</div>
<div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;        {</div>
<div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;            <span class="keywordflow">while</span> (extra--)</div>
<div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;            {</div>
<div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;                *--outPtr = (char)*divisorData--;</div>
<div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;            }</div>
<div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;        }</div>
<div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;        <span class="keywordflow">else</span></div>
<div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;        {</div>
<div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;            <span class="comment">// need to copy and take the carry into account.</span></div>
<div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;            <span class="keywordflow">while</span> (extra--)</div>
<div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;            {</div>
<div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;                <span class="keywordtype">int</span> divChar = carry + *divisorData--;</div>
<div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;                <span class="comment">// This is a straightforward subtraction now, so the borrow</span></div>
<div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;                <span class="comment">// will just be a single digit</span></div>
<div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;                <span class="keywordflow">if</span> (divChar &lt; 0)</div>
<div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;                {</div>
<div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;                    divChar += 10;</div>
<div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;                    carry = -1;</div>
<div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;                    *--outPtr = (char)divChar;</div>
<div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;                }</div>
<div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;                <span class="comment">// had the first non-carry, so now we can copy the data</span></div>
<div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;                <span class="keywordflow">else</span></div>
<div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;                {</div>
<div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;                    *--outPtr = (char)divChar;</div>
<div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;                    <span class="keywordflow">while</span> (extra--)</div>
<div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;                    {</div>
<div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;                        *--outPtr = *divisorData--;</div>
<div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;                    }</div>
<div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;                    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;                }</div>
<div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;            }</div>
<div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;        }</div>
<div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;    }</div>
<div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;    <span class="keywordflow">return</span> outPtr;</div>
<div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;}</div>
<div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160; </div>
<div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;<span class="comment">/**</span></div>
<div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;<span class="comment"> * Divide two numbers</span></div>
<div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;<span class="comment"> * @param other  The left-hand-side of the division operation.</span></div>
<div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;<span class="comment"> * @param DivOP  The type of division operation (divide, integer divide, or remainder)</span></div>
<div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;<span class="comment"> * @return The division result.</span></div>
<div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l00331"></a><span class="lineno"><a class="line" href="class_number_string.html#a984fca0ded898247f8a9b198ce5e3662">  331</a></span>&#160;<a class="code" href="class_number_string.html">NumberString</a> *<a class="code" href="class_number_string.html#a984fca0ded898247f8a9b198ce5e3662">NumberString::Division</a>(<a class="code" href="class_number_string.html">NumberString</a> *other, <a class="code" href="class_number_string.html#a48ad5e780996b5777281d1aec2832d66">ArithmeticOperator</a> divOP)</div>
<div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;{</div>
<div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;    <span class="comment">// buffers for intermediate results (just the numeric data)</span></div>
<div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;    <a class="code" href="class_number_string_base.html">NumberStringBase</a> accumBuffer;</div>
<div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;    <a class="code" href="class_number_string_base.html">NumberStringBase</a> saveLeftBuffer;</div>
<div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;    <a class="code" href="class_number_string_base.html">NumberStringBase</a> saveRightBuffer;</div>
<div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;    <a class="code" href="class_protected.html">Protected&lt;BufferClass&gt;</a> outputBuffer;</div>
<div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160; </div>
<div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;    <span class="comment">// static sized buffers for typical calculation sizes.</span></div>
<div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;    <span class="keywordtype">char</span> leftBufFast[<a class="code" href="class_number_string.html#a400f341e1df9809d972dc3860f080c64">FAST_BUFFER</a>];</div>
<div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;    <span class="keywordtype">char</span> rightBufFast[<a class="code" href="class_number_string.html#a400f341e1df9809d972dc3860f080c64">FAST_BUFFER</a>];</div>
<div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;    <span class="keywordtype">char</span> outBufFast[<a class="code" href="class_number_string.html#a400f341e1df9809d972dc3860f080c64">FAST_BUFFER</a>];</div>
<div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160; </div>
<div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;    <span class="comment">// NOTE: this is very similiar to the PowerDivide</span></div>
<div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;    <span class="comment">//   method, these we kept as seperate routines since there</span></div>
<div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;    <span class="comment">//   are enough subtile differences between the objectPointer operations</span></div>
<div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;    <span class="comment">//   that combining them would make an already complex</span></div>
<div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;    <span class="comment">//   algorithm even more so.  When fixing/updating/adding to</span></div>
<div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;    <span class="comment">//   this code also check PowerDivide for similiar updates</span></div>
<div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160; </div>
<div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;    <span class="comment">// handle the zero cases, which are pretty quick.</span></div>
<div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;    <span class="comment">// if the other is zero, this is an error</span></div>
<div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;    <span class="keywordflow">if</span> (other-&gt;<a class="code" href="class_number_string.html#a07cf2889441f4a47e7c6e21ebd7ac74f">isZero</a>())</div>
<div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;    {</div>
<div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;        <a class="code" href="_activity_manager_8hpp.html#ab278a90c36b1ea34f0d6a7e280799eaa">reportException</a>(<a class="code" href="_rexx_error_codes_8h.html#ab78d722675e696d37b9b75e363a8b358acc26cebd08ff7192a41679bacdcdf5f8">Error_Overflow_zero</a>);</div>
<div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;    }</div>
<div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;    <span class="comment">// if this number is zero, the result is also zero.</span></div>
<div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="class_number_string.html#a07cf2889441f4a47e7c6e21ebd7ac74f">isZero</a>())</div>
<div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;    {</div>
<div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;        <span class="keywordflow">return</span> (<a class="code" href="class_number_string.html">NumberString</a> *)<a class="code" href="_rexx_core_8h.html#add4beaef2223c4d220d99cba73388681">IntegerZero</a>;</div>
<div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;    }</div>
<div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160; </div>
<div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;    <span class="comment">// set of pointers for our temporary values</span></div>
<div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;    <a class="code" href="class_number_string_base.html">NumberStringBase</a> *accum = &amp;accumBuffer;</div>
<div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;    <a class="code" href="class_number_string_base.html">NumberStringBase</a> *saveLeft = &amp;saveLeftBuffer;</div>
<div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;    <a class="code" href="class_number_string_base.html">NumberStringBase</a> *saveRight = &amp;saveRightBuffer;</div>
<div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;    <a class="code" href="rexx_8h.html#aa0199524ada35d939fa20d4625d27d55">wholenumber_t</a> digits = <a class="code" href="_numerics_8hpp.html#a771bafb9b89d652ba22051991fbf6845">number_digits</a>();</div>
<div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160; </div>
<div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;    <span class="comment">// either of these values might require rounding before starting the</span></div>
<div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;    <span class="comment">// operation, which might copy the values</span></div>
<div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;    <a class="code" href="class_number_string.html">NumberString</a> *left = <a class="code" href="class_number_string.html#ae547274d2645c1a939556a0e43590aab">checkNumber</a>(digits);</div>
<div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;    <a class="code" href="class_number_string.html">NumberString</a> *right = other-&gt;<a class="code" href="class_number_string.html#ae547274d2645c1a939556a0e43590aab">checkNumber</a>(digits);</div>
<div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160; </div>
<div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;    <span class="comment">// calculate the probable result exponent from the two operand</span></div>
<div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;    <span class="comment">// exponends and the length difference.</span></div>
<div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;    <a class="code" href="rexx_8h.html#aa0199524ada35d939fa20d4625d27d55">wholenumber_t</a> calcExp = left-&gt;<a class="code" href="class_number_string_base.html#a7ca743677b8bfd7cf13b652bac72e279">numberExponent</a> - right-&gt;<a class="code" href="class_number_string_base.html#a7ca743677b8bfd7cf13b652bac72e279">numberExponent</a>;</div>
<div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;    calcExp += left-&gt;<a class="code" href="class_number_string_base.html#a69c6fa53326f051165bbad19f21314d9">digitsCount</a> - right-&gt;<a class="code" href="class_number_string_base.html#a69c6fa53326f051165bbad19f21314d9">digitsCount</a>;</div>
<div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160; </div>
<div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;    <span class="comment">// a negative exponent means this value will be less than</span></div>
<div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;    <span class="comment">// zero.  If we are doing integer divide or remainder, we</span></div>
<div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;    <span class="comment">//</span></div>
<div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;    <span class="comment">// is exp &lt; 0 and doing // or %</span></div>
<div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;    <span class="keywordflow">if</span> (calcExp &lt; 0 &amp;&amp; divOP != <a class="code" href="class_number_string.html#a48ad5e780996b5777281d1aec2832d66a173e26391a07898c7ffdfc4cfb2e4a95">OT_DIVIDE</a>)</div>
<div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;    {</div>
<div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;        <span class="comment">// if this is integer division, the result is zero</span></div>
<div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;        <span class="keywordflow">if</span> (divOP == <a class="code" href="class_number_string.html#a48ad5e780996b5777281d1aec2832d66a7b52372b354bbdd5aea33d3212b01f95">OT_INT_DIVIDE</a>)</div>
<div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;        {</div>
<div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;            <span class="keywordflow">return</span> (<a class="code" href="class_number_string.html">NumberString</a> *)<a class="code" href="_rexx_core_8h.html#add4beaef2223c4d220d99cba73388681">IntegerZero</a>;</div>
<div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;        }</div>
<div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;        <span class="comment">// for the remainder operation, this is the result (with suitable rounding,</span></div>
<div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;        <span class="comment">// of course)</span></div>
<div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;        <span class="keywordflow">else</span></div>
<div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;        {</div>
<div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;            <span class="comment">// this must be a new number value set with the current numeric values</span></div>
<div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;            <a class="code" href="class_number_string.html">NumberString</a> *result = left-&gt;<a class="code" href="class_number_string.html#a2e47777f71b543de06fcd0eb6e7d87dd">prepareOperatorNumber</a>(digits + 1, digits, <a class="code" href="class_number_string.html#a9587cb55737c538638144a4abec853d5">NOROUND</a>);</div>
<div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;            result-&gt;<a class="code" href="class_number_string.html#a806d9c5f154109ecb58b937dabc70019">setupNumber</a>();</div>
<div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;            <span class="keywordflow">return</span> result;</div>
<div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;        }</div>
<div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;    }</div>
<div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160; </div>
<div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;    <span class="keywordtype">size_t</span> totalDigits = ((digits + 1) * 2) + 1;</div>
<div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160; </div>
<div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;    <span class="keywordtype">char</span> *leftNum  = leftBufFast;</div>
<div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;    <span class="keywordtype">char</span> *rightNum = rightBufFast;</div>
<div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;    <span class="keywordtype">char</span> *output   = outBufFast;</div>
<div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160; </div>
<div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;    <span class="comment">// we have automatic buffers for these that will handle typical</span></div>
<div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;    <span class="comment">// sizes.  If larger than that, we allocate real buffer objects</span></div>
<div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;    <span class="comment">// and just allow them to be garbage collected at the end</span></div>
<div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;    <span class="keywordflow">if</span> (totalDigits &gt; <a class="code" href="class_number_string.html#a400f341e1df9809d972dc3860f080c64">FAST_BUFFER</a>)</div>
<div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;    {</div>
<div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;        <span class="comment">// we can use a single buffer and chop it up</span></div>
<div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;        outputBuffer = <a class="code" href="_buffer_class_8hpp.html#a434bb1dd35461c9cf3f44e16a8d60c47">new_buffer</a>(totalDigits * 3);</div>
<div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;        leftNum = outputBuffer-&gt;getData();</div>
<div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;        rightNum = leftNum + totalDigits;</div>
<div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;        output = rightNum + totalDigits;</div>
<div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;    }</div>
<div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160; </div>
<div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;    <span class="comment">// make a copy of the input data into the buffers and pad the</span></div>
<div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;    <span class="comment">// rest of the buffer with zeros</span></div>
<div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;    memcpy(leftNum, left-&gt;<a class="code" href="class_number_string.html#a909e26debed7dc0853fb78a2eb12f34b">numberDigits</a>, left-&gt;<a class="code" href="class_number_string_base.html#a69c6fa53326f051165bbad19f21314d9">digitsCount</a>);</div>
<div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;    memset(leftNum + left-&gt;<a class="code" href="class_number_string_base.html#a69c6fa53326f051165bbad19f21314d9">digitsCount</a>, <span class="charliteral">&#39;\0&#39;</span>, totalDigits - left-&gt;<a class="code" href="class_number_string_base.html#a69c6fa53326f051165bbad19f21314d9">digitsCount</a>);</div>
<div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160; </div>
<div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;    memcpy(rightNum, right-&gt;<a class="code" href="class_number_string.html#a909e26debed7dc0853fb78a2eb12f34b">numberDigits</a>, right-&gt;<a class="code" href="class_number_string_base.html#a69c6fa53326f051165bbad19f21314d9">digitsCount</a>);</div>
<div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;    memset(rightNum + right-&gt;<a class="code" href="class_number_string_base.html#a69c6fa53326f051165bbad19f21314d9">digitsCount</a>, <span class="charliteral">&#39;\0&#39;</span>, totalDigits - right-&gt;<a class="code" href="class_number_string_base.html#a69c6fa53326f051165bbad19f21314d9">digitsCount</a>);</div>
<div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;    <span class="keywordtype">char</span> *resultPtr = output;</div>
<div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160; </div>
<div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;    <span class="comment">// copy the numberstring information as well</span></div>
<div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;    *saveRight = *right;</div>
<div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;    *saveLeft = *left;</div>
<div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160; </div>
<div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;    <span class="keywordtype">char</span> *saveLeftPtr = NULL;</div>
<div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;    <span class="keywordtype">char</span> *saveRightPtr = NULL;</div>
<div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160; </div>
<div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;    <span class="comment">// if this is a remainder, we need to save the pointers to</span></div>
<div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;    <span class="comment">// the original data</span></div>
<div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;    <span class="keywordflow">if</span> (divOP == <a class="code" href="class_number_string.html#a48ad5e780996b5777281d1aec2832d66aec70bc1cb012c3ab36c8df9877d6c910">OT_REMAINDER</a>)</div>
<div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;    {</div>
<div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;        saveLeftPtr  = leftNum;</div>
<div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;        saveRightPtr = rightNum;</div>
<div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;        <span class="comment">// force the dividend sign to be positive.</span></div>
<div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;        saveRight-&gt;<a class="code" href="class_number_string_base.html#a89de4786d9655048c6f2ebe870ada73a">numberSign</a> = 1;</div>
<div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;    }</div>
<div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160; </div>
<div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;    <span class="comment">// the result sign is easy to compute (note, we use the saved</span></div>
<div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;    <span class="comment">// right sign, which might have been made positive for the</span></div>
<div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;    <span class="comment">// remainder operation</span></div>
<div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;    accum-&gt;<a class="code" href="class_number_string_base.html#a89de4786d9655048c6f2ebe870ada73a">numberSign</a> = left-&gt;<a class="code" href="class_number_string_base.html#a89de4786d9655048c6f2ebe870ada73a">numberSign</a> * saveRight-&gt;<a class="code" href="class_number_string_base.html#a89de4786d9655048c6f2ebe870ada73a">numberSign</a>;</div>
<div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160; </div>
<div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;    <a class="code" href="rexx_8h.html#aa0199524ada35d939fa20d4625d27d55">wholenumber_t</a> rightPadding = 0;</div>
<div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160; </div>
<div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;    <span class="comment">// we might need to pad the right number if it is shorter.</span></div>
<div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;    <span class="comment">// if the right is longer, we pad the left number to the same length</span></div>
<div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;    <span class="keywordflow">if</span> (saveRight-&gt;<a class="code" href="class_number_string_base.html#a69c6fa53326f051165bbad19f21314d9">digitsCount</a> &gt; saveLeft-&gt;<a class="code" href="class_number_string_base.html#a69c6fa53326f051165bbad19f21314d9">digitsCount</a>)</div>
<div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160;    {</div>
<div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;        <span class="comment">// we&#39;re making the left number longer, which pads the number</span></div>
<div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;        <span class="comment">// because the rest of the number buffer is zeros.</span></div>
<div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160;        saveLeft-&gt;<a class="code" href="class_number_string_base.html#a69c6fa53326f051165bbad19f21314d9">digitsCount</a> = saveRight-&gt;<a class="code" href="class_number_string_base.html#a69c6fa53326f051165bbad19f21314d9">digitsCount</a>;</div>
<div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;    }</div>
<div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;    <span class="comment">// the right number is shorter...we&#39;ll need to pad that out by the difference</span></div>
<div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;    {</div>
<div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160; </div>
<div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;        rightPadding = saveLeft-&gt;<a class="code" href="class_number_string_base.html#a69c6fa53326f051165bbad19f21314d9">digitsCount</a> - saveRight-&gt;<a class="code" href="class_number_string_base.html#a69c6fa53326f051165bbad19f21314d9">digitsCount</a>;</div>
<div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160;        <span class="comment">// we want both numbers the same</span></div>
<div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160;        saveRight-&gt;<a class="code" href="class_number_string_base.html#a69c6fa53326f051165bbad19f21314d9">digitsCount</a> = saveLeft-&gt;<a class="code" href="class_number_string_base.html#a69c6fa53326f051165bbad19f21314d9">digitsCount</a>;</div>
<div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;    }</div>
<div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160; </div>
<div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;    <span class="comment">// set the new exponents using relative forms</span></div>
<div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160;    saveLeft-&gt;<a class="code" href="class_number_string_base.html#a7ca743677b8bfd7cf13b652bac72e279">numberExponent</a> = digits * 2 - saveLeft-&gt;<a class="code" href="class_number_string_base.html#a69c6fa53326f051165bbad19f21314d9">digitsCount</a> + 1;</div>
<div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160;    saveRight-&gt;<a class="code" href="class_number_string_base.html#a7ca743677b8bfd7cf13b652bac72e279">numberExponent</a> = rightPadding;</div>
<div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160;    <a class="code" href="rexx_8h.html#aa0199524ada35d939fa20d4625d27d55">wholenumber_t</a> adjustLeft = 0;</div>
<div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160; </div>
<div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;    <span class="comment">// When generating a best guess digits for result we will look</span></div>
<div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;    <span class="comment">// use the 1st 2 digits of the dividend (if there are 2)</span></div>
<div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160;    <span class="comment">// we then add 1 to this DivChar to ensure than when we gues</span></div>
<div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160;    <span class="comment">// we either guess correctly of under guess.</span></div>
<div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160;    <span class="comment">//           _______________</span></div>
<div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160;    <span class="comment">//  aabbbbbb ) xxyyyyyyyy</span></div>
<div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160;    <span class="comment">//</span></div>
<div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160;    <span class="comment">//     DivChar = aa + 1</span></div>
<div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160; </div>
<div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160;    <span class="comment">// the division character is the first two digits, or</span></div>
<div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160;    <span class="comment">// if there is only one digit, the second digit is effectively</span></div>
<div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160;    <span class="comment">// a zero.</span></div>
<div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160;    <span class="keywordtype">int</span> divChar = *rightNum * 10;</div>
<div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160;    <span class="keywordflow">if</span> (saveRight-&gt;<a class="code" href="class_number_string_base.html#a69c6fa53326f051165bbad19f21314d9">digitsCount</a> &gt; 1)</div>
<div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160;    {</div>
<div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160;        divChar += *(rightNum + 1);</div>
<div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160;    }</div>
<div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160;    <span class="comment">// and add 1 to our division characters so that we will err on the</span></div>
<div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160;    <span class="comment">// low side</span></div>
<div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;    divChar++;</div>
<div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160; </div>
<div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160;    <span class="comment">// the count of digits in the result</span></div>
<div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160;    <a class="code" href="rexx_8h.html#aa0199524ada35d939fa20d4625d27d55">wholenumber_t</a> resultDigits = 0;</div>
<div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160;    <span class="keywordtype">int</span> thisDigit = 0;</div>
<div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160; </div>
<div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160;    <span class="comment">// We are now to enter 2 do forever loops, inside the loops</span></div>
<div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160;    <span class="comment">//  we test for ending conditions. and will exit the loops</span></div>
<div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160;    <span class="comment">//  when needed. This inner loop may need to break out of</span></div>
<div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160;    <span class="comment">//  both loops, if our divisor is reduced to zero(all finish</span></div>
<div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160;    <span class="comment">//  if this happens to do the no-no nad use a GOTO.</span></div>
<div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160;    <span class="comment">// The outer loop is used to obtain all digits for the resul</span></div>
<div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160;    <span class="comment">//  We continue in this loop while the divisor has NOT been</span></div>
<div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160;    <span class="comment">//  reduced to zero and we have not reach the maximum number</span></div>
<div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160;    <span class="comment">//  of digits to be in the result (NumDigits + 1), we add</span></div>
<div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160;    <span class="comment">//  one to NumDigits so we can round if necessary.</span></div>
<div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160;    <span class="comment">// The inner loop conputs each digits of the result and</span></div>
<div class="line"><a name="l00510"></a><span class="lineno">  510</span>&#160;    <span class="comment">//  breaks to the outer loop when the next digit of result</span></div>
<div class="line"><a name="l00511"></a><span class="lineno">  511</span>&#160;    <span class="comment">//  is found.</span></div>
<div class="line"><a name="l00512"></a><span class="lineno">  512</span>&#160;    <span class="comment">// We compute a digit of result by continually taking best</span></div>
<div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160;    <span class="comment">//  guesses at how many times the dividend can go into the</span></div>
<div class="line"><a name="l00514"></a><span class="lineno">  514</span>&#160;    <span class="comment">//  divisor. Once The divisor becomes less than the dividend</span></div>
<div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160;    <span class="comment">//  we found this digit and we exit the inner loop. If the</span></div>
<div class="line"><a name="l00516"></a><span class="lineno">  516</span>&#160;    <span class="comment">//  divisor = dividend then we know dividend will go into</span></div>
<div class="line"><a name="l00517"></a><span class="lineno">  517</span>&#160;    <span class="comment">//  1 more than last guess, so bump up the last guess and</span></div>
<div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160;    <span class="comment">//  exit both loops (ALL DONE !!), if neither of the above</span></div>
<div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160;    <span class="comment">//  conditions are met our last guess was low, compute a new</span></div>
<div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160;    <span class="comment">//  guess using result of last one, and go though inner loop</span></div>
<div class="line"><a name="l00521"></a><span class="lineno">  521</span>&#160;    <span class="comment">//  again.</span></div>
<div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160; </div>
<div class="line"><a name="l00523"></a><span class="lineno">  523</span>&#160;    <span class="comment">// outer loop</span></div>
<div class="line"><a name="l00524"></a><span class="lineno">  524</span>&#160;    <span class="keywordflow">for</span> (; ; )</div>
<div class="line"><a name="l00525"></a><span class="lineno">  525</span>&#160;    {</div>
<div class="line"><a name="l00526"></a><span class="lineno">  526</span>&#160;        <span class="keywordtype">int</span> multiplier;</div>
<div class="line"><a name="l00527"></a><span class="lineno">  527</span>&#160;        <span class="comment">// inner loop</span></div>
<div class="line"><a name="l00528"></a><span class="lineno">  528</span>&#160;        <span class="keywordflow">for</span> (; ; )</div>
<div class="line"><a name="l00529"></a><span class="lineno">  529</span>&#160;        {</div>
<div class="line"><a name="l00530"></a><span class="lineno">  530</span>&#160;            <span class="comment">// are the two numbers now of equal length?</span></div>
<div class="line"><a name="l00531"></a><span class="lineno">  531</span>&#160;            <span class="keywordflow">if</span> (saveLeft-&gt;<a class="code" href="class_number_string_base.html#a69c6fa53326f051165bbad19f21314d9">digitsCount</a> == saveRight-&gt;<a class="code" href="class_number_string_base.html#a69c6fa53326f051165bbad19f21314d9">digitsCount</a>)</div>
<div class="line"><a name="l00532"></a><span class="lineno">  532</span>&#160;            {</div>
<div class="line"><a name="l00533"></a><span class="lineno">  533</span>&#160;                <span class="comment">// directly compare the two numbers</span></div>
<div class="line"><a name="l00534"></a><span class="lineno">  534</span>&#160;                <span class="keywordtype">int</span> rc = memcmp(leftNum, rightNum, saveLeft-&gt;<a class="code" href="class_number_string_base.html#a69c6fa53326f051165bbad19f21314d9">digitsCount</a>);</div>
<div class="line"><a name="l00535"></a><span class="lineno">  535</span>&#160;                <span class="comment">// if the left number is smaller, we&#39;re done with the inner</span></div>
<div class="line"><a name="l00536"></a><span class="lineno">  536</span>&#160;                <span class="comment">// loop.</span></div>
<div class="line"><a name="l00537"></a><span class="lineno">  537</span>&#160;                <span class="keywordflow">if</span> (rc &lt; 0)</div>
<div class="line"><a name="l00538"></a><span class="lineno">  538</span>&#160;                {</div>
<div class="line"><a name="l00539"></a><span class="lineno">  539</span>&#160;                    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00540"></a><span class="lineno">  540</span>&#160;                }</div>
<div class="line"><a name="l00541"></a><span class="lineno">  541</span>&#160;                <span class="comment">// if the inner numbers are equal and this is not a remainder</span></div>
<div class="line"><a name="l00542"></a><span class="lineno">  542</span>&#160;                <span class="comment">// op, we can terminate the entire loop</span></div>
<div class="line"><a name="l00543"></a><span class="lineno">  543</span>&#160;                <span class="keywordflow">else</span> <span class="keywordflow">if</span> (rc == 0 &amp;&amp; divOP != <a class="code" href="class_number_string.html#a48ad5e780996b5777281d1aec2832d66aec70bc1cb012c3ab36c8df9877d6c910">OT_REMAINDER</a>)</div>
<div class="line"><a name="l00544"></a><span class="lineno">  544</span>&#160;                {</div>
<div class="line"><a name="l00545"></a><span class="lineno">  545</span>&#160;                    <span class="comment">// divided evenly, if you add in one more to the guess</span></div>
<div class="line"><a name="l00546"></a><span class="lineno">  546</span>&#160;                    *resultPtr++ = (char)(thisDigit + 1);</div>
<div class="line"><a name="l00547"></a><span class="lineno">  547</span>&#160;                    resultDigits++;</div>
<div class="line"><a name="l00548"></a><span class="lineno">  548</span>&#160;                    <span class="comment">// this breaks out of both loops</span></div>
<div class="line"><a name="l00549"></a><span class="lineno">  549</span>&#160;                    <span class="keywordflow">goto</span> PowerDivideDone;</div>
<div class="line"><a name="l00550"></a><span class="lineno">  550</span>&#160;                }</div>
<div class="line"><a name="l00551"></a><span class="lineno">  551</span>&#160;                <span class="comment">// either the number is greater or we&#39;re doing a remainder</span></div>
<div class="line"><a name="l00552"></a><span class="lineno">  552</span>&#160;                <span class="keywordflow">else</span></div>
<div class="line"><a name="l00553"></a><span class="lineno">  553</span>&#160;                {</div>
<div class="line"><a name="l00554"></a><span class="lineno">  554</span>&#160;                    <span class="comment">// just use one digit from the divisor for this next guess</span></div>
<div class="line"><a name="l00555"></a><span class="lineno">  555</span>&#160;                    multiplier = *leftNum;</div>
<div class="line"><a name="l00556"></a><span class="lineno">  556</span>&#160;                }</div>
<div class="line"><a name="l00557"></a><span class="lineno">  557</span>&#160;            }</div>
<div class="line"><a name="l00558"></a><span class="lineno">  558</span>&#160;            <span class="comment">// the left number is longer than the accumulator?</span></div>
<div class="line"><a name="l00559"></a><span class="lineno">  559</span>&#160;            <span class="keywordflow">else</span> <span class="keywordflow">if</span> (saveLeft-&gt;<a class="code" href="class_number_string_base.html#a69c6fa53326f051165bbad19f21314d9">digitsCount</a> &gt; saveRight-&gt;<a class="code" href="class_number_string_base.html#a69c6fa53326f051165bbad19f21314d9">digitsCount</a>)</div>
<div class="line"><a name="l00560"></a><span class="lineno">  560</span>&#160;            {</div>
<div class="line"><a name="l00561"></a><span class="lineno">  561</span>&#160;                <span class="comment">// calculate multiplier using the next two digits</span></div>
<div class="line"><a name="l00562"></a><span class="lineno">  562</span>&#160;                <span class="comment">// note, since the left number is longer than the right,</span></div>
<div class="line"><a name="l00563"></a><span class="lineno">  563</span>&#160;                <span class="comment">// we know we have at least two digis.</span></div>
<div class="line"><a name="l00564"></a><span class="lineno">  564</span>&#160;                multiplier = *leftNum * 10 + *(leftNum + 1);</div>
<div class="line"><a name="l00565"></a><span class="lineno">  565</span>&#160;            }</div>
<div class="line"><a name="l00566"></a><span class="lineno">  566</span>&#160;            <span class="comment">// the divisor is smaller than the dividend, so we break out of the loop</span></div>
<div class="line"><a name="l00567"></a><span class="lineno">  567</span>&#160;            <span class="keywordflow">else</span></div>
<div class="line"><a name="l00568"></a><span class="lineno">  568</span>&#160;            {</div>
<div class="line"><a name="l00569"></a><span class="lineno">  569</span>&#160;                <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00570"></a><span class="lineno">  570</span>&#160;            }</div>
<div class="line"><a name="l00571"></a><span class="lineno">  571</span>&#160; </div>
<div class="line"><a name="l00572"></a><span class="lineno">  572</span>&#160;            <span class="comment">// we found this digit of result, go to outer loop and finish up</span></div>
<div class="line"><a name="l00573"></a><span class="lineno">  573</span>&#160;            <span class="comment">// processing for this digit. Compute Multiplier for actual divide</span></div>
<div class="line"><a name="l00574"></a><span class="lineno">  574</span>&#160;            multiplier = multiplier * 10 / divChar;</div>
<div class="line"><a name="l00575"></a><span class="lineno">  575</span>&#160; </div>
<div class="line"><a name="l00576"></a><span class="lineno">  576</span>&#160;            <span class="comment">// that is how many times will digit</span></div>
<div class="line"><a name="l00577"></a><span class="lineno">  577</span>&#160;            <span class="comment">// of dividend go into divisor, using</span></div>
<div class="line"><a name="l00578"></a><span class="lineno">  578</span>&#160;            <span class="comment">// the 1st 2 digits of each number</span></div>
<div class="line"><a name="l00579"></a><span class="lineno">  579</span>&#160;            <span class="comment">// compute our Best Guess for this</span></div>
<div class="line"><a name="l00580"></a><span class="lineno">  580</span>&#160;            <span class="comment">// digit</span></div>
<div class="line"><a name="l00581"></a><span class="lineno">  581</span>&#160; </div>
<div class="line"><a name="l00582"></a><span class="lineno">  582</span>&#160;            <span class="comment">// if this computed to zero, make it 1</span></div>
<div class="line"><a name="l00583"></a><span class="lineno">  583</span>&#160;            <span class="keywordflow">if</span> (multiplier == 0)</div>
<div class="line"><a name="l00584"></a><span class="lineno">  584</span>&#160;            {</div>
<div class="line"><a name="l00585"></a><span class="lineno">  585</span>&#160;                multiplier = 1;</div>
<div class="line"><a name="l00586"></a><span class="lineno">  586</span>&#160;            }</div>
<div class="line"><a name="l00587"></a><span class="lineno">  587</span>&#160; </div>
<div class="line"><a name="l00588"></a><span class="lineno">  588</span>&#160;            <span class="comment">// we know the divident goes into divisor at least one more time.</span></div>
<div class="line"><a name="l00589"></a><span class="lineno">  589</span>&#160;            thisDigit += multiplier;</div>
<div class="line"><a name="l00590"></a><span class="lineno">  590</span>&#160; </div>
<div class="line"><a name="l00591"></a><span class="lineno">  591</span>&#160; </div>
<div class="line"><a name="l00592"></a><span class="lineno">  592</span>&#160;            <span class="comment">// divide the digit through and see if we guessed correctly.</span></div>
<div class="line"><a name="l00593"></a><span class="lineno">  593</span>&#160;            leftNum = <a class="code" href="class_number_string.html#a6564042d9236475269dc6072c0aba6f1">subtractDivisor</a>(leftNum, saveLeft-&gt;<a class="code" href="class_number_string_base.html#a69c6fa53326f051165bbad19f21314d9">digitsCount</a>, rightNum, saveRight-&gt;<a class="code" href="class_number_string_base.html#a69c6fa53326f051165bbad19f21314d9">digitsCount</a>, leftNum + saveLeft-&gt;<a class="code" href="class_number_string_base.html#a69c6fa53326f051165bbad19f21314d9">digitsCount</a> - 1, multiplier);</div>
<div class="line"><a name="l00594"></a><span class="lineno">  594</span>&#160;            <span class="comment">// skip over any leading zeros</span></div>
<div class="line"><a name="l00595"></a><span class="lineno">  595</span>&#160;            leftNum = saveLeft-&gt;<a class="code" href="class_number_string_base.html#a4f77dda8d9e0d98f25cc89cb478b08b2">stripLeadingZeros</a>(leftNum);</div>
<div class="line"><a name="l00596"></a><span class="lineno">  596</span>&#160;            <span class="comment">// end of inner loop, go back and guess again !! This might have been the right guess.</span></div>
<div class="line"><a name="l00597"></a><span class="lineno">  597</span>&#160;        }</div>
<div class="line"><a name="l00598"></a><span class="lineno">  598</span>&#160;        <span class="comment">// we only add zero digits if we have other digits.  non-zero</span></div>
<div class="line"><a name="l00599"></a><span class="lineno">  599</span>&#160;        <span class="comment">// digits always get added</span></div>
<div class="line"><a name="l00600"></a><span class="lineno">  600</span>&#160;        <span class="keywordflow">if</span> (resultDigits != 0 || thisDigit != 0)</div>
<div class="line"><a name="l00601"></a><span class="lineno">  601</span>&#160;        {</div>
<div class="line"><a name="l00602"></a><span class="lineno">  602</span>&#160;            <span class="comment">// add this to the result</span></div>
<div class="line"><a name="l00603"></a><span class="lineno">  603</span>&#160;            *resultPtr++ = (char) thisDigit;</div>
<div class="line"><a name="l00604"></a><span class="lineno">  604</span>&#160;            thisDigit = 0;</div>
<div class="line"><a name="l00605"></a><span class="lineno">  605</span>&#160;            resultDigits++;</div>
<div class="line"><a name="l00606"></a><span class="lineno">  606</span>&#160; </div>
<div class="line"><a name="l00607"></a><span class="lineno">  607</span>&#160;            <span class="comment">// we stop processing of A) the left number has been reduced</span></div>
<div class="line"><a name="l00608"></a><span class="lineno">  608</span>&#160;            <span class="comment">// to zero or B) The result has reached our digits limit.</span></div>
<div class="line"><a name="l00609"></a><span class="lineno">  609</span>&#160;            <span class="keywordflow">if</span> (*leftNum == <span class="charliteral">&#39;\0&#39;</span> || resultDigits &gt; digits)</div>
<div class="line"><a name="l00610"></a><span class="lineno">  610</span>&#160;            {</div>
<div class="line"><a name="l00611"></a><span class="lineno">  611</span>&#160;                <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00612"></a><span class="lineno">  612</span>&#160;            }</div>
<div class="line"><a name="l00613"></a><span class="lineno">  613</span>&#160;        }</div>
<div class="line"><a name="l00614"></a><span class="lineno">  614</span>&#160; </div>
<div class="line"><a name="l00615"></a><span class="lineno">  615</span>&#160;        <span class="comment">// we have different termination rules for int divide and remainder operations.</span></div>
<div class="line"><a name="l00616"></a><span class="lineno">  616</span>&#160;        <span class="keywordflow">if</span> (divOP != <a class="code" href="class_number_string.html#a48ad5e780996b5777281d1aec2832d66a173e26391a07898c7ffdfc4cfb2e4a95">OT_DIVIDE</a>)</div>
<div class="line"><a name="l00617"></a><span class="lineno">  617</span>&#160;        {</div>
<div class="line"><a name="l00618"></a><span class="lineno">  618</span>&#160;            <span class="comment">// have we generated all of the integer digits yet?</span></div>
<div class="line"><a name="l00619"></a><span class="lineno">  619</span>&#160;            <span class="comment">// then we are done.</span></div>
<div class="line"><a name="l00620"></a><span class="lineno">  620</span>&#160;            <span class="keywordflow">if</span> (calcExp &lt;= 0)</div>
<div class="line"><a name="l00621"></a><span class="lineno">  621</span>&#160;            {</div>
<div class="line"><a name="l00622"></a><span class="lineno">  622</span>&#160;                <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00623"></a><span class="lineno">  623</span>&#160;            }</div>
<div class="line"><a name="l00624"></a><span class="lineno">  624</span>&#160;        }</div>
<div class="line"><a name="l00625"></a><span class="lineno">  625</span>&#160;        <span class="comment">// Was number reduced to zero?  We divided evenly</span></div>
<div class="line"><a name="l00626"></a><span class="lineno">  626</span>&#160;        <span class="keywordflow">if</span> (saveLeft-&gt;<a class="code" href="class_number_string_base.html#a69c6fa53326f051165bbad19f21314d9">digitsCount</a> == 1 &amp;&amp; *leftNum == <span class="charliteral">&#39;\0&#39;</span>)</div>
<div class="line"><a name="l00627"></a><span class="lineno">  627</span>&#160;        {</div>
<div class="line"><a name="l00628"></a><span class="lineno">  628</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00629"></a><span class="lineno">  629</span>&#160;        }</div>
<div class="line"><a name="l00630"></a><span class="lineno">  630</span>&#160; </div>
<div class="line"><a name="l00631"></a><span class="lineno">  631</span>&#160; </div>
<div class="line"><a name="l00632"></a><span class="lineno">  632</span>&#160;        <span class="comment">// we&#39;re not done dividing yet, we</span></div>
<div class="line"><a name="l00633"></a><span class="lineno">  633</span>&#160;        <span class="comment">//  need to adjust expected exponent</span></div>
<div class="line"><a name="l00634"></a><span class="lineno">  634</span>&#160;        <span class="comment">//  by one to the left</span></div>
<div class="line"><a name="l00635"></a><span class="lineno">  635</span>&#160;        calcExp--;</div>
<div class="line"><a name="l00636"></a><span class="lineno">  636</span>&#160;        <span class="comment">// if we are still padding the right number, use one less digit on the</span></div>
<div class="line"><a name="l00637"></a><span class="lineno">  637</span>&#160;        <span class="comment">// next pass</span></div>
<div class="line"><a name="l00638"></a><span class="lineno">  638</span>&#160;        <span class="keywordflow">if</span> (rightPadding &gt; 0)</div>
<div class="line"><a name="l00639"></a><span class="lineno">  639</span>&#160;        {</div>
<div class="line"><a name="l00640"></a><span class="lineno">  640</span>&#160;            saveRight-&gt;<a class="code" href="class_number_string_base.html#a69c6fa53326f051165bbad19f21314d9">digitsCount</a>--;</div>
<div class="line"><a name="l00641"></a><span class="lineno">  641</span>&#160;            rightPadding--;</div>
<div class="line"><a name="l00642"></a><span class="lineno">  642</span>&#160;        }</div>
<div class="line"><a name="l00643"></a><span class="lineno">  643</span>&#160;        <span class="comment">// we decreased the left value to to the size of the right</span></div>
<div class="line"><a name="l00644"></a><span class="lineno">  644</span>&#160;        <span class="comment">// before starting, so we add the digits back in as we progress.</span></div>
<div class="line"><a name="l00645"></a><span class="lineno">  645</span>&#160;        <span class="keywordflow">else</span></div>
<div class="line"><a name="l00646"></a><span class="lineno">  646</span>&#160;        {</div>
<div class="line"><a name="l00647"></a><span class="lineno">  647</span>&#160;            saveLeft-&gt;<a class="code" href="class_number_string_base.html#a69c6fa53326f051165bbad19f21314d9">digitsCount</a>++;</div>
<div class="line"><a name="l00648"></a><span class="lineno">  648</span>&#160;        }</div>
<div class="line"><a name="l00649"></a><span class="lineno">  649</span>&#160;    }</div>
<div class="line"><a name="l00650"></a><span class="lineno">  650</span>&#160; </div>
<div class="line"><a name="l00651"></a><span class="lineno">  651</span>&#160;    <span class="comment">// We&#39;ve ended the entire division because we&#39;ve hit equality.</span></div>
<div class="line"><a name="l00652"></a><span class="lineno">  652</span>&#160;    PowerDivideDone:</div>
<div class="line"><a name="l00653"></a><span class="lineno">  653</span>&#160;    ;</div>
<div class="line"><a name="l00654"></a><span class="lineno">  654</span>&#160; </div>
<div class="line"><a name="l00655"></a><span class="lineno">  655</span>&#160;    <span class="comment">// if this is a // or % operation, the result might be bad.</span></div>
<div class="line"><a name="l00656"></a><span class="lineno">  656</span>&#160;    <span class="comment">// This might not be expressible as a whole number because of</span></div>
<div class="line"><a name="l00657"></a><span class="lineno">  657</span>&#160;    <span class="comment">// the relative size of the operands, or we have a result with</span></div>
<div class="line"><a name="l00658"></a><span class="lineno">  658</span>&#160;    <span class="comment">// no integer portion</span></div>
<div class="line"><a name="l00659"></a><span class="lineno">  659</span>&#160;    <span class="keywordflow">if</span> ((divOP != <a class="code" href="class_number_string.html#a48ad5e780996b5777281d1aec2832d66a173e26391a07898c7ffdfc4cfb2e4a95">OT_DIVIDE</a>) &amp;&amp; ((calcExp &gt;= 0 &amp;&amp;</div>
<div class="line"><a name="l00660"></a><span class="lineno">  660</span>&#160;           ( resultDigits + calcExp) &gt; digits) ||</div>
<div class="line"><a name="l00661"></a><span class="lineno">  661</span>&#160;         (calcExp &lt; 0  &amp;&amp; std::abs(calcExp) &gt; resultDigits)))</div>
<div class="line"><a name="l00662"></a><span class="lineno">  662</span>&#160;    {</div>
<div class="line"><a name="l00663"></a><span class="lineno">  663</span>&#160;        <a class="code" href="_activity_manager_8hpp.html#ab278a90c36b1ea34f0d6a7e280799eaa">reportException</a>(divOP == <a class="code" href="class_number_string.html#a48ad5e780996b5777281d1aec2832d66aec70bc1cb012c3ab36c8df9877d6c910">OT_REMAINDER</a> ? <a class="code" href="_rexx_error_codes_8h.html#ab78d722675e696d37b9b75e363a8b358a3d114efa6d6a106b6743574c9cd226bc">Error_Invalid_whole_number_rem</a> : <a class="code" href="_rexx_error_codes_8h.html#ab78d722675e696d37b9b75e363a8b358a213c5932a86ea3ab073f4aab1f3a8445">Error_Invalid_whole_number_intdiv</a>);</div>
<div class="line"><a name="l00664"></a><span class="lineno">  664</span>&#160;    }</div>
<div class="line"><a name="l00665"></a><span class="lineno">  665</span>&#160; </div>
<div class="line"><a name="l00666"></a><span class="lineno">  666</span>&#160;    <span class="comment">// if we&#39;re doing a remainder operation, we&#39;ve really done an integer divide to this</span></div>
<div class="line"><a name="l00667"></a><span class="lineno">  667</span>&#160;    <span class="comment">// point and now need to figure out the remainder portion</span></div>
<div class="line"><a name="l00668"></a><span class="lineno">  668</span>&#160;    <span class="keywordflow">if</span> (divOP == <a class="code" href="class_number_string.html#a48ad5e780996b5777281d1aec2832d66aec70bc1cb012c3ab36c8df9877d6c910">OT_REMAINDER</a>)</div>
<div class="line"><a name="l00669"></a><span class="lineno">  669</span>&#160;    {</div>
<div class="line"><a name="l00670"></a><span class="lineno">  670</span>&#160;        <span class="comment">// if we managed to generate any result digits</span></div>
<div class="line"><a name="l00671"></a><span class="lineno">  671</span>&#160;        <span class="keywordflow">if</span> (resultDigits != 0)</div>
<div class="line"><a name="l00672"></a><span class="lineno">  672</span>&#160;        {</div>
<div class="line"><a name="l00673"></a><span class="lineno">  673</span>&#160;            <span class="comment">// the left number is the remainder.  If the first digit</span></div>
<div class="line"><a name="l00674"></a><span class="lineno">  674</span>&#160;            <span class="comment">// is zero, there is no remainder</span></div>
<div class="line"><a name="l00675"></a><span class="lineno">  675</span>&#160;            <span class="keywordflow">if</span> (*leftNum != 0)</div>
<div class="line"><a name="l00676"></a><span class="lineno">  676</span>&#160;            {</div>
<div class="line"><a name="l00677"></a><span class="lineno">  677</span>&#160;                <span class="comment">// this is our result</span></div>
<div class="line"><a name="l00678"></a><span class="lineno">  678</span>&#160;                resultPtr = leftNum;</div>
<div class="line"><a name="l00679"></a><span class="lineno">  679</span>&#160;                <span class="comment">// now we need to calculate the exponent, adjusting for any added zeros</span></div>
<div class="line"><a name="l00680"></a><span class="lineno">  680</span>&#160;                saveLeftPtr += left-&gt;<a class="code" href="class_number_string_base.html#a69c6fa53326f051165bbad19f21314d9">digitsCount</a>;</div>
<div class="line"><a name="l00681"></a><span class="lineno">  681</span>&#160;                saveRightPtr = resultPtr + saveLeft-&gt;<a class="code" href="class_number_string_base.html#a69c6fa53326f051165bbad19f21314d9">digitsCount</a> + adjustLeft;</div>
<div class="line"><a name="l00682"></a><span class="lineno">  682</span>&#160;                accum-&gt;<a class="code" href="class_number_string_base.html#a7ca743677b8bfd7cf13b652bac72e279">numberExponent</a> = left-&gt;<a class="code" href="class_number_string_base.html#a7ca743677b8bfd7cf13b652bac72e279">numberExponent</a> - (saveRightPtr - saveLeftPtr);</div>
<div class="line"><a name="l00683"></a><span class="lineno">  683</span>&#160;                <span class="comment">// the result length is the remaining digits count</span></div>
<div class="line"><a name="l00684"></a><span class="lineno">  684</span>&#160;                accum-&gt;<a class="code" href="class_number_string_base.html#a69c6fa53326f051165bbad19f21314d9">digitsCount</a> = saveLeft-&gt;<a class="code" href="class_number_string_base.html#a69c6fa53326f051165bbad19f21314d9">digitsCount</a>;</div>
<div class="line"><a name="l00685"></a><span class="lineno">  685</span>&#160;            }</div>
<div class="line"><a name="l00686"></a><span class="lineno">  686</span>&#160;            <span class="comment">// we have a zero result, just return a zero</span></div>
<div class="line"><a name="l00687"></a><span class="lineno">  687</span>&#160;            <span class="keywordflow">else</span></div>
<div class="line"><a name="l00688"></a><span class="lineno">  688</span>&#160;            {</div>
<div class="line"><a name="l00689"></a><span class="lineno">  689</span>&#160;                <span class="keywordflow">return</span> (<a class="code" href="class_number_string.html">NumberString</a> *)<a class="code" href="_rexx_core_8h.html#add4beaef2223c4d220d99cba73388681">IntegerZero</a>;</div>
<div class="line"><a name="l00690"></a><span class="lineno">  690</span>&#160;            }</div>
<div class="line"><a name="l00691"></a><span class="lineno">  691</span>&#160;        }</div>
<div class="line"><a name="l00692"></a><span class="lineno">  692</span>&#160;        <span class="comment">// no digits in result, remainder is the left number (this)</span></div>
<div class="line"><a name="l00693"></a><span class="lineno">  693</span>&#160;        <span class="keywordflow">else</span></div>
<div class="line"><a name="l00694"></a><span class="lineno">  694</span>&#160;        {</div>
<div class="line"><a name="l00695"></a><span class="lineno">  695</span>&#160;            <span class="comment">// we return a copy of the left number</span></div>
<div class="line"><a name="l00696"></a><span class="lineno">  696</span>&#160;            <a class="code" href="class_number_string.html">NumberString</a> *result = <a class="code" href="class_number_string.html#ab87dadeb7537fda0d05dc1861120a166">clone</a>();</div>
<div class="line"><a name="l00697"></a><span class="lineno">  697</span>&#160;            result-&gt;<a class="code" href="class_number_string.html#a806d9c5f154109ecb58b937dabc70019">setupNumber</a>();</div>
<div class="line"><a name="l00698"></a><span class="lineno">  698</span>&#160;            <span class="keywordflow">return</span> result;</div>
<div class="line"><a name="l00699"></a><span class="lineno">  699</span>&#160;        }</div>
<div class="line"><a name="l00700"></a><span class="lineno">  700</span>&#160;    }</div>
<div class="line"><a name="l00701"></a><span class="lineno">  701</span>&#160;    <span class="comment">// this is a real division (but possibly integer division) so we need to finish up the result</span></div>
<div class="line"><a name="l00702"></a><span class="lineno">  702</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l00703"></a><span class="lineno">  703</span>&#160;    {</div>
<div class="line"><a name="l00704"></a><span class="lineno">  704</span>&#160;        <span class="comment">// if we have some sort of result digits, set up for building the final number string</span></div>
<div class="line"><a name="l00705"></a><span class="lineno">  705</span>&#160;        <span class="keywordflow">if</span> (resultDigits != 0)</div>
<div class="line"><a name="l00706"></a><span class="lineno">  706</span>&#160;        {</div>
<div class="line"><a name="l00707"></a><span class="lineno">  707</span>&#160;            resultPtr = output;</div>
<div class="line"><a name="l00708"></a><span class="lineno">  708</span>&#160;            accum-&gt;<a class="code" href="class_number_string_base.html#a69c6fa53326f051165bbad19f21314d9">digitsCount</a> = resultDigits;</div>
<div class="line"><a name="l00709"></a><span class="lineno">  709</span>&#160;            accum-&gt;<a class="code" href="class_number_string_base.html#a7ca743677b8bfd7cf13b652bac72e279">numberExponent</a> = calcExp;</div>
<div class="line"><a name="l00710"></a><span class="lineno">  710</span>&#160;            <span class="comment">// if the result is too big, we need to round to the digits setting</span></div>
<div class="line"><a name="l00711"></a><span class="lineno">  711</span>&#160;            <span class="keywordflow">if</span> (accum-&gt;<a class="code" href="class_number_string_base.html#a69c6fa53326f051165bbad19f21314d9">digitsCount</a> &gt; digits)</div>
<div class="line"><a name="l00712"></a><span class="lineno">  712</span>&#160;            {</div>
<div class="line"><a name="l00713"></a><span class="lineno">  713</span>&#160;                <span class="comment">// we shorten the length and increase the exponent by the delta</span></div>
<div class="line"><a name="l00714"></a><span class="lineno">  714</span>&#160;                accum-&gt;<a class="code" href="class_number_string_base.html#a7ca743677b8bfd7cf13b652bac72e279">numberExponent</a> += (accum-&gt;<a class="code" href="class_number_string_base.html#a69c6fa53326f051165bbad19f21314d9">digitsCount</a> - digits);</div>
<div class="line"><a name="l00715"></a><span class="lineno">  715</span>&#160;                accum-&gt;<a class="code" href="class_number_string_base.html#a69c6fa53326f051165bbad19f21314d9">digitsCount</a> = digits;</div>
<div class="line"><a name="l00716"></a><span class="lineno">  716</span>&#160;                <span class="comment">// see if we need to round</span></div>
<div class="line"><a name="l00717"></a><span class="lineno">  717</span>&#160;                accum-&gt;<a class="code" href="class_number_string_base.html#a58a184bbcc6ffbaf9999c55a2a05f3fa">mathRound</a>(resultPtr);</div>
<div class="line"><a name="l00718"></a><span class="lineno">  718</span>&#160;            }</div>
<div class="line"><a name="l00719"></a><span class="lineno">  719</span>&#160; </div>
<div class="line"><a name="l00720"></a><span class="lineno">  720</span>&#160;            <span class="comment">// We now remove any trailing zeros in the result.</span></div>
<div class="line"><a name="l00721"></a><span class="lineno">  721</span>&#160;            leftNum = resultPtr + accum-&gt;<a class="code" href="class_number_string_base.html#a69c6fa53326f051165bbad19f21314d9">digitsCount</a> - 1;</div>
<div class="line"><a name="l00722"></a><span class="lineno">  722</span>&#160; </div>
<div class="line"><a name="l00723"></a><span class="lineno">  723</span>&#160;            <span class="comment">// NOTE:  We know we have at least one non-zero digit, so this loop</span></div>
<div class="line"><a name="l00724"></a><span class="lineno">  724</span>&#160;            <span class="comment">// will not remove the entire result</span></div>
<div class="line"><a name="l00725"></a><span class="lineno">  725</span>&#160;            <span class="keywordflow">while</span> (*leftNum == 0 &amp;&amp; accum-&gt;<a class="code" href="class_number_string_base.html#a69c6fa53326f051165bbad19f21314d9">digitsCount</a> &gt; 0)</div>
<div class="line"><a name="l00726"></a><span class="lineno">  726</span>&#160;            {</div>
<div class="line"><a name="l00727"></a><span class="lineno">  727</span>&#160;                leftNum--;</div>
<div class="line"><a name="l00728"></a><span class="lineno">  728</span>&#160;                <span class="comment">// changes in length must be reflected with an equal and</span></div>
<div class="line"><a name="l00729"></a><span class="lineno">  729</span>&#160;                <span class="comment">// opposite change in exponent.</span></div>
<div class="line"><a name="l00730"></a><span class="lineno">  730</span>&#160;                accum-&gt;<a class="code" href="class_number_string_base.html#a69c6fa53326f051165bbad19f21314d9">digitsCount</a>--;</div>
<div class="line"><a name="l00731"></a><span class="lineno">  731</span>&#160;                accum-&gt;<a class="code" href="class_number_string_base.html#a7ca743677b8bfd7cf13b652bac72e279">numberExponent</a>++;</div>
<div class="line"><a name="l00732"></a><span class="lineno">  732</span>&#160;            }</div>
<div class="line"><a name="l00733"></a><span class="lineno">  733</span>&#160;        }</div>
<div class="line"><a name="l00734"></a><span class="lineno">  734</span>&#160;        <span class="comment">// no digits in the result, the answer is zero.  This generally</span></div>
<div class="line"><a name="l00735"></a><span class="lineno">  735</span>&#160;        <span class="comment">// only happens with integer division.</span></div>
<div class="line"><a name="l00736"></a><span class="lineno">  736</span>&#160;        <span class="keywordflow">else</span></div>
<div class="line"><a name="l00737"></a><span class="lineno">  737</span>&#160;        {</div>
<div class="line"><a name="l00738"></a><span class="lineno">  738</span>&#160;            <span class="keywordflow">return</span>(<a class="code" href="class_number_string.html">NumberString</a> *)<a class="code" href="_rexx_core_8h.html#add4beaef2223c4d220d99cba73388681">IntegerZero</a>;</div>
<div class="line"><a name="l00739"></a><span class="lineno">  739</span>&#160;        }</div>
<div class="line"><a name="l00740"></a><span class="lineno">  740</span>&#160;    }</div>
<div class="line"><a name="l00741"></a><span class="lineno">  741</span>&#160; </div>
<div class="line"><a name="l00742"></a><span class="lineno">  742</span>&#160;    <span class="comment">// if this has been an integer divide, we can return the result as a</span></div>
<div class="line"><a name="l00743"></a><span class="lineno">  743</span>&#160;    <span class="comment">// RexxInteger if we have at most Numerics::REXXINTEGER_DIGITS digits</span></div>
<div class="line"><a name="l00744"></a><span class="lineno">  744</span>&#160;    <span class="comment">// no need to check the current numeric digits setting, as an</span></div>
<div class="line"><a name="l00745"></a><span class="lineno">  745</span>&#160;    <span class="comment">// integer divide will have raised</span></div>
<div class="line"><a name="l00746"></a><span class="lineno">  746</span>&#160;    <span class="comment">// Error 26.11:  Result of % operation did not result in a whole number</span></div>
<div class="line"><a name="l00747"></a><span class="lineno">  747</span>&#160;    <span class="comment">// for any result outside of the current digits setting</span></div>
<div class="line"><a name="l00748"></a><span class="lineno">  748</span>&#160;    <span class="keywordflow">if</span> (divOP == <a class="code" href="class_number_string.html#a48ad5e780996b5777281d1aec2832d66a7b52372b354bbdd5aea33d3212b01f95">OT_INT_DIVIDE</a> &amp;&amp;</div>
<div class="line"><a name="l00749"></a><span class="lineno">  749</span>&#160;        accum-&gt;<a class="code" href="class_number_string_base.html#a69c6fa53326f051165bbad19f21314d9">digitsCount</a> + accum-&gt;<a class="code" href="class_number_string_base.html#a7ca743677b8bfd7cf13b652bac72e279">numberExponent</a> &lt;= <a class="code" href="class_numerics.html#ac92c349ad5a51e4fdec9dc35677b3ac8">Numerics::REXXINTEGER_DIGITS</a> &amp;&amp;</div>
<div class="line"><a name="l00750"></a><span class="lineno">  750</span>&#160;        <span class="comment">// we also require accum-&gt;numberExponent &gt;= 0 .. not sure if this might happen</span></div>
<div class="line"><a name="l00751"></a><span class="lineno">  751</span>&#160;        accum-&gt;<a class="code" href="class_number_string_base.html#a7ca743677b8bfd7cf13b652bac72e279">numberExponent</a> &gt;= 0)</div>
<div class="line"><a name="l00752"></a><span class="lineno">  752</span>&#160;    {</div>
<div class="line"><a name="l00753"></a><span class="lineno">  753</span>&#160;      <span class="keywordflow">return</span> (<a class="code" href="class_number_string.html">NumberString</a> *)<a class="code" href="_integer_class_8hpp.html#abda515b90956d920c9d93b342771f06b">new_integer</a>(accum-&gt;<a class="code" href="class_number_string_base.html#a89de4786d9655048c6f2ebe870ada73a">numberSign</a> &lt; 0, resultPtr, accum-&gt;<a class="code" href="class_number_string_base.html#a69c6fa53326f051165bbad19f21314d9">digitsCount</a>, accum-&gt;<a class="code" href="class_number_string_base.html#a7ca743677b8bfd7cf13b652bac72e279">numberExponent</a>);</div>
<div class="line"><a name="l00754"></a><span class="lineno">  754</span>&#160;    }</div>
<div class="line"><a name="l00755"></a><span class="lineno">  755</span>&#160; </div>
<div class="line"><a name="l00756"></a><span class="lineno">  756</span>&#160;    <span class="comment">// ok, accum is the number data, resultPtr is the result data</span></div>
<div class="line"><a name="l00757"></a><span class="lineno">  757</span>&#160;    <a class="code" href="class_number_string.html">NumberString</a> *result = <span class="keyword">new</span> (accum-&gt;<a class="code" href="class_number_string_base.html#a69c6fa53326f051165bbad19f21314d9">digitsCount</a>) <a class="code" href="class_number_string.html">NumberString</a> (accum-&gt;<a class="code" href="class_number_string_base.html#a69c6fa53326f051165bbad19f21314d9">digitsCount</a>);</div>
<div class="line"><a name="l00758"></a><span class="lineno">  758</span>&#160; </div>
<div class="line"><a name="l00759"></a><span class="lineno">  759</span>&#160;    result-&gt;<a class="code" href="class_number_string_base.html#a69c6fa53326f051165bbad19f21314d9">digitsCount</a> = accum-&gt;<a class="code" href="class_number_string_base.html#a69c6fa53326f051165bbad19f21314d9">digitsCount</a>;</div>
<div class="line"><a name="l00760"></a><span class="lineno">  760</span>&#160;    result-&gt;<a class="code" href="class_number_string_base.html#a7ca743677b8bfd7cf13b652bac72e279">numberExponent</a> = accum-&gt;<a class="code" href="class_number_string_base.html#a7ca743677b8bfd7cf13b652bac72e279">numberExponent</a>;</div>
<div class="line"><a name="l00761"></a><span class="lineno">  761</span>&#160;    result-&gt;<a class="code" href="class_number_string_base.html#a89de4786d9655048c6f2ebe870ada73a">numberSign</a> = accum-&gt;<a class="code" href="class_number_string_base.html#a89de4786d9655048c6f2ebe870ada73a">numberSign</a>;</div>
<div class="line"><a name="l00762"></a><span class="lineno">  762</span>&#160;    <span class="comment">// note, we have already rounded, so this should work without rounding now.</span></div>
<div class="line"><a name="l00763"></a><span class="lineno">  763</span>&#160;    result-&gt;<a class="code" href="class_number_string.html#a3a133b8af60754777d2d45bedd871708">adjustPrecision</a>(resultPtr, digits);</div>
<div class="line"><a name="l00764"></a><span class="lineno">  764</span>&#160;    <span class="keywordflow">return</span> result;</div>
<div class="line"><a name="l00765"></a><span class="lineno">  765</span>&#160;}</div>
<div class="line"><a name="l00766"></a><span class="lineno">  766</span>&#160; </div>
<div class="line"><a name="l00767"></a><span class="lineno">  767</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00768"></a><span class="lineno">  768</span>&#160;<span class="comment">/**</span></div>
<div class="line"><a name="l00769"></a><span class="lineno">  769</span>&#160;<span class="comment"> * Adjust the number data to be with the correct NUMERIC</span></div>
<div class="line"><a name="l00770"></a><span class="lineno">  770</span>&#160;<span class="comment"> * DIGITS setting.</span></div>
<div class="line"><a name="l00771"></a><span class="lineno">  771</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00772"></a><span class="lineno">  772</span>&#160;<span class="comment"> * @param numPtr    The pointer to the start of the current numeric data.</span></div>
<div class="line"><a name="l00773"></a><span class="lineno">  773</span>&#160;<span class="comment"> * @param result    Where this should be copied back to after adjustment.</span></div>
<div class="line"><a name="l00774"></a><span class="lineno">  774</span>&#160;<span class="comment"> * @param resultLen The length of the result area.  Data is copied relative</span></div>
<div class="line"><a name="l00775"></a><span class="lineno">  775</span>&#160;<span class="comment"> *                  to the end of the data.</span></div>
<div class="line"><a name="l00776"></a><span class="lineno">  776</span>&#160;<span class="comment"> * @param digits    The digits setting for the adjustment.</span></div>
<div class="line"><a name="l00777"></a><span class="lineno">  777</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00778"></a><span class="lineno">  778</span>&#160;<span class="comment"> * @return The new number ptr after the copy.</span></div>
<div class="line"><a name="l00779"></a><span class="lineno">  779</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l00780"></a><span class="lineno"><a class="line" href="class_number_string_base.html#aad5ee522bcbc577d0827687fbfefa868">  780</a></span>&#160;<span class="keywordtype">char</span> *<a class="code" href="class_number_string_base.html#aad5ee522bcbc577d0827687fbfefa868">NumberStringBase::adjustNumber</a>(<span class="keywordtype">char</span> *numPtr, <span class="keywordtype">char</span> *result, <a class="code" href="rexx_8h.html#aa0199524ada35d939fa20d4625d27d55">wholenumber_t</a> resultLen, <a class="code" href="rexx_8h.html#aa0199524ada35d939fa20d4625d27d55">wholenumber_t</a> digits)</div>
<div class="line"><a name="l00781"></a><span class="lineno">  781</span>&#160;{</div>
<div class="line"><a name="l00782"></a><span class="lineno">  782</span>&#160;    <span class="comment">// remove all leading zeros that might have occurred after the operation.</span></div>
<div class="line"><a name="l00783"></a><span class="lineno">  783</span>&#160;    numPtr = <a class="code" href="class_number_string_base.html#a4f77dda8d9e0d98f25cc89cb478b08b2">stripLeadingZeros</a>(numPtr);</div>
<div class="line"><a name="l00784"></a><span class="lineno">  784</span>&#160; </div>
<div class="line"><a name="l00785"></a><span class="lineno">  785</span>&#160;    <span class="comment">// after stripping, is the length of the number larger than the digits setting?</span></div>
<div class="line"><a name="l00786"></a><span class="lineno">  786</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="class_number_string_base.html#a69c6fa53326f051165bbad19f21314d9">digitsCount</a> &gt; digits)</div>
<div class="line"><a name="l00787"></a><span class="lineno">  787</span>&#160;    {</div>
<div class="line"><a name="l00788"></a><span class="lineno">  788</span>&#160;        <span class="comment">// NOTE:  the original version had a bug where it was attempting to adjust the</span></div>
<div class="line"><a name="l00789"></a><span class="lineno">  789</span>&#160;        <span class="comment">// exponent, but because it updated the length first, the net adjustment was zero.</span></div>
<div class="line"><a name="l00790"></a><span class="lineno">  790</span>&#160;        <span class="comment">// I &quot;fixed&quot; this and completely broke the power operation.  I really don&#39;t understand</span></div>
<div class="line"><a name="l00791"></a><span class="lineno">  791</span>&#160;        <span class="comment">// why the exponent does not need adjusting here, but it appears it doesn&#39;t.</span></div>
<div class="line"><a name="l00792"></a><span class="lineno">  792</span>&#160; </div>
<div class="line"><a name="l00793"></a><span class="lineno">  793</span>&#160;        <span class="comment">// adjust the length down to the digits value</span></div>
<div class="line"><a name="l00794"></a><span class="lineno">  794</span>&#160;        <a class="code" href="class_number_string_base.html#a69c6fa53326f051165bbad19f21314d9">digitsCount</a> = digits;</div>
<div class="line"><a name="l00795"></a><span class="lineno">  795</span>&#160;        <span class="comment">// round the number.</span></div>
<div class="line"><a name="l00796"></a><span class="lineno">  796</span>&#160;        <a class="code" href="class_number_string_base.html#a58a184bbcc6ffbaf9999c55a2a05f3fa">mathRound</a>(numPtr);</div>
<div class="line"><a name="l00797"></a><span class="lineno">  797</span>&#160;    }</div>
<div class="line"><a name="l00798"></a><span class="lineno">  798</span>&#160;    <span class="comment">// copy the data into the result area, aligned with the end of the</span></div>
<div class="line"><a name="l00799"></a><span class="lineno">  799</span>&#160;    <span class="comment">// buffer.  We return the pointer to the new start of the number</span></div>
<div class="line"><a name="l00800"></a><span class="lineno">  800</span>&#160;    <span class="keywordflow">return</span> (<span class="keywordtype">char</span> *)memcpy(((result + resultLen - 1) - <a class="code" href="class_number_string_base.html#a69c6fa53326f051165bbad19f21314d9">digitsCount</a>), numPtr, <a class="code" href="class_number_string_base.html#a69c6fa53326f051165bbad19f21314d9">digitsCount</a>);</div>
<div class="line"><a name="l00801"></a><span class="lineno">  801</span>&#160;}</div>
<div class="line"><a name="l00802"></a><span class="lineno">  802</span>&#160; </div>
<div class="line"><a name="l00803"></a><span class="lineno">  803</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00804"></a><span class="lineno">  804</span>&#160;<span class="comment">/**</span></div>
<div class="line"><a name="l00805"></a><span class="lineno">  805</span>&#160;<span class="comment"> * Perform the Arithmetic power operation</span></div>
<div class="line"><a name="l00806"></a><span class="lineno">  806</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00807"></a><span class="lineno">  807</span>&#160;<span class="comment"> * @param PowerObj The power we&#39;re raising this number to.</span></div>
<div class="line"><a name="l00808"></a><span class="lineno">  808</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00809"></a><span class="lineno">  809</span>&#160;<span class="comment"> * @return The power result.</span></div>
<div class="line"><a name="l00810"></a><span class="lineno">  810</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l00811"></a><span class="lineno"><a class="line" href="class_number_string.html#a9496b41e88a2ccda3960bd12967ca5d6">  811</a></span>&#160;<a class="code" href="class_number_string.html">NumberString</a> *<a class="code" href="class_number_string.html#a9496b41e88a2ccda3960bd12967ca5d6">NumberString::power</a>(<a class="code" href="class_rexx_object.html">RexxObject</a> *powerObj)</div>
<div class="line"><a name="l00812"></a><span class="lineno">  812</span>&#160;{</div>
<div class="line"><a name="l00813"></a><span class="lineno">  813</span>&#160;    <a class="code" href="_method_arguments_8hpp.html#a5e9ddb0b76ebbed493614301e3fc7e2f">requiredArgument</a>(powerObj, <a class="code" href="_method_arguments_8hpp.html#acaa47d77e086aeec2a2ba0162af387b2">ARG_ONE</a>);</div>
<div class="line"><a name="l00814"></a><span class="lineno">  814</span>&#160;    <a class="code" href="rexx_8h.html#aa0199524ada35d939fa20d4625d27d55">wholenumber_t</a> powerValue;</div>
<div class="line"><a name="l00815"></a><span class="lineno">  815</span>&#160;    <a class="code" href="class_protected.html">Protected&lt;BufferClass&gt;</a> outputBuffer;</div>
<div class="line"><a name="l00816"></a><span class="lineno">  816</span>&#160; </div>
<div class="line"><a name="l00817"></a><span class="lineno">  817</span>&#160;    <span class="keywordflow">if</span> (!powerObj-&gt;<a class="code" href="class_rexx_internal_object.html#a7ad036fff399a4bce8c2cf55d86d0072">numberValue</a>(powerValue, <a class="code" href="_numerics_8hpp.html#a771bafb9b89d652ba22051991fbf6845">number_digits</a>()))</div>
<div class="line"><a name="l00818"></a><span class="lineno">  818</span>&#160;    {</div>
<div class="line"><a name="l00819"></a><span class="lineno">  819</span>&#160;        <a class="code" href="_activity_manager_8hpp.html#ab278a90c36b1ea34f0d6a7e280799eaa">reportException</a>(<a class="code" href="_rexx_error_codes_8h.html#ab78d722675e696d37b9b75e363a8b358af9e4d9319a6b2e15363da2e447a316ef">Error_Invalid_whole_number_power</a>, powerObj);</div>
<div class="line"><a name="l00820"></a><span class="lineno">  820</span>&#160;    }</div>
<div class="line"><a name="l00821"></a><span class="lineno">  821</span>&#160; </div>
<div class="line"><a name="l00822"></a><span class="lineno">  822</span>&#160;    <span class="keywordtype">bool</span> negativePower = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00823"></a><span class="lineno">  823</span>&#160; </div>
<div class="line"><a name="l00824"></a><span class="lineno">  824</span>&#160;    <span class="comment">// if the power is negative, we&#39;ll first calculate the power</span></div>
<div class="line"><a name="l00825"></a><span class="lineno">  825</span>&#160;    <span class="comment">// as a positive and take the reciprical at the end.</span></div>
<div class="line"><a name="l00826"></a><span class="lineno">  826</span>&#160;    <span class="keywordflow">if</span> (powerValue &lt; 0)</div>
<div class="line"><a name="l00827"></a><span class="lineno">  827</span>&#160;    {</div>
<div class="line"><a name="l00828"></a><span class="lineno">  828</span>&#160;        negativePower = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00829"></a><span class="lineno">  829</span>&#160;        powerValue = -powerValue;</div>
<div class="line"><a name="l00830"></a><span class="lineno">  830</span>&#160;    }</div>
<div class="line"><a name="l00831"></a><span class="lineno">  831</span>&#160; </div>
<div class="line"><a name="l00832"></a><span class="lineno">  832</span>&#160;    <a class="code" href="rexx_8h.html#aa0199524ada35d939fa20d4625d27d55">wholenumber_t</a> digits = <a class="code" href="_numerics_8hpp.html#a771bafb9b89d652ba22051991fbf6845">number_digits</a>();</div>
<div class="line"><a name="l00833"></a><span class="lineno">  833</span>&#160; </div>
<div class="line"><a name="l00834"></a><span class="lineno">  834</span>&#160;    <span class="comment">// get a potential copy of this, truncated to have at most digits + 1 digits.</span></div>
<div class="line"><a name="l00835"></a><span class="lineno">  835</span>&#160;    <a class="code" href="class_number_string.html">NumberString</a> *left = <a class="code" href="class_number_string.html#a2e47777f71b543de06fcd0eb6e7d87dd">prepareOperatorNumber</a>(digits + 1, digits, <a class="code" href="class_number_string.html#a9587cb55737c538638144a4abec853d5">NOROUND</a>);</div>
<div class="line"><a name="l00836"></a><span class="lineno">  836</span>&#160; </div>
<div class="line"><a name="l00837"></a><span class="lineno">  837</span>&#160;    <span class="comment">// if we are raising zero to a power, there are some special rules in play here.</span></div>
<div class="line"><a name="l00838"></a><span class="lineno">  838</span>&#160;    <span class="keywordflow">if</span> (left-&gt;<a class="code" href="class_number_string.html#a07cf2889441f4a47e7c6e21ebd7ac74f">isZero</a>())</div>
<div class="line"><a name="l00839"></a><span class="lineno">  839</span>&#160;    {</div>
<div class="line"><a name="l00840"></a><span class="lineno">  840</span>&#160;        <span class="comment">// if the power is negative, this is an overflow error</span></div>
<div class="line"><a name="l00841"></a><span class="lineno">  841</span>&#160;        <span class="keywordflow">if</span> (negativePower)</div>
<div class="line"><a name="l00842"></a><span class="lineno">  842</span>&#160;        {</div>
<div class="line"><a name="l00843"></a><span class="lineno">  843</span>&#160;            <a class="code" href="_activity_manager_8hpp.html#ab278a90c36b1ea34f0d6a7e280799eaa">reportException</a>(<a class="code" href="_rexx_error_codes_8h.html#ab78d722675e696d37b9b75e363a8b358a28a9496d5c2c5df236cd68d2594990eb">Error_Overflow_power</a>);</div>
<div class="line"><a name="l00844"></a><span class="lineno">  844</span>&#160;        }</div>
<div class="line"><a name="l00845"></a><span class="lineno">  845</span>&#160;        <span class="comment">// mathematically, 0**0 is undefined.  Rexx defines this as 1</span></div>
<div class="line"><a name="l00846"></a><span class="lineno">  846</span>&#160;        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (powerValue == 0)</div>
<div class="line"><a name="l00847"></a><span class="lineno">  847</span>&#160;        {</div>
<div class="line"><a name="l00848"></a><span class="lineno">  848</span>&#160;            <span class="keywordflow">return</span> (<a class="code" href="class_number_string.html">NumberString</a> *)<a class="code" href="_rexx_core_8h.html#a5ad77b0ce0050d8179296ab07a13c317">IntegerOne</a>;</div>
<div class="line"><a name="l00849"></a><span class="lineno">  849</span>&#160;        }</div>
<div class="line"><a name="l00850"></a><span class="lineno">  850</span>&#160;        <span class="comment">// zero to a non-zero power is zero</span></div>
<div class="line"><a name="l00851"></a><span class="lineno">  851</span>&#160;        <span class="keywordflow">else</span></div>
<div class="line"><a name="l00852"></a><span class="lineno">  852</span>&#160;        {</div>
<div class="line"><a name="l00853"></a><span class="lineno">  853</span>&#160;            <span class="keywordflow">return</span> (<a class="code" href="class_number_string.html">NumberString</a> *)<a class="code" href="_rexx_core_8h.html#add4beaef2223c4d220d99cba73388681">IntegerZero</a>;</div>
<div class="line"><a name="l00854"></a><span class="lineno">  854</span>&#160;        }</div>
<div class="line"><a name="l00855"></a><span class="lineno">  855</span>&#160;    }</div>
<div class="line"><a name="l00856"></a><span class="lineno">  856</span>&#160; </div>
<div class="line"><a name="l00857"></a><span class="lineno">  857</span>&#160;    <span class="comment">// we figure out ahead of time if this will overflow without having to</span></div>
<div class="line"><a name="l00858"></a><span class="lineno">  858</span>&#160;    <span class="comment">// do all of the calculation work.  This tests if we can even start the</span></div>
<div class="line"><a name="l00859"></a><span class="lineno">  859</span>&#160;    <span class="comment">// process because it will required too many bits to calculate.  This is</span></div>
<div class="line"><a name="l00860"></a><span class="lineno">  860</span>&#160;    <span class="comment">// more likely to fail with 32-bit compiles than 64-bit because we have</span></div>
<div class="line"><a name="l00861"></a><span class="lineno">  861</span>&#160;    <span class="comment">// fewer bits to work with.</span></div>
<div class="line"><a name="l00862"></a><span class="lineno">  862</span>&#160;    <span class="keywordflow">if</span> ((<a class="code" href="class_number_string.html#a5949f0ead02874f3ab7aeab430ecf55c">highBits</a>(std::abs(left-&gt;<a class="code" href="class_number_string_base.html#a7ca743677b8bfd7cf13b652bac72e279">numberExponent</a> + left-&gt;<a class="code" href="class_number_string_base.html#a69c6fa53326f051165bbad19f21314d9">digitsCount</a> - 1)) +</div>
<div class="line"><a name="l00863"></a><span class="lineno">  863</span>&#160;         <a class="code" href="class_number_string.html#a5949f0ead02874f3ab7aeab430ecf55c">highBits</a>(std::abs(powerValue)) + 1) &gt; <a class="code" href="class_number_string.html#a488e157dca9a5ea49ccaf094f685f317">SIZEBITS</a> )</div>
<div class="line"><a name="l00864"></a><span class="lineno">  864</span>&#160;    {</div>
<div class="line"><a name="l00865"></a><span class="lineno">  865</span>&#160;        <a class="code" href="_activity_manager_8hpp.html#ab278a90c36b1ea34f0d6a7e280799eaa">reportException</a>(<a class="code" href="_rexx_error_codes_8h.html#ab78d722675e696d37b9b75e363a8b358aff6ea5cd9765908371687a6dd4183a5c">Error_Overflow_overflow</a>, <span class="keyword">this</span>, GlobalNames::POWER, powerObj);</div>
<div class="line"><a name="l00866"></a><span class="lineno">  866</span>&#160;    }</div>
<div class="line"><a name="l00867"></a><span class="lineno">  867</span>&#160; </div>
<div class="line"><a name="l00868"></a><span class="lineno">  868</span>&#160;    <span class="comment">// we can also calculate the exponent magnitude ahead of time and fail this early.</span></div>
<div class="line"><a name="l00869"></a><span class="lineno">  869</span>&#160;    <span class="keywordflow">if</span> (std::abs(left-&gt;<a class="code" href="class_number_string_base.html#a7ca743677b8bfd7cf13b652bac72e279">numberExponent</a> + left-&gt;<a class="code" href="class_number_string_base.html#a69c6fa53326f051165bbad19f21314d9">digitsCount</a> - 1) * powerValue &gt; <a class="code" href="class_numerics.html#a6d71f6a07240bef67416c620a250c631">Numerics::MAX_EXPONENT</a>)</div>
<div class="line"><a name="l00870"></a><span class="lineno">  870</span>&#160;    {</div>
<div class="line"><a name="l00871"></a><span class="lineno">  871</span>&#160;        <a class="code" href="_activity_manager_8hpp.html#ab278a90c36b1ea34f0d6a7e280799eaa">reportException</a>(<a class="code" href="_rexx_error_codes_8h.html#ab78d722675e696d37b9b75e363a8b358aff6ea5cd9765908371687a6dd4183a5c">Error_Overflow_overflow</a>, <span class="keyword">this</span>, GlobalNames::POWER, powerObj);</div>
<div class="line"><a name="l00872"></a><span class="lineno">  872</span>&#160;    }</div>
<div class="line"><a name="l00873"></a><span class="lineno">  873</span>&#160; </div>
<div class="line"><a name="l00874"></a><span class="lineno">  874</span>&#160;    <span class="comment">// anything raised to the 0th power is 1, this is an easy one.</span></div>
<div class="line"><a name="l00875"></a><span class="lineno">  875</span>&#160;    <span class="keywordflow">if</span> (powerValue == 0)</div>
<div class="line"><a name="l00876"></a><span class="lineno">  876</span>&#160;    {</div>
<div class="line"><a name="l00877"></a><span class="lineno">  877</span>&#160;        <span class="keywordflow">return</span> (<a class="code" href="class_number_string.html">NumberString</a> *)<a class="code" href="_rexx_core_8h.html#a5ad77b0ce0050d8179296ab07a13c317">IntegerOne</a>;</div>
<div class="line"><a name="l00878"></a><span class="lineno">  878</span>&#160;    }</div>
<div class="line"><a name="l00879"></a><span class="lineno">  879</span>&#160; </div>
<div class="line"><a name="l00880"></a><span class="lineno">  880</span>&#160;    <span class="comment">// we create a dummy numberstring object and initialize it from the target number</span></div>
<div class="line"><a name="l00881"></a><span class="lineno">  881</span>&#160;    <a class="code" href="class_number_string_base.html">NumberStringBase</a> accumNumber = *left;</div>
<div class="line"><a name="l00882"></a><span class="lineno">  882</span>&#160;    <a class="code" href="class_number_string_base.html">NumberStringBase</a> *accumObj = &amp;accumNumber;</div>
<div class="line"><a name="l00883"></a><span class="lineno">  883</span>&#160; </div>
<div class="line"><a name="l00884"></a><span class="lineno">  884</span>&#160;    <span class="comment">// Find out how many digits are in power value, needed for actual</span></div>
<div class="line"><a name="l00885"></a><span class="lineno">  885</span>&#160;    <span class="comment">//  precision value to be used in the computation.</span></div>
<div class="line"><a name="l00886"></a><span class="lineno">  886</span>&#160;    <a class="code" href="rexx_8h.html#aa0199524ada35d939fa20d4625d27d55">wholenumber_t</a> extra = 0;</div>
<div class="line"><a name="l00887"></a><span class="lineno">  887</span>&#160;    <a class="code" href="rexx_8h.html#aa0199524ada35d939fa20d4625d27d55">wholenumber_t</a> oldNorm = powerValue;</div>
<div class="line"><a name="l00888"></a><span class="lineno">  888</span>&#160; </div>
<div class="line"><a name="l00889"></a><span class="lineno">  889</span>&#160;    <span class="comment">// keep dividing the value by 10 until we hit zero.  That will be the number of</span></div>
<div class="line"><a name="l00890"></a><span class="lineno">  890</span>&#160;    <span class="comment">// powers of 10 we have in the number.</span></div>
<div class="line"><a name="l00891"></a><span class="lineno">  891</span>&#160;    <span class="keywordflow">for</span> (; oldNorm != 0; extra++)</div>
<div class="line"><a name="l00892"></a><span class="lineno">  892</span>&#160;    {</div>
<div class="line"><a name="l00893"></a><span class="lineno">  893</span>&#160;        oldNorm /= 10;</div>
<div class="line"><a name="l00894"></a><span class="lineno">  894</span>&#160;    }</div>
<div class="line"><a name="l00895"></a><span class="lineno">  895</span>&#160; </div>
<div class="line"><a name="l00896"></a><span class="lineno">  896</span>&#160;    <span class="comment">// add these extra digits into the working digits setting</span></div>
<div class="line"><a name="l00897"></a><span class="lineno">  897</span>&#160;    digits += (extra + 1);</div>
<div class="line"><a name="l00898"></a><span class="lineno">  898</span>&#160;    <span class="comment">// and this is the size of the buffers we need for our accumulators</span></div>
<div class="line"><a name="l00899"></a><span class="lineno">  899</span>&#160;    <a class="code" href="rexx_8h.html#aa0199524ada35d939fa20d4625d27d55">wholenumber_t</a> accumLen = (2 * (digits + 1)) + 1;</div>
<div class="line"><a name="l00900"></a><span class="lineno">  900</span>&#160; </div>
<div class="line"><a name="l00901"></a><span class="lineno">  901</span>&#160;    <span class="comment">// get a single buffer object with space for two values of this size</span></div>
<div class="line"><a name="l00902"></a><span class="lineno">  902</span>&#160;    outputBuffer = <a class="code" href="_buffer_class_8hpp.html#a434bb1dd35461c9cf3f44e16a8d60c47">new_buffer</a>(accumLen * 2);</div>
<div class="line"><a name="l00903"></a><span class="lineno">  903</span>&#160;    <span class="keywordtype">char</span> *outPtr = outputBuffer-&gt;getData();</div>
<div class="line"><a name="l00904"></a><span class="lineno">  904</span>&#160;    <span class="keywordtype">char</span> *accumBuffer = outPtr + accumLen;</div>
<div class="line"><a name="l00905"></a><span class="lineno">  905</span>&#160;    <span class="keywordtype">char</span> *accumPtr = accumBuffer;</div>
<div class="line"><a name="l00906"></a><span class="lineno">  906</span>&#160; </div>
<div class="line"><a name="l00907"></a><span class="lineno">  907</span>&#160;    <span class="comment">// copy the the initial number data into the buffer</span></div>
<div class="line"><a name="l00908"></a><span class="lineno">  908</span>&#160;    memcpy(accumPtr, left-&gt;<a class="code" href="class_number_string.html#a909e26debed7dc0853fb78a2eb12f34b">numberDigits</a>, left-&gt;<a class="code" href="class_number_string_base.html#a69c6fa53326f051165bbad19f21314d9">digitsCount</a>);</div>
<div class="line"><a name="l00909"></a><span class="lineno">  909</span>&#160; </div>
<div class="line"><a name="l00910"></a><span class="lineno">  910</span>&#160;    <span class="comment">// the power operation is defined to use bitwise reduction</span></div>
<div class="line"><a name="l00911"></a><span class="lineno">  911</span>&#160;    <span class="keywordtype">size_t</span> numBits = <a class="code" href="class_number_string.html#a488e157dca9a5ea49ccaf094f685f317">SIZEBITS</a>;</div>
<div class="line"><a name="l00912"></a><span class="lineno">  912</span>&#160; </div>
<div class="line"><a name="l00913"></a><span class="lineno">  913</span>&#160;    <span class="comment">// get the first non-zero bit shifted to the top of the number</span></div>
<div class="line"><a name="l00914"></a><span class="lineno">  914</span>&#160;    <span class="comment">// this will both position us to start the process and</span></div>
<div class="line"><a name="l00915"></a><span class="lineno">  915</span>&#160;    <span class="comment">// also give us the a count of how many bits we&#39;re working with.</span></div>
<div class="line"><a name="l00916"></a><span class="lineno">  916</span>&#160;    <span class="keywordflow">while</span> (!((<span class="keywordtype">size_t</span>)powerValue &amp; <a class="code" href="class_number_string.html#a24817b399e4c27b805d3b80194fb360d">HIBIT</a>))</div>
<div class="line"><a name="l00917"></a><span class="lineno">  917</span>&#160;    {</div>
<div class="line"><a name="l00918"></a><span class="lineno">  918</span>&#160;        powerValue &lt;&lt;= 1;</div>
<div class="line"><a name="l00919"></a><span class="lineno">  919</span>&#160;        numBits--;</div>
<div class="line"><a name="l00920"></a><span class="lineno">  920</span>&#160;    }</div>
<div class="line"><a name="l00921"></a><span class="lineno">  921</span>&#160; </div>
<div class="line"><a name="l00922"></a><span class="lineno">  922</span>&#160;    <span class="comment">// turn off this 1st 1-bit, already take care of by</span></div>
<div class="line"><a name="l00923"></a><span class="lineno">  923</span>&#160;    <span class="comment">// the starting accumulator (essentially, a multiply by 1)</span></div>
<div class="line"><a name="l00924"></a><span class="lineno">  924</span>&#160;    powerValue = (<a class="code" href="rexx_8h.html#aa0199524ada35d939fa20d4625d27d55">wholenumber_t</a>) ((<span class="keywordtype">size_t</span>)powerValue &amp; <a class="code" href="class_number_string.html#aeeb657d4381a64155fb9265b3544ac7d">LOWBITS</a>);</div>
<div class="line"><a name="l00925"></a><span class="lineno">  925</span>&#160; </div>
<div class="line"><a name="l00926"></a><span class="lineno">  926</span>&#160;    <span class="comment">// ok, we know how many passes we need to make on this number.</span></div>
<div class="line"><a name="l00927"></a><span class="lineno">  927</span>&#160;    <span class="keywordflow">while</span> (numBits--)</div>
<div class="line"><a name="l00928"></a><span class="lineno">  928</span>&#160;    {</div>
<div class="line"><a name="l00929"></a><span class="lineno">  929</span>&#160;        <span class="comment">// if this bit is on, then we need to multiply the</span></div>
<div class="line"><a name="l00930"></a><span class="lineno">  930</span>&#160;        <span class="comment">// number by the accumulator.</span></div>
<div class="line"><a name="l00931"></a><span class="lineno">  931</span>&#160;        <span class="keywordflow">if</span> ((<span class="keywordtype">size_t</span>) powerValue &amp; <a class="code" href="class_number_string.html#a24817b399e4c27b805d3b80194fb360d">HIBIT</a>)</div>
<div class="line"><a name="l00932"></a><span class="lineno">  932</span>&#160;        {</div>
<div class="line"><a name="l00933"></a><span class="lineno">  933</span>&#160;            <span class="comment">// do the multiply and get the new high position back</span></div>
<div class="line"><a name="l00934"></a><span class="lineno">  934</span>&#160;            accumPtr = <a class="code" href="class_number_string.html#abb5f93457f698afe9585e838aed1d5b1">multiplyPower</a>(accumPtr, accumObj, left-&gt;<a class="code" href="class_number_string.html#a909e26debed7dc0853fb78a2eb12f34b">numberDigits</a>, left, outPtr, accumLen, digits);</div>
<div class="line"><a name="l00935"></a><span class="lineno">  935</span>&#160;            <span class="comment">// We now call AdjustNumber to make sure we stay within the required</span></div>
<div class="line"><a name="l00936"></a><span class="lineno">  936</span>&#160;            <span class="comment">// precision and move the Accum data back to Accum.</span></div>
<div class="line"><a name="l00937"></a><span class="lineno">  937</span>&#160;            accumPtr = accumObj-&gt;<a class="code" href="class_number_string_base.html#aad5ee522bcbc577d0827687fbfefa868">adjustNumber</a>(accumPtr, accumBuffer, accumLen, digits);</div>
<div class="line"><a name="l00938"></a><span class="lineno">  938</span>&#160;        }</div>
<div class="line"><a name="l00939"></a><span class="lineno">  939</span>&#160;        <span class="comment">// if we will be making another pass through this loop, we need</span></div>
<div class="line"><a name="l00940"></a><span class="lineno">  940</span>&#160;        <span class="comment">// to square the accumulator</span></div>
<div class="line"><a name="l00941"></a><span class="lineno">  941</span>&#160;        <span class="keywordflow">if</span> (numBits &gt; 0)</div>
<div class="line"><a name="l00942"></a><span class="lineno">  942</span>&#160;        {</div>
<div class="line"><a name="l00943"></a><span class="lineno">  943</span>&#160;            accumPtr = <a class="code" href="class_number_string.html#abb5f93457f698afe9585e838aed1d5b1">multiplyPower</a>(accumPtr, accumObj, accumPtr, accumObj,  outPtr, accumLen, digits);</div>
<div class="line"><a name="l00944"></a><span class="lineno">  944</span>&#160;            <span class="comment">// and adjust the result again</span></div>
<div class="line"><a name="l00945"></a><span class="lineno">  945</span>&#160;            accumPtr = accumObj-&gt;<a class="code" href="class_number_string_base.html#aad5ee522bcbc577d0827687fbfefa868">adjustNumber</a>(accumPtr, accumBuffer, accumLen, digits);</div>
<div class="line"><a name="l00946"></a><span class="lineno">  946</span>&#160;        }</div>
<div class="line"><a name="l00947"></a><span class="lineno">  947</span>&#160;        <span class="comment">// and shift to the next bit position</span></div>
<div class="line"><a name="l00948"></a><span class="lineno">  948</span>&#160;        powerValue &lt;&lt;= 1;</div>
<div class="line"><a name="l00949"></a><span class="lineno">  949</span>&#160;    }</div>
<div class="line"><a name="l00950"></a><span class="lineno">  950</span>&#160; </div>
<div class="line"><a name="l00951"></a><span class="lineno">  951</span>&#160;    <span class="comment">// if this was actually a negative power, take the reciprical now</span></div>
<div class="line"><a name="l00952"></a><span class="lineno">  952</span>&#160;    <span class="keywordflow">if</span> (negativePower)</div>
<div class="line"><a name="l00953"></a><span class="lineno">  953</span>&#160;    {</div>
<div class="line"><a name="l00954"></a><span class="lineno">  954</span>&#160;        accumPtr = <a class="code" href="class_number_string.html#a887161f827212d27414325c04fc799c6">dividePower</a>(accumPtr, accumObj, accumBuffer, digits);</div>
<div class="line"><a name="l00955"></a><span class="lineno">  955</span>&#160;    }</div>
<div class="line"><a name="l00956"></a><span class="lineno">  956</span>&#160; </div>
<div class="line"><a name="l00957"></a><span class="lineno">  957</span>&#160;    <span class="comment">// reset the digits to the original and remove all leading zeros</span></div>
<div class="line"><a name="l00958"></a><span class="lineno">  958</span>&#160;    digits -= (extra +1);               <span class="comment">// reset digits setting to original;</span></div>
<div class="line"><a name="l00959"></a><span class="lineno">  959</span>&#160;    accumPtr = accumObj-&gt;<a class="code" href="class_number_string_base.html#a4f77dda8d9e0d98f25cc89cb478b08b2">stripLeadingZeros</a>(accumPtr);</div>
<div class="line"><a name="l00960"></a><span class="lineno">  960</span>&#160; </div>
<div class="line"><a name="l00961"></a><span class="lineno">  961</span>&#160;    <span class="comment">// Is result bigger than digits?</span></div>
<div class="line"><a name="l00962"></a><span class="lineno">  962</span>&#160;    <span class="keywordflow">if</span> (accumObj-&gt;<a class="code" href="class_number_string_base.html#a69c6fa53326f051165bbad19f21314d9">digitsCount</a> &gt; digits)</div>
<div class="line"><a name="l00963"></a><span class="lineno">  963</span>&#160;    {</div>
<div class="line"><a name="l00964"></a><span class="lineno">  964</span>&#160;        <span class="comment">// adjust to the shorter length and round if needed</span></div>
<div class="line"><a name="l00965"></a><span class="lineno">  965</span>&#160;        accumObj-&gt;<a class="code" href="class_number_string_base.html#a7ca743677b8bfd7cf13b652bac72e279">numberExponent</a> += (accumObj-&gt;<a class="code" href="class_number_string_base.html#a69c6fa53326f051165bbad19f21314d9">digitsCount</a> - digits);</div>
<div class="line"><a name="l00966"></a><span class="lineno">  966</span>&#160;        accumObj-&gt;<a class="code" href="class_number_string_base.html#a69c6fa53326f051165bbad19f21314d9">digitsCount</a> = digits;</div>
<div class="line"><a name="l00967"></a><span class="lineno">  967</span>&#160;        accumObj-&gt;<a class="code" href="class_number_string_base.html#a58a184bbcc6ffbaf9999c55a2a05f3fa">mathRound</a>(accumPtr);</div>
<div class="line"><a name="l00968"></a><span class="lineno">  968</span>&#160;    }</div>
<div class="line"><a name="l00969"></a><span class="lineno">  969</span>&#160; </div>
<div class="line"><a name="l00970"></a><span class="lineno">  970</span>&#160;    <span class="comment">// we now remove any trailing zeros in the result (same rules as</span></div>
<div class="line"><a name="l00971"></a><span class="lineno">  971</span>&#160;    <span class="comment">// division)</span></div>
<div class="line"><a name="l00972"></a><span class="lineno">  972</span>&#160;    <span class="keywordtype">char</span> *tempPtr = accumPtr + accumObj-&gt;<a class="code" href="class_number_string_base.html#a69c6fa53326f051165bbad19f21314d9">digitsCount</a> - 1;</div>
<div class="line"><a name="l00973"></a><span class="lineno">  973</span>&#160;    <span class="comment">/* While there are trailing zeros    */</span></div>
<div class="line"><a name="l00974"></a><span class="lineno">  974</span>&#160;    <span class="keywordflow">while</span> (*tempPtr == 0 &amp;&amp; accumObj-&gt;<a class="code" href="class_number_string_base.html#a69c6fa53326f051165bbad19f21314d9">digitsCount</a> &gt; 0)</div>
<div class="line"><a name="l00975"></a><span class="lineno">  975</span>&#160;    {</div>
<div class="line"><a name="l00976"></a><span class="lineno">  976</span>&#160;        tempPtr--;</div>
<div class="line"><a name="l00977"></a><span class="lineno">  977</span>&#160;        accumObj-&gt;<a class="code" href="class_number_string_base.html#a69c6fa53326f051165bbad19f21314d9">digitsCount</a>--;</div>
<div class="line"><a name="l00978"></a><span class="lineno">  978</span>&#160;        accumObj-&gt;<a class="code" href="class_number_string_base.html#a7ca743677b8bfd7cf13b652bac72e279">numberExponent</a>++;</div>
<div class="line"><a name="l00979"></a><span class="lineno">  979</span>&#160;    }</div>
<div class="line"><a name="l00980"></a><span class="lineno">  980</span>&#160; </div>
<div class="line"><a name="l00981"></a><span class="lineno">  981</span>&#160;    <span class="comment">// finally build a result object.</span></div>
<div class="line"><a name="l00982"></a><span class="lineno">  982</span>&#160;    <a class="code" href="class_number_string.html">NumberString</a> *result = <span class="keyword">new</span> (accumObj-&gt;<a class="code" href="class_number_string_base.html#a69c6fa53326f051165bbad19f21314d9">digitsCount</a>) <a class="code" href="class_number_string.html">NumberString</a> (accumObj-&gt;<a class="code" href="class_number_string_base.html#a69c6fa53326f051165bbad19f21314d9">digitsCount</a>);</div>
<div class="line"><a name="l00983"></a><span class="lineno">  983</span>&#160; </div>
<div class="line"><a name="l00984"></a><span class="lineno">  984</span>&#160;    result-&gt;<a class="code" href="class_number_string_base.html#a89de4786d9655048c6f2ebe870ada73a">numberSign</a> = accumObj-&gt;<a class="code" href="class_number_string_base.html#a89de4786d9655048c6f2ebe870ada73a">numberSign</a>;</div>
<div class="line"><a name="l00985"></a><span class="lineno">  985</span>&#160;    result-&gt;<a class="code" href="class_number_string_base.html#a7ca743677b8bfd7cf13b652bac72e279">numberExponent</a>  = accumObj-&gt;<a class="code" href="class_number_string_base.html#a7ca743677b8bfd7cf13b652bac72e279">numberExponent</a>;</div>
<div class="line"><a name="l00986"></a><span class="lineno">  986</span>&#160;    result-&gt;<a class="code" href="class_number_string_base.html#a69c6fa53326f051165bbad19f21314d9">digitsCount</a> = accumObj-&gt;<a class="code" href="class_number_string_base.html#a69c6fa53326f051165bbad19f21314d9">digitsCount</a>;</div>
<div class="line"><a name="l00987"></a><span class="lineno">  987</span>&#160;    memcpy(result-&gt;<a class="code" href="class_number_string.html#a909e26debed7dc0853fb78a2eb12f34b">numberDigits</a>, accumPtr, result-&gt;<a class="code" href="class_number_string_base.html#a69c6fa53326f051165bbad19f21314d9">digitsCount</a>);</div>
<div class="line"><a name="l00988"></a><span class="lineno">  988</span>&#160;    <span class="keywordflow">return</span> result;</div>
<div class="line"><a name="l00989"></a><span class="lineno">  989</span>&#160;}</div>
<div class="line"><a name="l00990"></a><span class="lineno">  990</span>&#160; </div>
<div class="line"><a name="l00991"></a><span class="lineno">  991</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00992"></a><span class="lineno">  992</span>&#160;<span class="comment">/**</span></div>
<div class="line"><a name="l00993"></a><span class="lineno">  993</span>&#160;<span class="comment"> * Multiply numbers for the power operation</span></div>
<div class="line"><a name="l00994"></a><span class="lineno">  994</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00995"></a><span class="lineno">  995</span>&#160;<span class="comment"> * @param leftPtr  The left number data</span></div>
<div class="line"><a name="l00996"></a><span class="lineno">  996</span>&#160;<span class="comment"> * @param left     The left number numberstring data</span></div>
<div class="line"><a name="l00997"></a><span class="lineno">  997</span>&#160;<span class="comment"> * @param rightPtr The right pointer data</span></div>
<div class="line"><a name="l00998"></a><span class="lineno">  998</span>&#160;<span class="comment"> * @param right    The right number numberstring info.</span></div>
<div class="line"><a name="l00999"></a><span class="lineno">  999</span>&#160;<span class="comment"> * @param outPtr   The ouput pointer.</span></div>
<div class="line"><a name="l01000"></a><span class="lineno"> 1000</span>&#160;<span class="comment"> * @param outLen   The output buffer length</span></div>
<div class="line"><a name="l01001"></a><span class="lineno"> 1001</span>&#160;<span class="comment"> * @param digits   the current digits setting</span></div>
<div class="line"><a name="l01002"></a><span class="lineno"> 1002</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l01003"></a><span class="lineno"> 1003</span>&#160;<span class="comment"> * @return The pointer to the new start of the accumulator data.</span></div>
<div class="line"><a name="l01004"></a><span class="lineno"> 1004</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l01005"></a><span class="lineno"><a class="line" href="class_number_string.html#abb5f93457f698afe9585e838aed1d5b1"> 1005</a></span>&#160;<span class="keywordtype">char</span> *<a class="code" href="class_number_string.html#abb5f93457f698afe9585e838aed1d5b1">NumberString::multiplyPower</a>(<span class="keyword">const</span> <span class="keywordtype">char</span> *leftPtr, <a class="code" href="class_number_string_base.html">NumberStringBase</a> *left,</div>
<div class="line"><a name="l01006"></a><span class="lineno"> 1006</span>&#160;                     <span class="keyword">const</span> <span class="keywordtype">char</span> *rightPtr, <a class="code" href="class_number_string_base.html">NumberStringBase</a> *right,</div>
<div class="line"><a name="l01007"></a><span class="lineno"> 1007</span>&#160;                     <span class="keywordtype">char</span> *outPtr, <a class="code" href="rexx_8h.html#aa0199524ada35d939fa20d4625d27d55">wholenumber_t</a> outLen, <a class="code" href="rexx_8h.html#aa0199524ada35d939fa20d4625d27d55">wholenumber_t</a> digits)</div>
<div class="line"><a name="l01008"></a><span class="lineno"> 1008</span>&#160;{</div>
<div class="line"><a name="l01009"></a><span class="lineno"> 1009</span>&#160;    <span class="comment">// clear the output buffer of any previous results</span></div>
<div class="line"><a name="l01010"></a><span class="lineno"> 1010</span>&#160;    memset(outPtr, <span class="charliteral">&#39;\0&#39;</span>, outLen);</div>
<div class="line"><a name="l01011"></a><span class="lineno"> 1011</span>&#160; </div>
<div class="line"><a name="l01012"></a><span class="lineno"> 1012</span>&#160;    <a class="code" href="rexx_8h.html#aa0199524ada35d939fa20d4625d27d55">wholenumber_t</a> accumLen = 0;</div>
<div class="line"><a name="l01013"></a><span class="lineno"> 1013</span>&#160;    <span class="keywordtype">char</span> *accumPtr = NULL;</div>
<div class="line"><a name="l01014"></a><span class="lineno"> 1014</span>&#160;    <span class="comment">// build the result from the end of the output location.</span></div>
<div class="line"><a name="l01015"></a><span class="lineno"> 1015</span>&#160;    <span class="keywordtype">char</span> *resultPtr = outPtr + outLen - 1;</div>
<div class="line"><a name="l01016"></a><span class="lineno"> 1016</span>&#160;    <span class="comment">// we iterate through the right number</span></div>
<div class="line"><a name="l01017"></a><span class="lineno"> 1017</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">char</span> *current = rightPtr + right-&gt;<a class="code" href="class_number_string_base.html#a69c6fa53326f051165bbad19f21314d9">digitsCount</a>;</div>
<div class="line"><a name="l01018"></a><span class="lineno"> 1018</span>&#160; </div>
<div class="line"><a name="l01019"></a><span class="lineno"> 1019</span>&#160;    <span class="comment">// process all of the multiplier digits</span></div>
<div class="line"><a name="l01020"></a><span class="lineno"> 1020</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> i = right-&gt;<a class="code" href="class_number_string_base.html#a69c6fa53326f051165bbad19f21314d9">digitsCount</a>; i ; i-- )</div>
<div class="line"><a name="l01021"></a><span class="lineno"> 1021</span>&#160;    {</div>
<div class="line"><a name="l01022"></a><span class="lineno"> 1022</span>&#160;        current--;</div>
<div class="line"><a name="l01023"></a><span class="lineno"> 1023</span>&#160;        <span class="keywordtype">int</span> multChar = *current;</div>
<div class="line"><a name="l01024"></a><span class="lineno"> 1024</span>&#160;        <span class="comment">// only process non-zero digits</span></div>
<div class="line"><a name="l01025"></a><span class="lineno"> 1025</span>&#160;        <span class="keywordflow">if</span> (multChar != 0)</div>
<div class="line"><a name="l01026"></a><span class="lineno"> 1026</span>&#160;        {</div>
<div class="line"><a name="l01027"></a><span class="lineno"> 1027</span>&#160;            <span class="comment">// add in the left operand multiplied by the digit</span></div>
<div class="line"><a name="l01028"></a><span class="lineno"> 1028</span>&#160;            accumPtr = <a class="code" href="class_number_string.html#ab149da0e8328a56475058f3e24d5b3e8">addMultiplier</a>(leftPtr, left-&gt;<a class="code" href="class_number_string_base.html#a69c6fa53326f051165bbad19f21314d9">digitsCount</a>, resultPtr,  multChar);</div>
<div class="line"><a name="l01029"></a><span class="lineno"> 1029</span>&#160;        }</div>
<div class="line"><a name="l01030"></a><span class="lineno"> 1030</span>&#160;        <span class="comment">// back up the result pointer for the next digit</span></div>
<div class="line"><a name="l01031"></a><span class="lineno"> 1031</span>&#160;        resultPtr--;</div>
<div class="line"><a name="l01032"></a><span class="lineno"> 1032</span>&#160;    }</div>
<div class="line"><a name="l01033"></a><span class="lineno"> 1033</span>&#160;    <span class="comment">// get our new length</span></div>
<div class="line"><a name="l01034"></a><span class="lineno"> 1034</span>&#160;    accumLen = (++resultPtr - accumPtr) + right-&gt;<a class="code" href="class_number_string_base.html#a69c6fa53326f051165bbad19f21314d9">digitsCount</a>;</div>
<div class="line"><a name="l01035"></a><span class="lineno"> 1035</span>&#160; </div>
<div class="line"><a name="l01036"></a><span class="lineno"> 1036</span>&#160;    <span class="comment">// we might need to truncate to our digits setting</span></div>
<div class="line"><a name="l01037"></a><span class="lineno"> 1037</span>&#160;    <a class="code" href="rexx_8h.html#aa0199524ada35d939fa20d4625d27d55">wholenumber_t</a> extraDigits = accumLen &gt; digits ? accumLen - digits : 0;</div>
<div class="line"><a name="l01038"></a><span class="lineno"> 1038</span>&#160; </div>
<div class="line"><a name="l01039"></a><span class="lineno"> 1039</span>&#160; </div>
<div class="line"><a name="l01040"></a><span class="lineno"> 1040</span>&#160;    left-&gt;<a class="code" href="class_number_string_base.html#a7ca743677b8bfd7cf13b652bac72e279">numberExponent</a> += (right-&gt;<a class="code" href="class_number_string_base.html#a7ca743677b8bfd7cf13b652bac72e279">numberExponent</a> + extraDigits);</div>
<div class="line"><a name="l01041"></a><span class="lineno"> 1041</span>&#160;    <span class="comment">// we recompute the sign every time we multiply</span></div>
<div class="line"><a name="l01042"></a><span class="lineno"> 1042</span>&#160;    left-&gt;<a class="code" href="class_number_string_base.html#a89de4786d9655048c6f2ebe870ada73a">numberSign</a> *= right-&gt;<a class="code" href="class_number_string_base.html#a89de4786d9655048c6f2ebe870ada73a">numberSign</a>;</div>
<div class="line"><a name="l01043"></a><span class="lineno"> 1043</span>&#160;    <span class="comment">// we still use the full length in the accumulator</span></div>
<div class="line"><a name="l01044"></a><span class="lineno"> 1044</span>&#160;    left-&gt;<a class="code" href="class_number_string_base.html#a69c6fa53326f051165bbad19f21314d9">digitsCount</a> = accumLen;</div>
<div class="line"><a name="l01045"></a><span class="lineno"> 1045</span>&#160;    <span class="keywordflow">return</span> accumPtr;</div>
<div class="line"><a name="l01046"></a><span class="lineno"> 1046</span>&#160;}</div>
<div class="line"><a name="l01047"></a><span class="lineno"> 1047</span>&#160; </div>
<div class="line"><a name="l01048"></a><span class="lineno"> 1048</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l01049"></a><span class="lineno"> 1049</span>&#160;<span class="comment">/**</span></div>
<div class="line"><a name="l01050"></a><span class="lineno"> 1050</span>&#160;<span class="comment"> * Invert number from the power operation when a negative power is used.</span></div>
<div class="line"><a name="l01051"></a><span class="lineno"> 1051</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l01052"></a><span class="lineno"> 1052</span>&#160;<span class="comment"> * @param accumPtr The accumulator number.</span></div>
<div class="line"><a name="l01053"></a><span class="lineno"> 1053</span>&#160;<span class="comment"> * @param accum    The accumulator number</span></div>
<div class="line"><a name="l01054"></a><span class="lineno"> 1054</span>&#160;<span class="comment"> * @param output   The output buffer location.</span></div>
<div class="line"><a name="l01055"></a><span class="lineno"> 1055</span>&#160;<span class="comment"> * @param digits   The digits count we&#39;re operating under.</span></div>
<div class="line"><a name="l01056"></a><span class="lineno"> 1056</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l01057"></a><span class="lineno"> 1057</span>&#160;<span class="comment"> * @return</span></div>
<div class="line"><a name="l01058"></a><span class="lineno"> 1058</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l01059"></a><span class="lineno"><a class="line" href="class_number_string.html#a887161f827212d27414325c04fc799c6"> 1059</a></span>&#160;<span class="keywordtype">char</span> *<a class="code" href="class_number_string.html#a887161f827212d27414325c04fc799c6">NumberString::dividePower</a>(<span class="keyword">const</span> <span class="keywordtype">char</span> *accumPtr, <a class="code" href="class_number_string_base.html">NumberStringBase</a> *accum, <span class="keywordtype">char</span> *output, <a class="code" href="rexx_8h.html#aa0199524ada35d939fa20d4625d27d55">wholenumber_t</a> digits)</div>
<div class="line"><a name="l01060"></a><span class="lineno"> 1060</span>&#160;{</div>
<div class="line"><a name="l01061"></a><span class="lineno"> 1061</span>&#160;    <span class="comment">// NOTE: this routine is very similiar to the Division</span></div>
<div class="line"><a name="l01062"></a><span class="lineno"> 1062</span>&#160;    <span class="comment">//   routine, these we kept as seperate routines since there</span></div>
<div class="line"><a name="l01063"></a><span class="lineno"> 1063</span>&#160;    <span class="comment">//   are enough subtile differences between the operations</span></div>
<div class="line"><a name="l01064"></a><span class="lineno"> 1064</span>&#160;    <span class="comment">//   that combining them would make an already complex</span></div>
<div class="line"><a name="l01065"></a><span class="lineno"> 1065</span>&#160;    <span class="comment">//   routine even more so.  When fixing/updating/adding to</span></div>
<div class="line"><a name="l01066"></a><span class="lineno"> 1066</span>&#160;    <span class="comment">//   this routin also check Division for similiar updates</span></div>
<div class="line"><a name="l01067"></a><span class="lineno"> 1067</span>&#160; </div>
<div class="line"><a name="l01068"></a><span class="lineno"> 1068</span>&#160;    <a class="code" href="rexx_8h.html#aa0199524ada35d939fa20d4625d27d55">wholenumber_t</a> totalDigits = ((digits + 1) * 2) + 1;</div>
<div class="line"><a name="l01069"></a><span class="lineno"> 1069</span>&#160;    <a class="code" href="class_protected.html">Protected&lt;BufferClass&gt;</a> outputBuffer;</div>
<div class="line"><a name="l01070"></a><span class="lineno"> 1070</span>&#160; </div>
<div class="line"><a name="l01071"></a><span class="lineno"> 1071</span>&#160;    <span class="comment">// set up temporary buffers for the calculations</span></div>
<div class="line"><a name="l01072"></a><span class="lineno"> 1072</span>&#160;    <a class="code" href="class_number_string_base.html">NumberStringBase</a> leftBuffer;</div>
<div class="line"><a name="l01073"></a><span class="lineno"> 1073</span>&#160;    outputBuffer = <a class="code" href="_buffer_class_8hpp.html#a434bb1dd35461c9cf3f44e16a8d60c47">new_buffer</a>(totalDigits * 2);</div>
<div class="line"><a name="l01074"></a><span class="lineno"> 1074</span>&#160;    <span class="keywordtype">char</span> *leftPtr = outputBuffer-&gt;getData();</div>
<div class="line"><a name="l01075"></a><span class="lineno"> 1075</span>&#160;    <span class="keywordtype">char</span> *result = leftPtr + totalDigits;</div>
<div class="line"><a name="l01076"></a><span class="lineno"> 1076</span>&#160; </div>
<div class="line"><a name="l01077"></a><span class="lineno"> 1077</span>&#160;    <a class="code" href="class_number_string_base.html">NumberStringBase</a> *left = &amp;leftBuffer;</div>
<div class="line"><a name="l01078"></a><span class="lineno"> 1078</span>&#160; </div>
<div class="line"><a name="l01079"></a><span class="lineno"> 1079</span>&#160;    <span class="comment">// length of left starts same as the accumulator</span></div>
<div class="line"><a name="l01080"></a><span class="lineno"> 1080</span>&#160;    left-&gt;<a class="code" href="class_number_string_base.html#a69c6fa53326f051165bbad19f21314d9">digitsCount</a> = accum-&gt;<a class="code" href="class_number_string_base.html#a69c6fa53326f051165bbad19f21314d9">digitsCount</a>;</div>
<div class="line"><a name="l01081"></a><span class="lineno"> 1081</span>&#160;    <span class="comment">// no exponent to start with, but we start with a 1, followed by a lot of zeros.</span></div>
<div class="line"><a name="l01082"></a><span class="lineno"> 1082</span>&#160;    left-&gt;<a class="code" href="class_number_string_base.html#a7ca743677b8bfd7cf13b652bac72e279">numberExponent</a> = 0;</div>
<div class="line"><a name="l01083"></a><span class="lineno"> 1083</span>&#160;    *leftPtr = 1;</div>
<div class="line"><a name="l01084"></a><span class="lineno"> 1084</span>&#160;    memset(leftPtr + 1, <span class="charliteral">&#39;\0&#39;</span>, totalDigits - 1);</div>
<div class="line"><a name="l01085"></a><span class="lineno"> 1085</span>&#160; </div>
<div class="line"><a name="l01086"></a><span class="lineno"> 1086</span>&#160;    <span class="comment">// this is our expected result exponent</span></div>
<div class="line"><a name="l01087"></a><span class="lineno"> 1087</span>&#160;    <a class="code" href="rexx_8h.html#aa0199524ada35d939fa20d4625d27d55">wholenumber_t</a> calcExp = -accum-&gt;<a class="code" href="class_number_string_base.html#a7ca743677b8bfd7cf13b652bac72e279">numberExponent</a> - accum-&gt;<a class="code" href="class_number_string_base.html#a69c6fa53326f051165bbad19f21314d9">digitsCount</a> + 1;</div>
<div class="line"><a name="l01088"></a><span class="lineno"> 1088</span>&#160; </div>
<div class="line"><a name="l01089"></a><span class="lineno"> 1089</span>&#160;    <span class="keywordtype">char</span> *leftNumber = leftPtr;</div>
<div class="line"><a name="l01090"></a><span class="lineno"> 1090</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">char</span> *rightNumber = accumPtr;</div>
<div class="line"><a name="l01091"></a><span class="lineno"> 1091</span>&#160; </div>
<div class="line"><a name="l01092"></a><span class="lineno"> 1092</span>&#160;    <span class="comment">// When generate a best guess digits for result we will look</span></div>
<div class="line"><a name="l01093"></a><span class="lineno"> 1093</span>&#160;    <span class="comment">// use the 1st 2 digits of the dividend (if there are 2)</span></div>
<div class="line"><a name="l01094"></a><span class="lineno"> 1094</span>&#160;    <span class="comment">// we then add 1 to this divChar to ensure than when we guess</span></div>
<div class="line"><a name="l01095"></a><span class="lineno"> 1095</span>&#160;    <span class="comment">// we either guess correctly or under guess.</span></div>
<div class="line"><a name="l01096"></a><span class="lineno"> 1096</span>&#160;    <span class="comment">//           _______________</span></div>
<div class="line"><a name="l01097"></a><span class="lineno"> 1097</span>&#160;    <span class="comment">//  aabbbbbb ) xxyyyyyyyy</span></div>
<div class="line"><a name="l01098"></a><span class="lineno"> 1098</span>&#160;    <span class="comment">//</span></div>
<div class="line"><a name="l01099"></a><span class="lineno"> 1099</span>&#160;    <span class="comment">//     DivChar = aa + 1</span></div>
<div class="line"><a name="l01100"></a><span class="lineno"> 1100</span>&#160; </div>
<div class="line"><a name="l01101"></a><span class="lineno"> 1101</span>&#160;    <span class="keywordtype">int</span> divChar = *rightNumber * 10;</div>
<div class="line"><a name="l01102"></a><span class="lineno"> 1102</span>&#160;    <span class="keywordflow">if</span> (accum-&gt;<a class="code" href="class_number_string_base.html#a69c6fa53326f051165bbad19f21314d9">digitsCount</a> &gt; 1)</div>
<div class="line"><a name="l01103"></a><span class="lineno"> 1103</span>&#160;    {</div>
<div class="line"><a name="l01104"></a><span class="lineno"> 1104</span>&#160;        divChar += *(rightNumber + 1);</div>
<div class="line"><a name="l01105"></a><span class="lineno"> 1105</span>&#160;    }</div>
<div class="line"><a name="l01106"></a><span class="lineno"> 1106</span>&#160;    <span class="comment">// add 1 to this pairing so that we will err on the high side.</span></div>
<div class="line"><a name="l01107"></a><span class="lineno"> 1107</span>&#160;    divChar++;</div>
<div class="line"><a name="l01108"></a><span class="lineno"> 1108</span>&#160; </div>
<div class="line"><a name="l01109"></a><span class="lineno"> 1109</span>&#160;    <a class="code" href="rexx_8h.html#aa0199524ada35d939fa20d4625d27d55">wholenumber_t</a> resultDigits = 0;</div>
<div class="line"><a name="l01110"></a><span class="lineno"> 1110</span>&#160;    <span class="keywordtype">int</span> thisDigit = 0;</div>
<div class="line"><a name="l01111"></a><span class="lineno"> 1111</span>&#160; </div>
<div class="line"><a name="l01112"></a><span class="lineno"> 1112</span>&#160;    <span class="comment">// We are now to enter 2 do forever loops, inside the loops</span></div>
<div class="line"><a name="l01113"></a><span class="lineno"> 1113</span>&#160;    <span class="comment">//  we test for ending conditions. and will exit the loops</span></div>
<div class="line"><a name="l01114"></a><span class="lineno"> 1114</span>&#160;    <span class="comment">//  when needed. This inner loop may need to break out of</span></div>
<div class="line"><a name="l01115"></a><span class="lineno"> 1115</span>&#160;    <span class="comment">//  both loops, if our divisor is reduced to zero(all finish</span></div>
<div class="line"><a name="l01116"></a><span class="lineno"> 1116</span>&#160;    <span class="comment">//  if this happens to do the no-no nad use a GOTO.</span></div>
<div class="line"><a name="l01117"></a><span class="lineno"> 1117</span>&#160;    <span class="comment">// The outer loop is used to obtain all digits for the result</span></div>
<div class="line"><a name="l01118"></a><span class="lineno"> 1118</span>&#160;    <span class="comment">//  We continue in this loop while the divisor has NOT been</span></div>
<div class="line"><a name="l01119"></a><span class="lineno"> 1119</span>&#160;    <span class="comment">//  reduced to zero and we have not reach the maximum number</span></div>
<div class="line"><a name="l01120"></a><span class="lineno"> 1120</span>&#160;    <span class="comment">//  of digits to be in the result (NumDigits + 1), we add</span></div>
<div class="line"><a name="l01121"></a><span class="lineno"> 1121</span>&#160;    <span class="comment">//  one to NumDigits so we can round if necessary.</span></div>
<div class="line"><a name="l01122"></a><span class="lineno"> 1122</span>&#160;    <span class="comment">// The inner loop conputs each digits of the result and</span></div>
<div class="line"><a name="l01123"></a><span class="lineno"> 1123</span>&#160;    <span class="comment">//  breaks to the outer loop when the next digit of result</span></div>
<div class="line"><a name="l01124"></a><span class="lineno"> 1124</span>&#160;    <span class="comment">//  is found.</span></div>
<div class="line"><a name="l01125"></a><span class="lineno"> 1125</span>&#160;    <span class="comment">// We compute a digit of result by continually taking best</span></div>
<div class="line"><a name="l01126"></a><span class="lineno"> 1126</span>&#160;    <span class="comment">//  guesses at how many times the dividend can go into the</span></div>
<div class="line"><a name="l01127"></a><span class="lineno"> 1127</span>&#160;    <span class="comment">//  divisor. Once The divisor becomes less than the dividend</span></div>
<div class="line"><a name="l01128"></a><span class="lineno"> 1128</span>&#160;    <span class="comment">//  we found this digit and we exit the inner loop. If the</span></div>
<div class="line"><a name="l01129"></a><span class="lineno"> 1129</span>&#160;    <span class="comment">//  divisor = dividend then we know dividend will go into</span></div>
<div class="line"><a name="l01130"></a><span class="lineno"> 1130</span>&#160;    <span class="comment">//  1 more than last guess, so bump up the last guess and</span></div>
<div class="line"><a name="l01131"></a><span class="lineno"> 1131</span>&#160;    <span class="comment">//  exit both loops (ALL DONE !!), if neither of the above</span></div>
<div class="line"><a name="l01132"></a><span class="lineno"> 1132</span>&#160;    <span class="comment">//  conditions are met our last guess was low, compute a new</span></div>
<div class="line"><a name="l01133"></a><span class="lineno"> 1133</span>&#160;    <span class="comment">//  guess using result of last one, and go though inner loop</span></div>
<div class="line"><a name="l01134"></a><span class="lineno"> 1134</span>&#160;    <span class="comment">//  again.</span></div>
<div class="line"><a name="l01135"></a><span class="lineno"> 1135</span>&#160;    <span class="keywordflow">for</span> (; ; )</div>
<div class="line"><a name="l01136"></a><span class="lineno"> 1136</span>&#160;    {</div>
<div class="line"><a name="l01137"></a><span class="lineno"> 1137</span>&#160;        <span class="keywordtype">int</span> multiplier;</div>
<div class="line"><a name="l01138"></a><span class="lineno"> 1138</span>&#160;        <span class="keywordflow">for</span> (; ; )</div>
<div class="line"><a name="l01139"></a><span class="lineno"> 1139</span>&#160;        {</div>
<div class="line"><a name="l01140"></a><span class="lineno"> 1140</span>&#160;            <span class="comment">// if we&#39;ve reached the point where the two numbers are</span></div>
<div class="line"><a name="l01141"></a><span class="lineno"> 1141</span>&#160;            <span class="comment">// of equal length, we&#39;ve reached the point where we can</span></div>
<div class="line"><a name="l01142"></a><span class="lineno"> 1142</span>&#160;            <span class="comment">// directly compare to see where we are at.</span></div>
<div class="line"><a name="l01143"></a><span class="lineno"> 1143</span>&#160;            <span class="keywordflow">if</span> (left-&gt;<a class="code" href="class_number_string_base.html#a69c6fa53326f051165bbad19f21314d9">digitsCount</a> == accum-&gt;<a class="code" href="class_number_string_base.html#a69c6fa53326f051165bbad19f21314d9">digitsCount</a>)</div>
<div class="line"><a name="l01144"></a><span class="lineno"> 1144</span>&#160;            {</div>
<div class="line"><a name="l01145"></a><span class="lineno"> 1145</span>&#160;                <span class="comment">// do a direct comparison of the digits</span></div>
<div class="line"><a name="l01146"></a><span class="lineno"> 1146</span>&#160;                <span class="comment">// if the left is smaller, we&#39;ve got a good estimate</span></div>
<div class="line"><a name="l01147"></a><span class="lineno"> 1147</span>&#160;                <span class="comment">// for this digit</span></div>
<div class="line"><a name="l01148"></a><span class="lineno"> 1148</span>&#160;                <span class="keywordtype">int</span> rc = memcmp(leftNumber, rightNumber, left-&gt;<a class="code" href="class_number_string_base.html#a69c6fa53326f051165bbad19f21314d9">digitsCount</a>);</div>
<div class="line"><a name="l01149"></a><span class="lineno"> 1149</span>&#160;                <span class="keywordflow">if</span> (rc &lt; 0)</div>
<div class="line"><a name="l01150"></a><span class="lineno"> 1150</span>&#160;                {</div>
<div class="line"><a name="l01151"></a><span class="lineno"> 1151</span>&#160;                    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01152"></a><span class="lineno"> 1152</span>&#160;                }</div>
<div class="line"><a name="l01153"></a><span class="lineno"> 1153</span>&#160;                <span class="comment">// the number is equal.  Our current digit is exactly one</span></div>
<div class="line"><a name="l01154"></a><span class="lineno"> 1154</span>&#160;                <span class="comment">// too small.  Adjust it and exit the entire</span></div>
<div class="line"><a name="l01155"></a><span class="lineno"> 1155</span>&#160;                <span class="comment">// division loop</span></div>
<div class="line"><a name="l01156"></a><span class="lineno"> 1156</span>&#160;                <span class="keywordflow">else</span> <span class="keywordflow">if</span> (rc == 0)</div>
<div class="line"><a name="l01157"></a><span class="lineno"> 1157</span>&#160;                {</div>
<div class="line"><a name="l01158"></a><span class="lineno"> 1158</span>&#160; </div>
<div class="line"><a name="l01159"></a><span class="lineno"> 1159</span>&#160;                    *result++ = (char)(thisDigit + 1);</div>
<div class="line"><a name="l01160"></a><span class="lineno"> 1160</span>&#160;                    resultDigits++;</div>
<div class="line"><a name="l01161"></a><span class="lineno"> 1161</span>&#160;                    <span class="keywordflow">goto</span> PowerDivideDone;</div>
<div class="line"><a name="l01162"></a><span class="lineno"> 1162</span>&#160;                }</div>
<div class="line"><a name="l01163"></a><span class="lineno"> 1163</span>&#160;                <span class="comment">// we can pick up the next multiplier and continue</span></div>
<div class="line"><a name="l01164"></a><span class="lineno"> 1164</span>&#160;                <span class="keywordflow">else</span></div>
<div class="line"><a name="l01165"></a><span class="lineno"> 1165</span>&#160;                {</div>
<div class="line"><a name="l01166"></a><span class="lineno"> 1166</span>&#160;                    multiplier = *leftNumber;</div>
<div class="line"><a name="l01167"></a><span class="lineno"> 1167</span>&#160;                }</div>
<div class="line"><a name="l01168"></a><span class="lineno"> 1168</span>&#160;            }</div>
<div class="line"><a name="l01169"></a><span class="lineno"> 1169</span>&#160;            <span class="comment">// unequal lengths...if the left is still longer than the accumulator, we</span></div>
<div class="line"><a name="l01170"></a><span class="lineno"> 1170</span>&#160;            <span class="comment">// get the next set of digits</span></div>
<div class="line"><a name="l01171"></a><span class="lineno"> 1171</span>&#160;            <span class="keywordflow">else</span> <span class="keywordflow">if</span> (left-&gt;<a class="code" href="class_number_string_base.html#a69c6fa53326f051165bbad19f21314d9">digitsCount</a> &gt; accum-&gt;<a class="code" href="class_number_string_base.html#a69c6fa53326f051165bbad19f21314d9">digitsCount</a>)</div>
<div class="line"><a name="l01172"></a><span class="lineno"> 1172</span>&#160;            {</div>
<div class="line"><a name="l01173"></a><span class="lineno"> 1173</span>&#160;                <span class="comment">// NB:  since the left number is longer, we know there are</span></div>
<div class="line"><a name="l01174"></a><span class="lineno"> 1174</span>&#160;                <span class="comment">// still at least 2 digits here</span></div>
<div class="line"><a name="l01175"></a><span class="lineno"> 1175</span>&#160;                multiplier = *leftNumber * 10 + *(leftNumber + 1);</div>
<div class="line"><a name="l01176"></a><span class="lineno"> 1176</span>&#160;            }</div>
<div class="line"><a name="l01177"></a><span class="lineno"> 1177</span>&#160;            <span class="comment">// the left is smaller, break the inner loop</span></div>
<div class="line"><a name="l01178"></a><span class="lineno"> 1178</span>&#160;            <span class="keywordflow">else</span></div>
<div class="line"><a name="l01179"></a><span class="lineno"> 1179</span>&#160;            {</div>
<div class="line"><a name="l01180"></a><span class="lineno"> 1180</span>&#160;                <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01181"></a><span class="lineno"> 1181</span>&#160;            }</div>
<div class="line"><a name="l01182"></a><span class="lineno"> 1182</span>&#160; </div>
<div class="line"><a name="l01183"></a><span class="lineno"> 1183</span>&#160;            <span class="comment">// get the multiplier...a zero multiplier gets wrapped to 1</span></div>
<div class="line"><a name="l01184"></a><span class="lineno"> 1184</span>&#160;            multiplier = multiplier * 10 / divChar;</div>
<div class="line"><a name="l01185"></a><span class="lineno"> 1185</span>&#160;            <span class="keywordflow">if</span> (multiplier == 0)</div>
<div class="line"><a name="l01186"></a><span class="lineno"> 1186</span>&#160;            {</div>
<div class="line"><a name="l01187"></a><span class="lineno"> 1187</span>&#160;                multiplier = 1;</div>
<div class="line"><a name="l01188"></a><span class="lineno"> 1188</span>&#160;            }</div>
<div class="line"><a name="l01189"></a><span class="lineno"> 1189</span>&#160; </div>
<div class="line"><a name="l01190"></a><span class="lineno"> 1190</span>&#160;            <span class="comment">// add to the current digit and subtract</span></div>
<div class="line"><a name="l01191"></a><span class="lineno"> 1191</span>&#160;            thisDigit += multiplier;</div>
<div class="line"><a name="l01192"></a><span class="lineno"> 1192</span>&#160; </div>
<div class="line"><a name="l01193"></a><span class="lineno"> 1193</span>&#160;            leftNumber = <a class="code" href="class_number_string.html#a6564042d9236475269dc6072c0aba6f1">subtractDivisor</a>(leftNumber, left-&gt;<a class="code" href="class_number_string_base.html#a69c6fa53326f051165bbad19f21314d9">digitsCount</a>, rightNumber, accum-&gt;<a class="code" href="class_number_string_base.html#a69c6fa53326f051165bbad19f21314d9">digitsCount</a>, leftNumber + left-&gt;<a class="code" href="class_number_string_base.html#a69c6fa53326f051165bbad19f21314d9">digitsCount</a> - 1, multiplier);</div>
<div class="line"><a name="l01194"></a><span class="lineno"> 1194</span>&#160;            <span class="comment">// and strip off all leading zeros so we&#39;re working with real lengths</span></div>
<div class="line"><a name="l01195"></a><span class="lineno"> 1195</span>&#160;            leftNumber = left-&gt;<a class="code" href="class_number_string_base.html#a4f77dda8d9e0d98f25cc89cb478b08b2">stripLeadingZeros</a>(leftNumber);</div>
<div class="line"><a name="l01196"></a><span class="lineno"> 1196</span>&#160;        }</div>
<div class="line"><a name="l01197"></a><span class="lineno"> 1197</span>&#160; </div>
<div class="line"><a name="l01198"></a><span class="lineno"> 1198</span>&#160;        <span class="comment">// any non-zero digit gets added to the result.  Zeros only get</span></div>
<div class="line"><a name="l01199"></a><span class="lineno"> 1199</span>&#160;        <span class="comment">// added if we have a previous non-zero.</span></div>
<div class="line"><a name="l01200"></a><span class="lineno"> 1200</span>&#160;        <span class="keywordflow">if</span> (resultDigits &gt; 0 || thisDigit != 0)</div>
<div class="line"><a name="l01201"></a><span class="lineno"> 1201</span>&#160;        {</div>
<div class="line"><a name="l01202"></a><span class="lineno"> 1202</span>&#160;            *result++ = (char) thisDigit;</div>
<div class="line"><a name="l01203"></a><span class="lineno"> 1203</span>&#160;            thisDigit = 0;</div>
<div class="line"><a name="l01204"></a><span class="lineno"> 1204</span>&#160;            resultDigits++;</div>
<div class="line"><a name="l01205"></a><span class="lineno"> 1205</span>&#160; </div>
<div class="line"><a name="l01206"></a><span class="lineno"> 1206</span>&#160;            <span class="comment">// if the left number has gone to zero or we&#39;ve hit our digits limit, we&#39;re</span></div>
<div class="line"><a name="l01207"></a><span class="lineno"> 1207</span>&#160;            <span class="comment">// done processing</span></div>
<div class="line"><a name="l01208"></a><span class="lineno"> 1208</span>&#160;            <span class="keywordflow">if</span> (*leftNumber == <span class="charliteral">&#39;\0&#39;</span> || resultDigits &gt; digits)</div>
<div class="line"><a name="l01209"></a><span class="lineno"> 1209</span>&#160;            {</div>
<div class="line"><a name="l01210"></a><span class="lineno"> 1210</span>&#160;                <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01211"></a><span class="lineno"> 1211</span>&#160;            }</div>
<div class="line"><a name="l01212"></a><span class="lineno"> 1212</span>&#160; </div>
<div class="line"><a name="l01213"></a><span class="lineno"> 1213</span>&#160;        }</div>
<div class="line"><a name="l01214"></a><span class="lineno"> 1214</span>&#160; </div>
<div class="line"><a name="l01215"></a><span class="lineno"> 1215</span>&#160;        <span class="comment">// have we reduced to exactly zero?  we&#39;re done</span></div>
<div class="line"><a name="l01216"></a><span class="lineno"> 1216</span>&#160;        <span class="keywordflow">if</span> (left-&gt;<a class="code" href="class_number_string_base.html#a69c6fa53326f051165bbad19f21314d9">digitsCount</a> == 1 &amp;&amp; *leftNumber == <span class="charliteral">&#39;\0&#39;</span>)</div>
<div class="line"><a name="l01217"></a><span class="lineno"> 1217</span>&#160;        {</div>
<div class="line"><a name="l01218"></a><span class="lineno"> 1218</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01219"></a><span class="lineno"> 1219</span>&#160;        }</div>
<div class="line"><a name="l01220"></a><span class="lineno"> 1220</span>&#160; </div>
<div class="line"><a name="l01221"></a><span class="lineno"> 1221</span>&#160;        calcExp--;</div>
<div class="line"><a name="l01222"></a><span class="lineno"> 1222</span>&#160;        left-&gt;<a class="code" href="class_number_string_base.html#a69c6fa53326f051165bbad19f21314d9">digitsCount</a>++;</div>
<div class="line"><a name="l01223"></a><span class="lineno"> 1223</span>&#160;        <span class="comment">// shift the left number back to the front of the buffer and padd with zeros again</span></div>
<div class="line"><a name="l01224"></a><span class="lineno"> 1224</span>&#160;        leftNumber = (<span class="keywordtype">char</span> *)memmove(leftPtr, leftNumber, left-&gt;<a class="code" href="class_number_string_base.html#a69c6fa53326f051165bbad19f21314d9">digitsCount</a>);</div>
<div class="line"><a name="l01225"></a><span class="lineno"> 1225</span>&#160;        memset(leftNumber + left-&gt;<a class="code" href="class_number_string_base.html#a69c6fa53326f051165bbad19f21314d9">digitsCount</a>, <span class="charliteral">&#39;\0&#39;</span>, totalDigits - left-&gt;<a class="code" href="class_number_string_base.html#a69c6fa53326f051165bbad19f21314d9">digitsCount</a>);</div>
<div class="line"><a name="l01226"></a><span class="lineno"> 1226</span>&#160;    }</div>
<div class="line"><a name="l01227"></a><span class="lineno"> 1227</span>&#160; </div>
<div class="line"><a name="l01228"></a><span class="lineno"> 1228</span>&#160;    <span class="comment">// finished with the divide, so final result cleanup</span></div>
<div class="line"><a name="l01229"></a><span class="lineno"> 1229</span>&#160;    PowerDivideDone:</div>
<div class="line"><a name="l01230"></a><span class="lineno"> 1230</span>&#160;    ;</div>
<div class="line"><a name="l01231"></a><span class="lineno"> 1231</span>&#160; </div>
<div class="line"><a name="l01232"></a><span class="lineno"> 1232</span>&#160;    accum-&gt;<a class="code" href="class_number_string_base.html#a69c6fa53326f051165bbad19f21314d9">digitsCount</a> = resultDigits;</div>
<div class="line"><a name="l01233"></a><span class="lineno"> 1233</span>&#160;    accum-&gt;<a class="code" href="class_number_string_base.html#a7ca743677b8bfd7cf13b652bac72e279">numberExponent</a> = calcExp;</div>
<div class="line"><a name="l01234"></a><span class="lineno"> 1234</span>&#160;    <span class="comment">// copy to the output buffer</span></div>
<div class="line"><a name="l01235"></a><span class="lineno"> 1235</span>&#160;    memcpy(output, result - resultDigits, resultDigits);</div>
<div class="line"><a name="l01236"></a><span class="lineno"> 1236</span>&#160;    <span class="keywordflow">return</span> output;</div>
<div class="line"><a name="l01237"></a><span class="lineno"> 1237</span>&#160;}</div>
<div class="ttc" id="a_activity_8hpp_html"><div class="ttname"><a href="_activity_8hpp.html">Activity.hpp</a></div></div>
<div class="ttc" id="a_activity_manager_8hpp_html"><div class="ttname"><a href="_activity_manager_8hpp.html">ActivityManager.hpp</a></div></div>
<div class="ttc" id="a_activity_manager_8hpp_html_ab278a90c36b1ea34f0d6a7e280799eaa"><div class="ttname"><a href="_activity_manager_8hpp.html#ab278a90c36b1ea34f0d6a7e280799eaa">reportException</a></div><div class="ttdeci">void reportException(RexxErrorCodes error)</div><div class="ttdef"><b>Definition:</b> <a href="_activity_manager_8hpp_source.html#l00211">ActivityManager.hpp:211</a></div></div>
<div class="ttc" id="a_array_class_8hpp_html"><div class="ttname"><a href="_array_class_8hpp.html">ArrayClass.hpp</a></div></div>
<div class="ttc" id="a_buffer_class_8hpp_html"><div class="ttname"><a href="_buffer_class_8hpp.html">BufferClass.hpp</a></div></div>
<div class="ttc" id="a_buffer_class_8hpp_html_a434bb1dd35461c9cf3f44e16a8d60c47"><div class="ttname"><a href="_buffer_class_8hpp.html#a434bb1dd35461c9cf3f44e16a8d60c47">new_buffer</a></div><div class="ttdeci">BufferClass * new_buffer(size_t s)</div><div class="ttdef"><b>Definition:</b> <a href="_buffer_class_8hpp_source.html#l00124">BufferClass.hpp:124</a></div></div>
<div class="ttc" id="a_integer_class_8hpp_html_abda515b90956d920c9d93b342771f06b"><div class="ttname"><a href="_integer_class_8hpp.html#abda515b90956d920c9d93b342771f06b">new_integer</a></div><div class="ttdeci">RexxInteger * new_integer(wholenumber_t v)</div><div class="ttdef"><b>Definition:</b> <a href="_integer_class_8hpp_source.html#l00210">IntegerClass.hpp:210</a></div></div>
<div class="ttc" id="a_method_arguments_8hpp_html"><div class="ttname"><a href="_method_arguments_8hpp.html">MethodArguments.hpp</a></div></div>
<div class="ttc" id="a_method_arguments_8hpp_html_a5e9ddb0b76ebbed493614301e3fc7e2f"><div class="ttname"><a href="_method_arguments_8hpp.html#a5e9ddb0b76ebbed493614301e3fc7e2f">requiredArgument</a></div><div class="ttdeci">RexxObject * requiredArgument(RexxObject *object, size_t position)</div><div class="ttdef"><b>Definition:</b> <a href="_method_arguments_8hpp_source.html#l00099">MethodArguments.hpp:99</a></div></div>
<div class="ttc" id="a_method_arguments_8hpp_html_acaa47d77e086aeec2a2ba0162af387b2"><div class="ttname"><a href="_method_arguments_8hpp.html#acaa47d77e086aeec2a2ba0162af387b2">ARG_ONE</a></div><div class="ttdeci">const int ARG_ONE</div><div class="ttdef"><b>Definition:</b> <a href="_method_arguments_8hpp_source.html#l00056">MethodArguments.hpp:56</a></div></div>
<div class="ttc" id="a_number_string_class_8hpp_html"><div class="ttname"><a href="_number_string_class_8hpp.html">NumberStringClass.hpp</a></div></div>
<div class="ttc" id="a_number_string_class_8hpp_html_a82cffa3aff54c95bee546eccce73135f"><div class="ttname"><a href="_number_string_class_8hpp.html#a82cffa3aff54c95bee546eccce73135f">new_numberstring</a></div><div class="ttdeci">NumberString * new_numberstring(const char *s, size_t l)</div><div class="ttdef"><b>Definition:</b> <a href="_number_string_class_8hpp_source.html#l00420">NumberStringClass.hpp:420</a></div></div>
<div class="ttc" id="a_numerics_8hpp_html_a771bafb9b89d652ba22051991fbf6845"><div class="ttname"><a href="_numerics_8hpp.html#a771bafb9b89d652ba22051991fbf6845">number_digits</a></div><div class="ttdeci">wholenumber_t number_digits()</div><div class="ttdef"><b>Definition:</b> <a href="_numerics_8hpp_source.html#l00202">Numerics.hpp:202</a></div></div>
<div class="ttc" id="a_protected_object_8hpp_html"><div class="ttname"><a href="_protected_object_8hpp.html">ProtectedObject.hpp</a></div></div>
<div class="ttc" id="a_rexx_core_8h_html"><div class="ttname"><a href="_rexx_core_8h.html">RexxCore.h</a></div></div>
<div class="ttc" id="a_rexx_core_8h_html_a5ad77b0ce0050d8179296ab07a13c317"><div class="ttname"><a href="_rexx_core_8h.html#a5ad77b0ce0050d8179296ab07a13c317">IntegerOne</a></div><div class="ttdeci">#define IntegerOne</div><div class="ttdef"><b>Definition:</b> <a href="_rexx_core_8h_source.html#l00281">RexxCore.h:281</a></div></div>
<div class="ttc" id="a_rexx_core_8h_html_add4beaef2223c4d220d99cba73388681"><div class="ttname"><a href="_rexx_core_8h.html#add4beaef2223c4d220d99cba73388681">IntegerZero</a></div><div class="ttdeci">#define IntegerZero</div><div class="ttdef"><b>Definition:</b> <a href="_rexx_core_8h_source.html#l00280">RexxCore.h:280</a></div></div>
<div class="ttc" id="a_rexx_error_codes_8h_html_ab78d722675e696d37b9b75e363a8b358a213c5932a86ea3ab073f4aab1f3a8445"><div class="ttname"><a href="_rexx_error_codes_8h.html#ab78d722675e696d37b9b75e363a8b358a213c5932a86ea3ab073f4aab1f3a8445">Error_Invalid_whole_number_intdiv</a></div><div class="ttdeci">@ Error_Invalid_whole_number_intdiv</div><div class="ttdef"><b>Definition:</b> <a href="_rexx_error_codes_8h_source.html#l00264">RexxErrorCodes.h:264</a></div></div>
<div class="ttc" id="a_rexx_error_codes_8h_html_ab78d722675e696d37b9b75e363a8b358a28a9496d5c2c5df236cd68d2594990eb"><div class="ttname"><a href="_rexx_error_codes_8h.html#ab78d722675e696d37b9b75e363a8b358a28a9496d5c2c5df236cd68d2594990eb">Error_Overflow_power</a></div><div class="ttdeci">@ Error_Overflow_power</div><div class="ttdef"><b>Definition:</b> <a href="_rexx_error_codes_8h_source.html#l00430">RexxErrorCodes.h:430</a></div></div>
<div class="ttc" id="a_rexx_error_codes_8h_html_ab78d722675e696d37b9b75e363a8b358a3d114efa6d6a106b6743574c9cd226bc"><div class="ttname"><a href="_rexx_error_codes_8h.html#ab78d722675e696d37b9b75e363a8b358a3d114efa6d6a106b6743574c9cd226bc">Error_Invalid_whole_number_rem</a></div><div class="ttdeci">@ Error_Invalid_whole_number_rem</div><div class="ttdef"><b>Definition:</b> <a href="_rexx_error_codes_8h_source.html#l00265">RexxErrorCodes.h:265</a></div></div>
<div class="ttc" id="a_rexx_error_codes_8h_html_ab78d722675e696d37b9b75e363a8b358acc26cebd08ff7192a41679bacdcdf5f8"><div class="ttname"><a href="_rexx_error_codes_8h.html#ab78d722675e696d37b9b75e363a8b358acc26cebd08ff7192a41679bacdcdf5f8">Error_Overflow_zero</a></div><div class="ttdeci">@ Error_Overflow_zero</div><div class="ttdef"><b>Definition:</b> <a href="_rexx_error_codes_8h_source.html#l00426">RexxErrorCodes.h:426</a></div></div>
<div class="ttc" id="a_rexx_error_codes_8h_html_ab78d722675e696d37b9b75e363a8b358af9e4d9319a6b2e15363da2e447a316ef"><div class="ttname"><a href="_rexx_error_codes_8h.html#ab78d722675e696d37b9b75e363a8b358af9e4d9319a6b2e15363da2e447a316ef">Error_Invalid_whole_number_power</a></div><div class="ttdeci">@ Error_Invalid_whole_number_power</div><div class="ttdef"><b>Definition:</b> <a href="_rexx_error_codes_8h_source.html#l00263">RexxErrorCodes.h:263</a></div></div>
<div class="ttc" id="a_rexx_error_codes_8h_html_ab78d722675e696d37b9b75e363a8b358aff6ea5cd9765908371687a6dd4183a5c"><div class="ttname"><a href="_rexx_error_codes_8h.html#ab78d722675e696d37b9b75e363a8b358aff6ea5cd9765908371687a6dd4183a5c">Error_Overflow_overflow</a></div><div class="ttdeci">@ Error_Overflow_overflow</div><div class="ttdef"><b>Definition:</b> <a href="_rexx_error_codes_8h_source.html#l00424">RexxErrorCodes.h:424</a></div></div>
<div class="ttc" id="aclass_number_string_base_html"><div class="ttname"><a href="class_number_string_base.html">NumberStringBase</a></div><div class="ttdef"><b>Definition:</b> <a href="_number_string_class_8hpp_source.html#l00057">NumberStringClass.hpp:58</a></div></div>
<div class="ttc" id="aclass_number_string_base_html_a4f77dda8d9e0d98f25cc89cb478b08b2"><div class="ttname"><a href="class_number_string_base.html#a4f77dda8d9e0d98f25cc89cb478b08b2">NumberStringBase::stripLeadingZeros</a></div><div class="ttdeci">char * stripLeadingZeros(char *)</div><div class="ttdef"><b>Definition:</b> <a href="_number_string_math_8cpp_source.html#l00426">NumberStringMath.cpp:426</a></div></div>
<div class="ttc" id="aclass_number_string_base_html_a58a184bbcc6ffbaf9999c55a2a05f3fa"><div class="ttname"><a href="class_number_string_base.html#a58a184bbcc6ffbaf9999c55a2a05f3fa">NumberStringBase::mathRound</a></div><div class="ttdeci">void mathRound(char *)</div><div class="ttdef"><b>Definition:</b> <a href="_number_string_math_8cpp_source.html#l00315">NumberStringMath.cpp:315</a></div></div>
<div class="ttc" id="aclass_number_string_base_html_a69c6fa53326f051165bbad19f21314d9"><div class="ttname"><a href="class_number_string_base.html#a69c6fa53326f051165bbad19f21314d9">NumberStringBase::digitsCount</a></div><div class="ttdeci">wholenumber_t digitsCount</div><div class="ttdef"><b>Definition:</b> <a href="_number_string_class_8hpp_source.html#l00088">NumberStringClass.hpp:88</a></div></div>
<div class="ttc" id="aclass_number_string_base_html_a7ca743677b8bfd7cf13b652bac72e279"><div class="ttname"><a href="class_number_string_base.html#a7ca743677b8bfd7cf13b652bac72e279">NumberStringBase::numberExponent</a></div><div class="ttdeci">wholenumber_t numberExponent</div><div class="ttdef"><b>Definition:</b> <a href="_number_string_class_8hpp_source.html#l00087">NumberStringClass.hpp:87</a></div></div>
<div class="ttc" id="aclass_number_string_base_html_a89de4786d9655048c6f2ebe870ada73a"><div class="ttname"><a href="class_number_string_base.html#a89de4786d9655048c6f2ebe870ada73a">NumberStringBase::numberSign</a></div><div class="ttdeci">short numberSign</div><div class="ttdef"><b>Definition:</b> <a href="_number_string_class_8hpp_source.html#l00085">NumberStringClass.hpp:85</a></div></div>
<div class="ttc" id="aclass_number_string_base_html_aad5ee522bcbc577d0827687fbfefa868"><div class="ttname"><a href="class_number_string_base.html#aad5ee522bcbc577d0827687fbfefa868">NumberStringBase::adjustNumber</a></div><div class="ttdeci">char * adjustNumber(char *, char *, wholenumber_t, wholenumber_t)</div><div class="ttdef"><b>Definition:</b> <a href="_number_string_math2_8cpp_source.html#l00780">NumberStringMath2.cpp:780</a></div></div>
<div class="ttc" id="aclass_number_string_html"><div class="ttname"><a href="class_number_string.html">NumberString</a></div><div class="ttdef"><b>Definition:</b> <a href="_number_string_class_8hpp_source.html#l00096">NumberStringClass.hpp:97</a></div></div>
<div class="ttc" id="aclass_number_string_html_a07cf2889441f4a47e7c6e21ebd7ac74f"><div class="ttname"><a href="class_number_string.html#a07cf2889441f4a47e7c6e21ebd7ac74f">NumberString::isZero</a></div><div class="ttdeci">bool isZero()</div><div class="ttdef"><b>Definition:</b> <a href="_number_string_class_8hpp_source.html#l00362">NumberStringClass.hpp:362</a></div></div>
<div class="ttc" id="aclass_number_string_html_a24817b399e4c27b805d3b80194fb360d"><div class="ttname"><a href="class_number_string.html#a24817b399e4c27b805d3b80194fb360d">NumberString::HIBIT</a></div><div class="ttdeci">static const size_t HIBIT</div><div class="ttdef"><b>Definition:</b> <a href="_number_string_class_8hpp_source.html#l00407">NumberStringClass.hpp:407</a></div></div>
<div class="ttc" id="aclass_number_string_html_a2e47777f71b543de06fcd0eb6e7d87dd"><div class="ttname"><a href="class_number_string.html#a2e47777f71b543de06fcd0eb6e7d87dd">NumberString::prepareOperatorNumber</a></div><div class="ttdeci">NumberString * prepareOperatorNumber(wholenumber_t, wholenumber_t, bool)</div><div class="ttdef"><b>Definition:</b> <a href="_number_string_math_8cpp_source.html#l00544">NumberStringMath.cpp:544</a></div></div>
<div class="ttc" id="aclass_number_string_html_a3a133b8af60754777d2d45bedd871708"><div class="ttname"><a href="class_number_string.html#a3a133b8af60754777d2d45bedd871708">NumberString::adjustPrecision</a></div><div class="ttdeci">void adjustPrecision(char *, wholenumber_t)</div><div class="ttdef"><b>Definition:</b> <a href="_number_string_math_8cpp_source.html#l00448">NumberStringMath.cpp:448</a></div></div>
<div class="ttc" id="aclass_number_string_html_a400f341e1df9809d972dc3860f080c64"><div class="ttname"><a href="class_number_string.html#a400f341e1df9809d972dc3860f080c64">NumberString::FAST_BUFFER</a></div><div class="ttdeci">static const size_t FAST_BUFFER</div><div class="ttdef"><b>Definition:</b> <a href="_number_string_class_8hpp_source.html#l00414">NumberStringClass.hpp:414</a></div></div>
<div class="ttc" id="aclass_number_string_html_a42a268049c6180a6441ea4447f3d35c2"><div class="ttname"><a href="class_number_string.html#a42a268049c6180a6441ea4447f3d35c2">NumberString::Multiply</a></div><div class="ttdeci">NumberString * Multiply(NumberString *)</div><div class="ttdef"><b>Definition:</b> <a href="_number_string_math2_8cpp_source.html#l00106">NumberStringMath2.cpp:106</a></div></div>
<div class="ttc" id="aclass_number_string_html_a488e157dca9a5ea49ccaf094f685f317"><div class="ttname"><a href="class_number_string.html#a488e157dca9a5ea49ccaf094f685f317">NumberString::SIZEBITS</a></div><div class="ttdeci">static const size_t SIZEBITS</div><div class="ttdef"><b>Definition:</b> <a href="_number_string_class_8hpp_source.html#l00402">NumberStringClass.hpp:402</a></div></div>
<div class="ttc" id="aclass_number_string_html_a48ad5e780996b5777281d1aec2832d66"><div class="ttname"><a href="class_number_string.html#a48ad5e780996b5777281d1aec2832d66">NumberString::ArithmeticOperator</a></div><div class="ttdeci">ArithmeticOperator</div><div class="ttdef"><b>Definition:</b> <a href="_number_string_class_8hpp_source.html#l00102">NumberStringClass.hpp:103</a></div></div>
<div class="ttc" id="aclass_number_string_html_a48ad5e780996b5777281d1aec2832d66a173e26391a07898c7ffdfc4cfb2e4a95"><div class="ttname"><a href="class_number_string.html#a48ad5e780996b5777281d1aec2832d66a173e26391a07898c7ffdfc4cfb2e4a95">NumberString::OT_DIVIDE</a></div><div class="ttdeci">@ OT_DIVIDE</div><div class="ttdef"><b>Definition:</b> <a href="_number_string_class_8hpp_source.html#l00107">NumberStringClass.hpp:107</a></div></div>
<div class="ttc" id="aclass_number_string_html_a48ad5e780996b5777281d1aec2832d66a7b52372b354bbdd5aea33d3212b01f95"><div class="ttname"><a href="class_number_string.html#a48ad5e780996b5777281d1aec2832d66a7b52372b354bbdd5aea33d3212b01f95">NumberString::OT_INT_DIVIDE</a></div><div class="ttdeci">@ OT_INT_DIVIDE</div><div class="ttdef"><b>Definition:</b> <a href="_number_string_class_8hpp_source.html#l00108">NumberStringClass.hpp:108</a></div></div>
<div class="ttc" id="aclass_number_string_html_a48ad5e780996b5777281d1aec2832d66aec70bc1cb012c3ab36c8df9877d6c910"><div class="ttname"><a href="class_number_string.html#a48ad5e780996b5777281d1aec2832d66aec70bc1cb012c3ab36c8df9877d6c910">NumberString::OT_REMAINDER</a></div><div class="ttdeci">@ OT_REMAINDER</div><div class="ttdef"><b>Definition:</b> <a href="_number_string_class_8hpp_source.html#l00109">NumberStringClass.hpp:109</a></div></div>
<div class="ttc" id="aclass_number_string_html_a5949f0ead02874f3ab7aeab430ecf55c"><div class="ttname"><a href="class_number_string.html#a5949f0ead02874f3ab7aeab430ecf55c">NumberString::highBits</a></div><div class="ttdeci">static size_t highBits(size_t)</div><div class="ttdef"><b>Definition:</b> <a href="_number_string_math_8cpp_source.html#l00395">NumberStringMath.cpp:395</a></div></div>
<div class="ttc" id="aclass_number_string_html_a6564042d9236475269dc6072c0aba6f1"><div class="ttname"><a href="class_number_string.html#a6564042d9236475269dc6072c0aba6f1">NumberString::subtractDivisor</a></div><div class="ttdeci">static char * subtractDivisor(const char *data1, wholenumber_t length1, const char *data2, wholenumber_t length2, char *result, int Mult)</div><div class="ttdef"><b>Definition:</b> <a href="_number_string_math2_8cpp_source.html#l00224">NumberStringMath2.cpp:224</a></div></div>
<div class="ttc" id="aclass_number_string_html_a806d9c5f154109ecb58b937dabc70019"><div class="ttname"><a href="class_number_string.html#a806d9c5f154109ecb58b937dabc70019">NumberString::setupNumber</a></div><div class="ttdeci">void setupNumber()</div><div class="ttdef"><b>Definition:</b> <a href="_number_string_class_8hpp_source.html#l00300">NumberStringClass.hpp:300</a></div></div>
<div class="ttc" id="aclass_number_string_html_a887161f827212d27414325c04fc799c6"><div class="ttname"><a href="class_number_string.html#a887161f827212d27414325c04fc799c6">NumberString::dividePower</a></div><div class="ttdeci">static char * dividePower(const char *AccumPtr, NumberStringBase *Accum, char *Output, wholenumber_t NumberDigits)</div><div class="ttdef"><b>Definition:</b> <a href="_number_string_math2_8cpp_source.html#l01059">NumberStringMath2.cpp:1059</a></div></div>
<div class="ttc" id="aclass_number_string_html_a909e26debed7dc0853fb78a2eb12f34b"><div class="ttname"><a href="class_number_string.html#a909e26debed7dc0853fb78a2eb12f34b">NumberString::numberDigits</a></div><div class="ttdeci">char numberDigits[4]</div><div class="ttdef"><b>Definition:</b> <a href="_number_string_class_8hpp_source.html#l00416">NumberStringClass.hpp:416</a></div></div>
<div class="ttc" id="aclass_number_string_html_a9496b41e88a2ccda3960bd12967ca5d6"><div class="ttname"><a href="class_number_string.html#a9496b41e88a2ccda3960bd12967ca5d6">NumberString::power</a></div><div class="ttdeci">NumberString * power(RexxObject *)</div><div class="ttdef"><b>Definition:</b> <a href="_number_string_math2_8cpp_source.html#l00811">NumberStringMath2.cpp:811</a></div></div>
<div class="ttc" id="aclass_number_string_html_a9587cb55737c538638144a4abec853d5"><div class="ttname"><a href="class_number_string.html#a9587cb55737c538638144a4abec853d5">NumberString::NOROUND</a></div><div class="ttdeci">static const bool NOROUND</div><div class="ttdef"><b>Definition:</b> <a href="_number_string_class_8hpp_source.html#l00404">NumberStringClass.hpp:404</a></div></div>
<div class="ttc" id="aclass_number_string_html_a984fca0ded898247f8a9b198ce5e3662"><div class="ttname"><a href="class_number_string.html#a984fca0ded898247f8a9b198ce5e3662">NumberString::Division</a></div><div class="ttdeci">NumberString * Division(NumberString *, ArithmeticOperator)</div><div class="ttdef"><b>Definition:</b> <a href="_number_string_math2_8cpp_source.html#l00331">NumberStringMath2.cpp:331</a></div></div>
<div class="ttc" id="aclass_number_string_html_ab149da0e8328a56475058f3e24d5b3e8"><div class="ttname"><a href="class_number_string.html#ab149da0e8328a56475058f3e24d5b3e8">NumberString::addMultiplier</a></div><div class="ttdeci">static char * addMultiplier(const char *, wholenumber_t, char *, int)</div><div class="ttdef"><b>Definition:</b> <a href="_number_string_math2_8cpp_source.html#l00066">NumberStringMath2.cpp:66</a></div></div>
<div class="ttc" id="aclass_number_string_html_ab87dadeb7537fda0d05dc1861120a166"><div class="ttname"><a href="class_number_string.html#ab87dadeb7537fda0d05dc1861120a166">NumberString::clone</a></div><div class="ttdeci">NumberString * clone()</div><div class="ttdef"><b>Definition:</b> <a href="_number_string_class_8cpp_source.html#l00110">NumberStringClass.cpp:110</a></div></div>
<div class="ttc" id="aclass_number_string_html_abb5f93457f698afe9585e838aed1d5b1"><div class="ttname"><a href="class_number_string.html#abb5f93457f698afe9585e838aed1d5b1">NumberString::multiplyPower</a></div><div class="ttdeci">static char * multiplyPower(const char *leftPtr, NumberStringBase *left, const char *rightPtr, NumberStringBase *right, char *OutPtr, wholenumber_t OutLen, wholenumber_t NumberDigits)</div><div class="ttdef"><b>Definition:</b> <a href="_number_string_math2_8cpp_source.html#l01005">NumberStringMath2.cpp:1005</a></div></div>
<div class="ttc" id="aclass_number_string_html_ae547274d2645c1a939556a0e43590aab"><div class="ttname"><a href="class_number_string.html#ae547274d2645c1a939556a0e43590aab">NumberString::checkNumber</a></div><div class="ttdeci">NumberString * checkNumber(wholenumber_t digits)</div><div class="ttdef"><b>Definition:</b> <a href="_number_string_class_8hpp_source.html#l00262">NumberStringClass.hpp:262</a></div></div>
<div class="ttc" id="aclass_number_string_html_aeeb657d4381a64155fb9265b3544ac7d"><div class="ttname"><a href="class_number_string.html#aeeb657d4381a64155fb9265b3544ac7d">NumberString::LOWBITS</a></div><div class="ttdeci">static const size_t LOWBITS</div><div class="ttdef"><b>Definition:</b> <a href="_number_string_class_8hpp_source.html#l00408">NumberStringClass.hpp:408</a></div></div>
<div class="ttc" id="aclass_numerics_html_a6d71f6a07240bef67416c620a250c631"><div class="ttname"><a href="class_numerics.html#a6d71f6a07240bef67416c620a250c631">Numerics::MAX_EXPONENT</a></div><div class="ttdeci">static const wholenumber_t MAX_EXPONENT</div><div class="ttdef"><b>Definition:</b> <a href="_numerics_8hpp_source.html#l00113">Numerics.hpp:113</a></div></div>
<div class="ttc" id="aclass_numerics_html_ac92c349ad5a51e4fdec9dc35677b3ac8"><div class="ttname"><a href="class_numerics.html#ac92c349ad5a51e4fdec9dc35677b3ac8">Numerics::REXXINTEGER_DIGITS</a></div><div class="ttdeci">static const wholenumber_t REXXINTEGER_DIGITS</div><div class="ttdef"><b>Definition:</b> <a href="_numerics_8hpp_source.html#l00104">Numerics.hpp:104</a></div></div>
<div class="ttc" id="aclass_protected_html"><div class="ttname"><a href="class_protected.html">Protected</a></div><div class="ttdef"><b>Definition:</b> <a href="_protected_object_8hpp_source.html#l00186">ProtectedObject.hpp:187</a></div></div>
<div class="ttc" id="aclass_rexx_internal_object_html_a7ad036fff399a4bce8c2cf55d86d0072"><div class="ttname"><a href="class_rexx_internal_object.html#a7ad036fff399a4bce8c2cf55d86d0072">RexxInternalObject::numberValue</a></div><div class="ttdeci">virtual bool numberValue(wholenumber_t &amp;result, wholenumber_t precision)</div><div class="ttdef"><b>Definition:</b> <a href="_object_class_8cpp_source.html#l01047">ObjectClass.cpp:1047</a></div></div>
<div class="ttc" id="aclass_rexx_object_html"><div class="ttname"><a href="class_rexx_object.html">RexxObject</a></div><div class="ttdef"><b>Definition:</b> <a href="_object_class_8hpp_source.html#l00407">ObjectClass.hpp:408</a></div></div>
<div class="ttc" id="acmdparse_8cpp_html_ab3454b1e7e7c4c0b732dfeb74a0c040f"><div class="ttname"><a href="cmdparse_8cpp.html#ab3454b1e7e7c4c0b732dfeb74a0c040f">if</a></div><div class="ttdeci">if(!yymsg) yymsg</div></div>
<div class="ttc" id="arexx_8h_html_aa0199524ada35d939fa20d4625d27d55"><div class="ttname"><a href="rexx_8h.html#aa0199524ada35d939fa20d4625d27d55">wholenumber_t</a></div><div class="ttdeci">ssize_t wholenumber_t</div><div class="ttdef"><b>Definition:</b> <a href="rexx_8h_source.html#l00237">rexx.h:237</a></div></div>
</div><!-- fragment --></div><!-- contents -->
</div><!-- doc-content -->
<!-- HTML footer for doxygen 1.9.2-->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_2b8d323c7289fed1299e6f1b6909d41b.html">oorexx</a></li><li class="navelem"><a class="el" href="dir_2dfb7423ce64cb60f62cee208bb73ae3.html">official</a></li><li class="navelem"><a class="el" href="dir_63144926d93644d0b571decfac4c5baa.html">main</a></li><li class="navelem"><a class="el" href="dir_5131a42d519b9b019d5264fc1f0fe4ab.html">trunk</a></li><li class="navelem"><a class="el" href="dir_07b471ff108ade29d714c67783960c47.html">interpreter</a></li><li class="navelem"><a class="el" href="dir_9d4fe1fff3cfc096e62a288f8d60ec08.html">classes</a></li><li class="navelem"><a class="el" href="_number_string_math2_8cpp.html">NumberStringMath2.cpp</a></li>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.2 </li>
  </ul>
</div>
<!-- javascript code to insert the title in the condensed index (tabs) -->
<!-- See the function initMenu in menu.js:
     The condensed index is a list <ul> of several items <li>: Main Page, Classes, Files.
     I append a new item <li> which display the project name. -->
<script type="text/javascript">
$(function() {
  $('#main-menu').append('<li class="title" style="margin-left:3mm">ooRexx</li>')
});
</script>
<!-- end of javascript code -->
</body>
</html>
