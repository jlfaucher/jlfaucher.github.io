<!-- HTML header for doxygen 1.9.2-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.2"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>ooRexx: SysRexxUtil.cpp Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<!--
    Removed completely the TITLEAREA because I don't like the loss of space.
    I want the title in the condensed index (tabs) at top of each HTML page.
    The insertion of the title is managed by javascript code in the footer,
    because this code must be executed AFTER the creation of the condensed index.
    Must have this setting to display the condensed index:
    DISABLE_INDEX = NO
-->
<!-- end header part -->
<!-- Generated by Doxygen 1.9.2 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('unix_2_sys_rexx_util_8cpp_source.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">unix/SysRexxUtil.cpp</div>  </div>
</div><!--header-->
<div class="contents">
<a href="unix_2_sys_rexx_util_8cpp.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno"><a class="line" href="unix_2_sys_rexx_util_8cpp.html#a0ee1c3247f81b3e4c937ae42528d9362">    1</a></span>&#160;<span class="comment">/*----------------------------------------------------------------------------*/</span></div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="comment">/*                                                                            */</span></div>
<div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="comment">/* Copyright (c) 1995, 2004 IBM Corporation. All rights reserved.             */</span></div>
<div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="comment">/* Copyright (c) 2005-2025 Rexx Language Association. All rights reserved.    */</span></div>
<div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="comment">/*                                                                            */</span></div>
<div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="comment">/* This program and the accompanying materials are made available under       */</span></div>
<div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="comment">/* the terms of the Common Public License v1.0 which accompanies this         */</span></div>
<div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="comment">/* distribution. A copy is also available at the following address:           */</span></div>
<div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="comment">/* https://www.oorexx.org/license.html                                        */</span></div>
<div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;<span class="comment">/*                                                                            */</span></div>
<div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;<span class="comment">/* Redistribution and use in source and binary forms, with or                 */</span></div>
<div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;<span class="comment">/* without modification, are permitted provided that the following            */</span></div>
<div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;<span class="comment">/* conditions are met:                                                        */</span></div>
<div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;<span class="comment">/*                                                                            */</span></div>
<div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;<span class="comment">/* Redistributions of source code must retain the above copyright             */</span></div>
<div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;<span class="comment">/* notice, this list of conditions and the following disclaimer.              */</span></div>
<div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;<span class="comment">/* Redistributions in binary form must reproduce the above copyright          */</span></div>
<div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;<span class="comment">/* notice, this list of conditions and the following disclaimer in            */</span></div>
<div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;<span class="comment">/* the documentation and/or other materials provided with the distribution.   */</span></div>
<div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;<span class="comment">/*                                                                            */</span></div>
<div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;<span class="comment">/* Neither the name of Rexx Language Association nor the names                */</span></div>
<div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;<span class="comment">/* of its contributors may be used to endorse or promote products             */</span></div>
<div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;<span class="comment">/* derived from this software without specific prior written permission.      */</span></div>
<div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;<span class="comment">/*                                                                            */</span></div>
<div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;<span class="comment">/* THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS        */</span></div>
<div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;<span class="comment">/* &quot;AS IS&quot; AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT          */</span></div>
<div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;<span class="comment">/* LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS          */</span></div>
<div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;<span class="comment">/* FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT   */</span></div>
<div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;<span class="comment">/* OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,      */</span></div>
<div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;<span class="comment">/* SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED   */</span></div>
<div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;<span class="comment">/* TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA,        */</span></div>
<div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;<span class="comment">/* OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY     */</span></div>
<div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;<span class="comment">/* OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING    */</span></div>
<div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;<span class="comment">/* NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS         */</span></div>
<div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;<span class="comment">/* SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.               */</span></div>
<div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;<span class="comment">/*                                                                            */</span></div>
<div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;<span class="comment">/*----------------------------------------------------------------------------*/</span></div>
<div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;<span class="comment">/******************************************************************************/</span></div>
<div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;<span class="comment">/* REXX unix support                                                          */</span></div>
<div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;<span class="comment">/*                                                                            */</span></div>
<div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;<span class="comment">/* unix-based system utility functions                                        */</span></div>
<div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;<span class="comment">/*                                                                            */</span></div>
<div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;<span class="comment">/******************************************************************************/</span></div>
<div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;<span class="comment">/**********************************************************************</span></div>
<div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;<span class="comment">*                                                                     *</span></div>
<div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;<span class="comment">*   This program extends the REXX language by providing many          *</span></div>
<div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;<span class="comment">*   REXX external functions.                                          *</span></div>
<div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;<span class="comment">*   These are a partial list of functions included:                   *</span></div>
<div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;<span class="comment">*       SysCls              -- Clear the screen in a command prompt   *</span></div>
<div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;<span class="comment">*                              session                                *</span></div>
<div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;<span class="comment">*       SysCurPos           -- Set and/or Query the cursor position   *</span></div>
<div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;<span class="comment">*                              in an OS/2 fullscreen or windowed      *</span></div>
<div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;<span class="comment">*                              command prompt session.                *</span></div>
<div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;<span class="comment">*       SysCurState         -- Make the cursor visible or invisible   *</span></div>
<div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;<span class="comment">*                              in an OS/2 fullscreen or windowed      *</span></div>
<div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;<span class="comment">*                              command prompt session.                *</span></div>
<div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;<span class="comment">*       SysGetKey           -- Returns one by of data indicating the  *</span></div>
<div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;<span class="comment">*                              key which was pressed,                 *</span></div>
<div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;<span class="comment">*                              in an OS/2 fullscreen or windowed      *</span></div>
<div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;<span class="comment">*                              command prompt session.                *</span></div>
<div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;<span class="comment">*       SysGetMessage       -- Retrieves a message text from an OS/2  *</span></div>
<div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;<span class="comment">*                              message file, substituting values      *</span></div>
<div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;<span class="comment">*                              provided.                              *</span></div>
<div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;<span class="comment">*       SysMkDir            -- Creates a directory                    *</span></div>
<div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;<span class="comment">*       SysVersion          -- Returns the system  Version number     *</span></div>
<div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;<span class="comment">*       SysLinVer           -- Returns the Linux Version number       *</span></div>
<div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;<span class="comment">*                              command prompt session.                *</span></div>
<div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;<span class="comment">*       SysCreateMutexSem   -- Create a Mutex semaphore               *</span></div>
<div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;<span class="comment">*       SysOpenMutexSem     -- Open a Mutex semaphore                 *</span></div>
<div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;<span class="comment">*       SysCloseMutexSem    -- Close a Mutex semaphore                *</span></div>
<div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;<span class="comment">*       SysRequestMutexSem  -- Request a Mutex semaphore              *</span></div>
<div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;<span class="comment">*       SysReleaseMutexSem  -- Release a Mutex semaphore              *</span></div>
<div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;<span class="comment">*       SysCreateEventSem   -- Create an Event semaphore              *</span></div>
<div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;<span class="comment">*       SysOpenEventSem     -- Open an Event semaphore                *</span></div>
<div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;<span class="comment">*       SysCloseEventSem    -- Close an Event semaphore               *</span></div>
<div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;<span class="comment">*       SysPostEventSem     -- Post an Event semaphore                *</span></div>
<div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;<span class="comment">*       SysResetEventSem    -- Reset an Event semaphore               *</span></div>
<div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;<span class="comment">*       SysWaitEventSem     -- Wait on an Event semaphore             *</span></div>
<div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;<span class="comment">*       SysSetFileDateTime  -- Set the last modified date of a file   *</span></div>
<div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;<span class="comment">*       SysGetFileDateTime  -- Get the last modified date of a file   *</span></div>
<div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;<span class="comment">*       SysGetErrortext     -- Retrieve textual desc. of error number *</span></div>
<div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;<span class="comment">*       SysQueryProcess     -- Get information on current proc/thread *</span></div>
<div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;<span class="comment">*                                                                     *</span></div>
<div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;<span class="comment">*       SysGetpid           -- CREXX for AIX function support         *</span></div>
<div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;<span class="comment">*       SysFork             -- CREXX for AIX function support         *</span></div>
<div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;<span class="comment">*       SysWait             -- CREXX for AIX function support         *</span></div>
<div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;<span class="comment">*       SysCreatePipe       -- CREXX for AIX function support         *</span></div>
<div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;<span class="comment">*                                                                     *</span></div>
<div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;<span class="comment">**********************************************************************/</span></div>
<div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;<span class="preprocessor">#ifdef HAVE_CONFIG_H</span></div>
<div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;<span class="preprocessor">#include &quot;config.h&quot;</span></div>
<div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160; </div>
<div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="oorexxapi_8h.html">oorexxapi.h</a>&quot;</span></div>
<div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160; </div>
<div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;<span class="preprocessor">#include &lt;sys/wait.h&gt;</span>                  <span class="comment">// wait()</span></div>
<div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;<span class="preprocessor">#include &lt;sys/ipc.h&gt;</span></div>
<div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;<span class="preprocessor">#include &lt;memory.h&gt;</span></div>
<div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160; </div>
<div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;<span class="comment">// not available on macOS and BSDs</span></div>
<div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;<span class="preprocessor">#if defined( HAVE_MALLOC_H )</span></div>
<div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;<span class="preprocessor">#include &lt;malloc.h&gt;</span></div>
<div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160; </div>
<div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;<span class="preprocessor">#include &lt;fcntl.h&gt;</span></div>
<div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;<span class="preprocessor">#include &lt;ctype.h&gt;</span></div>
<div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;<span class="preprocessor">#include &lt;string.h&gt;</span></div>
<div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;<span class="preprocessor">#include &lt;stdlib.h&gt;</span></div>
<div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;<span class="preprocessor">#include &lt;stdio.h&gt;</span></div>
<div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;<span class="preprocessor">#include &lt;unistd.h&gt;</span></div>
<div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;<span class="preprocessor">#include &lt;limits.h&gt;</span></div>
<div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;<span class="preprocessor">#include &lt;math.h&gt;</span></div>
<div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;<span class="preprocessor">#include &lt;limits.h&gt;</span></div>
<div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;<span class="preprocessor">#include &lt;sys/stat.h&gt;</span>                  <span class="comment">// mkdir()</span></div>
<div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;<span class="preprocessor">#include &lt;errno.h&gt;</span>                     <span class="comment">// errno variable</span></div>
<div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;<span class="preprocessor">#include &lt;stddef.h&gt;</span></div>
<div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;<span class="preprocessor">#include &lt;sys/types.h&gt;</span></div>
<div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;<span class="preprocessor">#include &lt;sys/utsname.h&gt;</span>               <span class="comment">// uname()</span></div>
<div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;<span class="preprocessor">#include &lt;pthread.h&gt;</span></div>
<div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;<span class="preprocessor">#include &lt;semaphore.h&gt;</span></div>
<div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;<span class="preprocessor">#include &lt;signal.h&gt;</span></div>
<div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;<span class="preprocessor">#include &lt;time.h&gt;</span></div>
<div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;<span class="preprocessor">#include &lt;netdb.h&gt;</span></div>
<div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160; </div>
<div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;<span class="preprocessor">#if defined( HAVE_SYS_SEM_H )</span></div>
<div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;<span class="preprocessor">#include &lt;sys/sem.h&gt;</span></div>
<div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160; </div>
<div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;<span class="preprocessor">#include &lt;dirent.h&gt;</span>                    <span class="comment">/* directory functions        */</span></div>
<div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;<span class="preprocessor">#include &lt;sys/time.h&gt;</span>                  <span class="comment">/* needed for the select func */</span></div>
<div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160; </div>
<div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;<span class="preprocessor">#include &lt;time.h&gt;</span>                 <span class="comment">/* needed for the select func          */</span></div>
<div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160; </div>
<div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;<span class="preprocessor">#if defined( HAVE_SYS_SELECT_H )</span></div>
<div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;<span class="preprocessor">#include &lt;sys/select.h&gt;</span>           <span class="comment">/* needed for the select func          */</span></div>
<div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160; </div>
<div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;<span class="preprocessor">#if defined( HAVE_SYS_LDR_H )</span></div>
<div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;<span class="preprocessor">#include &lt;sys/ldr.h&gt;</span>              <span class="comment">/* needed for the load   func          */</span></div>
<div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160; </div>
<div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;<span class="preprocessor">#if defined( HAVE_STRINGS_H )</span></div>
<div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;<span class="preprocessor">#include &lt;strings.h&gt;</span></div>
<div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160; </div>
<div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;<span class="preprocessor">#include &lt;utime.h&gt;</span>                <span class="comment">/* moved, used by AIX &amp; Linux          */</span></div>
<div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160; </div>
<div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;<span class="preprocessor">#if defined( HAVE_SYS_RESOURCE_H )</span></div>
<div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;<span class="preprocessor">#include &lt;sys/resource.h&gt;</span>              <span class="comment">/* get the getpriority() func */</span></div>
<div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160; </div>
<div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;<span class="preprocessor">#if defined( HAVE_FEATURES_H )</span></div>
<div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;<span class="preprocessor">#include &lt;features.h&gt;</span>                 <span class="comment">/* catopen()                  */</span></div>
<div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160; </div>
<div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;<span class="preprocessor">#if defined( HAVE_NL_TYPES_H )</span></div>
<div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;<span class="preprocessor">#include &lt;nl_types.h&gt;</span>                  <span class="comment">/* catopen()                  */</span></div>
<div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160; </div>
<div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;<span class="preprocessor">#include &lt;termios.h&gt;</span>                   <span class="comment">/* needed for SysGetKey       */</span></div>
<div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;<span class="preprocessor">#include &lt;fnmatch.h&gt;</span>                   <span class="comment">/* fnmatch()                  */</span></div>
<div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;<span class="preprocessor">#include &lt;libgen.h&gt;</span>                    <span class="comment">/* dirname, basename          */</span></div>
<div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160; </div>
<div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="_rexx_util_common_8hpp.html">RexxUtilCommon.hpp</a>&quot;</span></div>
<div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="_utilities_8hpp.html">Utilities.hpp</a>&quot;</span></div>
<div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="_rexx_internal_apis_8h.html">RexxInternalApis.h</a>&quot;</span></div>
<div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160; </div>
<div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;<span class="preprocessor">#if defined __APPLE__</span></div>
<div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;<span class="preprocessor">#define open64 open</span></div>
<div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;<span class="comment">// avoid warning: &#39;(l)stat64&#39; is deprecated: first deprecated in macOS 10.6</span></div>
<div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;<span class="preprocessor">#define stat64 stat</span></div>
<div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;<span class="preprocessor">#define lstat64 lstat</span></div>
<div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160; </div>
<div class="line"><a name="l00175"></a><span class="lineno"><a class="line" href="unix_2_sys_rexx_util_8cpp.html#abcdf5a573b42c526e95a0ff6c4339d78">  175</a></span>&#160;<span class="preprocessor">#define REXXMESSAGEFILE    &quot;rexx.cat&quot;</span></div>
<div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160; </div>
<div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160; </div>
<div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;<span class="comment">/*********************************************************************/</span></div>
<div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;<span class="comment">/* Numeric Error Return Strings                                      */</span></div>
<div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;<span class="comment">/*********************************************************************/</span></div>
<div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160; </div>
<div class="line"><a name="l00182"></a><span class="lineno"><a class="line" href="unix_2_sys_rexx_util_8cpp.html#a6a24fbb8516a67c00ceb454e189be4ac">  182</a></span>&#160;<span class="preprocessor">#define  ERROR_NOMEM      &quot;2&quot;</span>          <span class="comment">/* Insufficient memory        */</span><span class="preprocessor"></span></div>
<div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160; </div>
<div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;<span class="comment">/******************************************************************************/</span></div>
<div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;<span class="comment">/* Defines used by SysGetKey                                                  */</span></div>
<div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;<span class="comment">/******************************************************************************/</span></div>
<div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160; </div>
<div class="line"><a name="l00188"></a><span class="lineno"><a class="line" href="unix_2_sys_rexx_util_8cpp.html#a007f0b4100064dd50772509ec06a6575">  188</a></span>&#160;<span class="preprocessor">#define stty(a,b)         (void)tcsetattr(a,TCSANOW,b) </span><span class="comment">/* simple set attr.    */</span><span class="preprocessor"></span></div>
<div class="line"><a name="l00189"></a><span class="lineno"><a class="line" href="unix_2_sys_rexx_util_8cpp.html#a6333d9197444bd8b891f0ddc1bfaca0e">  189</a></span>&#160;<span class="preprocessor">#define gtty(a,b)         (void)tcgetattr(a,b)         </span><span class="comment">/* simple get attr.    */</span><span class="preprocessor"></span></div>
<div class="line"><a name="l00190"></a><span class="lineno"><a class="line" href="unix_2_sys_rexx_util_8cpp.html#a2b58137b5f74bb8ab5432c8920445c18">  190</a></span>&#160;<span class="preprocessor">#define discard_input(a)  tcflush(a,TCIFLUSH)          </span><span class="comment">/* simple flush        */</span><span class="preprocessor"></span></div>
<div class="line"><a name="l00191"></a><span class="lineno"><a class="line" href="unix_2_sys_rexx_util_8cpp.html#ae1362a1c00e1354d690a15e9ba82c1e6">  191</a></span>&#160;<span class="preprocessor">#define restore_tty(a)    stty(ttyfd,a)                </span><span class="comment">/* new settings STDIN  */</span><span class="preprocessor"></span></div>
<div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160; </div>
<div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160; </div>
<div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;<span class="comment">/* original terminal settings                                                 */</span></div>
<div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;<span class="keyword">struct </span>termios <a class="code" href="unix_2_sys_rexx_util_8cpp.html#a0ee1c3247f81b3e4c937ae42528d9362">in_orig</a>;                <span class="comment">/* original settings (important!!)     */</span></div>
<div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160; </div>
<div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160; </div>
<div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;<span class="comment">/*********************************************************************/</span></div>
<div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;<span class="comment">/****************  REXXUTIL Supporting Functions  ********************/</span></div>
<div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;<span class="comment">/****************  REXXUTIL Supporting Functions  ********************/</span></div>
<div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;<span class="comment">/****************  REXXUTIL Supporting Functions  ********************/</span></div>
<div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;<span class="comment">/*********************************************************************/</span></div>
<div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160; </div>
<div class="line"><a name="l00204"></a><span class="lineno"><a class="line" href="unix_2_sys_rexx_util_8cpp.html#ae4058954d612cdd54a7ef47dbb2f70eb">  204</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="unix_2_sys_rexx_util_8cpp.html#ae4058954d612cdd54a7ef47dbb2f70eb">restore_terminal</a>(<span class="keywordtype">int</span> signal)</div>
<div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;{</div>
<div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;    <a class="code" href="unix_2_sys_rexx_util_8cpp.html#a007f0b4100064dd50772509ec06a6575">stty</a>(STDIN_FILENO, &amp;<a class="code" href="unix_2_sys_rexx_util_8cpp.html#a0ee1c3247f81b3e4c937ae42528d9362">in_orig</a>);          <span class="comment">/* restore the terminal settings        */</span></div>
<div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;    <span class="keyword">raise</span>(signal);                         <span class="comment">/* propagate signal                     */</span></div>
<div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;}</div>
<div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160; </div>
<div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;<span class="comment">/******************************************************************************/</span></div>
<div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;<span class="comment">/* getkey                                                                     */</span></div>
<div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;<span class="comment">/******************************************************************************/</span></div>
<div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;<span class="comment">/* echo == false =&gt; no echo                                                   */</span></div>
<div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;<span class="comment">/* echo == true  =&gt; echo                                                      */</span></div>
<div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;<span class="comment">/******************************************************************************/</span></div>
<div class="line"><a name="l00216"></a><span class="lineno"><a class="line" href="unix_2_sys_rexx_util_8cpp.html#a7255a3fd7af0d5bcfa4aacaf7d1fee91">  216</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="unix_2_sys_rexx_util_8cpp.html#a7255a3fd7af0d5bcfa4aacaf7d1fee91">getkey</a>(<span class="keywordtype">char</span> *ret, <span class="keywordtype">bool</span> echo)</div>
<div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;{</div>
<div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;    <span class="comment">/* restore original TTY settings on exit */</span></div>
<div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160; </div>
<div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;    <span class="keywordtype">int</span> ttyfd = STDIN_FILENO;              <span class="comment">/* standard tty filedescriptor        */</span></div>
<div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;    <span class="comment">/* Set the cleanup handler for unconditional process termination              */</span></div>
<div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;    <span class="keyword">struct </span>sigaction new_action;</div>
<div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160; </div>
<div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160; </div>
<div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;    <span class="comment">/* Set up the structure to specify the new action                             */</span></div>
<div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;    new_action.sa_handler = <a class="code" href="unix_2_sys_rexx_util_8cpp.html#ae4058954d612cdd54a7ef47dbb2f70eb">restore_terminal</a>;</div>
<div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;    sigfillset(&amp;new_action.sa_mask);</div>
<div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;    new_action.sa_flags = SA_RESTART;</div>
<div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160; </div>
<div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;    <span class="comment">/* Termination signals                                                        */</span></div>
<div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;    sigaction(SIGINT, &amp;new_action, NULL);  <span class="comment">/* exitClear on SIGINT signal          */</span></div>
<div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;    sigaction(SIGTERM, &amp;new_action, NULL); <span class="comment">/* exitClear on SIGTERM signal         */</span></div>
<div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;    sigaction(SIGQUIT, &amp;new_action, NULL); <span class="comment">/* exitClear on SIGQUIT signal         */</span></div>
<div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;    sigaction(SIGHUP, &amp;new_action, NULL);  <span class="comment">/* exitClear on SIGHUP signal          */</span></div>
<div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;    sigaction(SIGTSTP, &amp;new_action, NULL); <span class="comment">/* exitClear on SIGTSTP signal         */</span></div>
<div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;    sigaction(SIGTTIN, &amp;new_action, NULL); <span class="comment">/* exitClear on SIGTTIN signal         */</span></div>
<div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;    sigaction(SIGTTOU, &amp;new_action, NULL); <span class="comment">/* exitClear on SIGTTOU signal         */</span></div>
<div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;    <span class="comment">/* Error signals                                                              */</span></div>
<div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;    sigaction(SIGSEGV, &amp;new_action, NULL); <span class="comment">/* exitClear on SIGSEGV signal         */</span></div>
<div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;    sigaction(SIGFPE, &amp;new_action, NULL);  <span class="comment">/* exitClear on SIGFPE signal          */</span></div>
<div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;    sigaction(SIGILL, &amp;new_action, NULL);  <span class="comment">/* exitClear on SIGILL signal          */</span></div>
<div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;    sigaction(SIGBUS, &amp;new_action, NULL);  <span class="comment">/* exitClear on SIGBUS signal          */</span></div>
<div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;    sigaction(SIGPIPE, &amp;new_action, NULL); <span class="comment">/* exitClear on broken pipe            */</span></div>
<div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160; </div>
<div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160; </div>
<div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;    <span class="keywordflow">if</span> (!isatty(ttyfd))                 <span class="comment">/* connected to a terminal ?          */</span></div>
<div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;    {</div>
<div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;        ret[0] = <span class="charliteral">&#39;\0&#39;</span>;</div>
<div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;        <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;    }</div>
<div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;    ttyfd = STDIN_FILENO;                 <span class="comment">/* STDIN_FILENO is out default fd     */</span></div>
<div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160; </div>
<div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;    <span class="comment">/* open tty                           */</span></div>
<div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;    ttyfd = open(<span class="stringliteral">&quot;/dev/tty&quot;</span>, O_RDONLY);   <span class="comment">/* get filedescriptor (fd) for tty    */</span></div>
<div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160; </div>
<div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;    <span class="keyword">struct </span>termios in_raw;                <span class="comment">/* global for save reset after SIGNAL */</span></div>
<div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160; </div>
<div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;    <a class="code" href="unix_2_sys_rexx_util_8cpp.html#a6333d9197444bd8b891f0ddc1bfaca0e">gtty</a>(ttyfd, &amp;<a class="code" href="unix_2_sys_rexx_util_8cpp.html#a0ee1c3247f81b3e4c937ae42528d9362">in_orig</a>);                <span class="comment">/* determine existing tty settings */</span></div>
<div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160; </div>
<div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;    <span class="comment">/* restore original TTY settings on exit */</span></div>
<div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160; </div>
<div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;    <span class="comment">/* change STDIN settings to raw */</span></div>
<div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;    <a class="code" href="unix_2_sys_rexx_util_8cpp.html#a6333d9197444bd8b891f0ddc1bfaca0e">gtty</a>(ttyfd, &amp;in_raw);                 <span class="comment">/* save old settings                  */</span></div>
<div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160; </div>
<div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;    in_raw.c_lflag &amp;= ~ICANON;            <span class="comment">/* no canonical mode                  */</span></div>
<div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;    <span class="keywordflow">if</span> (!echo)                            <span class="comment">/* no echo flag set                   */</span></div>
<div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;        in_raw.c_lflag &amp;= ~ECHO;            <span class="comment">/* no echo                            */</span></div>
<div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;    in_raw.c_cc[VMIN] = 1;                <span class="comment">/* read 1 byte before returning       */</span></div>
<div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;    in_raw.c_cc[VTIME] = 0;               <span class="comment">/* return immediatly (no timeout)     */</span></div>
<div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;    <a class="code" href="unix_2_sys_rexx_util_8cpp.html#a007f0b4100064dd50772509ec06a6575">stty</a>(ttyfd, &amp;in_raw);                 <span class="comment">/* execute settings now!              */</span></div>
<div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160; </div>
<div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160; </div>
<div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;    ret[0] = getchar();                   <span class="comment">/* read the char                      */</span></div>
<div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160; </div>
<div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;    ret[1] = <span class="charliteral">&#39;\0&#39;</span>;                        <span class="comment">/* terminate string                   */</span></div>
<div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160; </div>
<div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;    <a class="code" href="unix_2_sys_rexx_util_8cpp.html#ae1362a1c00e1354d690a15e9ba82c1e6">restore_tty</a>(&amp;<a class="code" href="unix_2_sys_rexx_util_8cpp.html#a0ee1c3247f81b3e4c937ae42528d9362">in_orig</a>);                <span class="comment">/* for standard I/O behavior          */</span></div>
<div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;    close(ttyfd);                         <span class="comment">/* close the terminal                 */</span></div>
<div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;    <span class="keywordflow">return</span> 0;                             <span class="comment">/* everything is fine                 */</span></div>
<div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;}</div>
<div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160; </div>
<div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;<span class="comment">// below are Windows-specific implementations of TreeFinder methods.</span></div>
<div class="line"><a name="l00283"></a><span class="lineno"><a class="line" href="unix_2_sys_rexx_util_8cpp.html#a55c6108da7c0d80fb384255554ac4fa4">  283</a></span>&#160;<span class="keyword">inline</span> <span class="keywordtype">char</span> <a class="code" href="unix_2_sys_rexx_util_8cpp.html#a55c6108da7c0d80fb384255554ac4fa4">typeOfEntry</a>(mode_t m)</div>
<div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;{</div>
<div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;    <span class="keywordflow">if</span> (S_ISLNK(m))</div>
<div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;    {</div>
<div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;        <span class="keywordflow">return</span> <span class="charliteral">&#39;l&#39;</span>;                <span class="comment">// symbolic link</span></div>
<div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;    }</div>
<div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (S_ISBLK(m))</div>
<div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;    {</div>
<div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;        <span class="keywordflow">return</span> <span class="charliteral">&#39;b&#39;</span>;                <span class="comment">// block device</span></div>
<div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;    }</div>
<div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (S_ISCHR(m))</div>
<div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;    {</div>
<div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;        <span class="keywordflow">return</span> <span class="charliteral">&#39;c&#39;</span>;                <span class="comment">// character device</span></div>
<div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;    }</div>
<div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (S_ISDIR(m))</div>
<div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;    {</div>
<div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;        <span class="keywordflow">return</span> <span class="charliteral">&#39;d&#39;</span>;                <span class="comment">// directory</span></div>
<div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;    }</div>
<div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (S_ISFIFO(m))</div>
<div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;    {</div>
<div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;        <span class="keywordflow">return</span> <span class="charliteral">&#39;p&#39;</span>;                <span class="comment">// FIFO</span></div>
<div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;    }</div>
<div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (S_ISSOCK(m))</div>
<div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;    {</div>
<div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;        <span class="keywordflow">return</span> <span class="charliteral">&#39;s&#39;</span>;                <span class="comment">// socket</span></div>
<div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;    }</div>
<div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;    {</div>
<div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;        <span class="keywordflow">return</span> <span class="charliteral">&#39;-&#39;</span>;                <span class="comment">// regular file</span></div>
<div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;    }</div>
<div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;}</div>
<div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;<span class="comment">/**</span></div>
<div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;<span class="comment"> * if this ends in a directory separator, add a *.* wildcard to the end</span></div>
<div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l00319"></a><span class="lineno"><a class="line" href="class_tree_finder.html#a6b9cb316539b42b36237028eb8204951">  319</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="class_tree_finder.html#a6b9cb316539b42b36237028eb8204951">TreeFinder::adjustDirectory</a>()</div>
<div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;{</div>
<div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;    <span class="comment">// if just a &quot;*&quot; wildcard, make it a wild card for the current directory</span></div>
<div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="class_tree_finder.html#acc73dc32282b020f26cf43f46c1dcdfa">fileSpec</a> == <span class="stringliteral">&quot;*&quot;</span>)</div>
<div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;    {</div>
<div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;        <a class="code" href="class_tree_finder.html#acc73dc32282b020f26cf43f46c1dcdfa">fileSpec</a> = <span class="stringliteral">&quot;./*&quot;</span>;</div>
<div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;    }</div>
<div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160; </div>
<div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;    <span class="comment">// if this ends in a directory separator, add a * wildcard to the end</span></div>
<div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="class_tree_finder.html#acc73dc32282b020f26cf43f46c1dcdfa">fileSpec</a>.<a class="code" href="class_file_name_buffer.html#a6491632e5158b477d0a09997dd208aae">endsWith</a>(<span class="charliteral">&#39;/&#39;</span>))</div>
<div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;    {</div>
<div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;        <a class="code" href="class_tree_finder.html#acc73dc32282b020f26cf43f46c1dcdfa">fileSpec</a> += <span class="stringliteral">&quot;*&quot;</span>;</div>
<div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;    }</div>
<div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;    <span class="comment">// if the end section is either /. or /.., we also add the wildcard</span></div>
<div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="class_tree_finder.html#acc73dc32282b020f26cf43f46c1dcdfa">fileSpec</a>.<a class="code" href="class_file_name_buffer.html#a6491632e5158b477d0a09997dd208aae">endsWith</a>(<span class="stringliteral">&quot;/.&quot;</span>) || <a class="code" href="class_tree_finder.html#acc73dc32282b020f26cf43f46c1dcdfa">fileSpec</a>.<a class="code" href="class_file_name_buffer.html#a6491632e5158b477d0a09997dd208aae">endsWith</a>(<span class="stringliteral">&quot;/..&quot;</span>))</div>
<div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;    {</div>
<div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;        <a class="code" href="class_tree_finder.html#acc73dc32282b020f26cf43f46c1dcdfa">fileSpec</a> += <span class="stringliteral">&quot;/*&quot;</span>;</div>
<div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;    }</div>
<div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;    <span class="comment">// if the spec starts with a ~, we need to expand the name.</span></div>
<div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="class_tree_finder.html#acc73dc32282b020f26cf43f46c1dcdfa">fileSpec</a>.<a class="code" href="class_file_name_buffer.html#abe2e58760c5c2553845be516a5f94e89">startsWith</a>(<span class="charliteral">&#39;~&#39;</span>))</div>
<div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;    {</div>
<div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;        <a class="code" href="class_sys_file_system.html#a4178c0be60d7087cb7293988dd6458f9">SysFileSystem::canonicalizeName</a>(<a class="code" href="class_tree_finder.html#acc73dc32282b020f26cf43f46c1dcdfa">fileSpec</a>);</div>
<div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;    }</div>
<div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;}<span class="comment"></span></div>
<div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;<span class="comment">/**</span></div>
<div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;<span class="comment"> * Perform any platform-specific adjustments to the platform specification.</span></div>
<div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l00346"></a><span class="lineno"><a class="line" href="class_tree_finder.html#a3739e861f7c64301134ca49ba5869d2b">  346</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="class_tree_finder.html#a3739e861f7c64301134ca49ba5869d2b">TreeFinder::adjustFileSpec</a>()</div>
<div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;{</div>
<div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;    <span class="comment">// this is a NOP for unix file systems</span></div>
<div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;}</div>
<div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160; </div>
<div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;<span class="comment">/**</span></div>
<div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;<span class="comment"> * Tests for illegal file name characters in fileSpec. The only really</span></div>
<div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;<span class="comment"> * forbidden characters in unix file names are &#39;/&#39; (which is allowed in</span></div>
<div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;<span class="comment"> * the path) and &#39;\0&#39; (which is the string terminator. This is really</span></div>
<div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;<span class="comment"> * a nop.</span></div>
<div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l00358"></a><span class="lineno"><a class="line" href="class_tree_finder.html#a6770f8b247bb95dbc230bb4fd8d18751">  358</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="class_tree_finder.html#a6770f8b247bb95dbc230bb4fd8d18751">TreeFinder::validateFileSpecName</a>()</div>
<div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;{</div>
<div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;    <span class="comment">// no extra validation required</span></div>
<div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;}</div>
<div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160; </div>
<div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;<span class="comment">/**</span></div>
<div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;<span class="comment"> * Perform platform-specific drive checks on the file spec. This only</span></div>
<div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;<span class="comment"> * applies to Windows.</span></div>
<div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;<span class="comment"> * @return true if this was processed, false if additional work is required.</span></div>
<div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l00370"></a><span class="lineno"><a class="line" href="class_tree_finder.html#ad22d76aa47d89fb73cb4e72306fc1dc0">  370</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="class_tree_finder.html#ad22d76aa47d89fb73cb4e72306fc1dc0">TreeFinder::checkNonPathDrive</a>()</div>
<div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;{</div>
<div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;    <span class="comment">// not a drive, this will need to be prepended by the current directory</span></div>
<div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;}</div>
<div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;<span class="comment">/**</span></div>
<div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;<span class="comment"> * Format the system-specific file time, attribute mask, and size for</span></div>
<div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;<span class="comment"> * the given file.</span></div>
<div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;<span class="comment"> * @param fileName The name of the file.</span></div>
<div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l00382"></a><span class="lineno"><a class="line" href="unix_2_sys_rexx_util_8cpp.html#a7f05a404e70ff76bbda7ba85bc5faf90">  382</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="unix_2_sys_rexx_util_8cpp.html#a7f05a404e70ff76bbda7ba85bc5faf90">formatFileAttributes</a>(<a class="code" href="class_tree_finder.html">TreeFinder</a> *finder, <a class="code" href="class_file_name_buffer.html">FileNameBuffer</a> &amp;foundFileLine, <a class="code" href="class_sys_file_iterator_1_1_file_attributes.html">SysFileIterator::FileAttributes</a> &amp;attributes)</div>
<div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;{</div>
<div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;    <span class="keywordtype">char</span> fileAttr[256];                 <span class="comment">// File attribute string of found file</span></div>
<div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160; </div>
<div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;<span class="preprocessor">#ifdef AIX</span></div>
<div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;    <span class="keyword">struct </span>tm stTimestamp;</div>
<div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;    <span class="keyword">struct </span>tm *timestamp = localtime_r(&amp;(attributes.<a class="code" href="class_sys_file_iterator_1_1_file_attributes.html#a7ed1219470ef7b82df4e45d534919928">findFileData</a>.st_mtime), &amp;stTimestamp);</div>
<div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;<span class="preprocessor">#else</span></div>
<div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;    <span class="keyword">struct </span>tm *timestamp = localtime(&amp;(attributes.<a class="code" href="class_sys_file_iterator_1_1_file_attributes.html#a7ed1219470ef7b82df4e45d534919928">findFileData</a>.st_mtime));</div>
<div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160; </div>
<div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;    <span class="comment">// tm_year is relative to 1900, with full year coverage of 0001 through 9999</span></div>
<div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;    <span class="keywordflow">if</span> (finder-&gt;<a class="code" href="class_tree_finder.html#afbce0a441b278520d2c2843f64ae289e">longTime</a>())</div>
<div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;    {</div>
<div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;        snprintf(fileAttr, <span class="keyword">sizeof</span>(fileAttr), <span class="stringliteral">&quot;%4d-%02d-%02d %02d:%02d:%02d  &quot;</span>,</div>
<div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;                 timestamp-&gt;tm_year + 1900, timestamp-&gt;tm_mon + 1, timestamp-&gt;tm_mday,</div>
<div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;                 timestamp-&gt;tm_hour, timestamp-&gt;tm_min, timestamp-&gt;tm_sec);</div>
<div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;    }</div>
<div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (finder-&gt;<a class="code" href="class_tree_finder.html#a4d9cf8dc1c33049c938cdaefdd98db67">editableTime</a>())</div>
<div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;    {</div>
<div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;        snprintf(fileAttr, <span class="keyword">sizeof</span>(fileAttr), <span class="stringliteral">&quot;%02d/%02d/%02d/%02d/%02d  &quot;</span>,</div>
<div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;                 (timestamp-&gt;tm_year + 10000) % 100, timestamp-&gt;tm_mon + 1, timestamp-&gt;tm_mday,</div>
<div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;                 timestamp-&gt;tm_hour, timestamp-&gt;tm_min);</div>
<div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;    }</div>
<div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;    {</div>
<div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;        snprintf(fileAttr, <span class="keyword">sizeof</span>(fileAttr), <span class="stringliteral">&quot;%2d/%02d/%02d  %2d:%02d%c  &quot;</span>,</div>
<div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;                 timestamp-&gt;tm_mon + 1, timestamp-&gt;tm_mday, (timestamp-&gt;tm_year  + 10000) % 100,</div>
<div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;                 timestamp-&gt;tm_hour &lt; 13 &amp;&amp; timestamp-&gt;tm_hour != 0 ?</div>
<div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;                  timestamp-&gt;tm_hour : abs(timestamp-&gt;tm_hour - 12),</div>
<div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;                 timestamp-&gt;tm_min, (timestamp-&gt;tm_hour &lt; 12 || timestamp-&gt;tm_hour == 24) ? <span class="charliteral">&#39;a&#39;</span> : <span class="charliteral">&#39;p&#39;</span>);</div>
<div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;    }</div>
<div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160; </div>
<div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;    <span class="comment">// this is the first part of the return value. Copy to the result buffer so we can</span></div>
<div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;    <span class="comment">// reuse the buffer</span></div>
<div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;    foundFileLine = fileAttr;</div>
<div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160; </div>
<div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;    <span class="comment">// now the size information</span></div>
<div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;    <span class="keywordflow">if</span> (finder-&gt;<a class="code" href="class_tree_finder.html#a2ce515910cf14af9f08937e0468fbfdb">longSize</a>())</div>
<div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;    {</div>
<div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;        snprintf(fileAttr, <span class="keyword">sizeof</span>(fileAttr), <span class="stringliteral">&quot;%20jd  &quot;</span>, (intmax_t)attributes.<a class="code" href="class_sys_file_iterator_1_1_file_attributes.html#a7ed1219470ef7b82df4e45d534919928">findFileData</a>.st_size);</div>
<div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;    }</div>
<div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;    {</div>
<div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;        <span class="keywordflow">if</span> (attributes.<a class="code" href="class_sys_file_iterator_1_1_file_attributes.html#a7ed1219470ef7b82df4e45d534919928">findFileData</a>.st_size &gt; 9999999999)</div>
<div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;        {</div>
<div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;            attributes.<a class="code" href="class_sys_file_iterator_1_1_file_attributes.html#a7ed1219470ef7b82df4e45d534919928">findFileData</a>.st_size = 9999999999;</div>
<div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;        }</div>
<div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;        snprintf(fileAttr, <span class="keyword">sizeof</span>(fileAttr), <span class="stringliteral">&quot;%10jd  &quot;</span>, (intmax_t)attributes.<a class="code" href="class_sys_file_iterator_1_1_file_attributes.html#a7ed1219470ef7b82df4e45d534919928">findFileData</a>.st_size);</div>
<div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;    }</div>
<div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160; </div>
<div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;    <span class="comment">// the order is time, size, attributes</span></div>
<div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;    foundFileLine += fileAttr;</div>
<div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160; </div>
<div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;    <span class="keywordtype">char</span> tp = <a class="code" href="unix_2_sys_rexx_util_8cpp.html#a55c6108da7c0d80fb384255554ac4fa4">typeOfEntry</a>(attributes.<a class="code" href="class_sys_file_iterator_1_1_file_attributes.html#a7ed1219470ef7b82df4e45d534919928">findFileData</a>.st_mode);</div>
<div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160; </div>
<div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;    mode_t st_mode = attributes.<a class="code" href="class_sys_file_iterator_1_1_file_attributes.html#a7ed1219470ef7b82df4e45d534919928">findFileData</a>.st_mode;</div>
<div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160; </div>
<div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;    <span class="comment">// SUID       If set, then replaces &quot;x&quot; in the owner permissions to &quot;s&quot;,</span></div>
<div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;    <span class="comment">// if owner has execute permissions, or to &quot;S&quot; otherwise. Examples:</span></div>
<div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;    <span class="comment">// -rws------ both owner execute and SUID are set</span></div>
<div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;    <span class="comment">// -r-S------ SUID is set, but owner execute is not set</span></div>
<div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160; </div>
<div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;    <span class="comment">// SGID       If set, then replaces &quot;x&quot; in the group permissions to &quot;s&quot;,</span></div>
<div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;    <span class="comment">// if group has execute permissions, or to &quot;S&quot; otherwise. Examples:</span></div>
<div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;    <span class="comment">// -rwxrws--- both group execute and SGID are set</span></div>
<div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;    <span class="comment">// -rwxr-S--- SGID is set, but group execute is not set</span></div>
<div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160; </div>
<div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;    <span class="comment">// Sticky  If set, then replaces &quot;x&quot; in the others permissions to &quot;t&quot;,</span></div>
<div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;    <span class="comment">// if others have execute permissions, or to &quot;T&quot; otherwise. Examples:</span></div>
<div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;    <span class="comment">// -rwxrwxrwt both others execute and sticky bit are set</span></div>
<div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;    <span class="comment">// -rwxrwxr-T sticky bit is set, but others execute is not set</span></div>
<div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;    snprintf(fileAttr, <span class="keyword">sizeof</span>(fileAttr), <span class="stringliteral">&quot;%c%c%c%c%c%c%c%c%c%c  &quot;</span>,</div>
<div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160;             tp,</div>
<div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;             (S_IRUSR &amp; st_mode) ? <span class="charliteral">&#39;r&#39;</span> : <span class="charliteral">&#39;-&#39;</span>,</div>
<div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;             (S_IWUSR &amp; st_mode) ? <span class="charliteral">&#39;w&#39;</span> : <span class="charliteral">&#39;-&#39;</span>,</div>
<div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160;             (S_ISUID &amp; st_mode) ? (S_IXUSR &amp; st_mode ? <span class="charliteral">&#39;s&#39;</span> : <span class="charliteral">&#39;S&#39;</span>) : (S_IXUSR &amp; st_mode ? <span class="charliteral">&#39;x&#39;</span> : <span class="charliteral">&#39;-&#39;</span>),</div>
<div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;             (S_IRGRP &amp; st_mode) ? <span class="charliteral">&#39;r&#39;</span> : <span class="charliteral">&#39;-&#39;</span>,</div>
<div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;             (S_IWGRP &amp; st_mode) ? <span class="charliteral">&#39;w&#39;</span> : <span class="charliteral">&#39;-&#39;</span>,</div>
<div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;             (S_ISGID &amp; st_mode) ? (S_IXGRP &amp; st_mode ? <span class="charliteral">&#39;s&#39;</span> : <span class="charliteral">&#39;S&#39;</span>) : (S_IXGRP &amp; st_mode ? <span class="charliteral">&#39;x&#39;</span> : <span class="charliteral">&#39;-&#39;</span>),</div>
<div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;             (S_IROTH &amp; st_mode) ? <span class="charliteral">&#39;r&#39;</span> : <span class="charliteral">&#39;-&#39;</span>,</div>
<div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;             (S_IWOTH &amp; st_mode) ? <span class="charliteral">&#39;w&#39;</span> : <span class="charliteral">&#39;-&#39;</span>,</div>
<div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;             (S_ISVTX &amp; st_mode) ? (S_IXOTH &amp; st_mode ? <span class="charliteral">&#39;t&#39;</span> : <span class="charliteral">&#39;T&#39;</span>) : (S_IXOTH &amp; st_mode ? <span class="charliteral">&#39;x&#39;</span> : <span class="charliteral">&#39;-&#39;</span>));</div>
<div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160; </div>
<div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160;    <span class="comment">// add on this section</span></div>
<div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;    foundFileLine += fileAttr;</div>
<div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160;}</div>
<div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160; </div>
<div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160;<span class="comment">/**</span></div>
<div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160;<span class="comment"> * Checks if this file should be part of the included result and adds it to the result set</span></div>
<div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160;<span class="comment"> * if it should be returned.</span></div>
<div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;<span class="comment"> * @param attributes The file attributes for the file we&#39;re checking.</span></div>
<div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l00477"></a><span class="lineno"><a class="line" href="class_tree_finder.html#ad89d28086b2df157d93f798864eb47c5">  477</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="class_tree_finder.html#ad89d28086b2df157d93f798864eb47c5">TreeFinder::checkFile</a>(<a class="code" href="class_sys_file_iterator_1_1_file_attributes.html">SysFileIterator::FileAttributes</a> &amp;attributes)</div>
<div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160;{</div>
<div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160; </div>
<div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160;    <span class="comment">// we have a directory, if we&#39;re not returning directories, we&#39;re done.</span></div>
<div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160;    <span class="comment">// otherwise, we need to perform additional name checks</span></div>
<div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160;    <span class="keywordflow">if</span> (S_ISDIR(attributes.<a class="code" href="class_sys_file_iterator_1_1_file_attributes.html#a7ed1219470ef7b82df4e45d534919928">findFileData</a>.st_mode))</div>
<div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160;    {</div>
<div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160;        <span class="keywordflow">if</span> (!<a class="code" href="class_tree_finder.html#a062654267e068792887d5905cb97d3bc">options</a>[<a class="code" href="class_tree_finder.html#a5c4a791393e4b768ef072d4dcf9996ada1da9e0efa2799217a99634e53d75001a">DO_DIRS</a>])</div>
<div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160;        {</div>
<div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160;            <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160;        }</div>
<div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160;    }</div>
<div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160;    {</div>
<div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160;        <span class="comment">// not a directory...if not looking for files, we&#39;re done</span></div>
<div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160;        <span class="keywordflow">if</span> (!<a class="code" href="class_tree_finder.html#a062654267e068792887d5905cb97d3bc">options</a>[<a class="code" href="class_tree_finder.html#a5c4a791393e4b768ef072d4dcf9996ada182c9612403b358fdeb3a0e641e8b7b2">DO_FILES</a>])</div>
<div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;        {</div>
<div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160;            <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160;        }</div>
<div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160;    }</div>
<div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160; </div>
<div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160;    <span class="comment">// if only the name is requested, create a string object and set the</span></div>
<div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160;    <span class="comment">// stem varaiable</span></div>
<div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="class_tree_finder.html#a43d0063ee437cb87acaa3fea2cdc31a6">nameOnly</a>())</div>
<div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160;    {</div>
<div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160;        <a class="code" href="class_tree_finder.html#a63157a8d75348d96b33c9082cded22f6">addResult</a>(<a class="code" href="class_tree_finder.html#a22df053b3af4a130eaddc8244dc5ceba">foundFile</a>);</div>
<div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160;    }</div>
<div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160; </div>
<div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160;    <span class="comment">// format all of the attributes and add them to the foundFile result</span></div>
<div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160;    <a class="code" href="unix_2_sys_rexx_util_8cpp.html#a7f05a404e70ff76bbda7ba85bc5faf90">formatFileAttributes</a>(<span class="keyword">this</span>, <a class="code" href="class_tree_finder.html#ad888865ea347ad955c445e1159b7a4da">foundFileLine</a>, attributes);</div>
<div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160; </div>
<div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160;    <span class="comment">// and finally add on the file name</span></div>
<div class="line"><a name="l00510"></a><span class="lineno">  510</span>&#160;    <a class="code" href="class_tree_finder.html#ad888865ea347ad955c445e1159b7a4da">foundFileLine</a> += <a class="code" href="class_tree_finder.html#a22df053b3af4a130eaddc8244dc5ceba">foundFile</a>;</div>
<div class="line"><a name="l00511"></a><span class="lineno">  511</span>&#160; </div>
<div class="line"><a name="l00512"></a><span class="lineno">  512</span>&#160;    <span class="comment">// add this to the stem</span></div>
<div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160;    <a class="code" href="class_tree_finder.html#a63157a8d75348d96b33c9082cded22f6">addResult</a>(<a class="code" href="class_tree_finder.html#ad888865ea347ad955c445e1159b7a4da">foundFileLine</a>);</div>
<div class="line"><a name="l00514"></a><span class="lineno">  514</span>&#160;}</div>
<div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160; </div>
<div class="line"><a name="l00516"></a><span class="lineno">  516</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00517"></a><span class="lineno">  517</span>&#160;<span class="comment">/**</span></div>
<div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160;<span class="comment"> * Platform-specific TreeFinder method for locating the end of the</span></div>
<div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160;<span class="comment"> * fileSpec directory</span></div>
<div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00521"></a><span class="lineno">  521</span>&#160;<span class="comment"> * @return The position of the end of the directory. -1 indicates the file spec</span></div>
<div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160;<span class="comment"> *         does not contain a directory.</span></div>
<div class="line"><a name="l00523"></a><span class="lineno">  523</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l00524"></a><span class="lineno"><a class="line" href="class_tree_finder.html#a249125a457591ca48c4e74854545799d">  524</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="class_tree_finder.html#a249125a457591ca48c4e74854545799d">TreeFinder::findDirectoryEnd</a>()</div>
<div class="line"><a name="l00525"></a><span class="lineno">  525</span>&#160;{</div>
<div class="line"><a name="l00526"></a><span class="lineno">  526</span>&#160;    <span class="comment">// Get the maximum position of the last &#39;\&#39;</span></div>
<div class="line"><a name="l00527"></a><span class="lineno">  527</span>&#160;    <span class="keywordtype">int</span> lastSlashPos = (int)<a class="code" href="class_tree_finder.html#acc73dc32282b020f26cf43f46c1dcdfa">fileSpec</a>.<a class="code" href="class_file_name_buffer.html#a6716a194791392dd168bbc37566e652a">length</a>() - 1;</div>
<div class="line"><a name="l00528"></a><span class="lineno">  528</span>&#160; </div>
<div class="line"><a name="l00529"></a><span class="lineno">  529</span>&#160;    <span class="comment">// Step back through fileSpec until at its beginning or at a &#39;/&#39; character</span></div>
<div class="line"><a name="l00530"></a><span class="lineno">  530</span>&#160;    <span class="keywordflow">while</span> (lastSlashPos &gt;= 0 &amp;&amp; <a class="code" href="class_tree_finder.html#acc73dc32282b020f26cf43f46c1dcdfa">fileSpec</a>.<a class="code" href="class_file_name_buffer.html#a55e0508ed640ffb2959816c441d1fb15">at</a>(lastSlashPos) != <span class="charliteral">&#39;/&#39;</span>)</div>
<div class="line"><a name="l00531"></a><span class="lineno">  531</span>&#160;    {</div>
<div class="line"><a name="l00532"></a><span class="lineno">  532</span>&#160;        --lastSlashPos;</div>
<div class="line"><a name="l00533"></a><span class="lineno">  533</span>&#160;    }</div>
<div class="line"><a name="l00534"></a><span class="lineno">  534</span>&#160; </div>
<div class="line"><a name="l00535"></a><span class="lineno">  535</span>&#160;    <span class="keywordflow">return</span> lastSlashPos;</div>
<div class="line"><a name="l00536"></a><span class="lineno">  536</span>&#160;}</div>
<div class="line"><a name="l00537"></a><span class="lineno">  537</span>&#160; </div>
<div class="line"><a name="l00538"></a><span class="lineno">  538</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00539"></a><span class="lineno">  539</span>&#160;<span class="comment">/**</span></div>
<div class="line"><a name="l00540"></a><span class="lineno">  540</span>&#160;<span class="comment"> * Perform any platform-specific fixup that might be required with</span></div>
<div class="line"><a name="l00541"></a><span class="lineno">  541</span>&#160;<span class="comment"> * the supplied path.</span></div>
<div class="line"><a name="l00542"></a><span class="lineno">  542</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l00543"></a><span class="lineno"><a class="line" href="class_tree_finder.html#ae868be5e940be0bf3f17477d46a02fff">  543</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="class_tree_finder.html#ae868be5e940be0bf3f17477d46a02fff">TreeFinder::fixupFilePath</a>()</div>
<div class="line"><a name="l00544"></a><span class="lineno">  544</span>&#160;{</div>
<div class="line"><a name="l00545"></a><span class="lineno">  545</span>&#160;    <span class="comment">// now go resolve current directories, userid, etc. to get a fully</span></div>
<div class="line"><a name="l00546"></a><span class="lineno">  546</span>&#160;    <span class="comment">// qualified name</span></div>
<div class="line"><a name="l00547"></a><span class="lineno">  547</span>&#160;    <a class="code" href="class_routine_qualified_name.html">RoutineQualifiedName</a> qualifiedName(<a class="code" href="class_tree_finder.html#aa0b1a5653c7e67d10dcb5ff3c07c6317">context</a>, <a class="code" href="class_tree_finder.html#a167c891316fbc292d7e6f26105aa13b5">filePath</a>);</div>
<div class="line"><a name="l00548"></a><span class="lineno">  548</span>&#160; </div>
<div class="line"><a name="l00549"></a><span class="lineno">  549</span>&#160;    <a class="code" href="class_tree_finder.html#a167c891316fbc292d7e6f26105aa13b5">filePath</a> = (<span class="keyword">const</span> <span class="keywordtype">char</span> *)qualifiedName;</div>
<div class="line"><a name="l00550"></a><span class="lineno">  550</span>&#160;    <span class="comment">// make sure this is terminated with a path delimiter</span></div>
<div class="line"><a name="l00551"></a><span class="lineno">  551</span>&#160;    <a class="code" href="class_tree_finder.html#a167c891316fbc292d7e6f26105aa13b5">filePath</a>.<a class="code" href="class_file_name_buffer.html#ad5f40320218a98a58bd54e54f78dc609">addFinalPathDelimiter</a>();</div>
<div class="line"><a name="l00552"></a><span class="lineno">  552</span>&#160;}</div>
<div class="line"><a name="l00553"></a><span class="lineno">  553</span>&#160; </div>
<div class="line"><a name="l00554"></a><span class="lineno">  554</span>&#160; </div>
<div class="line"><a name="l00555"></a><span class="lineno">  555</span>&#160;<span class="comment">/**********************************************************************</span></div>
<div class="line"><a name="l00556"></a><span class="lineno">  556</span>&#160;<span class="comment">* Function:  SysCls                                                   *</span></div>
<div class="line"><a name="l00557"></a><span class="lineno">  557</span>&#160;<span class="comment">*                                                                     *</span></div>
<div class="line"><a name="l00558"></a><span class="lineno">  558</span>&#160;<span class="comment">* Syntax:    call SysCls                                              *</span></div>
<div class="line"><a name="l00559"></a><span class="lineno">  559</span>&#160;<span class="comment">*                                                                     *</span></div>
<div class="line"><a name="l00560"></a><span class="lineno">  560</span>&#160;<span class="comment">* Return:    NO_UTIL_ERROR - Successful.                              *</span></div>
<div class="line"><a name="l00561"></a><span class="lineno">  561</span>&#160;<span class="comment">**********************************************************************/</span></div>
<div class="line"><a name="l00562"></a><span class="lineno"><a class="line" href="unix_2_sys_rexx_util_8cpp.html#a379643b4a1b8f467f7de46208cb47b46">  562</a></span>&#160;<a class="code" href="unix_2_sys_rexx_util_8cpp.html#a379643b4a1b8f467f7de46208cb47b46">RexxRoutine0</a>(<span class="keywordtype">int</span>, SysCls)</div>
<div class="line"><a name="l00563"></a><span class="lineno">  563</span>&#160;{</div>
<div class="line"><a name="l00564"></a><span class="lineno">  564</span>&#160;    <span class="keywordflow">return</span> system(<span class="stringliteral">&quot;clear&quot;</span>);</div>
<div class="line"><a name="l00565"></a><span class="lineno">  565</span>&#160;}</div>
<div class="line"><a name="l00566"></a><span class="lineno">  566</span>&#160; </div>
<div class="line"><a name="l00567"></a><span class="lineno">  567</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00568"></a><span class="lineno">  568</span>&#160;<span class="comment">/**</span></div>
<div class="line"><a name="l00569"></a><span class="lineno">  569</span>&#160;<span class="comment"> * SysMkDir creates a directory.  No intermediate directories are created.</span></div>
<div class="line"><a name="l00570"></a><span class="lineno">  570</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00571"></a><span class="lineno">  571</span>&#160;<span class="comment"> * @param path       The directory path.</span></div>
<div class="line"><a name="l00572"></a><span class="lineno">  572</span>&#160;<span class="comment"> * @param mode       Optional file mode.  Valid values are 0 .. 511.</span></div>
<div class="line"><a name="l00573"></a><span class="lineno">  573</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00574"></a><span class="lineno">  574</span>&#160;<span class="comment"> * @return zero if the directory was created successfully, else errno.</span></div>
<div class="line"><a name="l00575"></a><span class="lineno">  575</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l00576"></a><span class="lineno"><a class="line" href="unix_2_sys_rexx_util_8cpp.html#ae76cb3e703d83ba4aef58ac990d00ff3">  576</a></span>&#160;<a class="code" href="unix_2_sys_rexx_util_8cpp.html#ae76cb3e703d83ba4aef58ac990d00ff3">RexxRoutine2</a>(<span class="keywordtype">int</span>, SysMkDir, <a class="code" href="rexx_8h.html#a581e376dc8d3b9132e29014c896b9e70">CSTRING</a>, path, OPTIONAL_int32_t, mode)</div>
<div class="line"><a name="l00577"></a><span class="lineno">  577</span>&#160;{</div>
<div class="line"><a name="l00578"></a><span class="lineno">  578</span>&#160;    <a class="code" href="class_routine_qualified_name.html">RoutineQualifiedName</a> qualifiedName(context, path);</div>
<div class="line"><a name="l00579"></a><span class="lineno">  579</span>&#160; </div>
<div class="line"><a name="l00580"></a><span class="lineno">  580</span>&#160;    <span class="comment">// Create the directory.  By default, we create with all mode bits set,</span></div>
<div class="line"><a name="l00581"></a><span class="lineno">  581</span>&#160;    <span class="comment">// but the directory will always be created with the restrictions</span></div>
<div class="line"><a name="l00582"></a><span class="lineno">  582</span>&#160;    <span class="comment">// specified with the umask command.</span></div>
<div class="line"><a name="l00583"></a><span class="lineno">  583</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="oorexxapi_8h.html#a895bccfb4968ae24b153351beadd50f7">argumentOmitted</a>(2))</div>
<div class="line"><a name="l00584"></a><span class="lineno">  584</span>&#160;    {</div>
<div class="line"><a name="l00585"></a><span class="lineno">  585</span>&#160;        mode = S_IRWXU | S_IRWXG | S_IRWXO;</div>
<div class="line"><a name="l00586"></a><span class="lineno">  586</span>&#160;    }</div>
<div class="line"><a name="l00587"></a><span class="lineno">  587</span>&#160;    <span class="keywordflow">return</span> mkdir(qualifiedName, mode) == 0 ? 0 : errno;</div>
<div class="line"><a name="l00588"></a><span class="lineno">  588</span>&#160;}</div>
<div class="line"><a name="l00589"></a><span class="lineno">  589</span>&#160; </div>
<div class="line"><a name="l00590"></a><span class="lineno">  590</span>&#160; </div>
<div class="line"><a name="l00591"></a><span class="lineno">  591</span>&#160;<span class="comment">/*************************************************************************</span></div>
<div class="line"><a name="l00592"></a><span class="lineno">  592</span>&#160;<span class="comment">* Function:  SysVersion                                                  *</span></div>
<div class="line"><a name="l00593"></a><span class="lineno">  593</span>&#160;<span class="comment">*                                                                        *</span></div>
<div class="line"><a name="l00594"></a><span class="lineno">  594</span>&#160;<span class="comment">* Syntax:    call SysVersion                                             *</span></div>
<div class="line"><a name="l00595"></a><span class="lineno">  595</span>&#160;<span class="comment">*                                                                        *</span></div>
<div class="line"><a name="l00596"></a><span class="lineno">  596</span>&#160;<span class="comment">* Return:    Operating System name (LINUX/AIX/WINDOWS) and Version       *</span></div>
<div class="line"><a name="l00597"></a><span class="lineno">  597</span>&#160;<span class="comment">*************************************************************************/</span></div>
<div class="line"><a name="l00598"></a><span class="lineno"><a class="line" href="unix_2_sys_rexx_util_8cpp.html#a44b19c2ba4aca81864d32607be39ca7e">  598</a></span>&#160;<a class="code" href="unix_2_sys_rexx_util_8cpp.html#a379643b4a1b8f467f7de46208cb47b46">RexxRoutine0</a>(<a class="code" href="rexx_8h.html#a64dfe004825692637e2075467179fcd9">RexxStringObject</a>, SysVersion)</div>
<div class="line"><a name="l00599"></a><span class="lineno">  599</span>&#160;{</div>
<div class="line"><a name="l00600"></a><span class="lineno">  600</span>&#160;    <span class="keyword">struct </span>utsname info;                 <span class="comment">/* info structur              */</span></div>
<div class="line"><a name="l00601"></a><span class="lineno">  601</span>&#160; </div>
<div class="line"><a name="l00602"></a><span class="lineno">  602</span>&#160;    <span class="keywordflow">if</span> (uname(&amp;info) &lt; 0)</div>
<div class="line"><a name="l00603"></a><span class="lineno">  603</span>&#160;    {                     <span class="comment">/* if no info stored          */</span></div>
<div class="line"><a name="l00604"></a><span class="lineno">  604</span>&#160;        context-&gt;InvalidRoutine();</div>
<div class="line"><a name="l00605"></a><span class="lineno">  605</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="rexx_8h.html#a9a119fa1e31a4af78dee3c12225b240a">NULLOBJECT</a>;</div>
<div class="line"><a name="l00606"></a><span class="lineno">  606</span>&#160;    }</div>
<div class="line"><a name="l00607"></a><span class="lineno">  607</span>&#160; </div>
<div class="line"><a name="l00608"></a><span class="lineno">  608</span>&#160;    <span class="keywordtype">char</span> retstr[256];</div>
<div class="line"><a name="l00609"></a><span class="lineno">  609</span>&#160; </div>
<div class="line"><a name="l00610"></a><span class="lineno">  610</span>&#160;    snprintf(retstr, <span class="keyword">sizeof</span>(retstr), <span class="stringliteral">&quot;%s %s&quot;</span>, info.sysname, info.release);</div>
<div class="line"><a name="l00611"></a><span class="lineno">  611</span>&#160;    <span class="keywordflow">return</span> context-&gt;NewStringFromAsciiz(retstr);</div>
<div class="line"><a name="l00612"></a><span class="lineno">  612</span>&#160;}</div>
<div class="line"><a name="l00613"></a><span class="lineno">  613</span>&#160; </div>
<div class="line"><a name="l00614"></a><span class="lineno">  614</span>&#160; </div>
<div class="line"><a name="l00615"></a><span class="lineno">  615</span>&#160;<span class="comment">// macOS doesn&#39;t support any of the sem_xxx functions</span></div>
<div class="line"><a name="l00616"></a><span class="lineno">  616</span>&#160;<span class="preprocessor">#if !defined __APPLE__</span></div>
<div class="line"><a name="l00617"></a><span class="lineno">  617</span>&#160; </div>
<div class="line"><a name="l00618"></a><span class="lineno">  618</span>&#160;<span class="comment">/*************************************************************************</span></div>
<div class="line"><a name="l00619"></a><span class="lineno">  619</span>&#160;<span class="comment">* Semaphore data struct                                                  *</span></div>
<div class="line"><a name="l00620"></a><span class="lineno">  620</span>&#160;<span class="comment">*************************************************************************/</span></div>
<div class="line"><a name="l00621"></a><span class="lineno">  621</span>&#160; </div>
<div class="line"><a name="l00622"></a><span class="lineno"><a class="line" href="struct_rx_sem_data.html">  622</a></span>&#160;<span class="keyword">typedef</span> <span class="keyword">struct </span><a class="code" href="struct_rx_sem_data.html">RxSemData</a></div>
<div class="line"><a name="l00623"></a><span class="lineno">  623</span>&#160;{</div>
<div class="line"><a name="l00624"></a><span class="lineno"><a class="line" href="struct_rx_sem_data.html#a4c3832abbea5592f324dd2c43e16c12c">  624</a></span>&#160;     <span class="keywordtype">bool</span>          <a class="code" href="struct_rx_sem_data.html#a4c3832abbea5592f324dd2c43e16c12c">named</a>;               <span class="comment">/* Named semaphore?           */</span></div>
<div class="line"><a name="l00625"></a><span class="lineno"><a class="line" href="struct_rx_sem_data.html#a886bafc79e2d9fab1036d2b71d31ca25">  625</a></span>&#160;     sem_t *<a class="code" href="struct_rx_sem_data.html#a886bafc79e2d9fab1036d2b71d31ca25">handle</a>;              <span class="comment">/* Semaphore pointer          */</span></div>
<div class="line"><a name="l00626"></a><span class="lineno"><a class="line" href="unix_2_sys_rexx_util_8cpp.html#a4ef13fe883b83d45549a13ba7aa20943">  626</a></span>&#160;} <a class="code" href="unix_2_sys_rexx_util_8cpp.html#a4ef13fe883b83d45549a13ba7aa20943">RXSEMDATA</a>;</div>
<div class="line"><a name="l00627"></a><span class="lineno">  627</span>&#160; </div>
<div class="line"><a name="l00628"></a><span class="lineno">  628</span>&#160; </div>
<div class="line"><a name="l00629"></a><span class="lineno">  629</span>&#160;<span class="comment">/*************************************************************************</span></div>
<div class="line"><a name="l00630"></a><span class="lineno">  630</span>&#160;<span class="comment">* Function:  SysCreateEventSem                                           *</span></div>
<div class="line"><a name="l00631"></a><span class="lineno">  631</span>&#160;<span class="comment">*                                                                        *</span></div>
<div class="line"><a name="l00632"></a><span class="lineno">  632</span>&#160;<span class="comment">* Syntax:    handle = SysCreateEventSem(&lt;name&gt;)                          *</span></div>
<div class="line"><a name="l00633"></a><span class="lineno">  633</span>&#160;<span class="comment">*                                                                        *</span></div>
<div class="line"><a name="l00634"></a><span class="lineno">  634</span>&#160;<span class="comment">* Params:    name  - optional name for a event semaphore                 *</span></div>
<div class="line"><a name="l00635"></a><span class="lineno">  635</span>&#160;<span class="comment">*                                                                        *</span></div>
<div class="line"><a name="l00636"></a><span class="lineno">  636</span>&#160;<span class="comment">* Return:    handle - token used as a event sem handle for               *</span></div>
<div class="line"><a name="l00637"></a><span class="lineno">  637</span>&#160;<span class="comment">*                     SysPostEventSem, SysClearEventSem,                 *</span></div>
<div class="line"><a name="l00638"></a><span class="lineno">  638</span>&#160;<span class="comment">*                     SysCloseEventSem, and SysOpenEventSem              *</span></div>
<div class="line"><a name="l00639"></a><span class="lineno">  639</span>&#160;<span class="comment">*            &#39;&#39; - Empty string in case of any error                      *</span></div>
<div class="line"><a name="l00640"></a><span class="lineno">  640</span>&#160;<span class="comment">*************************************************************************/</span></div>
<div class="line"><a name="l00641"></a><span class="lineno">  641</span>&#160; </div>
<div class="line"><a name="l00642"></a><span class="lineno"><a class="line" href="unix_2_sys_rexx_util_8cpp.html#a822df6c176f05b4585df40629af2d8c4">  642</a></span>&#160;<a class="code" href="unix_2_sys_rexx_util_8cpp.html#ae76cb3e703d83ba4aef58ac990d00ff3">RexxRoutine2</a>(<a class="code" href="rexx_8h.html#a96e0cc5eda42aed364b05f3c493e07e8">RexxObjectPtr</a>, SysCreateEventSem, OPTIONAL_CSTRING, name, OPTIONAL_CSTRING, reset)</div>
<div class="line"><a name="l00643"></a><span class="lineno">  643</span>&#160;{</div>
<div class="line"><a name="l00644"></a><span class="lineno">  644</span>&#160;    <a class="code" href="struct_rx_sem_data.html">RXSEMDATA</a> *semdata;</div>
<div class="line"><a name="l00645"></a><span class="lineno">  645</span>&#160;    <span class="keywordtype">int</span> rc;</div>
<div class="line"><a name="l00646"></a><span class="lineno">  646</span>&#160; </div>
<div class="line"><a name="l00647"></a><span class="lineno">  647</span>&#160;    <span class="comment">// Note that the reset arg has no meaning on Unix/Linux and is unused.</span></div>
<div class="line"><a name="l00648"></a><span class="lineno">  648</span>&#160;    semdata = (<a class="code" href="struct_rx_sem_data.html">RXSEMDATA</a> *)malloc(<span class="keyword">sizeof</span>(<a class="code" href="struct_rx_sem_data.html">RXSEMDATA</a>));</div>
<div class="line"><a name="l00649"></a><span class="lineno">  649</span>&#160;    <span class="keywordflow">if</span> (semdata == NULL)</div>
<div class="line"><a name="l00650"></a><span class="lineno">  650</span>&#160;    {</div>
<div class="line"><a name="l00651"></a><span class="lineno">  651</span>&#160;        <span class="keywordflow">return</span> context-&gt;String(<span class="stringliteral">&quot;&quot;</span>);</div>
<div class="line"><a name="l00652"></a><span class="lineno">  652</span>&#160;    }</div>
<div class="line"><a name="l00653"></a><span class="lineno">  653</span>&#160;    <span class="keywordflow">if</span> (name == NULL)</div>
<div class="line"><a name="l00654"></a><span class="lineno">  654</span>&#160;    {</div>
<div class="line"><a name="l00655"></a><span class="lineno">  655</span>&#160;        <span class="comment">/* this is an unnamed semaphore */</span></div>
<div class="line"><a name="l00656"></a><span class="lineno">  656</span>&#160;        semdata-&gt;<a class="code" href="struct_rx_sem_data.html#a886bafc79e2d9fab1036d2b71d31ca25">handle</a> = (sem_t *)malloc(<span class="keyword">sizeof</span>(sem_t));</div>
<div class="line"><a name="l00657"></a><span class="lineno">  657</span>&#160;        rc = sem_init(semdata-&gt;<a class="code" href="struct_rx_sem_data.html#a886bafc79e2d9fab1036d2b71d31ca25">handle</a>, 0, 0);</div>
<div class="line"><a name="l00658"></a><span class="lineno">  658</span>&#160;        <span class="keywordflow">if</span> (rc == -1)</div>
<div class="line"><a name="l00659"></a><span class="lineno">  659</span>&#160;        {</div>
<div class="line"><a name="l00660"></a><span class="lineno">  660</span>&#160;            free(semdata);</div>
<div class="line"><a name="l00661"></a><span class="lineno">  661</span>&#160;            <span class="keywordflow">return</span> context-&gt;String(<span class="stringliteral">&quot;&quot;</span>);</div>
<div class="line"><a name="l00662"></a><span class="lineno">  662</span>&#160;        }</div>
<div class="line"><a name="l00663"></a><span class="lineno">  663</span>&#160;        semdata-&gt;<a class="code" href="struct_rx_sem_data.html#a4c3832abbea5592f324dd2c43e16c12c">named</a> = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00664"></a><span class="lineno">  664</span>&#160;    }</div>
<div class="line"><a name="l00665"></a><span class="lineno">  665</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l00666"></a><span class="lineno">  666</span>&#160;    {</div>
<div class="line"><a name="l00667"></a><span class="lineno">  667</span>&#160;        <span class="comment">/* this is a named semaphore */</span></div>
<div class="line"><a name="l00668"></a><span class="lineno">  668</span>&#160;        semdata-&gt;<a class="code" href="struct_rx_sem_data.html#a886bafc79e2d9fab1036d2b71d31ca25">handle</a> = sem_open(name, (O_CREAT | O_EXCL), (S_IRWXU | S_IRWXG), 0);</div>
<div class="line"><a name="l00669"></a><span class="lineno">  669</span>&#160;        <span class="keywordflow">if</span> (semdata-&gt;<a class="code" href="struct_rx_sem_data.html#a886bafc79e2d9fab1036d2b71d31ca25">handle</a> == SEM_FAILED)</div>
<div class="line"><a name="l00670"></a><span class="lineno">  670</span>&#160;        {</div>
<div class="line"><a name="l00671"></a><span class="lineno">  671</span>&#160;            free(semdata);</div>
<div class="line"><a name="l00672"></a><span class="lineno">  672</span>&#160;            <span class="keywordflow">return</span> context-&gt;String(<span class="stringliteral">&quot;&quot;</span>);</div>
<div class="line"><a name="l00673"></a><span class="lineno">  673</span>&#160;        }</div>
<div class="line"><a name="l00674"></a><span class="lineno">  674</span>&#160;        semdata-&gt;<a class="code" href="struct_rx_sem_data.html#a4c3832abbea5592f324dd2c43e16c12c">named</a> = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00675"></a><span class="lineno">  675</span>&#160;    }</div>
<div class="line"><a name="l00676"></a><span class="lineno">  676</span>&#160;    <span class="keywordflow">return</span> context-&gt;Uintptr((<a class="code" href="windows_2rexxapitypes_8h.html#a2f338919cf0aa5c3d87df8096b8fa972">uintptr_t</a>)semdata);</div>
<div class="line"><a name="l00677"></a><span class="lineno">  677</span>&#160;}</div>
<div class="line"><a name="l00678"></a><span class="lineno">  678</span>&#160; </div>
<div class="line"><a name="l00679"></a><span class="lineno">  679</span>&#160; </div>
<div class="line"><a name="l00680"></a><span class="lineno">  680</span>&#160;<span class="comment">/*************************************************************************</span></div>
<div class="line"><a name="l00681"></a><span class="lineno">  681</span>&#160;<span class="comment">* Function:  SysOpenEventSem                                             *</span></div>
<div class="line"><a name="l00682"></a><span class="lineno">  682</span>&#160;<span class="comment">*                                                                        *</span></div>
<div class="line"><a name="l00683"></a><span class="lineno">  683</span>&#160;<span class="comment">* Syntax:    result = SysOpenEventSem(handle)                            *</span></div>
<div class="line"><a name="l00684"></a><span class="lineno">  684</span>&#160;<span class="comment">*                                                                        *</span></div>
<div class="line"><a name="l00685"></a><span class="lineno">  685</span>&#160;<span class="comment">* Params:    handle - token returned from SysCreateEventSem              *</span></div>
<div class="line"><a name="l00686"></a><span class="lineno">  686</span>&#160;<span class="comment">*                                                                        *</span></div>
<div class="line"><a name="l00687"></a><span class="lineno">  687</span>&#160;<span class="comment">* Return:    result - return code from DosOpenEventSem                   *</span></div>
<div class="line"><a name="l00688"></a><span class="lineno">  688</span>&#160;<span class="comment">*************************************************************************/</span></div>
<div class="line"><a name="l00689"></a><span class="lineno"><a class="line" href="unix_2_sys_rexx_util_8cpp.html#aa99b04951a3dd00e93a76a3e69bc83f2">  689</a></span>&#160;<a class="code" href="unix_2_sys_rexx_util_8cpp.html#aa99b04951a3dd00e93a76a3e69bc83f2">RexxRoutine1</a>(<a class="code" href="windows_2rexxapitypes_8h.html#a2f338919cf0aa5c3d87df8096b8fa972">uintptr_t</a>, SysOpenEventSem, <a class="code" href="rexx_8h.html#a581e376dc8d3b9132e29014c896b9e70">CSTRING</a>, name)</div>
<div class="line"><a name="l00690"></a><span class="lineno">  690</span>&#160;{</div>
<div class="line"><a name="l00691"></a><span class="lineno">  691</span>&#160;    <a class="code" href="struct_rx_sem_data.html">RXSEMDATA</a> *semdata;</div>
<div class="line"><a name="l00692"></a><span class="lineno">  692</span>&#160; </div>
<div class="line"><a name="l00693"></a><span class="lineno">  693</span>&#160;    semdata = (<a class="code" href="struct_rx_sem_data.html">RXSEMDATA</a> *)malloc(<span class="keyword">sizeof</span>(<a class="code" href="struct_rx_sem_data.html">RXSEMDATA</a>));</div>
<div class="line"><a name="l00694"></a><span class="lineno">  694</span>&#160;    <span class="keywordflow">if</span> (semdata == NULL)</div>
<div class="line"><a name="l00695"></a><span class="lineno">  695</span>&#160;    {</div>
<div class="line"><a name="l00696"></a><span class="lineno">  696</span>&#160;        <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00697"></a><span class="lineno">  697</span>&#160;    }</div>
<div class="line"><a name="l00698"></a><span class="lineno">  698</span>&#160;    semdata-&gt;<a class="code" href="struct_rx_sem_data.html#a886bafc79e2d9fab1036d2b71d31ca25">handle</a> = sem_open(name, 0);</div>
<div class="line"><a name="l00699"></a><span class="lineno">  699</span>&#160;    <span class="keywordflow">if</span> (semdata-&gt;<a class="code" href="struct_rx_sem_data.html#a886bafc79e2d9fab1036d2b71d31ca25">handle</a> == SEM_FAILED)</div>
<div class="line"><a name="l00700"></a><span class="lineno">  700</span>&#160;    {</div>
<div class="line"><a name="l00701"></a><span class="lineno">  701</span>&#160;        <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00702"></a><span class="lineno">  702</span>&#160;    }</div>
<div class="line"><a name="l00703"></a><span class="lineno">  703</span>&#160;    semdata-&gt;<a class="code" href="struct_rx_sem_data.html#a4c3832abbea5592f324dd2c43e16c12c">named</a> = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00704"></a><span class="lineno">  704</span>&#160;    <span class="keywordflow">return</span> (<a class="code" href="windows_2rexxapitypes_8h.html#a2f338919cf0aa5c3d87df8096b8fa972">uintptr_t</a>)semdata;</div>
<div class="line"><a name="l00705"></a><span class="lineno">  705</span>&#160;}</div>
<div class="line"><a name="l00706"></a><span class="lineno">  706</span>&#160; </div>
<div class="line"><a name="l00707"></a><span class="lineno">  707</span>&#160; </div>
<div class="line"><a name="l00708"></a><span class="lineno">  708</span>&#160;<span class="comment">/*************************************************************************</span></div>
<div class="line"><a name="l00709"></a><span class="lineno">  709</span>&#160;<span class="comment">* Function:  SysResetEventSem                                            *</span></div>
<div class="line"><a name="l00710"></a><span class="lineno">  710</span>&#160;<span class="comment">*                                                                        *</span></div>
<div class="line"><a name="l00711"></a><span class="lineno">  711</span>&#160;<span class="comment">* Syntax:    result = SysResetEventSem(handle)                           *</span></div>
<div class="line"><a name="l00712"></a><span class="lineno">  712</span>&#160;<span class="comment">*                                                                        *</span></div>
<div class="line"><a name="l00713"></a><span class="lineno">  713</span>&#160;<span class="comment">* Params:    handle - token returned from SysCreateEventSem              *</span></div>
<div class="line"><a name="l00714"></a><span class="lineno">  714</span>&#160;<span class="comment">*                                                                        *</span></div>
<div class="line"><a name="l00715"></a><span class="lineno">  715</span>&#160;<span class="comment">* Return:    result - return code from DosResetEventSem                  *</span></div>
<div class="line"><a name="l00716"></a><span class="lineno">  716</span>&#160;<span class="comment">*************************************************************************/</span></div>
<div class="line"><a name="l00717"></a><span class="lineno">  717</span>&#160; </div>
<div class="line"><a name="l00718"></a><span class="lineno"><a class="line" href="unix_2_sys_rexx_util_8cpp.html#aaa6834ed568ff857ffe1ad9951d9599b">  718</a></span>&#160;<a class="code" href="unix_2_sys_rexx_util_8cpp.html#aa99b04951a3dd00e93a76a3e69bc83f2">RexxRoutine1</a>(<span class="keywordtype">int</span>, SysResetEventSem, <a class="code" href="windows_2rexxapitypes_8h.html#a2f338919cf0aa5c3d87df8096b8fa972">uintptr_t</a>, vhandle)</div>
<div class="line"><a name="l00719"></a><span class="lineno">  719</span>&#160;{</div>
<div class="line"><a name="l00720"></a><span class="lineno">  720</span>&#160;    <a class="code" href="struct_rx_sem_data.html">RXSEMDATA</a> *semdata = (<a class="code" href="struct_rx_sem_data.html">RXSEMDATA</a> *)vhandle;</div>
<div class="line"><a name="l00721"></a><span class="lineno">  721</span>&#160; </div>
<div class="line"><a name="l00722"></a><span class="lineno">  722</span>&#160;    sem_init(semdata-&gt;<a class="code" href="struct_rx_sem_data.html#a886bafc79e2d9fab1036d2b71d31ca25">handle</a>, 1, 0);</div>
<div class="line"><a name="l00723"></a><span class="lineno">  723</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00724"></a><span class="lineno">  724</span>&#160;}</div>
<div class="line"><a name="l00725"></a><span class="lineno">  725</span>&#160; </div>
<div class="line"><a name="l00726"></a><span class="lineno">  726</span>&#160; </div>
<div class="line"><a name="l00727"></a><span class="lineno">  727</span>&#160;<span class="comment">/*************************************************************************</span></div>
<div class="line"><a name="l00728"></a><span class="lineno">  728</span>&#160;<span class="comment">* Function:  SysPostEventSem                                             *</span></div>
<div class="line"><a name="l00729"></a><span class="lineno">  729</span>&#160;<span class="comment">*                                                                        *</span></div>
<div class="line"><a name="l00730"></a><span class="lineno">  730</span>&#160;<span class="comment">* Syntax:    result = SysPostEventSem(handle)                            *</span></div>
<div class="line"><a name="l00731"></a><span class="lineno">  731</span>&#160;<span class="comment">*                                                                        *</span></div>
<div class="line"><a name="l00732"></a><span class="lineno">  732</span>&#160;<span class="comment">* Params:    handle - token returned from SysCreateEventSem              *</span></div>
<div class="line"><a name="l00733"></a><span class="lineno">  733</span>&#160;<span class="comment">*                                                                        *</span></div>
<div class="line"><a name="l00734"></a><span class="lineno">  734</span>&#160;<span class="comment">* Return:    result - return code from DosPostEventSem                   *</span></div>
<div class="line"><a name="l00735"></a><span class="lineno">  735</span>&#160;<span class="comment">*************************************************************************/</span></div>
<div class="line"><a name="l00736"></a><span class="lineno">  736</span>&#160; </div>
<div class="line"><a name="l00737"></a><span class="lineno"><a class="line" href="unix_2_sys_rexx_util_8cpp.html#a43af9b99fafa22b18cec2bdcd5056ef3">  737</a></span>&#160;<a class="code" href="unix_2_sys_rexx_util_8cpp.html#aa99b04951a3dd00e93a76a3e69bc83f2">RexxRoutine1</a>(<span class="keywordtype">int</span>, SysPostEventSem, <a class="code" href="windows_2rexxapitypes_8h.html#a2f338919cf0aa5c3d87df8096b8fa972">uintptr_t</a>, vhandle)</div>
<div class="line"><a name="l00738"></a><span class="lineno">  738</span>&#160;{</div>
<div class="line"><a name="l00739"></a><span class="lineno">  739</span>&#160;    <a class="code" href="struct_rx_sem_data.html">RXSEMDATA</a> *semdata = (<a class="code" href="struct_rx_sem_data.html">RXSEMDATA</a> *)vhandle;</div>
<div class="line"><a name="l00740"></a><span class="lineno">  740</span>&#160;    <span class="keywordtype">int</span> rc;</div>
<div class="line"><a name="l00741"></a><span class="lineno">  741</span>&#160; </div>
<div class="line"><a name="l00742"></a><span class="lineno">  742</span>&#160;    rc = sem_post(semdata-&gt;<a class="code" href="struct_rx_sem_data.html#a886bafc79e2d9fab1036d2b71d31ca25">handle</a>);</div>
<div class="line"><a name="l00743"></a><span class="lineno">  743</span>&#160;    <span class="keywordflow">if</span> (rc)</div>
<div class="line"><a name="l00744"></a><span class="lineno">  744</span>&#160;    {</div>
<div class="line"><a name="l00745"></a><span class="lineno">  745</span>&#160;        <span class="keywordflow">return</span> 6;</div>
<div class="line"><a name="l00746"></a><span class="lineno">  746</span>&#160;    }</div>
<div class="line"><a name="l00747"></a><span class="lineno">  747</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00748"></a><span class="lineno">  748</span>&#160;}</div>
<div class="line"><a name="l00749"></a><span class="lineno">  749</span>&#160; </div>
<div class="line"><a name="l00750"></a><span class="lineno">  750</span>&#160; </div>
<div class="line"><a name="l00751"></a><span class="lineno">  751</span>&#160;<span class="comment">/*************************************************************************</span></div>
<div class="line"><a name="l00752"></a><span class="lineno">  752</span>&#160;<span class="comment">* Function:  SysCloseEventSem                                            *</span></div>
<div class="line"><a name="l00753"></a><span class="lineno">  753</span>&#160;<span class="comment">*                                                                        *</span></div>
<div class="line"><a name="l00754"></a><span class="lineno">  754</span>&#160;<span class="comment">* Syntax:    result = SysCloseEventSem(handle)                           *</span></div>
<div class="line"><a name="l00755"></a><span class="lineno">  755</span>&#160;<span class="comment">*                                                                        *</span></div>
<div class="line"><a name="l00756"></a><span class="lineno">  756</span>&#160;<span class="comment">* Params:    handle - token returned from SysCreateEventSem              *</span></div>
<div class="line"><a name="l00757"></a><span class="lineno">  757</span>&#160;<span class="comment">*                                                                        *</span></div>
<div class="line"><a name="l00758"></a><span class="lineno">  758</span>&#160;<span class="comment">* Return:    result - return code from DosCloseEventSem                  *</span></div>
<div class="line"><a name="l00759"></a><span class="lineno">  759</span>&#160;<span class="comment">*************************************************************************/</span></div>
<div class="line"><a name="l00760"></a><span class="lineno">  760</span>&#160; </div>
<div class="line"><a name="l00761"></a><span class="lineno"><a class="line" href="unix_2_sys_rexx_util_8cpp.html#a01e0172a1fc3c7806b1939811c97c758">  761</a></span>&#160;<a class="code" href="unix_2_sys_rexx_util_8cpp.html#aa99b04951a3dd00e93a76a3e69bc83f2">RexxRoutine1</a>(<span class="keywordtype">int</span>, SysCloseEventSem, <a class="code" href="windows_2rexxapitypes_8h.html#a2f338919cf0aa5c3d87df8096b8fa972">uintptr_t</a>, vhandle)</div>
<div class="line"><a name="l00762"></a><span class="lineno">  762</span>&#160;{</div>
<div class="line"><a name="l00763"></a><span class="lineno">  763</span>&#160;    <a class="code" href="struct_rx_sem_data.html">RXSEMDATA</a> *semdata = (<a class="code" href="struct_rx_sem_data.html">RXSEMDATA</a> *)vhandle;</div>
<div class="line"><a name="l00764"></a><span class="lineno">  764</span>&#160; </div>
<div class="line"><a name="l00765"></a><span class="lineno">  765</span>&#160;    <span class="keywordflow">if</span> (semdata-&gt;<a class="code" href="struct_rx_sem_data.html#a4c3832abbea5592f324dd2c43e16c12c">named</a> == <span class="keyword">false</span>)</div>
<div class="line"><a name="l00766"></a><span class="lineno">  766</span>&#160;    {</div>
<div class="line"><a name="l00767"></a><span class="lineno">  767</span>&#160;        <span class="comment">/* this is an unnamed semaphore so we must free the target */</span></div>
<div class="line"><a name="l00768"></a><span class="lineno">  768</span>&#160;        <span class="keywordflow">if</span> (sem_destroy(semdata-&gt;<a class="code" href="struct_rx_sem_data.html#a886bafc79e2d9fab1036d2b71d31ca25">handle</a>))</div>
<div class="line"><a name="l00769"></a><span class="lineno">  769</span>&#160;        {</div>
<div class="line"><a name="l00770"></a><span class="lineno">  770</span>&#160;            <span class="keywordflow">if</span> (errno == EINVAL)</div>
<div class="line"><a name="l00771"></a><span class="lineno">  771</span>&#160;            {</div>
<div class="line"><a name="l00772"></a><span class="lineno">  772</span>&#160;                <span class="keywordflow">return</span> 6;</div>
<div class="line"><a name="l00773"></a><span class="lineno">  773</span>&#160;            }</div>
<div class="line"><a name="l00774"></a><span class="lineno">  774</span>&#160;            <span class="keywordflow">else</span> <span class="keywordflow">if</span> (errno)</div>
<div class="line"><a name="l00775"></a><span class="lineno">  775</span>&#160;            {</div>
<div class="line"><a name="l00776"></a><span class="lineno">  776</span>&#160;                <span class="keywordflow">return</span> 102;</div>
<div class="line"><a name="l00777"></a><span class="lineno">  777</span>&#160;            }</div>
<div class="line"><a name="l00778"></a><span class="lineno">  778</span>&#160;        }</div>
<div class="line"><a name="l00779"></a><span class="lineno">  779</span>&#160;    }</div>
<div class="line"><a name="l00780"></a><span class="lineno">  780</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l00781"></a><span class="lineno">  781</span>&#160;    {</div>
<div class="line"><a name="l00782"></a><span class="lineno">  782</span>&#160;        <span class="comment">/* this is a named semaphore */</span></div>
<div class="line"><a name="l00783"></a><span class="lineno">  783</span>&#160;        <span class="keywordflow">if</span> (sem_close(semdata-&gt;<a class="code" href="struct_rx_sem_data.html#a886bafc79e2d9fab1036d2b71d31ca25">handle</a>))</div>
<div class="line"><a name="l00784"></a><span class="lineno">  784</span>&#160;        {</div>
<div class="line"><a name="l00785"></a><span class="lineno">  785</span>&#160;            <span class="keywordflow">if</span> (errno == EINVAL)</div>
<div class="line"><a name="l00786"></a><span class="lineno">  786</span>&#160;            {</div>
<div class="line"><a name="l00787"></a><span class="lineno">  787</span>&#160;                <span class="keywordflow">return</span> 6;</div>
<div class="line"><a name="l00788"></a><span class="lineno">  788</span>&#160;            }</div>
<div class="line"><a name="l00789"></a><span class="lineno">  789</span>&#160;            <span class="keywordflow">else</span> <span class="keywordflow">if</span> (errno)</div>
<div class="line"><a name="l00790"></a><span class="lineno">  790</span>&#160;            {</div>
<div class="line"><a name="l00791"></a><span class="lineno">  791</span>&#160;                <span class="keywordflow">return</span> 102;</div>
<div class="line"><a name="l00792"></a><span class="lineno">  792</span>&#160;            }</div>
<div class="line"><a name="l00793"></a><span class="lineno">  793</span>&#160;        }</div>
<div class="line"><a name="l00794"></a><span class="lineno">  794</span>&#160;    }</div>
<div class="line"><a name="l00795"></a><span class="lineno">  795</span>&#160;    free(semdata);</div>
<div class="line"><a name="l00796"></a><span class="lineno">  796</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00797"></a><span class="lineno">  797</span>&#160;}</div>
<div class="line"><a name="l00798"></a><span class="lineno">  798</span>&#160; </div>
<div class="line"><a name="l00799"></a><span class="lineno">  799</span>&#160; </div>
<div class="line"><a name="l00800"></a><span class="lineno"><a class="line" href="unix_2_sys_rexx_util_8cpp.html#a04fe5f8ea9dc69e81b9e83701c3dd59e">  800</a></span>&#160;<span class="preprocessor">#define SEM_WAIT_PERIOD 100 </span><span class="comment">/* POSIX says this should be 10ms */</span><span class="preprocessor"></span></div>
<div class="line"><a name="l00801"></a><span class="lineno">  801</span>&#160; </div>
<div class="line"><a name="l00802"></a><span class="lineno">  802</span>&#160; </div>
<div class="line"><a name="l00803"></a><span class="lineno">  803</span>&#160;<span class="comment">/*************************************************************************</span></div>
<div class="line"><a name="l00804"></a><span class="lineno">  804</span>&#160;<span class="comment">* Function:  SysWaitEventSem                                             *</span></div>
<div class="line"><a name="l00805"></a><span class="lineno">  805</span>&#160;<span class="comment">*                                                                        *</span></div>
<div class="line"><a name="l00806"></a><span class="lineno">  806</span>&#160;<span class="comment">* Syntax:    result = SysWaitEventSem(handle, &lt;timeout&gt;)                 *</span></div>
<div class="line"><a name="l00807"></a><span class="lineno">  807</span>&#160;<span class="comment">*                                                                        *</span></div>
<div class="line"><a name="l00808"></a><span class="lineno">  808</span>&#160;<span class="comment">* Params:    handle - token returned from SysWaitEventSem                *</span></div>
<div class="line"><a name="l00809"></a><span class="lineno">  809</span>&#160;<span class="comment">*                                                                        *</span></div>
<div class="line"><a name="l00810"></a><span class="lineno">  810</span>&#160;<span class="comment">* Return:    result - return code from DosWaitEventSem                   *</span></div>
<div class="line"><a name="l00811"></a><span class="lineno">  811</span>&#160;<span class="comment">*************************************************************************/</span></div>
<div class="line"><a name="l00812"></a><span class="lineno">  812</span>&#160; </div>
<div class="line"><a name="l00813"></a><span class="lineno"><a class="line" href="unix_2_sys_rexx_util_8cpp.html#a90859d7e08ce6cb09de4678033194e34">  813</a></span>&#160;<a class="code" href="unix_2_sys_rexx_util_8cpp.html#ae76cb3e703d83ba4aef58ac990d00ff3">RexxRoutine2</a>(<span class="keywordtype">int</span>, SysWaitEventSem, <a class="code" href="windows_2rexxapitypes_8h.html#a2f338919cf0aa5c3d87df8096b8fa972">uintptr_t</a>, vhandle, OPTIONAL_int, timeout)</div>
<div class="line"><a name="l00814"></a><span class="lineno">  814</span>&#160;{</div>
<div class="line"><a name="l00815"></a><span class="lineno">  815</span>&#160;    <a class="code" href="struct_rx_sem_data.html">RXSEMDATA</a> *semdata = (<a class="code" href="struct_rx_sem_data.html">RXSEMDATA</a> *)vhandle;</div>
<div class="line"><a name="l00816"></a><span class="lineno">  816</span>&#160;    <span class="keywordtype">int</span> rc = 0;</div>
<div class="line"><a name="l00817"></a><span class="lineno">  817</span>&#160; </div>
<div class="line"><a name="l00818"></a><span class="lineno">  818</span>&#160;    <span class="keywordflow">if</span> (timeout != 0)</div>
<div class="line"><a name="l00819"></a><span class="lineno">  819</span>&#160;    {</div>
<div class="line"><a name="l00820"></a><span class="lineno">  820</span>&#160;        <span class="comment">/* this looping construct will cause us to wait longer than the */</span></div>
<div class="line"><a name="l00821"></a><span class="lineno">  821</span>&#160;        <span class="comment">/* specified timeout due to the latency involved in the loop,   */</span></div>
<div class="line"><a name="l00822"></a><span class="lineno">  822</span>&#160;        <span class="comment">/* but that cannot be helped                                    */</span></div>
<div class="line"><a name="l00823"></a><span class="lineno">  823</span>&#160;        <span class="keywordflow">while</span> (timeout &gt; 0)</div>
<div class="line"><a name="l00824"></a><span class="lineno">  824</span>&#160;        {</div>
<div class="line"><a name="l00825"></a><span class="lineno">  825</span>&#160;            rc = sem_trywait(semdata-&gt;<a class="code" href="struct_rx_sem_data.html#a886bafc79e2d9fab1036d2b71d31ca25">handle</a>);</div>
<div class="line"><a name="l00826"></a><span class="lineno">  826</span>&#160;            <span class="keywordflow">if</span> (rc == 0)</div>
<div class="line"><a name="l00827"></a><span class="lineno">  827</span>&#160;            {</div>
<div class="line"><a name="l00828"></a><span class="lineno">  828</span>&#160;                <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00829"></a><span class="lineno">  829</span>&#160;            }</div>
<div class="line"><a name="l00830"></a><span class="lineno">  830</span>&#160;            <span class="keywordflow">if</span> (usleep(<a class="code" href="unix_2_sys_rexx_util_8cpp.html#a04fe5f8ea9dc69e81b9e83701c3dd59e">SEM_WAIT_PERIOD</a> * 1000) == 0)</div>
<div class="line"><a name="l00831"></a><span class="lineno">  831</span>&#160;            {</div>
<div class="line"><a name="l00832"></a><span class="lineno">  832</span>&#160;                timeout -= <a class="code" href="unix_2_sys_rexx_util_8cpp.html#a04fe5f8ea9dc69e81b9e83701c3dd59e">SEM_WAIT_PERIOD</a>;</div>
<div class="line"><a name="l00833"></a><span class="lineno">  833</span>&#160;            }</div>
<div class="line"><a name="l00834"></a><span class="lineno">  834</span>&#160;        }</div>
<div class="line"><a name="l00835"></a><span class="lineno">  835</span>&#160;    }</div>
<div class="line"><a name="l00836"></a><span class="lineno">  836</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l00837"></a><span class="lineno">  837</span>&#160;    {</div>
<div class="line"><a name="l00838"></a><span class="lineno">  838</span>&#160;        rc = sem_wait(semdata-&gt;<a class="code" href="struct_rx_sem_data.html#a886bafc79e2d9fab1036d2b71d31ca25">handle</a>);</div>
<div class="line"><a name="l00839"></a><span class="lineno">  839</span>&#160;    }</div>
<div class="line"><a name="l00840"></a><span class="lineno">  840</span>&#160;    <span class="keywordflow">if</span> (rc)</div>
<div class="line"><a name="l00841"></a><span class="lineno">  841</span>&#160;    {</div>
<div class="line"><a name="l00842"></a><span class="lineno">  842</span>&#160;        <span class="keywordflow">if</span> (errno == EAGAIN)</div>
<div class="line"><a name="l00843"></a><span class="lineno">  843</span>&#160;        {</div>
<div class="line"><a name="l00844"></a><span class="lineno">  844</span>&#160;            <span class="keywordflow">return</span> 121;</div>
<div class="line"><a name="l00845"></a><span class="lineno">  845</span>&#160;        }</div>
<div class="line"><a name="l00846"></a><span class="lineno">  846</span>&#160;        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (errno == EINVAL)</div>
<div class="line"><a name="l00847"></a><span class="lineno">  847</span>&#160;        {</div>
<div class="line"><a name="l00848"></a><span class="lineno">  848</span>&#160;            <span class="keywordflow">return</span> 6;</div>
<div class="line"><a name="l00849"></a><span class="lineno">  849</span>&#160;        }</div>
<div class="line"><a name="l00850"></a><span class="lineno">  850</span>&#160;    }</div>
<div class="line"><a name="l00851"></a><span class="lineno">  851</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00852"></a><span class="lineno">  852</span>&#160;}</div>
<div class="line"><a name="l00853"></a><span class="lineno">  853</span>&#160; </div>
<div class="line"><a name="l00854"></a><span class="lineno">  854</span>&#160; </div>
<div class="line"><a name="l00855"></a><span class="lineno">  855</span>&#160;<span class="comment">/*************************************************************************</span></div>
<div class="line"><a name="l00856"></a><span class="lineno">  856</span>&#160;<span class="comment">* Function:  SysCreateMutexSem                                           *</span></div>
<div class="line"><a name="l00857"></a><span class="lineno">  857</span>&#160;<span class="comment">*                                                                        *</span></div>
<div class="line"><a name="l00858"></a><span class="lineno">  858</span>&#160;<span class="comment">* Syntax:    handle = SysCreateMutexSem(&lt;name&gt;)                          *</span></div>
<div class="line"><a name="l00859"></a><span class="lineno">  859</span>&#160;<span class="comment">*                                                                        *</span></div>
<div class="line"><a name="l00860"></a><span class="lineno">  860</span>&#160;<span class="comment">* Params:    name  - optional name for a event semaphore                 *</span></div>
<div class="line"><a name="l00861"></a><span class="lineno">  861</span>&#160;<span class="comment">*                                                                        *</span></div>
<div class="line"><a name="l00862"></a><span class="lineno">  862</span>&#160;<span class="comment">* Return:    handle - token used as a event sem handle for               *</span></div>
<div class="line"><a name="l00863"></a><span class="lineno">  863</span>&#160;<span class="comment">*                     SysPostEventSem, SysClearEventSem,                 *</span></div>
<div class="line"><a name="l00864"></a><span class="lineno">  864</span>&#160;<span class="comment">*                     SysCloseEventSem, and SysOpenEventSem              *</span></div>
<div class="line"><a name="l00865"></a><span class="lineno">  865</span>&#160;<span class="comment">*            &#39;&#39; - Empty string in case of any error                      *</span></div>
<div class="line"><a name="l00866"></a><span class="lineno">  866</span>&#160;<span class="comment">*************************************************************************/</span></div>
<div class="line"><a name="l00867"></a><span class="lineno">  867</span>&#160; </div>
<div class="line"><a name="l00868"></a><span class="lineno"><a class="line" href="unix_2_sys_rexx_util_8cpp.html#aaf6b012099afc98fd0e8bd1e8621eb46">  868</a></span>&#160;<a class="code" href="unix_2_sys_rexx_util_8cpp.html#aa99b04951a3dd00e93a76a3e69bc83f2">RexxRoutine1</a>(<a class="code" href="rexx_8h.html#a96e0cc5eda42aed364b05f3c493e07e8">RexxObjectPtr</a>, SysCreateMutexSem, OPTIONAL_CSTRING, name)</div>
<div class="line"><a name="l00869"></a><span class="lineno">  869</span>&#160;{</div>
<div class="line"><a name="l00870"></a><span class="lineno">  870</span>&#160;    <a class="code" href="struct_rx_sem_data.html">RXSEMDATA</a> *semdata;</div>
<div class="line"><a name="l00871"></a><span class="lineno">  871</span>&#160;    <span class="keywordtype">int</span> rc;</div>
<div class="line"><a name="l00872"></a><span class="lineno">  872</span>&#160; </div>
<div class="line"><a name="l00873"></a><span class="lineno">  873</span>&#160;    semdata = (<a class="code" href="struct_rx_sem_data.html">RXSEMDATA</a> *)malloc(<span class="keyword">sizeof</span>(<a class="code" href="struct_rx_sem_data.html">RXSEMDATA</a>));</div>
<div class="line"><a name="l00874"></a><span class="lineno">  874</span>&#160;    <span class="keywordflow">if</span> (semdata == NULL)</div>
<div class="line"><a name="l00875"></a><span class="lineno">  875</span>&#160;    {</div>
<div class="line"><a name="l00876"></a><span class="lineno">  876</span>&#160;        <span class="keywordflow">return</span> context-&gt;String(<span class="stringliteral">&quot;&quot;</span>);</div>
<div class="line"><a name="l00877"></a><span class="lineno">  877</span>&#160;    }</div>
<div class="line"><a name="l00878"></a><span class="lineno">  878</span>&#160;    <span class="keywordflow">if</span> (strlen(name) == 0)</div>
<div class="line"><a name="l00879"></a><span class="lineno">  879</span>&#160;    {</div>
<div class="line"><a name="l00880"></a><span class="lineno">  880</span>&#160;        <span class="comment">/* this is an unnamed semaphore */</span></div>
<div class="line"><a name="l00881"></a><span class="lineno">  881</span>&#160;        semdata-&gt;<a class="code" href="struct_rx_sem_data.html#a886bafc79e2d9fab1036d2b71d31ca25">handle</a> = (sem_t *)malloc(<span class="keyword">sizeof</span>(sem_t));</div>
<div class="line"><a name="l00882"></a><span class="lineno">  882</span>&#160;        rc = sem_init(semdata-&gt;<a class="code" href="struct_rx_sem_data.html#a886bafc79e2d9fab1036d2b71d31ca25">handle</a>, 0, 0);</div>
<div class="line"><a name="l00883"></a><span class="lineno">  883</span>&#160;        <span class="keywordflow">if</span> (rc == -1)</div>
<div class="line"><a name="l00884"></a><span class="lineno">  884</span>&#160;        {</div>
<div class="line"><a name="l00885"></a><span class="lineno">  885</span>&#160;            free(semdata);</div>
<div class="line"><a name="l00886"></a><span class="lineno">  886</span>&#160;            <span class="keywordflow">return</span> context-&gt;String(<span class="stringliteral">&quot;&quot;</span>);</div>
<div class="line"><a name="l00887"></a><span class="lineno">  887</span>&#160;        }</div>
<div class="line"><a name="l00888"></a><span class="lineno">  888</span>&#160;        semdata-&gt;<a class="code" href="struct_rx_sem_data.html#a4c3832abbea5592f324dd2c43e16c12c">named</a> = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00889"></a><span class="lineno">  889</span>&#160;    }</div>
<div class="line"><a name="l00890"></a><span class="lineno">  890</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l00891"></a><span class="lineno">  891</span>&#160;    {</div>
<div class="line"><a name="l00892"></a><span class="lineno">  892</span>&#160;        <span class="comment">/* this is a named semaphore */</span></div>
<div class="line"><a name="l00893"></a><span class="lineno">  893</span>&#160;        semdata-&gt;<a class="code" href="struct_rx_sem_data.html#a886bafc79e2d9fab1036d2b71d31ca25">handle</a> = sem_open(name, (O_CREAT | O_EXCL), (S_IRWXU | S_IRWXG), 0);</div>
<div class="line"><a name="l00894"></a><span class="lineno">  894</span>&#160;        <span class="keywordflow">if</span> (semdata-&gt;<a class="code" href="struct_rx_sem_data.html#a886bafc79e2d9fab1036d2b71d31ca25">handle</a> == SEM_FAILED)</div>
<div class="line"><a name="l00895"></a><span class="lineno">  895</span>&#160;        {</div>
<div class="line"><a name="l00896"></a><span class="lineno">  896</span>&#160;            free(semdata);</div>
<div class="line"><a name="l00897"></a><span class="lineno">  897</span>&#160;            <span class="keywordflow">return</span> context-&gt;String(<span class="stringliteral">&quot;&quot;</span>);</div>
<div class="line"><a name="l00898"></a><span class="lineno">  898</span>&#160;        }</div>
<div class="line"><a name="l00899"></a><span class="lineno">  899</span>&#160;        semdata-&gt;<a class="code" href="struct_rx_sem_data.html#a4c3832abbea5592f324dd2c43e16c12c">named</a> = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00900"></a><span class="lineno">  900</span>&#160;    }</div>
<div class="line"><a name="l00901"></a><span class="lineno">  901</span>&#160;    rc = sem_post(semdata-&gt;<a class="code" href="struct_rx_sem_data.html#a886bafc79e2d9fab1036d2b71d31ca25">handle</a>);</div>
<div class="line"><a name="l00902"></a><span class="lineno">  902</span>&#160;    <span class="keywordflow">return</span> context-&gt;Uintptr((<a class="code" href="windows_2rexxapitypes_8h.html#a2f338919cf0aa5c3d87df8096b8fa972">uintptr_t</a>)semdata);</div>
<div class="line"><a name="l00903"></a><span class="lineno">  903</span>&#160;}</div>
<div class="line"><a name="l00904"></a><span class="lineno">  904</span>&#160; </div>
<div class="line"><a name="l00905"></a><span class="lineno">  905</span>&#160; </div>
<div class="line"><a name="l00906"></a><span class="lineno">  906</span>&#160;<span class="comment">/*************************************************************************</span></div>
<div class="line"><a name="l00907"></a><span class="lineno">  907</span>&#160;<span class="comment">* Function:  SysOpenMutexSem                                             *</span></div>
<div class="line"><a name="l00908"></a><span class="lineno">  908</span>&#160;<span class="comment">*                                                                        *</span></div>
<div class="line"><a name="l00909"></a><span class="lineno">  909</span>&#160;<span class="comment">* Syntax:    result = SysOpenMutexSem(handle)                            *</span></div>
<div class="line"><a name="l00910"></a><span class="lineno">  910</span>&#160;<span class="comment">*                                                                        *</span></div>
<div class="line"><a name="l00911"></a><span class="lineno">  911</span>&#160;<span class="comment">* Params:    handle - token returned from SysCreateMutexSem              *</span></div>
<div class="line"><a name="l00912"></a><span class="lineno">  912</span>&#160;<span class="comment">*                                                                        *</span></div>
<div class="line"><a name="l00913"></a><span class="lineno">  913</span>&#160;<span class="comment">* Return:    result - return code from DosOpenEventSem                   *</span></div>
<div class="line"><a name="l00914"></a><span class="lineno">  914</span>&#160;<span class="comment">*************************************************************************/</span></div>
<div class="line"><a name="l00915"></a><span class="lineno">  915</span>&#160; </div>
<div class="line"><a name="l00916"></a><span class="lineno"><a class="line" href="unix_2_sys_rexx_util_8cpp.html#a243b4bce9007d00e4fca3a1639f116ab">  916</a></span>&#160;<a class="code" href="unix_2_sys_rexx_util_8cpp.html#aa99b04951a3dd00e93a76a3e69bc83f2">RexxRoutine1</a>(<a class="code" href="windows_2rexxapitypes_8h.html#a2f338919cf0aa5c3d87df8096b8fa972">uintptr_t</a>, SysOpenMutexSem, <a class="code" href="rexx_8h.html#a581e376dc8d3b9132e29014c896b9e70">CSTRING</a>, name)</div>
<div class="line"><a name="l00917"></a><span class="lineno">  917</span>&#160;{</div>
<div class="line"><a name="l00918"></a><span class="lineno">  918</span>&#160;    <a class="code" href="struct_rx_sem_data.html">RXSEMDATA</a> *semdata;</div>
<div class="line"><a name="l00919"></a><span class="lineno">  919</span>&#160; </div>
<div class="line"><a name="l00920"></a><span class="lineno">  920</span>&#160;    semdata = (<a class="code" href="struct_rx_sem_data.html">RXSEMDATA</a> *)malloc(<span class="keyword">sizeof</span>(<a class="code" href="struct_rx_sem_data.html">RXSEMDATA</a>));</div>
<div class="line"><a name="l00921"></a><span class="lineno">  921</span>&#160;    <span class="keywordflow">if</span> (semdata == NULL)</div>
<div class="line"><a name="l00922"></a><span class="lineno">  922</span>&#160;    {</div>
<div class="line"><a name="l00923"></a><span class="lineno">  923</span>&#160;        <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00924"></a><span class="lineno">  924</span>&#160;    }</div>
<div class="line"><a name="l00925"></a><span class="lineno">  925</span>&#160;    semdata-&gt;<a class="code" href="struct_rx_sem_data.html#a886bafc79e2d9fab1036d2b71d31ca25">handle</a> = sem_open(name, 0);</div>
<div class="line"><a name="l00926"></a><span class="lineno">  926</span>&#160;    <span class="keywordflow">if</span> (semdata-&gt;<a class="code" href="struct_rx_sem_data.html#a886bafc79e2d9fab1036d2b71d31ca25">handle</a> == SEM_FAILED)</div>
<div class="line"><a name="l00927"></a><span class="lineno">  927</span>&#160;    {</div>
<div class="line"><a name="l00928"></a><span class="lineno">  928</span>&#160;        <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00929"></a><span class="lineno">  929</span>&#160;    }</div>
<div class="line"><a name="l00930"></a><span class="lineno">  930</span>&#160;    semdata-&gt;<a class="code" href="struct_rx_sem_data.html#a4c3832abbea5592f324dd2c43e16c12c">named</a> = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00931"></a><span class="lineno">  931</span>&#160;    <span class="keywordflow">return</span> (<a class="code" href="windows_2rexxapitypes_8h.html#a2f338919cf0aa5c3d87df8096b8fa972">uintptr_t</a>)semdata;</div>
<div class="line"><a name="l00932"></a><span class="lineno">  932</span>&#160;}</div>
<div class="line"><a name="l00933"></a><span class="lineno">  933</span>&#160; </div>
<div class="line"><a name="l00934"></a><span class="lineno">  934</span>&#160; </div>
<div class="line"><a name="l00935"></a><span class="lineno">  935</span>&#160;<span class="comment">/*************************************************************************</span></div>
<div class="line"><a name="l00936"></a><span class="lineno">  936</span>&#160;<span class="comment">* Function:  SysRequestMutexSem                                          *</span></div>
<div class="line"><a name="l00937"></a><span class="lineno">  937</span>&#160;<span class="comment">*                                                                        *</span></div>
<div class="line"><a name="l00938"></a><span class="lineno">  938</span>&#160;<span class="comment">* Syntax:    result = SysRequestMutexSem(handle, &lt;timeout&gt;)              *</span></div>
<div class="line"><a name="l00939"></a><span class="lineno">  939</span>&#160;<span class="comment">*                                                                        *</span></div>
<div class="line"><a name="l00940"></a><span class="lineno">  940</span>&#160;<span class="comment">* Params:    handle - token returned from SysRequestMutexSem             *</span></div>
<div class="line"><a name="l00941"></a><span class="lineno">  941</span>&#160;<span class="comment">*                                                                        *</span></div>
<div class="line"><a name="l00942"></a><span class="lineno">  942</span>&#160;<span class="comment">* Return:    result - return code from DosWaitEventSem                   *</span></div>
<div class="line"><a name="l00943"></a><span class="lineno">  943</span>&#160;<span class="comment">*************************************************************************/</span></div>
<div class="line"><a name="l00944"></a><span class="lineno">  944</span>&#160; </div>
<div class="line"><a name="l00945"></a><span class="lineno"><a class="line" href="unix_2_sys_rexx_util_8cpp.html#ac920bd28dcb2531480b5244a04f5b3f5">  945</a></span>&#160;<a class="code" href="unix_2_sys_rexx_util_8cpp.html#ae76cb3e703d83ba4aef58ac990d00ff3">RexxRoutine2</a>(<span class="keywordtype">int</span>, SysRequestMutexSem, <a class="code" href="windows_2rexxapitypes_8h.html#a2f338919cf0aa5c3d87df8096b8fa972">uintptr_t</a>, vhandle, OPTIONAL_int, timeout)</div>
<div class="line"><a name="l00946"></a><span class="lineno">  946</span>&#160;{</div>
<div class="line"><a name="l00947"></a><span class="lineno">  947</span>&#160;    <a class="code" href="struct_rx_sem_data.html">RXSEMDATA</a> *semdata = (<a class="code" href="struct_rx_sem_data.html">RXSEMDATA</a> *)vhandle;</div>
<div class="line"><a name="l00948"></a><span class="lineno">  948</span>&#160;    <span class="keywordtype">int</span> rc = 0;</div>
<div class="line"><a name="l00949"></a><span class="lineno">  949</span>&#160; </div>
<div class="line"><a name="l00950"></a><span class="lineno">  950</span>&#160;    <span class="keywordflow">if</span> (timeout != 0)</div>
<div class="line"><a name="l00951"></a><span class="lineno">  951</span>&#160;    {</div>
<div class="line"><a name="l00952"></a><span class="lineno">  952</span>&#160;        <span class="comment">/* this looping construct will cause us to wait longer than the */</span></div>
<div class="line"><a name="l00953"></a><span class="lineno">  953</span>&#160;        <span class="comment">/* specified timeout due to the latency involved in the loop,   */</span></div>
<div class="line"><a name="l00954"></a><span class="lineno">  954</span>&#160;        <span class="comment">/* but that cannot be helped                                    */</span></div>
<div class="line"><a name="l00955"></a><span class="lineno">  955</span>&#160;        <span class="keywordflow">while</span> (timeout &gt; 0)</div>
<div class="line"><a name="l00956"></a><span class="lineno">  956</span>&#160;        {</div>
<div class="line"><a name="l00957"></a><span class="lineno">  957</span>&#160;            rc = sem_trywait(semdata-&gt;<a class="code" href="struct_rx_sem_data.html#a886bafc79e2d9fab1036d2b71d31ca25">handle</a>);</div>
<div class="line"><a name="l00958"></a><span class="lineno">  958</span>&#160;            <span class="keywordflow">if</span> (rc == 0)</div>
<div class="line"><a name="l00959"></a><span class="lineno">  959</span>&#160;            {</div>
<div class="line"><a name="l00960"></a><span class="lineno">  960</span>&#160;                <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00961"></a><span class="lineno">  961</span>&#160;            }</div>
<div class="line"><a name="l00962"></a><span class="lineno">  962</span>&#160;            <span class="keywordflow">if</span> (usleep(<a class="code" href="unix_2_sys_rexx_util_8cpp.html#a04fe5f8ea9dc69e81b9e83701c3dd59e">SEM_WAIT_PERIOD</a> * 1000) == 0)</div>
<div class="line"><a name="l00963"></a><span class="lineno">  963</span>&#160;            {</div>
<div class="line"><a name="l00964"></a><span class="lineno">  964</span>&#160;                timeout -= <a class="code" href="unix_2_sys_rexx_util_8cpp.html#a04fe5f8ea9dc69e81b9e83701c3dd59e">SEM_WAIT_PERIOD</a>;</div>
<div class="line"><a name="l00965"></a><span class="lineno">  965</span>&#160;            }</div>
<div class="line"><a name="l00966"></a><span class="lineno">  966</span>&#160;        }</div>
<div class="line"><a name="l00967"></a><span class="lineno">  967</span>&#160;    }</div>
<div class="line"><a name="l00968"></a><span class="lineno">  968</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l00969"></a><span class="lineno">  969</span>&#160;    {</div>
<div class="line"><a name="l00970"></a><span class="lineno">  970</span>&#160;        rc = sem_wait(semdata-&gt;<a class="code" href="struct_rx_sem_data.html#a886bafc79e2d9fab1036d2b71d31ca25">handle</a>);</div>
<div class="line"><a name="l00971"></a><span class="lineno">  971</span>&#160;    }</div>
<div class="line"><a name="l00972"></a><span class="lineno">  972</span>&#160;    <span class="keywordflow">if</span> (rc)</div>
<div class="line"><a name="l00973"></a><span class="lineno">  973</span>&#160;    {</div>
<div class="line"><a name="l00974"></a><span class="lineno">  974</span>&#160;        <span class="keywordflow">if</span> (errno == EAGAIN)</div>
<div class="line"><a name="l00975"></a><span class="lineno">  975</span>&#160;        {</div>
<div class="line"><a name="l00976"></a><span class="lineno">  976</span>&#160;            <span class="keywordflow">return</span> 121;</div>
<div class="line"><a name="l00977"></a><span class="lineno">  977</span>&#160;        }</div>
<div class="line"><a name="l00978"></a><span class="lineno">  978</span>&#160;        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (errno == EINVAL)</div>
<div class="line"><a name="l00979"></a><span class="lineno">  979</span>&#160;        {</div>
<div class="line"><a name="l00980"></a><span class="lineno">  980</span>&#160;            <span class="keywordflow">return</span> 6;</div>
<div class="line"><a name="l00981"></a><span class="lineno">  981</span>&#160;        }</div>
<div class="line"><a name="l00982"></a><span class="lineno">  982</span>&#160;    }</div>
<div class="line"><a name="l00983"></a><span class="lineno">  983</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00984"></a><span class="lineno">  984</span>&#160;}</div>
<div class="line"><a name="l00985"></a><span class="lineno">  985</span>&#160; </div>
<div class="line"><a name="l00986"></a><span class="lineno">  986</span>&#160; </div>
<div class="line"><a name="l00987"></a><span class="lineno">  987</span>&#160;<span class="comment">/*************************************************************************</span></div>
<div class="line"><a name="l00988"></a><span class="lineno">  988</span>&#160;<span class="comment">* Function:  SysReleaseMutexSem                                          *</span></div>
<div class="line"><a name="l00989"></a><span class="lineno">  989</span>&#160;<span class="comment">*                                                                        *</span></div>
<div class="line"><a name="l00990"></a><span class="lineno">  990</span>&#160;<span class="comment">* Syntax:    result = SysReleaseMutexSem(handle)                         *</span></div>
<div class="line"><a name="l00991"></a><span class="lineno">  991</span>&#160;<span class="comment">*                                                                        *</span></div>
<div class="line"><a name="l00992"></a><span class="lineno">  992</span>&#160;<span class="comment">* Params:    handle - token returned from SysCreateMutexSem              *</span></div>
<div class="line"><a name="l00993"></a><span class="lineno">  993</span>&#160;<span class="comment">*                                                                        *</span></div>
<div class="line"><a name="l00994"></a><span class="lineno">  994</span>&#160;<span class="comment">* Return:    result - return code from DosCloseEventSem                  *</span></div>
<div class="line"><a name="l00995"></a><span class="lineno">  995</span>&#160;<span class="comment">*************************************************************************/</span></div>
<div class="line"><a name="l00996"></a><span class="lineno">  996</span>&#160; </div>
<div class="line"><a name="l00997"></a><span class="lineno"><a class="line" href="unix_2_sys_rexx_util_8cpp.html#a70a7ca0123a6e3d3b824527eef7621eb">  997</a></span>&#160;<a class="code" href="unix_2_sys_rexx_util_8cpp.html#aa99b04951a3dd00e93a76a3e69bc83f2">RexxRoutine1</a>(<span class="keywordtype">int</span>, SysReleaseMutexSem, <a class="code" href="windows_2rexxapitypes_8h.html#a2f338919cf0aa5c3d87df8096b8fa972">uintptr_t</a>, vhandle)</div>
<div class="line"><a name="l00998"></a><span class="lineno">  998</span>&#160;{</div>
<div class="line"><a name="l00999"></a><span class="lineno">  999</span>&#160;    <a class="code" href="struct_rx_sem_data.html">RXSEMDATA</a> *semdata = (<a class="code" href="struct_rx_sem_data.html">RXSEMDATA</a> *)vhandle;</div>
<div class="line"><a name="l01000"></a><span class="lineno"> 1000</span>&#160;    <span class="keywordtype">int</span> rc;</div>
<div class="line"><a name="l01001"></a><span class="lineno"> 1001</span>&#160;    <span class="keywordtype">int</span> val;</div>
<div class="line"><a name="l01002"></a><span class="lineno"> 1002</span>&#160; </div>
<div class="line"><a name="l01003"></a><span class="lineno"> 1003</span>&#160;    rc = sem_getvalue(semdata-&gt;<a class="code" href="struct_rx_sem_data.html#a886bafc79e2d9fab1036d2b71d31ca25">handle</a>, &amp;val);</div>
<div class="line"><a name="l01004"></a><span class="lineno"> 1004</span>&#160;    <span class="keywordflow">if</span> (rc)</div>
<div class="line"><a name="l01005"></a><span class="lineno"> 1005</span>&#160;    {</div>
<div class="line"><a name="l01006"></a><span class="lineno"> 1006</span>&#160;        <span class="keywordflow">if</span> (errno == EINVAL)</div>
<div class="line"><a name="l01007"></a><span class="lineno"> 1007</span>&#160;        {</div>
<div class="line"><a name="l01008"></a><span class="lineno"> 1008</span>&#160;            <span class="keywordflow">return</span> 6;</div>
<div class="line"><a name="l01009"></a><span class="lineno"> 1009</span>&#160;        }</div>
<div class="line"><a name="l01010"></a><span class="lineno"> 1010</span>&#160;        <span class="keywordflow">else</span></div>
<div class="line"><a name="l01011"></a><span class="lineno"> 1011</span>&#160;        {</div>
<div class="line"><a name="l01012"></a><span class="lineno"> 1012</span>&#160;            <span class="keywordflow">return</span> 288;</div>
<div class="line"><a name="l01013"></a><span class="lineno"> 1013</span>&#160;        }</div>
<div class="line"><a name="l01014"></a><span class="lineno"> 1014</span>&#160;    }</div>
<div class="line"><a name="l01015"></a><span class="lineno"> 1015</span>&#160;    <span class="keywordflow">if</span> (val == 0)</div>
<div class="line"><a name="l01016"></a><span class="lineno"> 1016</span>&#160;    {</div>
<div class="line"><a name="l01017"></a><span class="lineno"> 1017</span>&#160;        rc = sem_post(semdata-&gt;<a class="code" href="struct_rx_sem_data.html#a886bafc79e2d9fab1036d2b71d31ca25">handle</a>);</div>
<div class="line"><a name="l01018"></a><span class="lineno"> 1018</span>&#160;        <span class="keywordflow">if</span> (rc)</div>
<div class="line"><a name="l01019"></a><span class="lineno"> 1019</span>&#160;        {</div>
<div class="line"><a name="l01020"></a><span class="lineno"> 1020</span>&#160;            <span class="keywordflow">return</span> 6;</div>
<div class="line"><a name="l01021"></a><span class="lineno"> 1021</span>&#160;        }</div>
<div class="line"><a name="l01022"></a><span class="lineno"> 1022</span>&#160;    }</div>
<div class="line"><a name="l01023"></a><span class="lineno"> 1023</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l01024"></a><span class="lineno"> 1024</span>&#160; </div>
<div class="line"><a name="l01025"></a><span class="lineno"> 1025</span>&#160;}</div>
<div class="line"><a name="l01026"></a><span class="lineno"> 1026</span>&#160; </div>
<div class="line"><a name="l01027"></a><span class="lineno"> 1027</span>&#160; </div>
<div class="line"><a name="l01028"></a><span class="lineno"> 1028</span>&#160;<span class="comment">/*************************************************************************</span></div>
<div class="line"><a name="l01029"></a><span class="lineno"> 1029</span>&#160;<span class="comment">* Function:  SysCloseMutexSem                                            *</span></div>
<div class="line"><a name="l01030"></a><span class="lineno"> 1030</span>&#160;<span class="comment">*                                                                        *</span></div>
<div class="line"><a name="l01031"></a><span class="lineno"> 1031</span>&#160;<span class="comment">* Syntax:    result = SysCloseMutexSem(handle)                           *</span></div>
<div class="line"><a name="l01032"></a><span class="lineno"> 1032</span>&#160;<span class="comment">*                                                                        *</span></div>
<div class="line"><a name="l01033"></a><span class="lineno"> 1033</span>&#160;<span class="comment">* Params:    handle - token returned from SysCreateMutexSem              *</span></div>
<div class="line"><a name="l01034"></a><span class="lineno"> 1034</span>&#160;<span class="comment">*                                                                        *</span></div>
<div class="line"><a name="l01035"></a><span class="lineno"> 1035</span>&#160;<span class="comment">* Return:    result - return code from DosCloseEventSem                  *</span></div>
<div class="line"><a name="l01036"></a><span class="lineno"> 1036</span>&#160;<span class="comment">*************************************************************************/</span></div>
<div class="line"><a name="l01037"></a><span class="lineno"> 1037</span>&#160; </div>
<div class="line"><a name="l01038"></a><span class="lineno"><a class="line" href="unix_2_sys_rexx_util_8cpp.html#a00a165dbf8df5ec859e77894d073d4c6"> 1038</a></span>&#160;<a class="code" href="unix_2_sys_rexx_util_8cpp.html#aa99b04951a3dd00e93a76a3e69bc83f2">RexxRoutine1</a>(<span class="keywordtype">int</span>, SysCloseMutexSem, <a class="code" href="windows_2rexxapitypes_8h.html#a2f338919cf0aa5c3d87df8096b8fa972">uintptr_t</a>, vhandle)</div>
<div class="line"><a name="l01039"></a><span class="lineno"> 1039</span>&#160;{</div>
<div class="line"><a name="l01040"></a><span class="lineno"> 1040</span>&#160;    <a class="code" href="struct_rx_sem_data.html">RXSEMDATA</a> *semdata = (<a class="code" href="struct_rx_sem_data.html">RXSEMDATA</a> *)vhandle;</div>
<div class="line"><a name="l01041"></a><span class="lineno"> 1041</span>&#160; </div>
<div class="line"><a name="l01042"></a><span class="lineno"> 1042</span>&#160;    <span class="keywordflow">if</span> (semdata-&gt;<a class="code" href="struct_rx_sem_data.html#a4c3832abbea5592f324dd2c43e16c12c">named</a> == <span class="keyword">false</span>)</div>
<div class="line"><a name="l01043"></a><span class="lineno"> 1043</span>&#160;    {</div>
<div class="line"><a name="l01044"></a><span class="lineno"> 1044</span>&#160;        <span class="comment">/* this is an unnamed semaphore so we must free the target */</span></div>
<div class="line"><a name="l01045"></a><span class="lineno"> 1045</span>&#160;        <span class="keywordflow">if</span> (sem_destroy(semdata-&gt;<a class="code" href="struct_rx_sem_data.html#a886bafc79e2d9fab1036d2b71d31ca25">handle</a>))</div>
<div class="line"><a name="l01046"></a><span class="lineno"> 1046</span>&#160;        {</div>
<div class="line"><a name="l01047"></a><span class="lineno"> 1047</span>&#160;            <span class="keywordflow">if</span> (errno == EINVAL)</div>
<div class="line"><a name="l01048"></a><span class="lineno"> 1048</span>&#160;            {</div>
<div class="line"><a name="l01049"></a><span class="lineno"> 1049</span>&#160;                <span class="keywordflow">return</span> 6;</div>
<div class="line"><a name="l01050"></a><span class="lineno"> 1050</span>&#160;            }</div>
<div class="line"><a name="l01051"></a><span class="lineno"> 1051</span>&#160;            <span class="keywordflow">else</span> <span class="keywordflow">if</span> (errno)</div>
<div class="line"><a name="l01052"></a><span class="lineno"> 1052</span>&#160;            {</div>
<div class="line"><a name="l01053"></a><span class="lineno"> 1053</span>&#160;                <span class="keywordflow">return</span> 102;</div>
<div class="line"><a name="l01054"></a><span class="lineno"> 1054</span>&#160;            }</div>
<div class="line"><a name="l01055"></a><span class="lineno"> 1055</span>&#160;        }</div>
<div class="line"><a name="l01056"></a><span class="lineno"> 1056</span>&#160;    }</div>
<div class="line"><a name="l01057"></a><span class="lineno"> 1057</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l01058"></a><span class="lineno"> 1058</span>&#160;    {</div>
<div class="line"><a name="l01059"></a><span class="lineno"> 1059</span>&#160;        <span class="comment">/* this is a named semaphore */</span></div>
<div class="line"><a name="l01060"></a><span class="lineno"> 1060</span>&#160;        <span class="keywordflow">if</span> (sem_close(semdata-&gt;<a class="code" href="struct_rx_sem_data.html#a886bafc79e2d9fab1036d2b71d31ca25">handle</a>))</div>
<div class="line"><a name="l01061"></a><span class="lineno"> 1061</span>&#160;        {</div>
<div class="line"><a name="l01062"></a><span class="lineno"> 1062</span>&#160;            <span class="keywordflow">if</span> (errno == EINVAL)</div>
<div class="line"><a name="l01063"></a><span class="lineno"> 1063</span>&#160;            {</div>
<div class="line"><a name="l01064"></a><span class="lineno"> 1064</span>&#160;                <span class="keywordflow">return</span> 6;</div>
<div class="line"><a name="l01065"></a><span class="lineno"> 1065</span>&#160;            }</div>
<div class="line"><a name="l01066"></a><span class="lineno"> 1066</span>&#160;            <span class="keywordflow">else</span> <span class="keywordflow">if</span> (errno)</div>
<div class="line"><a name="l01067"></a><span class="lineno"> 1067</span>&#160;            {</div>
<div class="line"><a name="l01068"></a><span class="lineno"> 1068</span>&#160;                <span class="keywordflow">return</span> 102;</div>
<div class="line"><a name="l01069"></a><span class="lineno"> 1069</span>&#160;            }</div>
<div class="line"><a name="l01070"></a><span class="lineno"> 1070</span>&#160;        }</div>
<div class="line"><a name="l01071"></a><span class="lineno"> 1071</span>&#160;    }</div>
<div class="line"><a name="l01072"></a><span class="lineno"> 1072</span>&#160;    free(semdata);</div>
<div class="line"><a name="l01073"></a><span class="lineno"> 1073</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l01074"></a><span class="lineno"> 1074</span>&#160;}</div>
<div class="line"><a name="l01075"></a><span class="lineno"> 1075</span>&#160; </div>
<div class="line"><a name="l01076"></a><span class="lineno"> 1076</span>&#160;<span class="comment">// macOS doesn&#39;t support above sem_xxx functions</span></div>
<div class="line"><a name="l01077"></a><span class="lineno"> 1077</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l01078"></a><span class="lineno"> 1078</span>&#160; </div>
<div class="line"><a name="l01079"></a><span class="lineno"> 1079</span>&#160; </div>
<div class="line"><a name="l01080"></a><span class="lineno"> 1080</span>&#160;<span class="comment">/*************************************************************************</span></div>
<div class="line"><a name="l01081"></a><span class="lineno"> 1081</span>&#160;<span class="comment">* Function:  SysSetPriority                                              *</span></div>
<div class="line"><a name="l01082"></a><span class="lineno"> 1082</span>&#160;<span class="comment">*                                                                        *</span></div>
<div class="line"><a name="l01083"></a><span class="lineno"> 1083</span>&#160;<span class="comment">* Syntax:    result = SysSetPriority([cls], prio)                        *</span></div>
<div class="line"><a name="l01084"></a><span class="lineno"> 1084</span>&#160;<span class="comment">*                                                                        *</span></div>
<div class="line"><a name="l01085"></a><span class="lineno"> 1085</span>&#160;<span class="comment">* Params:    cls    - ignored                                            *</span></div>
<div class="line"><a name="l01086"></a><span class="lineno"> 1086</span>&#160;<span class="comment">*            prio   - scheduling priority -19 to 20 (negative &quot;nice&quot;)    *</span></div>
<div class="line"><a name="l01087"></a><span class="lineno"> 1087</span>&#160;<span class="comment">*                     (lower to higher priority)                         *</span></div>
<div class="line"><a name="l01088"></a><span class="lineno"> 1088</span>&#160;<span class="comment">* Return:    0    success                                                *</span></div>
<div class="line"><a name="l01089"></a><span class="lineno"> 1089</span>&#160;<span class="comment">*            &gt;0   errno from setpriority() failure                       *</span></div>
<div class="line"><a name="l01090"></a><span class="lineno"> 1090</span>&#160;<span class="comment">*                                                                        *</span></div>
<div class="line"><a name="l01091"></a><span class="lineno"> 1091</span>&#160;<span class="comment">*************************************************************************/</span></div>
<div class="line"><a name="l01092"></a><span class="lineno"><a class="line" href="unix_2_sys_rexx_util_8cpp.html#ad13c1b23081e9bfcc87ff1450c6b58ef"> 1092</a></span>&#160;<a class="code" href="unix_2_sys_rexx_util_8cpp.html#ae76cb3e703d83ba4aef58ac990d00ff3">RexxRoutine2</a>(<span class="keywordtype">int</span>, SysSetPriority, OPTIONAL_int32_t, cls, <a class="code" href="windows_2rexxapitypes_8h.html#a32f2e37ee053cf2ce8ca28d1f74630e5">int32_t</a>, prio)</div>
<div class="line"><a name="l01093"></a><span class="lineno"> 1093</span>&#160;{</div>
<div class="line"><a name="l01094"></a><span class="lineno"> 1094</span>&#160;    <span class="comment">// priority is the negated prio argument</span></div>
<div class="line"><a name="l01095"></a><span class="lineno"> 1095</span>&#160;    <span class="keywordflow">return</span> setpriority(PRIO_PROCESS, 0, -prio) == 0 ? 0 : errno;</div>
<div class="line"><a name="l01096"></a><span class="lineno"> 1096</span>&#160;}</div>
<div class="line"><a name="l01097"></a><span class="lineno"> 1097</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l01098"></a><span class="lineno"> 1098</span>&#160;<span class="comment">/**</span></div>
<div class="line"><a name="l01099"></a><span class="lineno"> 1099</span>&#160;<span class="comment"> * Retrieve an error message from the repository</span></div>
<div class="line"><a name="l01100"></a><span class="lineno"> 1100</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l01101"></a><span class="lineno"> 1101</span>&#160;<span class="comment"> * @param repository The named repository (can be null, which means retrieve the rexx error message)</span></div>
<div class="line"><a name="l01102"></a><span class="lineno"> 1102</span>&#160;<span class="comment"> * @param setnum     The setnumber in the catalog to use</span></div>
<div class="line"><a name="l01103"></a><span class="lineno"> 1103</span>&#160;<span class="comment"> * @param msgnum     The target message number</span></div>
<div class="line"><a name="l01104"></a><span class="lineno"> 1104</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l01105"></a><span class="lineno"> 1105</span>&#160;<span class="comment"> * @return The error message text or NULL if not found.</span></div>
<div class="line"><a name="l01106"></a><span class="lineno"> 1106</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l01107"></a><span class="lineno"><a class="line" href="unix_2_sys_rexx_util_8cpp.html#ab715438f141dbd32bc68f03bae3eac91"> 1107</a></span>&#160;<span class="keywordtype">char</span>* <a class="code" href="unix_2_sys_rexx_util_8cpp.html#ab715438f141dbd32bc68f03bae3eac91">getErrorMessage</a>(<span class="keyword">const</span> <span class="keywordtype">char</span> *repository, <span class="keywordtype">int</span> setnum, <span class="keywordtype">int</span> msgnum)</div>
<div class="line"><a name="l01108"></a><span class="lineno"> 1108</span>&#160;{</div>
<div class="line"><a name="l01109"></a><span class="lineno"> 1109</span>&#160;    <span class="comment">// if this is the default or explicitly &quot;rexx.cat&quot;, then we retrieve this</span></div>
<div class="line"><a name="l01110"></a><span class="lineno"> 1110</span>&#160;    <span class="comment">// directly from the interpreter</span></div>
<div class="line"><a name="l01111"></a><span class="lineno"> 1111</span>&#160;    <span class="keywordflow">if</span> (repository == NULL || strcmp(repository, <a class="code" href="unix_2_sys_rexx_util_8cpp.html#abcdf5a573b42c526e95a0ff6c4339d78">REXXMESSAGEFILE</a>) == 0)</div>
<div class="line"><a name="l01112"></a><span class="lineno"> 1112</span>&#160;    {</div>
<div class="line"><a name="l01113"></a><span class="lineno"> 1113</span>&#160;        <span class="keyword">const</span> <span class="keywordtype">char</span> *msg = (setnum == 1) ? <a class="code" href="_interpreter_8cpp.html#a5c5fd6ead0e820c49dfd2f1194012f26">RexxGetErrorMessageByNumber</a>(msgnum): NULL;</div>
<div class="line"><a name="l01114"></a><span class="lineno"> 1114</span>&#160;        <span class="keywordflow">if</span> (msg == NULL)</div>
<div class="line"><a name="l01115"></a><span class="lineno"> 1115</span>&#160;        {</div>
<div class="line"><a name="l01116"></a><span class="lineno"> 1116</span>&#160;            msg = <span class="stringliteral">&quot;Error: Message not found&quot;</span>;</div>
<div class="line"><a name="l01117"></a><span class="lineno"> 1117</span>&#160;        }</div>
<div class="line"><a name="l01118"></a><span class="lineno"> 1118</span>&#160;        <span class="keywordflow">return</span> strdup(msg);</div>
<div class="line"><a name="l01119"></a><span class="lineno"> 1119</span>&#160;    }</div>
<div class="line"><a name="l01120"></a><span class="lineno"> 1120</span>&#160;<span class="preprocessor">#if defined( HAVE_CATOPEN )</span></div>
<div class="line"><a name="l01121"></a><span class="lineno"> 1121</span>&#160; </div>
<div class="line"><a name="l01122"></a><span class="lineno"> 1122</span>&#160;    <span class="comment">// if name doesn&#39;t contain a &#39;/&#39; catopen() will search along NLSPATH</span></div>
<div class="line"><a name="l01123"></a><span class="lineno"> 1123</span>&#160;    <span class="comment">// NLSPATH may contain both %N, which is replaced by the specified</span></div>
<div class="line"><a name="l01124"></a><span class="lineno"> 1124</span>&#160;    <span class="comment">// catalog name, and %L, which is replaced by the LANG variable.</span></div>
<div class="line"><a name="l01125"></a><span class="lineno"> 1125</span>&#160;    nl_catd catalog;                     <span class="comment">// catalog handle</span></div>
<div class="line"><a name="l01126"></a><span class="lineno"> 1126</span>&#160; </div>
<div class="line"><a name="l01127"></a><span class="lineno"> 1127</span>&#160;    <span class="keywordflow">if</span> ((catalog = catopen(repository, 0)) == (nl_catd)-1)</div>
<div class="line"><a name="l01128"></a><span class="lineno"> 1128</span>&#160;    {</div>
<div class="line"><a name="l01129"></a><span class="lineno"> 1129</span>&#160;        <span class="keywordflow">return</span> strdup(<span class="stringliteral">&quot;Error: Message catalog not found&quot;</span>);</div>
<div class="line"><a name="l01130"></a><span class="lineno"> 1130</span>&#160;    }</div>
<div class="line"><a name="l01131"></a><span class="lineno"> 1131</span>&#160; </div>
<div class="line"><a name="l01132"></a><span class="lineno"> 1132</span>&#160;    <span class="keywordtype">char</span> *msg = catgets(catalog, setnum, (<span class="keywordtype">int</span>)msgnum, <span class="stringliteral">&quot;&quot;</span>);</div>
<div class="line"><a name="l01133"></a><span class="lineno"> 1133</span>&#160;    <span class="keywordflow">if</span> (*msg == <span class="charliteral">&#39;\0&#39;</span>)</div>
<div class="line"><a name="l01134"></a><span class="lineno"> 1134</span>&#160;    {</div>
<div class="line"><a name="l01135"></a><span class="lineno"> 1135</span>&#160;        msg = strdup(errno == EBADF ? <span class="stringliteral">&quot;Error: Invalid message catalog&quot;</span> : <span class="stringliteral">&quot;Error: Message not found&quot;</span>);</div>
<div class="line"><a name="l01136"></a><span class="lineno"> 1136</span>&#160;    }</div>
<div class="line"><a name="l01137"></a><span class="lineno"> 1137</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l01138"></a><span class="lineno"> 1138</span>&#160;    {</div>
<div class="line"><a name="l01139"></a><span class="lineno"> 1139</span>&#160;        <span class="comment">// catgets returns the message in an internal buffer</span></div>
<div class="line"><a name="l01140"></a><span class="lineno"> 1140</span>&#160;        <span class="comment">// we need to copy it before closing the catalog</span></div>
<div class="line"><a name="l01141"></a><span class="lineno"> 1141</span>&#160;        msg = strdup(msg);</div>
<div class="line"><a name="l01142"></a><span class="lineno"> 1142</span>&#160;    }</div>
<div class="line"><a name="l01143"></a><span class="lineno"> 1143</span>&#160;    catclose(catalog);                   <span class="comment">// close the catalog</span></div>
<div class="line"><a name="l01144"></a><span class="lineno"> 1144</span>&#160; </div>
<div class="line"><a name="l01145"></a><span class="lineno"> 1145</span>&#160;    <span class="keywordflow">return</span> msg;                          <span class="comment">// return the message or our error</span></div>
<div class="line"><a name="l01146"></a><span class="lineno"> 1146</span>&#160; </div>
<div class="line"><a name="l01147"></a><span class="lineno"> 1147</span>&#160;<span class="preprocessor">#else</span></div>
<div class="line"><a name="l01148"></a><span class="lineno"> 1148</span>&#160;    <span class="comment">// if no catalog support, we just return an error message</span></div>
<div class="line"><a name="l01149"></a><span class="lineno"> 1149</span>&#160;    <span class="keywordflow">return</span> strdup(<span class="stringliteral">&quot;Error: Message catalog (catopen) not supported&quot;</span>);</div>
<div class="line"><a name="l01150"></a><span class="lineno"> 1150</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l01151"></a><span class="lineno"> 1151</span>&#160;}</div>
<div class="line"><a name="l01152"></a><span class="lineno"> 1152</span>&#160; </div>
<div class="line"><a name="l01153"></a><span class="lineno"> 1153</span>&#160; </div>
<div class="line"><a name="l01154"></a><span class="lineno"> 1154</span>&#160;<span class="comment">/*************************************************************************</span></div>
<div class="line"><a name="l01155"></a><span class="lineno"> 1155</span>&#160;<span class="comment">* Function:  SysGetMessage                                               *</span></div>
<div class="line"><a name="l01156"></a><span class="lineno"> 1156</span>&#160;<span class="comment">*                                                                        *</span></div>
<div class="line"><a name="l01157"></a><span class="lineno"> 1157</span>&#160;<span class="comment">* Syntax:    call SysGetMessage msgnum [,file] [,str1]...[,str9]         *</span></div>
<div class="line"><a name="l01158"></a><span class="lineno"> 1158</span>&#160;<span class="comment">*                                                                        *</span></div>
<div class="line"><a name="l01159"></a><span class="lineno"> 1159</span>&#160;<span class="comment">* Params:    file           - Name of message file to get message from.  *</span></div>
<div class="line"><a name="l01160"></a><span class="lineno"> 1160</span>&#160;<span class="comment">*                              Default is OSO001.MSG.                    *</span></div>
<div class="line"><a name="l01161"></a><span class="lineno"> 1161</span>&#160;<span class="comment">*            msgnum         - Number of message being queried.           *</span></div>
<div class="line"><a name="l01162"></a><span class="lineno"> 1162</span>&#160;<span class="comment">*            str1 ... str9  - Insertion strings.  For messages which     *</span></div>
<div class="line"><a name="l01163"></a><span class="lineno"> 1163</span>&#160;<span class="comment">*                              contain %1, %2, etc, the str1, str2, etc  *</span></div>
<div class="line"><a name="l01164"></a><span class="lineno"> 1164</span>&#160;<span class="comment">*                              strings will be inserted (if given).      *</span></div>
<div class="line"><a name="l01165"></a><span class="lineno"> 1165</span>&#160;<span class="comment">*                                                                        *</span></div>
<div class="line"><a name="l01166"></a><span class="lineno"> 1166</span>&#160;<span class="comment">* Return:    The message with the inserted strings (if given).           *</span></div>
<div class="line"><a name="l01167"></a><span class="lineno"> 1167</span>&#160;<span class="comment">* Note:      The set number ist always 1.</span></div>
<div class="line"><a name="l01168"></a><span class="lineno"> 1168</span>&#160;<span class="comment">*************************************************************************/</span></div>
<div class="line"><a name="l01169"></a><span class="lineno"><a class="line" href="unix_2_sys_rexx_util_8cpp.html#a83a3cabd5d6efd9dfe1c840ea0415167"> 1169</a></span>&#160;<a class="code" href="unix_2_sys_rexx_util_8cpp.html#a83a3cabd5d6efd9dfe1c840ea0415167">RexxRoutine3</a>(<a class="code" href="rexx_8h.html#a64dfe004825692637e2075467179fcd9">RexxStringObject</a>, SysGetMessage, positive_wholenumber_t, msgnum, OPTIONAL_CSTRING, msgfile, <a class="code" href="oorexxapi_8h.html#aae1e6d73838504107707970bedfb1a40">ARGLIST</a>, args)</div>
<div class="line"><a name="l01170"></a><span class="lineno"> 1170</span>&#160;{</div>
<div class="line"><a name="l01171"></a><span class="lineno"> 1171</span>&#160;    <span class="comment">// this always uses one for the set number</span></div>
<div class="line"><a name="l01172"></a><span class="lineno"> 1172</span>&#160;    <a class="code" href="class_auto_free.html">AutoFree</a> message = <a class="code" href="unix_2_sys_rexx_util_8cpp.html#ab715438f141dbd32bc68f03bae3eac91">getErrorMessage</a>(msgfile, 1, msgnum);</div>
<div class="line"><a name="l01173"></a><span class="lineno"> 1173</span>&#160; </div>
<div class="line"><a name="l01174"></a><span class="lineno"> 1174</span>&#160;    <span class="comment">// go format the message with the substitutions.</span></div>
<div class="line"><a name="l01175"></a><span class="lineno"> 1175</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="_rexx_util_common_8hpp.html#a09190d1437a363d7b59a07c9092cb85d">formatMessage</a>(context, message, args, 3);</div>
<div class="line"><a name="l01176"></a><span class="lineno"> 1176</span>&#160;}</div>
<div class="line"><a name="l01177"></a><span class="lineno"> 1177</span>&#160; </div>
<div class="line"><a name="l01178"></a><span class="lineno"> 1178</span>&#160; </div>
<div class="line"><a name="l01179"></a><span class="lineno"> 1179</span>&#160; </div>
<div class="line"><a name="l01180"></a><span class="lineno"> 1180</span>&#160;<span class="comment">/*************************************************************************</span></div>
<div class="line"><a name="l01181"></a><span class="lineno"> 1181</span>&#160;<span class="comment">* Function:  SysGetMessageX                                              *</span></div>
<div class="line"><a name="l01182"></a><span class="lineno"> 1182</span>&#160;<span class="comment">*                                                                        *</span></div>
<div class="line"><a name="l01183"></a><span class="lineno"> 1183</span>&#160;<span class="comment">* Syntax:    call SysGetMessageX setnum, msgnum [,file] [,str1]...[,str9]*</span></div>
<div class="line"><a name="l01184"></a><span class="lineno"> 1184</span>&#160;<span class="comment">*                                                                        *</span></div>
<div class="line"><a name="l01185"></a><span class="lineno"> 1185</span>&#160;<span class="comment">* Params:    file           - Name of message file to get message from.  *</span></div>
<div class="line"><a name="l01186"></a><span class="lineno"> 1186</span>&#160;<span class="comment">*                              Default is OSO001.MSG.                    *</span></div>
<div class="line"><a name="l01187"></a><span class="lineno"> 1187</span>&#160;<span class="comment">*            msgnum         - Number of message being queried.           *</span></div>
<div class="line"><a name="l01188"></a><span class="lineno"> 1188</span>&#160;<span class="comment">*            str1 ... str9  - Insertion strings.  For messages which     *</span></div>
<div class="line"><a name="l01189"></a><span class="lineno"> 1189</span>&#160;<span class="comment">*                              contain %1, %2, etc, the str1, str2, etc  *</span></div>
<div class="line"><a name="l01190"></a><span class="lineno"> 1190</span>&#160;<span class="comment">*                              strings will be inserted (if given).      *</span></div>
<div class="line"><a name="l01191"></a><span class="lineno"> 1191</span>&#160;<span class="comment">*            setnum         - set number in the catalog                  *</span></div>
<div class="line"><a name="l01192"></a><span class="lineno"> 1192</span>&#160;<span class="comment">*                                                                        *</span></div>
<div class="line"><a name="l01193"></a><span class="lineno"> 1193</span>&#160;<span class="comment">* Return:    The message with the inserted strings (if given).           *</span></div>
<div class="line"><a name="l01194"></a><span class="lineno"> 1194</span>&#160;<span class="comment">* Note:      This is a special Unix only version of SysGetMessage which  *</span></div>
<div class="line"><a name="l01195"></a><span class="lineno"> 1195</span>&#160;<span class="comment">*            supports the selection of a set in the msg catalog.         *</span></div>
<div class="line"><a name="l01196"></a><span class="lineno"> 1196</span>&#160;<span class="comment">*************************************************************************/</span></div>
<div class="line"><a name="l01197"></a><span class="lineno"> 1197</span>&#160; </div>
<div class="line"><a name="l01198"></a><span class="lineno"><a class="line" href="unix_2_sys_rexx_util_8cpp.html#a1edebb0fd32ce50dcb56a3ce000e41e1"> 1198</a></span>&#160;<a class="code" href="unix_2_sys_rexx_util_8cpp.html#a1edebb0fd32ce50dcb56a3ce000e41e1">RexxRoutine4</a>(<a class="code" href="rexx_8h.html#a64dfe004825692637e2075467179fcd9">RexxStringObject</a>, SysGetMessageX, positive_wholenumber_t, setnum, positive_wholenumber_t, msgnum, OPTIONAL_CSTRING, msgfile, <a class="code" href="oorexxapi_8h.html#aae1e6d73838504107707970bedfb1a40">ARGLIST</a>, args)</div>
<div class="line"><a name="l01199"></a><span class="lineno"> 1199</span>&#160;{</div>
<div class="line"><a name="l01200"></a><span class="lineno"> 1200</span>&#160;    <span class="comment">// this always uses one for the set number</span></div>
<div class="line"><a name="l01201"></a><span class="lineno"> 1201</span>&#160;    <a class="code" href="class_auto_free.html">AutoFree</a> message = <a class="code" href="unix_2_sys_rexx_util_8cpp.html#ab715438f141dbd32bc68f03bae3eac91">getErrorMessage</a>(msgfile, (<span class="keywordtype">int</span>)setnum, (<span class="keywordtype">int</span>)msgnum);</div>
<div class="line"><a name="l01202"></a><span class="lineno"> 1202</span>&#160; </div>
<div class="line"><a name="l01203"></a><span class="lineno"> 1203</span>&#160;    <span class="comment">// go format the message with the substitutions.</span></div>
<div class="line"><a name="l01204"></a><span class="lineno"> 1204</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="_rexx_util_common_8hpp.html#a09190d1437a363d7b59a07c9092cb85d">formatMessage</a>(context, message, args, 4);</div>
<div class="line"><a name="l01205"></a><span class="lineno"> 1205</span>&#160;}</div>
<div class="line"><a name="l01206"></a><span class="lineno"> 1206</span>&#160; </div>
<div class="line"><a name="l01207"></a><span class="lineno"> 1207</span>&#160; </div>
<div class="line"><a name="l01208"></a><span class="lineno"> 1208</span>&#160;<span class="comment">/*************************************************************************</span></div>
<div class="line"><a name="l01209"></a><span class="lineno"> 1209</span>&#160;<span class="comment">* Function:  SysGetKey                                                   *</span></div>
<div class="line"><a name="l01210"></a><span class="lineno"> 1210</span>&#160;<span class="comment">*                                                                        *</span></div>
<div class="line"><a name="l01211"></a><span class="lineno"> 1211</span>&#160;<span class="comment">* Syntax:    call SysGetKey [echo]                                       *</span></div>
<div class="line"><a name="l01212"></a><span class="lineno"> 1212</span>&#160;<span class="comment">*                                                                        *</span></div>
<div class="line"><a name="l01213"></a><span class="lineno"> 1213</span>&#160;<span class="comment">* Params:    echo - Either of the following:                             *</span></div>
<div class="line"><a name="l01214"></a><span class="lineno"> 1214</span>&#160;<span class="comment">*                    &#39;ECHO&#39;   - Echo the inputted key (default).         *</span></div>
<div class="line"><a name="l01215"></a><span class="lineno"> 1215</span>&#160;<span class="comment">*                    &#39;NOECHO&#39; - Do not echo the inputted key.            *</span></div>
<div class="line"><a name="l01216"></a><span class="lineno"> 1216</span>&#160;<span class="comment">*                                                                        *</span></div>
<div class="line"><a name="l01217"></a><span class="lineno"> 1217</span>&#160;<span class="comment">* Return:    The key striked.                                            *</span></div>
<div class="line"><a name="l01218"></a><span class="lineno"> 1218</span>&#160;<span class="comment">*************************************************************************/</span></div>
<div class="line"><a name="l01219"></a><span class="lineno"> 1219</span>&#160; </div>
<div class="line"><a name="l01220"></a><span class="lineno"><a class="line" href="unix_2_sys_rexx_util_8cpp.html#a5a1d0cae38b497ff5641d1dd889612c7"> 1220</a></span>&#160;<a class="code" href="unix_2_sys_rexx_util_8cpp.html#aa99b04951a3dd00e93a76a3e69bc83f2">RexxRoutine1</a>(<a class="code" href="rexx_8h.html#a64dfe004825692637e2075467179fcd9">RexxStringObject</a>, SysGetKey, OPTIONAL_CSTRING, echoArg)</div>
<div class="line"><a name="l01221"></a><span class="lineno"> 1221</span>&#160;{</div>
<div class="line"><a name="l01222"></a><span class="lineno"> 1222</span>&#160;    <span class="keywordtype">bool</span> echo = <span class="keyword">true</span>;                  <span class="comment">/* Set to false if we         */</span></div>
<div class="line"><a name="l01223"></a><span class="lineno"> 1223</span>&#160; </div>
<div class="line"><a name="l01224"></a><span class="lineno"> 1224</span>&#160;    <span class="keywordflow">if</span> (echoArg != NULL)                  <span class="comment">/* validate arguments         */</span></div>
<div class="line"><a name="l01225"></a><span class="lineno"> 1225</span>&#160;    {</div>
<div class="line"><a name="l01226"></a><span class="lineno"> 1226</span>&#160;        <span class="keywordflow">if</span> (!strcasecmp(echoArg, <span class="stringliteral">&quot;NOECHO&quot;</span>))</div>
<div class="line"><a name="l01227"></a><span class="lineno"> 1227</span>&#160;        {</div>
<div class="line"><a name="l01228"></a><span class="lineno"> 1228</span>&#160;            echo = <span class="keyword">false</span>;</div>
<div class="line"><a name="l01229"></a><span class="lineno"> 1229</span>&#160;        }</div>
<div class="line"><a name="l01230"></a><span class="lineno"> 1230</span>&#160;        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (strcasecmp(echoArg, <span class="stringliteral">&quot;ECHO&quot;</span>))</div>
<div class="line"><a name="l01231"></a><span class="lineno"> 1231</span>&#160;        {</div>
<div class="line"><a name="l01232"></a><span class="lineno"> 1232</span>&#160;            <a class="code" href="_rexx_util_common_8hpp.html#a1f0cf79aea937d49702908d656a54b9d">invalidOptionException</a>(context, <span class="stringliteral">&quot;SysGetKey&quot;</span>, <span class="stringliteral">&quot;echo&quot;</span>, <span class="stringliteral">&quot;&#39;ECHO&#39; or &#39;NOECHO&#39;&quot;</span>, echoArg);</div>
<div class="line"><a name="l01233"></a><span class="lineno"> 1233</span>&#160;        }</div>
<div class="line"><a name="l01234"></a><span class="lineno"> 1234</span>&#160;    }</div>
<div class="line"><a name="l01235"></a><span class="lineno"> 1235</span>&#160; </div>
<div class="line"><a name="l01236"></a><span class="lineno"> 1236</span>&#160;    <span class="keywordtype">char</span> buffer[4];</div>
<div class="line"><a name="l01237"></a><span class="lineno"> 1237</span>&#160; </div>
<div class="line"><a name="l01238"></a><span class="lineno"> 1238</span>&#160;    <a class="code" href="unix_2_sys_rexx_util_8cpp.html#a7255a3fd7af0d5bcfa4aacaf7d1fee91">getkey</a>(buffer, echo);         <span class="comment">/* call the complicated part  */</span></div>
<div class="line"><a name="l01239"></a><span class="lineno"> 1239</span>&#160;    <span class="keywordflow">return</span> context-&gt;NewStringFromAsciiz(buffer);</div>
<div class="line"><a name="l01240"></a><span class="lineno"> 1240</span>&#160;}</div>
<div class="line"><a name="l01241"></a><span class="lineno"> 1241</span>&#160; </div>
<div class="line"><a name="l01242"></a><span class="lineno"> 1242</span>&#160;<span class="comment">/*************************************************************************</span></div>
<div class="line"><a name="l01243"></a><span class="lineno"> 1243</span>&#160;<span class="comment">* Function:  SysFork                                                     *</span></div>
<div class="line"><a name="l01244"></a><span class="lineno"> 1244</span>&#160;<span class="comment">*                                                                        *</span></div>
<div class="line"><a name="l01245"></a><span class="lineno"> 1245</span>&#160;<span class="comment">* Description:   Function to migrate CREXX for AIX procedures.           *</span></div>
<div class="line"><a name="l01246"></a><span class="lineno"> 1246</span>&#160;<span class="comment">*                                                                        *</span></div>
<div class="line"><a name="l01247"></a><span class="lineno"> 1247</span>&#160;<span class="comment">* Syntax:    call SysFork()                                              *</span></div>
<div class="line"><a name="l01248"></a><span class="lineno"> 1248</span>&#160;<span class="comment">*                                                                        *</span></div>
<div class="line"><a name="l01249"></a><span class="lineno"> 1249</span>&#160;<span class="comment">* Return:    Process_ID   ( to parent child&#39;&#39;s ID / to child the ID 0 )  *</span></div>
<div class="line"><a name="l01250"></a><span class="lineno"> 1250</span>&#160;<span class="comment">*************************************************************************/</span></div>
<div class="line"><a name="l01251"></a><span class="lineno"> 1251</span>&#160; </div>
<div class="line"><a name="l01252"></a><span class="lineno"><a class="line" href="unix_2_sys_rexx_util_8cpp.html#afcc6272e66403e8ad96d2f5f74d9ccf2"> 1252</a></span>&#160;<a class="code" href="unix_2_sys_rexx_util_8cpp.html#a379643b4a1b8f467f7de46208cb47b46">RexxRoutine0</a>(<span class="keywordtype">int</span>, SysFork)</div>
<div class="line"><a name="l01253"></a><span class="lineno"> 1253</span>&#160;{</div>
<div class="line"><a name="l01254"></a><span class="lineno"> 1254</span>&#160;    <span class="keywordflow">return</span> fork();</div>
<div class="line"><a name="l01255"></a><span class="lineno"> 1255</span>&#160;}</div>
<div class="line"><a name="l01256"></a><span class="lineno"> 1256</span>&#160; </div>
<div class="line"><a name="l01257"></a><span class="lineno"> 1257</span>&#160;<span class="comment">/*************************************************************************</span></div>
<div class="line"><a name="l01258"></a><span class="lineno"> 1258</span>&#160;<span class="comment">* Function:  SysWait                                                     *</span></div>
<div class="line"><a name="l01259"></a><span class="lineno"> 1259</span>&#160;<span class="comment">*                                                                        *</span></div>
<div class="line"><a name="l01260"></a><span class="lineno"> 1260</span>&#160;<span class="comment">* Description:   Function to migrate CREXX for AIX procedures.           *</span></div>
<div class="line"><a name="l01261"></a><span class="lineno"> 1261</span>&#160;<span class="comment">*                                                                        *</span></div>
<div class="line"><a name="l01262"></a><span class="lineno"> 1262</span>&#160;<span class="comment">* Syntax:    call SysWait()                                              *</span></div>
<div class="line"><a name="l01263"></a><span class="lineno"> 1263</span>&#160;<span class="comment">*                                                                        *</span></div>
<div class="line"><a name="l01264"></a><span class="lineno"> 1264</span>&#160;<span class="comment">* Return:    exit code of child                                          *</span></div>
<div class="line"><a name="l01265"></a><span class="lineno"> 1265</span>&#160;<span class="comment">*************************************************************************/</span></div>
<div class="line"><a name="l01266"></a><span class="lineno"> 1266</span>&#160; </div>
<div class="line"><a name="l01267"></a><span class="lineno"><a class="line" href="unix_2_sys_rexx_util_8cpp.html#af5752998e700069ec8b92b3efc7ca884"> 1267</a></span>&#160;<a class="code" href="unix_2_sys_rexx_util_8cpp.html#a379643b4a1b8f467f7de46208cb47b46">RexxRoutine0</a>(<span class="keywordtype">int</span>, SysWait)</div>
<div class="line"><a name="l01268"></a><span class="lineno"> 1268</span>&#160;{</div>
<div class="line"><a name="l01269"></a><span class="lineno"> 1269</span>&#160;    <span class="keywordtype">int</span> iStatus;</div>
<div class="line"><a name="l01270"></a><span class="lineno"> 1270</span>&#160;    wait(&amp;iStatus);</div>
<div class="line"><a name="l01271"></a><span class="lineno"> 1271</span>&#160;    <span class="keywordflow">return</span> iStatus;</div>
<div class="line"><a name="l01272"></a><span class="lineno"> 1272</span>&#160;}</div>
<div class="line"><a name="l01273"></a><span class="lineno"> 1273</span>&#160; </div>
<div class="line"><a name="l01274"></a><span class="lineno"> 1274</span>&#160;<span class="comment">/*************************************************************************</span></div>
<div class="line"><a name="l01275"></a><span class="lineno"> 1275</span>&#160;<span class="comment">* Function:  SysCreatePipe                                               *</span></div>
<div class="line"><a name="l01276"></a><span class="lineno"> 1276</span>&#160;<span class="comment">*                                                                        *</span></div>
<div class="line"><a name="l01277"></a><span class="lineno"> 1277</span>&#160;<span class="comment">* Description:   Function to migrate CREXX for AIX procedures.           *</span></div>
<div class="line"><a name="l01278"></a><span class="lineno"> 1278</span>&#160;<span class="comment">*                Function creates an unnamed pipe                        *</span></div>
<div class="line"><a name="l01279"></a><span class="lineno"> 1279</span>&#160;<span class="comment">*                                                                        *</span></div>
<div class="line"><a name="l01280"></a><span class="lineno"> 1280</span>&#160;<span class="comment">* Syntax:    call SysCreatePipe( Blocking | Nonblocking )                *</span></div>
<div class="line"><a name="l01281"></a><span class="lineno"> 1281</span>&#160;<span class="comment">*                                                                        *</span></div>
<div class="line"><a name="l01282"></a><span class="lineno"> 1282</span>&#160;<span class="comment">* Return:    &#39;handle handle&#39;     ( handle for read and handle for write )*</span></div>
<div class="line"><a name="l01283"></a><span class="lineno"> 1283</span>&#160;<span class="comment">*************************************************************************/</span></div>
<div class="line"><a name="l01284"></a><span class="lineno"> 1284</span>&#160; </div>
<div class="line"><a name="l01285"></a><span class="lineno"><a class="line" href="unix_2_sys_rexx_util_8cpp.html#aa3239cac764110bdf000e0b072297c40"> 1285</a></span>&#160;<a class="code" href="unix_2_sys_rexx_util_8cpp.html#aa99b04951a3dd00e93a76a3e69bc83f2">RexxRoutine1</a>(<a class="code" href="rexx_8h.html#a64dfe004825692637e2075467179fcd9">RexxStringObject</a>, SysCreatePipe, OPTIONAL_CSTRING, blocking)</div>
<div class="line"><a name="l01286"></a><span class="lineno"> 1286</span>&#160;{</div>
<div class="line"><a name="l01287"></a><span class="lineno"> 1287</span>&#160;    <span class="keywordtype">int</span>  iStatus;</div>
<div class="line"><a name="l01288"></a><span class="lineno"> 1288</span>&#160;    <span class="keywordtype">int</span>  iaH[2];</div>
<div class="line"><a name="l01289"></a><span class="lineno"> 1289</span>&#160;    <span class="keywordtype">char</span> cBlocking = 1;                       <span class="comment">// default is blocking</span></div>
<div class="line"><a name="l01290"></a><span class="lineno"> 1290</span>&#160; </div>
<div class="line"><a name="l01291"></a><span class="lineno"> 1291</span>&#160;    <span class="comment">/* One arg, first char is &#39;b&#39;?    */</span></div>
<div class="line"><a name="l01292"></a><span class="lineno"> 1292</span>&#160;    <span class="keywordflow">if</span> (blocking != NULL)</div>
<div class="line"><a name="l01293"></a><span class="lineno"> 1293</span>&#160;    {</div>
<div class="line"><a name="l01294"></a><span class="lineno"> 1294</span>&#160;        <span class="keywordflow">if</span> (blocking[0] == <span class="charliteral">&#39;n&#39;</span> || blocking[0] == <span class="charliteral">&#39;N&#39;</span>)</div>
<div class="line"><a name="l01295"></a><span class="lineno"> 1295</span>&#160;        {</div>
<div class="line"><a name="l01296"></a><span class="lineno"> 1296</span>&#160;            cBlocking = 0;                         <span class="comment">// non blocking needed</span></div>
<div class="line"><a name="l01297"></a><span class="lineno"> 1297</span>&#160;        }</div>
<div class="line"><a name="l01298"></a><span class="lineno"> 1298</span>&#160;        <span class="comment">/* One arg, first char is &#39;n&#39;?    */</span></div>
<div class="line"><a name="l01299"></a><span class="lineno"> 1299</span>&#160;        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (blocking[0] != <span class="charliteral">&#39;b&#39;</span> &amp;&amp; blocking[0] != <span class="charliteral">&#39;B&#39;</span>)</div>
<div class="line"><a name="l01300"></a><span class="lineno"> 1300</span>&#160;        {</div>
<div class="line"><a name="l01301"></a><span class="lineno"> 1301</span>&#160;            <a class="code" href="_rexx_util_common_8hpp.html#a1f0cf79aea937d49702908d656a54b9d">invalidOptionException</a>(context, <span class="stringliteral">&quot;SysCreatePipe&quot;</span>, <span class="stringliteral">&quot;blocking&quot;</span>, <span class="stringliteral">&quot;&#39;B&#39; or &#39;N&#39;&quot;</span>, blocking);</div>
<div class="line"><a name="l01302"></a><span class="lineno"> 1302</span>&#160;        }</div>
<div class="line"><a name="l01303"></a><span class="lineno"> 1303</span>&#160;    }</div>
<div class="line"><a name="l01304"></a><span class="lineno"> 1304</span>&#160; </div>
<div class="line"><a name="l01305"></a><span class="lineno"> 1305</span>&#160; </div>
<div class="line"><a name="l01306"></a><span class="lineno"> 1306</span>&#160;    <span class="keywordflow">if</span> (pipe(iaH))                             <span class="comment">/* Create the pipe            */</span></div>
<div class="line"><a name="l01307"></a><span class="lineno"> 1307</span>&#160;    {</div>
<div class="line"><a name="l01308"></a><span class="lineno"> 1308</span>&#160;        perror(<span class="stringliteral">&quot;*** ERROR: Creating pipe&quot;</span>);      <span class="comment">/* pipe creation failed       */</span></div>
<div class="line"><a name="l01309"></a><span class="lineno"> 1309</span>&#160;        <span class="keywordflow">return</span> context-&gt;NullString();</div>
<div class="line"><a name="l01310"></a><span class="lineno"> 1310</span>&#160;    }</div>
<div class="line"><a name="l01311"></a><span class="lineno"> 1311</span>&#160; </div>
<div class="line"><a name="l01312"></a><span class="lineno"> 1312</span>&#160;    <span class="keywordflow">if</span> (!cBlocking)                            <span class="comment">/* Non-blocking?              */</span></div>
<div class="line"><a name="l01313"></a><span class="lineno"> 1313</span>&#160;    {</div>
<div class="line"><a name="l01314"></a><span class="lineno"> 1314</span>&#160;        <span class="comment">/* Get file status flags ---------- */</span></div>
<div class="line"><a name="l01315"></a><span class="lineno"> 1315</span>&#160;        iStatus = fcntl(iaH[0], F_GETFL, NULL);</div>
<div class="line"><a name="l01316"></a><span class="lineno"> 1316</span>&#160;        iStatus |= O_NONBLOCK;                   <span class="comment">/* Turn on NONBLOCK flag      */</span></div>
<div class="line"><a name="l01317"></a><span class="lineno"> 1317</span>&#160;        <span class="comment">/* Does set work? ----------------- */</span></div>
<div class="line"><a name="l01318"></a><span class="lineno"> 1318</span>&#160;        <span class="keywordflow">if</span> (fcntl(iaH[0], F_SETFL, iStatus) == -1)</div>
<div class="line"><a name="l01319"></a><span class="lineno"> 1319</span>&#160;        {</div>
<div class="line"><a name="l01320"></a><span class="lineno"> 1320</span>&#160;            perror(<span class="stringliteral">&quot;*** ERROR: Setting NONBLOCK flag&quot;</span>);  <span class="comment">/* No, tell user        */</span></div>
<div class="line"><a name="l01321"></a><span class="lineno"> 1321</span>&#160;            close(iaH[0]);</div>
<div class="line"><a name="l01322"></a><span class="lineno"> 1322</span>&#160;            close(iaH[1]);                <span class="comment">/* Close pipes          */</span></div>
<div class="line"><a name="l01323"></a><span class="lineno"> 1323</span>&#160;            <span class="keywordflow">return</span> context-&gt;NullString();</div>
<div class="line"><a name="l01324"></a><span class="lineno"> 1324</span>&#160;        }</div>
<div class="line"><a name="l01325"></a><span class="lineno"> 1325</span>&#160;    }</div>
<div class="line"><a name="l01326"></a><span class="lineno"> 1326</span>&#160; </div>
<div class="line"><a name="l01327"></a><span class="lineno"> 1327</span>&#160;    <span class="keywordtype">char</span> retstr[100];</div>
<div class="line"><a name="l01328"></a><span class="lineno"> 1328</span>&#160;    snprintf(retstr, <span class="keyword">sizeof</span>(retstr), <span class="stringliteral">&quot;%d %d&quot;</span>, iaH[0], iaH[1]); <span class="comment">/* Create return string */</span></div>
<div class="line"><a name="l01329"></a><span class="lineno"> 1329</span>&#160;    <span class="keywordflow">return</span> context-&gt;NewStringFromAsciiz(retstr);</div>
<div class="line"><a name="l01330"></a><span class="lineno"> 1330</span>&#160;}</div>
<div class="line"><a name="l01331"></a><span class="lineno"> 1331</span>&#160; </div>
<div class="line"><a name="l01332"></a><span class="lineno"> 1332</span>&#160; </div>
<div class="line"><a name="l01333"></a><span class="lineno"> 1333</span>&#160;<span class="comment">/*************************************************************************</span></div>
<div class="line"><a name="l01334"></a><span class="lineno"> 1334</span>&#160;<span class="comment">* Function:  SysGetFileDateTime                                          *</span></div>
<div class="line"><a name="l01335"></a><span class="lineno"> 1335</span>&#160;<span class="comment">*                                                                        *</span></div>
<div class="line"><a name="l01336"></a><span class="lineno"> 1336</span>&#160;<span class="comment">* Syntax:    result = SysGetFileDateTime(filename [,timesel])            *</span></div>
<div class="line"><a name="l01337"></a><span class="lineno"> 1337</span>&#160;<span class="comment">* Params:    filename - name of the file to query                        *</span></div>
<div class="line"><a name="l01338"></a><span class="lineno"> 1338</span>&#160;<span class="comment">*            timesel  - What filetime to query: Access/Write             *</span></div>
<div class="line"><a name="l01339"></a><span class="lineno"> 1339</span>&#160;<span class="comment">*                                                                        *</span></div>
<div class="line"><a name="l01340"></a><span class="lineno"> 1340</span>&#160;<span class="comment">* Return:    -1 - file date/time query failed                            *</span></div>
<div class="line"><a name="l01341"></a><span class="lineno"> 1341</span>&#160;<span class="comment">*            other - date and time as YYYY-MM-DD HH:MM:SS                *</span></div>
<div class="line"><a name="l01342"></a><span class="lineno"> 1342</span>&#160;<span class="comment">*************************************************************************/</span></div>
<div class="line"><a name="l01343"></a><span class="lineno"> 1343</span>&#160; </div>
<div class="line"><a name="l01344"></a><span class="lineno"><a class="line" href="unix_2_sys_rexx_util_8cpp.html#a57a37400643dbb4c50be0f14eef5b606"> 1344</a></span>&#160;<a class="code" href="unix_2_sys_rexx_util_8cpp.html#ae76cb3e703d83ba4aef58ac990d00ff3">RexxRoutine2</a>(<a class="code" href="rexx_8h.html#a96e0cc5eda42aed364b05f3c493e07e8">RexxObjectPtr</a>, SysGetFileDateTime, <a class="code" href="rexx_8h.html#a581e376dc8d3b9132e29014c896b9e70">CSTRING</a>, file, OPTIONAL_CSTRING, timesel)</div>
<div class="line"><a name="l01345"></a><span class="lineno"> 1345</span>&#160;{</div>
<div class="line"><a name="l01346"></a><span class="lineno"> 1346</span>&#160;    <span class="keyword">struct    </span>stat64 buf;</div>
<div class="line"><a name="l01347"></a><span class="lineno"> 1347</span>&#160;    <span class="keyword">struct    </span>tm *newtime;</div>
<div class="line"><a name="l01348"></a><span class="lineno"> 1348</span>&#160; </div>
<div class="line"><a name="l01349"></a><span class="lineno"> 1349</span>&#160;    <a class="code" href="class_routine_qualified_name.html">RoutineQualifiedName</a> qualifiedName(context, file);</div>
<div class="line"><a name="l01350"></a><span class="lineno"> 1350</span>&#160; </div>
<div class="line"><a name="l01351"></a><span class="lineno"> 1351</span>&#160;    <span class="keywordflow">if</span> (timesel != NULL &amp;&amp;</div>
<div class="line"><a name="l01352"></a><span class="lineno"> 1352</span>&#160;        timesel[0] != <span class="charliteral">&#39;a&#39;</span> &amp;&amp; timesel[0] != <span class="charliteral">&#39;A&#39;</span> &amp;&amp;</div>
<div class="line"><a name="l01353"></a><span class="lineno"> 1353</span>&#160;        timesel[0] != <span class="charliteral">&#39;w&#39;</span> &amp;&amp; timesel[0] != <span class="charliteral">&#39;W&#39;</span>)</div>
<div class="line"><a name="l01354"></a><span class="lineno"> 1354</span>&#160;    {</div>
<div class="line"><a name="l01355"></a><span class="lineno"> 1355</span>&#160;        <a class="code" href="_rexx_util_common_8hpp.html#a1f0cf79aea937d49702908d656a54b9d">invalidOptionException</a>(context, <span class="stringliteral">&quot;SysGetFileDateTime&quot;</span>, <span class="stringliteral">&quot;time selector&quot;</span>, <span class="stringliteral">&quot;&#39;A&#39; or &#39;W&#39;&quot;</span>, timesel);</div>
<div class="line"><a name="l01356"></a><span class="lineno"> 1356</span>&#160;    }</div>
<div class="line"><a name="l01357"></a><span class="lineno"> 1357</span>&#160; </div>
<div class="line"><a name="l01358"></a><span class="lineno"> 1358</span>&#160;    <span class="keywordflow">if</span> (stat64(qualifiedName, &amp;buf) &lt; 0)</div>
<div class="line"><a name="l01359"></a><span class="lineno"> 1359</span>&#160;    {</div>
<div class="line"><a name="l01360"></a><span class="lineno"> 1360</span>&#160;        <span class="keywordflow">return</span> context-&gt;WholeNumber(-1);</div>
<div class="line"><a name="l01361"></a><span class="lineno"> 1361</span>&#160;    }</div>
<div class="line"><a name="l01362"></a><span class="lineno"> 1362</span>&#160; </div>
<div class="line"><a name="l01363"></a><span class="lineno"> 1363</span>&#160;    <span class="keywordflow">if</span> (timesel == NULL || timesel[0] == <span class="charliteral">&#39;w&#39;</span> || timesel[0] == <span class="charliteral">&#39;W&#39;</span>)</div>
<div class="line"><a name="l01364"></a><span class="lineno"> 1364</span>&#160;    {</div>
<div class="line"><a name="l01365"></a><span class="lineno"> 1365</span>&#160;        <span class="comment">// &#39;w&#39; last modification, this is the default</span></div>
<div class="line"><a name="l01366"></a><span class="lineno"> 1366</span>&#160;        newtime = localtime(&amp;(buf.st_mtime));</div>
<div class="line"><a name="l01367"></a><span class="lineno"> 1367</span>&#160;    }</div>
<div class="line"><a name="l01368"></a><span class="lineno"> 1368</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l01369"></a><span class="lineno"> 1369</span>&#160;    {</div>
<div class="line"><a name="l01370"></a><span class="lineno"> 1370</span>&#160;        <span class="comment">// &#39;a&#39; last access</span></div>
<div class="line"><a name="l01371"></a><span class="lineno"> 1371</span>&#160;        newtime = localtime(&amp;(buf.st_atime));</div>
<div class="line"><a name="l01372"></a><span class="lineno"> 1372</span>&#160;    }</div>
<div class="line"><a name="l01373"></a><span class="lineno"> 1373</span>&#160; </div>
<div class="line"><a name="l01374"></a><span class="lineno"> 1374</span>&#160;    <span class="keywordtype">char</span> retstr[100];</div>
<div class="line"><a name="l01375"></a><span class="lineno"> 1375</span>&#160; </div>
<div class="line"><a name="l01376"></a><span class="lineno"> 1376</span>&#160;    snprintf(retstr, <span class="keyword">sizeof</span>(retstr), <span class="stringliteral">&quot;%4d-%02d-%02d %02d:%02d:%02d&quot;</span>,</div>
<div class="line"><a name="l01377"></a><span class="lineno"> 1377</span>&#160;             newtime-&gt;tm_year + 1900,</div>
<div class="line"><a name="l01378"></a><span class="lineno"> 1378</span>&#160;             newtime-&gt;tm_mon + 1,</div>
<div class="line"><a name="l01379"></a><span class="lineno"> 1379</span>&#160;             newtime-&gt;tm_mday,</div>
<div class="line"><a name="l01380"></a><span class="lineno"> 1380</span>&#160;             newtime-&gt;tm_hour,</div>
<div class="line"><a name="l01381"></a><span class="lineno"> 1381</span>&#160;             newtime-&gt;tm_min,</div>
<div class="line"><a name="l01382"></a><span class="lineno"> 1382</span>&#160;             newtime-&gt;tm_sec);</div>
<div class="line"><a name="l01383"></a><span class="lineno"> 1383</span>&#160;    <span class="keywordflow">return</span> context-&gt;NewStringFromAsciiz(retstr);</div>
<div class="line"><a name="l01384"></a><span class="lineno"> 1384</span>&#160;}</div>
<div class="line"><a name="l01385"></a><span class="lineno"> 1385</span>&#160; </div>
<div class="line"><a name="l01386"></a><span class="lineno"> 1386</span>&#160; </div>
<div class="line"><a name="l01387"></a><span class="lineno"> 1387</span>&#160;<span class="comment">/*************************************************************************</span></div>
<div class="line"><a name="l01388"></a><span class="lineno"> 1388</span>&#160;<span class="comment">* Function:  SysSetFileDateTime                                          *</span></div>
<div class="line"><a name="l01389"></a><span class="lineno"> 1389</span>&#160;<span class="comment">*                                                                        *</span></div>
<div class="line"><a name="l01390"></a><span class="lineno"> 1390</span>&#160;<span class="comment">* Syntax:    result = SysSetFileDateTime(filename [,newdate] [,newtime]) *</span></div>
<div class="line"><a name="l01391"></a><span class="lineno"> 1391</span>&#160;<span class="comment">*                                                                        *</span></div>
<div class="line"><a name="l01392"></a><span class="lineno"> 1392</span>&#160;<span class="comment">* Params:    filename - name of the file to update                       *</span></div>
<div class="line"><a name="l01393"></a><span class="lineno"> 1393</span>&#160;<span class="comment">*            newdate  - new date to set in format YYYY-MM-DD (YYYY&gt;1800) *</span></div>
<div class="line"><a name="l01394"></a><span class="lineno"> 1394</span>&#160;<span class="comment">*            newtime  - new time to set in format HH:MM:SS               *</span></div>
<div class="line"><a name="l01395"></a><span class="lineno"> 1395</span>&#160;<span class="comment">*                                                                        *</span></div>
<div class="line"><a name="l01396"></a><span class="lineno"> 1396</span>&#160;<span class="comment">* Return:    0 - file date/time was updated correctly                    *</span></div>
<div class="line"><a name="l01397"></a><span class="lineno"> 1397</span>&#160;<span class="comment">*            -1 - failure attribute update                               *</span></div>
<div class="line"><a name="l01398"></a><span class="lineno"> 1398</span>&#160;<span class="comment">*************************************************************************/</span></div>
<div class="line"><a name="l01399"></a><span class="lineno"> 1399</span>&#160; </div>
<div class="line"><a name="l01400"></a><span class="lineno"><a class="line" href="unix_2_sys_rexx_util_8cpp.html#a927388d4e7ee416b30cd918d8ee11cb7"> 1400</a></span>&#160;<a class="code" href="unix_2_sys_rexx_util_8cpp.html#a83a3cabd5d6efd9dfe1c840ea0415167">RexxRoutine3</a>(<span class="keywordtype">int</span>, SysSetFileDateTime, <a class="code" href="rexx_8h.html#a581e376dc8d3b9132e29014c896b9e70">CSTRING</a>, filename, OPTIONAL_CSTRING, newdateSet, OPTIONAL_CSTRING, newtimeSet)</div>
<div class="line"><a name="l01401"></a><span class="lineno"> 1401</span>&#160;{</div>
<div class="line"><a name="l01402"></a><span class="lineno"> 1402</span>&#160;    <span class="keyword">struct </span>utimbuf timebuf;</div>
<div class="line"><a name="l01403"></a><span class="lineno"> 1403</span>&#160;    <span class="keyword">struct </span>tm *newtime;</div>
<div class="line"><a name="l01404"></a><span class="lineno"> 1404</span>&#160;    time_t ltime;</div>
<div class="line"><a name="l01405"></a><span class="lineno"> 1405</span>&#160;    <span class="keyword">struct </span>stat64 buf;</div>
<div class="line"><a name="l01406"></a><span class="lineno"> 1406</span>&#160; </div>
<div class="line"><a name="l01407"></a><span class="lineno"> 1407</span>&#160;    <a class="code" href="class_routine_qualified_name.html">RoutineQualifiedName</a> qualifiedName(context, filename);</div>
<div class="line"><a name="l01408"></a><span class="lineno"> 1408</span>&#160; </div>
<div class="line"><a name="l01409"></a><span class="lineno"> 1409</span>&#160;    <span class="keywordflow">if</span> (stat64(qualifiedName, &amp;buf) &lt; 0)</div>
<div class="line"><a name="l01410"></a><span class="lineno"> 1410</span>&#160;    {</div>
<div class="line"><a name="l01411"></a><span class="lineno"> 1411</span>&#160;        <span class="keywordflow">return</span> -1;</div>
<div class="line"><a name="l01412"></a><span class="lineno"> 1412</span>&#160;    }</div>
<div class="line"><a name="l01413"></a><span class="lineno"> 1413</span>&#160; </div>
<div class="line"><a name="l01414"></a><span class="lineno"> 1414</span>&#160;    <span class="comment">// for all cases we need to keep access time as-is</span></div>
<div class="line"><a name="l01415"></a><span class="lineno"> 1415</span>&#160;    timebuf.actime = mktime(localtime(&amp;(buf.st_atime)));</div>
<div class="line"><a name="l01416"></a><span class="lineno"> 1416</span>&#160; </div>
<div class="line"><a name="l01417"></a><span class="lineno"> 1417</span>&#160;    <span class="keywordflow">if</span> (newdateSet == NULL &amp;&amp; newtimeSet == NULL)</div>
<div class="line"><a name="l01418"></a><span class="lineno"> 1418</span>&#160;    {</div>
<div class="line"><a name="l01419"></a><span class="lineno"> 1419</span>&#160;        time(&amp;ltime);</div>
<div class="line"><a name="l01420"></a><span class="lineno"> 1420</span>&#160;        timebuf.modtime = ltime;</div>
<div class="line"><a name="l01421"></a><span class="lineno"> 1421</span>&#160;        <span class="keywordflow">return</span> utime(qualifiedName, &amp;timebuf) &lt; 0 ? -1 : 0;</div>
<div class="line"><a name="l01422"></a><span class="lineno"> 1422</span>&#160;    }</div>
<div class="line"><a name="l01423"></a><span class="lineno"> 1423</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l01424"></a><span class="lineno"> 1424</span>&#160;    {</div>
<div class="line"><a name="l01425"></a><span class="lineno"> 1425</span>&#160;        newtime = localtime(&amp;(buf.st_mtime));</div>
<div class="line"><a name="l01426"></a><span class="lineno"> 1426</span>&#160;        <span class="keywordflow">if</span> (newdateSet != NULL)</div>
<div class="line"><a name="l01427"></a><span class="lineno"> 1427</span>&#160;        {</div>
<div class="line"><a name="l01428"></a><span class="lineno"> 1428</span>&#160;            <span class="comment">/* parse new date */</span></div>
<div class="line"><a name="l01429"></a><span class="lineno"> 1429</span>&#160;            <span class="keywordflow">if</span> (sscanf(newdateSet, <span class="stringliteral">&quot;%4d-%2d-%2d&quot;</span>, &amp;newtime-&gt;tm_year, &amp;newtime-&gt;tm_mon, &amp;newtime-&gt;tm_mday) != 3)</div>
<div class="line"><a name="l01430"></a><span class="lineno"> 1430</span>&#160;            {</div>
<div class="line"><a name="l01431"></a><span class="lineno"> 1431</span>&#160;                <span class="keywordflow">return</span> -1;</div>
<div class="line"><a name="l01432"></a><span class="lineno"> 1432</span>&#160;            }</div>
<div class="line"><a name="l01433"></a><span class="lineno"> 1433</span>&#160;            newtime-&gt;tm_year -= 1900;</div>
<div class="line"><a name="l01434"></a><span class="lineno"> 1434</span>&#160;            newtime-&gt;tm_mon -= 1;</div>
<div class="line"><a name="l01435"></a><span class="lineno"> 1435</span>&#160;        }</div>
<div class="line"><a name="l01436"></a><span class="lineno"> 1436</span>&#160;        <span class="keywordflow">if</span> (newtimeSet)</div>
<div class="line"><a name="l01437"></a><span class="lineno"> 1437</span>&#160;        {</div>
<div class="line"><a name="l01438"></a><span class="lineno"> 1438</span>&#160;            <span class="comment">/* parse new time */</span></div>
<div class="line"><a name="l01439"></a><span class="lineno"> 1439</span>&#160;            <span class="keywordflow">if</span> (sscanf(newtimeSet, <span class="stringliteral">&quot;%2d:%2d:%2d&quot;</span>, &amp;newtime-&gt;tm_hour, &amp;newtime-&gt;tm_min, &amp;newtime-&gt;tm_sec) != 3)</div>
<div class="line"><a name="l01440"></a><span class="lineno"> 1440</span>&#160;            {</div>
<div class="line"><a name="l01441"></a><span class="lineno"> 1441</span>&#160;                <span class="keywordflow">return</span> -1;</div>
<div class="line"><a name="l01442"></a><span class="lineno"> 1442</span>&#160;            }</div>
<div class="line"><a name="l01443"></a><span class="lineno"> 1443</span>&#160;        }</div>
<div class="line"><a name="l01444"></a><span class="lineno"> 1444</span>&#160;        <span class="comment">// mktime() should determine whether DST is in effect at the</span></div>
<div class="line"><a name="l01445"></a><span class="lineno"> 1445</span>&#160;        <span class="comment">// specified time.</span></div>
<div class="line"><a name="l01446"></a><span class="lineno"> 1446</span>&#160;        newtime-&gt;tm_isdst = -1;</div>
<div class="line"><a name="l01447"></a><span class="lineno"> 1447</span>&#160; </div>
<div class="line"><a name="l01448"></a><span class="lineno"> 1448</span>&#160;        ltime = mktime(newtime);</div>
<div class="line"><a name="l01449"></a><span class="lineno"> 1449</span>&#160;        timebuf.modtime = ltime;</div>
<div class="line"><a name="l01450"></a><span class="lineno"> 1450</span>&#160; </div>
<div class="line"><a name="l01451"></a><span class="lineno"> 1451</span>&#160;        <span class="keywordflow">return</span> utime(qualifiedName, &amp;timebuf) &lt; 0 ? -1 : 0;</div>
<div class="line"><a name="l01452"></a><span class="lineno"> 1452</span>&#160;    }</div>
<div class="line"><a name="l01453"></a><span class="lineno"> 1453</span>&#160;}</div>
<div class="line"><a name="l01454"></a><span class="lineno"> 1454</span>&#160; </div>
<div class="line"><a name="l01455"></a><span class="lineno"> 1455</span>&#160; </div>
<div class="line"><a name="l01456"></a><span class="lineno"> 1456</span>&#160;<span class="comment">/**************************************************************************</span></div>
<div class="line"><a name="l01457"></a><span class="lineno"> 1457</span>&#160;<span class="comment">* Function:  SysQueryProcess                                              *</span></div>
<div class="line"><a name="l01458"></a><span class="lineno"> 1458</span>&#160;<span class="comment">*                                                                         *</span></div>
<div class="line"><a name="l01459"></a><span class="lineno"> 1459</span>&#160;<span class="comment">* Params:    &quot;PID&quot;       - (default) returns current process ID           *</span></div>
<div class="line"><a name="l01460"></a><span class="lineno"> 1460</span>&#160;<span class="comment">*    NEW:    &quot;PPID&quot;      -  returns parent of current process ID          *</span></div>
<div class="line"><a name="l01461"></a><span class="lineno"> 1461</span>&#160;<span class="comment">*    NEW:    &quot;PGID&quot;      -  returns group ID of current process           *</span></div>
<div class="line"><a name="l01462"></a><span class="lineno"> 1462</span>&#160;<span class="comment">*    NO      &quot;TID&quot;       -  returns current thread ID                     *</span></div>
<div class="line"><a name="l01463"></a><span class="lineno"> 1463</span>&#160;<span class="comment">*    YES     &quot;PPRIO&quot;     -  returns current process priority              *</span></div>
<div class="line"><a name="l01464"></a><span class="lineno"> 1464</span>&#160;<span class="comment">*    NO      &quot;TPRIO&quot;     -  returns current thread priority               *</span></div>
<div class="line"><a name="l01465"></a><span class="lineno"> 1465</span>&#160;<span class="comment">*    YES     &quot;PTIME&quot;     -  returns current process times                 *</span></div>
<div class="line"><a name="l01466"></a><span class="lineno"> 1466</span>&#160;<span class="comment">*    NO      &quot;TTIME&quot;     -  returns current thread times                  *</span></div>
<div class="line"><a name="l01467"></a><span class="lineno"> 1467</span>&#160;<span class="comment">*    NEW:    &quot;PMEM&quot;      -  returns current process max memory size RSS   *</span></div>
<div class="line"><a name="l01468"></a><span class="lineno"> 1468</span>&#160;<span class="comment">*    NEW:    &quot;PSWAPS&quot;    -  returns current process number of swaps out   *</span></div>
<div class="line"><a name="l01469"></a><span class="lineno"> 1469</span>&#160;<span class="comment">*    NEW:    &quot;PRCVDSIG&quot;  -  returns current process received signals      *</span></div>
<div class="line"><a name="l01470"></a><span class="lineno"> 1470</span>&#160;<span class="comment">***************************************************************************/</span></div>
<div class="line"><a name="l01471"></a><span class="lineno"> 1471</span>&#160; </div>
<div class="line"><a name="l01472"></a><span class="lineno"><a class="line" href="unix_2_sys_rexx_util_8cpp.html#a72c4bef11798a648b99bd32f1aeded02"> 1472</a></span>&#160;<a class="code" href="unix_2_sys_rexx_util_8cpp.html#aa99b04951a3dd00e93a76a3e69bc83f2">RexxRoutine1</a>(<a class="code" href="rexx_8h.html#a96e0cc5eda42aed364b05f3c493e07e8">RexxObjectPtr</a>, SysQueryProcess, OPTIONAL_CSTRING, selector)</div>
<div class="line"><a name="l01473"></a><span class="lineno"> 1473</span>&#160;{</div>
<div class="line"><a name="l01474"></a><span class="lineno"> 1474</span>&#160;    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> uiUsedCPUTime  = 0;</div>
<div class="line"><a name="l01475"></a><span class="lineno"> 1475</span>&#160;    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> uiUsedCPUmsec  = 0;</div>
<div class="line"><a name="l01476"></a><span class="lineno"> 1476</span>&#160;    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> uiUsedHours    = 0;</div>
<div class="line"><a name="l01477"></a><span class="lineno"> 1477</span>&#160;    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> uiUsedMinutes  = 0;</div>
<div class="line"><a name="l01478"></a><span class="lineno"> 1478</span>&#160;    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> uiUsedSeconds  = 0;</div>
<div class="line"><a name="l01479"></a><span class="lineno"> 1479</span>&#160;    <span class="keywordtype">char</span> timebuf[40];</div>
<div class="line"><a name="l01480"></a><span class="lineno"> 1480</span>&#160;    <span class="keywordtype">int</span> iRc = 0;</div>
<div class="line"><a name="l01481"></a><span class="lineno"> 1481</span>&#160; </div>
<div class="line"><a name="l01482"></a><span class="lineno"> 1482</span>&#160;    <span class="keywordflow">if</span> (selector == NULL || !strcasecmp(selector, <span class="stringliteral">&quot;PID&quot;</span>))</div>
<div class="line"><a name="l01483"></a><span class="lineno"> 1483</span>&#160;    {</div>
<div class="line"><a name="l01484"></a><span class="lineno"> 1484</span>&#160;        <span class="keywordflow">return</span> context-&gt;Int32ToObject(getpid());</div>
<div class="line"><a name="l01485"></a><span class="lineno"> 1485</span>&#160;    }</div>
<div class="line"><a name="l01486"></a><span class="lineno"> 1486</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strcasecmp(selector, <span class="stringliteral">&quot;PPID&quot;</span>))</div>
<div class="line"><a name="l01487"></a><span class="lineno"> 1487</span>&#160;    {</div>
<div class="line"><a name="l01488"></a><span class="lineno"> 1488</span>&#160;        <span class="keywordflow">return</span> context-&gt;Int32ToObject(getppid());</div>
<div class="line"><a name="l01489"></a><span class="lineno"> 1489</span>&#160;    }</div>
<div class="line"><a name="l01490"></a><span class="lineno"> 1490</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strcasecmp(selector, <span class="stringliteral">&quot;PGID&quot;</span>))</div>
<div class="line"><a name="l01491"></a><span class="lineno"> 1491</span>&#160;    {</div>
<div class="line"><a name="l01492"></a><span class="lineno"> 1492</span>&#160;        <span class="keywordflow">return</span> context-&gt;Int32ToObject(getpgid(getppid()));</div>
<div class="line"><a name="l01493"></a><span class="lineno"> 1493</span>&#160;    }</div>
<div class="line"><a name="l01494"></a><span class="lineno"> 1494</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strcasecmp(selector, <span class="stringliteral">&quot;PPRIO&quot;</span>))</div>
<div class="line"><a name="l01495"></a><span class="lineno"> 1495</span>&#160;    {</div>
<div class="line"><a name="l01496"></a><span class="lineno"> 1496</span>&#160;        <span class="keywordflow">return</span> context-&gt;Int32ToObject(getpriority(PRIO_PROCESS, 0));</div>
<div class="line"><a name="l01497"></a><span class="lineno"> 1497</span>&#160;    }</div>
<div class="line"><a name="l01498"></a><span class="lineno"> 1498</span>&#160; </div>
<div class="line"><a name="l01499"></a><span class="lineno"> 1499</span>&#160;    <span class="keyword">struct </span>rusage struResUse;</div>
<div class="line"><a name="l01500"></a><span class="lineno"> 1500</span>&#160; </div>
<div class="line"><a name="l01501"></a><span class="lineno"> 1501</span>&#160;    <span class="comment">/* ----------------------------------------------------------------- */</span></div>
<div class="line"><a name="l01502"></a><span class="lineno"> 1502</span>&#160;    <span class="comment">/* Get process usage data and keep calls together at the end of      */</span></div>
<div class="line"><a name="l01503"></a><span class="lineno"> 1503</span>&#160;    <span class="comment">/* the function SysQueryProcess.                                     */</span></div>
<div class="line"><a name="l01504"></a><span class="lineno"> 1504</span>&#160;    iRc = getrusage(RUSAGE_SELF, &amp;struResUse);</div>
<div class="line"><a name="l01505"></a><span class="lineno"> 1505</span>&#160;    <span class="keywordflow">if</span> (iRc)</div>
<div class="line"><a name="l01506"></a><span class="lineno"> 1506</span>&#160;    {</div>
<div class="line"><a name="l01507"></a><span class="lineno"> 1507</span>&#160;        <span class="keywordtype">char</span> buffer[100];</div>
<div class="line"><a name="l01508"></a><span class="lineno"> 1508</span>&#160;        snprintf(buffer, <span class="keyword">sizeof</span>(buffer), <span class="stringliteral">&quot;System error; errno = %d&quot;</span>, errno);</div>
<div class="line"><a name="l01509"></a><span class="lineno"> 1509</span>&#160;        <span class="keywordflow">return</span> context-&gt;NewStringFromAsciiz(buffer);</div>
<div class="line"><a name="l01510"></a><span class="lineno"> 1510</span>&#160;    }</div>
<div class="line"><a name="l01511"></a><span class="lineno"> 1511</span>&#160;    <span class="keywordflow">if</span> (!strcasecmp(selector, <span class="stringliteral">&quot;PTIME&quot;</span>)) <span class="comment">/* Calculate the used CPU time*/</span></div>
<div class="line"><a name="l01512"></a><span class="lineno"> 1512</span>&#160;    {</div>
<div class="line"><a name="l01513"></a><span class="lineno"> 1513</span>&#160;        uiUsedCPUmsec  = (<span class="keywordtype">unsigned</span> int)struResUse.ru_utime.tv_usec / 1000;</div>
<div class="line"><a name="l01514"></a><span class="lineno"> 1514</span>&#160;        uiUsedCPUmsec += (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span>)struResUse.ru_stime.tv_usec / 1000;</div>
<div class="line"><a name="l01515"></a><span class="lineno"> 1515</span>&#160;        <span class="keywordflow">if</span> (uiUsedCPUmsec &gt;= 1000)</div>
<div class="line"><a name="l01516"></a><span class="lineno"> 1516</span>&#160;        {</div>
<div class="line"><a name="l01517"></a><span class="lineno"> 1517</span>&#160;            uiUsedCPUTime = uiUsedCPUmsec / 1000;</div>
<div class="line"><a name="l01518"></a><span class="lineno"> 1518</span>&#160;            uiUsedCPUmsec = uiUsedCPUmsec % 1000;</div>
<div class="line"><a name="l01519"></a><span class="lineno"> 1519</span>&#160;        }</div>
<div class="line"><a name="l01520"></a><span class="lineno"> 1520</span>&#160;        uiUsedCPUTime += (<span class="keywordtype">unsigned</span> int)struResUse.ru_utime.tv_sec;</div>
<div class="line"><a name="l01521"></a><span class="lineno"> 1521</span>&#160;        uiUsedCPUTime += (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span>)struResUse.ru_stime.tv_sec;</div>
<div class="line"><a name="l01522"></a><span class="lineno"> 1522</span>&#160;        uiUsedHours   = uiUsedCPUTime / 3600;</div>
<div class="line"><a name="l01523"></a><span class="lineno"> 1523</span>&#160;        uiUsedMinutes = uiUsedCPUTime / 60;</div>
<div class="line"><a name="l01524"></a><span class="lineno"> 1524</span>&#160;        <span class="keywordflow">if</span> (uiUsedMinutes &gt;= 60)</div>
<div class="line"><a name="l01525"></a><span class="lineno"> 1525</span>&#160;        {</div>
<div class="line"><a name="l01526"></a><span class="lineno"> 1526</span>&#160;            uiUsedMinutes = uiUsedMinutes % 60;</div>
<div class="line"><a name="l01527"></a><span class="lineno"> 1527</span>&#160;        }</div>
<div class="line"><a name="l01528"></a><span class="lineno"> 1528</span>&#160;        <span class="keywordflow">if</span> (uiUsedCPUTime &gt;= 60)</div>
<div class="line"><a name="l01529"></a><span class="lineno"> 1529</span>&#160;        {</div>
<div class="line"><a name="l01530"></a><span class="lineno"> 1530</span>&#160;            uiUsedSeconds = uiUsedCPUTime % 60;</div>
<div class="line"><a name="l01531"></a><span class="lineno"> 1531</span>&#160;        }</div>
<div class="line"><a name="l01532"></a><span class="lineno"> 1532</span>&#160;        <span class="keywordflow">else</span></div>
<div class="line"><a name="l01533"></a><span class="lineno"> 1533</span>&#160;        {</div>
<div class="line"><a name="l01534"></a><span class="lineno"> 1534</span>&#160;            uiUsedSeconds = uiUsedCPUTime;</div>
<div class="line"><a name="l01535"></a><span class="lineno"> 1535</span>&#160;        }</div>
<div class="line"><a name="l01536"></a><span class="lineno"> 1536</span>&#160; </div>
<div class="line"><a name="l01537"></a><span class="lineno"> 1537</span>&#160;        <span class="keywordtype">char</span> buffer[200];</div>
<div class="line"><a name="l01538"></a><span class="lineno"> 1538</span>&#160;        snprintf(buffer, <span class="keyword">sizeof</span>(buffer), <span class="stringliteral">&quot;CPU_Time Summary: %2d:%.2d:%.2d:%.3d  Kernel:&quot;</span>,</div>
<div class="line"><a name="l01539"></a><span class="lineno"> 1539</span>&#160;                 uiUsedHours, uiUsedMinutes, uiUsedSeconds, uiUsedCPUmsec);</div>
<div class="line"><a name="l01540"></a><span class="lineno"> 1540</span>&#160; </div>
<div class="line"><a name="l01541"></a><span class="lineno"> 1541</span>&#160;        uiUsedCPUmsec = (<span class="keywordtype">unsigned</span> int)struResUse.ru_stime.tv_usec / 1000;</div>
<div class="line"><a name="l01542"></a><span class="lineno"> 1542</span>&#160;        uiUsedCPUTime = (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span>)struResUse.ru_stime.tv_sec;</div>
<div class="line"><a name="l01543"></a><span class="lineno"> 1543</span>&#160;        uiUsedHours   = uiUsedCPUTime / 3600;</div>
<div class="line"><a name="l01544"></a><span class="lineno"> 1544</span>&#160;        uiUsedMinutes = uiUsedCPUTime / 60;</div>
<div class="line"><a name="l01545"></a><span class="lineno"> 1545</span>&#160;        <span class="keywordflow">if</span> (uiUsedMinutes &gt;= 60)</div>
<div class="line"><a name="l01546"></a><span class="lineno"> 1546</span>&#160;        {</div>
<div class="line"><a name="l01547"></a><span class="lineno"> 1547</span>&#160;            uiUsedMinutes = uiUsedMinutes % 60;</div>
<div class="line"><a name="l01548"></a><span class="lineno"> 1548</span>&#160;        }</div>
<div class="line"><a name="l01549"></a><span class="lineno"> 1549</span>&#160;        <span class="keywordflow">if</span> (uiUsedCPUTime &gt;= 60)</div>
<div class="line"><a name="l01550"></a><span class="lineno"> 1550</span>&#160;        {</div>
<div class="line"><a name="l01551"></a><span class="lineno"> 1551</span>&#160;            uiUsedSeconds = uiUsedCPUTime % 60;</div>
<div class="line"><a name="l01552"></a><span class="lineno"> 1552</span>&#160;        }</div>
<div class="line"><a name="l01553"></a><span class="lineno"> 1553</span>&#160;        <span class="keywordflow">else</span></div>
<div class="line"><a name="l01554"></a><span class="lineno"> 1554</span>&#160;        {</div>
<div class="line"><a name="l01555"></a><span class="lineno"> 1555</span>&#160;            uiUsedSeconds = uiUsedCPUTime;</div>
<div class="line"><a name="l01556"></a><span class="lineno"> 1556</span>&#160;        }</div>
<div class="line"><a name="l01557"></a><span class="lineno"> 1557</span>&#160; </div>
<div class="line"><a name="l01558"></a><span class="lineno"> 1558</span>&#160;        <span class="keywordtype">size_t</span> currLen = strlen(buffer);</div>
<div class="line"><a name="l01559"></a><span class="lineno"> 1559</span>&#160; </div>
<div class="line"><a name="l01560"></a><span class="lineno"> 1560</span>&#160;        snprintf(buffer + currLen, <span class="keyword">sizeof</span>(buffer) - currLen, <span class="stringliteral">&quot; %2d:%.2d:%.2d:%.3d  User:&quot;</span>, uiUsedHours,</div>
<div class="line"><a name="l01561"></a><span class="lineno"> 1561</span>&#160;                 uiUsedMinutes, uiUsedSeconds, uiUsedCPUmsec);</div>
<div class="line"><a name="l01562"></a><span class="lineno"> 1562</span>&#160; </div>
<div class="line"><a name="l01563"></a><span class="lineno"> 1563</span>&#160;        currLen = strlen(buffer);</div>
<div class="line"><a name="l01564"></a><span class="lineno"> 1564</span>&#160; </div>
<div class="line"><a name="l01565"></a><span class="lineno"> 1565</span>&#160;        uiUsedCPUmsec = (<span class="keywordtype">unsigned</span> int)struResUse.ru_utime.tv_usec / 1000;</div>
<div class="line"><a name="l01566"></a><span class="lineno"> 1566</span>&#160;        uiUsedCPUTime = (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span>)struResUse.ru_utime.tv_sec;</div>
<div class="line"><a name="l01567"></a><span class="lineno"> 1567</span>&#160;        uiUsedHours   = uiUsedCPUTime / 3600;</div>
<div class="line"><a name="l01568"></a><span class="lineno"> 1568</span>&#160;        uiUsedMinutes = uiUsedCPUTime / 60;</div>
<div class="line"><a name="l01569"></a><span class="lineno"> 1569</span>&#160;        <span class="keywordflow">if</span> (uiUsedMinutes &gt;= 60)</div>
<div class="line"><a name="l01570"></a><span class="lineno"> 1570</span>&#160;        {</div>
<div class="line"><a name="l01571"></a><span class="lineno"> 1571</span>&#160;            uiUsedMinutes = uiUsedMinutes % 60;</div>
<div class="line"><a name="l01572"></a><span class="lineno"> 1572</span>&#160;        }</div>
<div class="line"><a name="l01573"></a><span class="lineno"> 1573</span>&#160;        <span class="keywordflow">if</span> (uiUsedCPUTime &gt;= 60)</div>
<div class="line"><a name="l01574"></a><span class="lineno"> 1574</span>&#160;        {</div>
<div class="line"><a name="l01575"></a><span class="lineno"> 1575</span>&#160;            uiUsedSeconds = uiUsedCPUTime % 60;</div>
<div class="line"><a name="l01576"></a><span class="lineno"> 1576</span>&#160;        }</div>
<div class="line"><a name="l01577"></a><span class="lineno"> 1577</span>&#160;        <span class="keywordflow">else</span></div>
<div class="line"><a name="l01578"></a><span class="lineno"> 1578</span>&#160;        {</div>
<div class="line"><a name="l01579"></a><span class="lineno"> 1579</span>&#160;            uiUsedSeconds = uiUsedCPUTime;</div>
<div class="line"><a name="l01580"></a><span class="lineno"> 1580</span>&#160;        }</div>
<div class="line"><a name="l01581"></a><span class="lineno"> 1581</span>&#160; </div>
<div class="line"><a name="l01582"></a><span class="lineno"> 1582</span>&#160;        snprintf(buffer + currLen, <span class="keyword">sizeof</span>(buffer) - currLen, <span class="stringliteral">&quot; %2d:%.2d:%.2d:%.3d&quot;</span>, uiUsedHours,</div>
<div class="line"><a name="l01583"></a><span class="lineno"> 1583</span>&#160;                 uiUsedMinutes, uiUsedSeconds, uiUsedCPUmsec);</div>
<div class="line"><a name="l01584"></a><span class="lineno"> 1584</span>&#160; </div>
<div class="line"><a name="l01585"></a><span class="lineno"> 1585</span>&#160;        <span class="keywordflow">return</span> context-&gt;NewStringFromAsciiz(buffer);</div>
<div class="line"><a name="l01586"></a><span class="lineno"> 1586</span>&#160;    }</div>
<div class="line"><a name="l01587"></a><span class="lineno"> 1587</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strcasecmp(selector, <span class="stringliteral">&quot;PMEM&quot;</span>))  <span class="comment">/* Show max memory RSS used   */</span></div>
<div class="line"><a name="l01588"></a><span class="lineno"> 1588</span>&#160;    {</div>
<div class="line"><a name="l01589"></a><span class="lineno"> 1589</span>&#160;        <span class="keywordtype">char</span> buffer[100];</div>
<div class="line"><a name="l01590"></a><span class="lineno"> 1590</span>&#160;        snprintf(buffer, <span class="keyword">sizeof</span>(buffer), <span class="stringliteral">&quot;Max_Memory_RSS: %ld&quot;</span>, struResUse.ru_maxrss);</div>
<div class="line"><a name="l01591"></a><span class="lineno"> 1591</span>&#160;        <span class="keywordflow">return</span> context-&gt;NewStringFromAsciiz(buffer);</div>
<div class="line"><a name="l01592"></a><span class="lineno"> 1592</span>&#160;    }</div>
<div class="line"><a name="l01593"></a><span class="lineno"> 1593</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strcasecmp(selector, <span class="stringliteral">&quot;PSWAPS&quot;</span>)) <span class="comment">/* Memory has been swapped   */</span></div>
<div class="line"><a name="l01594"></a><span class="lineno"> 1594</span>&#160;    {</div>
<div class="line"><a name="l01595"></a><span class="lineno"> 1595</span>&#160;        <span class="keywordtype">char</span> buffer[100];</div>
<div class="line"><a name="l01596"></a><span class="lineno"> 1596</span>&#160;        snprintf(buffer, <span class="keyword">sizeof</span>(buffer), <span class="stringliteral">&quot;Memory_swaps: %ld&quot;</span>, struResUse.ru_nswap);</div>
<div class="line"><a name="l01597"></a><span class="lineno"> 1597</span>&#160;        <span class="keywordflow">return</span> context-&gt;NewStringFromAsciiz(buffer);</div>
<div class="line"><a name="l01598"></a><span class="lineno"> 1598</span>&#160;    }</div>
<div class="line"><a name="l01599"></a><span class="lineno"> 1599</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strcasecmp(selector, <span class="stringliteral">&quot;PRCVDSIG&quot;</span>)) <span class="comment">/* Process received signals*/</span></div>
<div class="line"><a name="l01600"></a><span class="lineno"> 1600</span>&#160;    {</div>
<div class="line"><a name="l01601"></a><span class="lineno"> 1601</span>&#160;        <span class="keywordtype">char</span> buffer[100];</div>
<div class="line"><a name="l01602"></a><span class="lineno"> 1602</span>&#160;        snprintf(buffer, <span class="keyword">sizeof</span>(buffer), <span class="stringliteral">&quot;Received_signals: %ld&quot;</span>, struResUse.ru_nsignals);</div>
<div class="line"><a name="l01603"></a><span class="lineno"> 1603</span>&#160;        <span class="keywordflow">return</span> context-&gt;NewStringFromAsciiz(buffer);</div>
<div class="line"><a name="l01604"></a><span class="lineno"> 1604</span>&#160;    }</div>
<div class="line"><a name="l01605"></a><span class="lineno"> 1605</span>&#160; </div>
<div class="line"><a name="l01606"></a><span class="lineno"> 1606</span>&#160;    context-&gt;InvalidRoutine();</div>
<div class="line"><a name="l01607"></a><span class="lineno"> 1607</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="rexx_8h.html#a9a119fa1e31a4af78dee3c12225b240a">NULLOBJECT</a>;</div>
<div class="line"><a name="l01608"></a><span class="lineno"> 1608</span>&#160;}</div>
<div class="line"><a name="l01609"></a><span class="lineno"> 1609</span>&#160; </div>
<div class="line"><a name="l01610"></a><span class="lineno"> 1610</span>&#160;<span class="comment">/*************************************************************************</span></div>
<div class="line"><a name="l01611"></a><span class="lineno"> 1611</span>&#160;<span class="comment">* Function:  SysGetErrortext                                             *</span></div>
<div class="line"><a name="l01612"></a><span class="lineno"> 1612</span>&#160;<span class="comment">*                                                                        *</span></div>
<div class="line"><a name="l01613"></a><span class="lineno"> 1613</span>&#160;<span class="comment">* Syntax:    call SysGetErrortext errnumber                              *</span></div>
<div class="line"><a name="l01614"></a><span class="lineno"> 1614</span>&#160;<span class="comment">*                                                                        *</span></div>
<div class="line"><a name="l01615"></a><span class="lineno"> 1615</span>&#160;<span class="comment">* Params:    errnumber - error number to be described                    *</span></div>
<div class="line"><a name="l01616"></a><span class="lineno"> 1616</span>&#160;<span class="comment">*                                                                        *</span></div>
<div class="line"><a name="l01617"></a><span class="lineno"> 1617</span>&#160;<span class="comment">* Return:    Description or empty string                                 *</span></div>
<div class="line"><a name="l01618"></a><span class="lineno"> 1618</span>&#160;<span class="comment">*************************************************************************/</span></div>
<div class="line"><a name="l01619"></a><span class="lineno"> 1619</span>&#160; </div>
<div class="line"><a name="l01620"></a><span class="lineno"><a class="line" href="unix_2_sys_rexx_util_8cpp.html#a421d70bee1e0c8ae8d577e7518a3b046"> 1620</a></span>&#160;<a class="code" href="unix_2_sys_rexx_util_8cpp.html#aa99b04951a3dd00e93a76a3e69bc83f2">RexxRoutine1</a>(<a class="code" href="rexx_8h.html#a64dfe004825692637e2075467179fcd9">RexxStringObject</a>, SysGetErrorText, <a class="code" href="windows_2rexxapitypes_8h.html#a32f2e37ee053cf2ce8ca28d1f74630e5">int32_t</a>, errnum)</div>
<div class="line"><a name="l01621"></a><span class="lineno"> 1621</span>&#160;{</div>
<div class="line"><a name="l01622"></a><span class="lineno"> 1622</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">char</span> *errmsg = strerror(errnum);</div>
<div class="line"><a name="l01623"></a><span class="lineno"> 1623</span>&#160;    <span class="keywordflow">if</span> (errmsg == NULL)</div>
<div class="line"><a name="l01624"></a><span class="lineno"> 1624</span>&#160;    {</div>
<div class="line"><a name="l01625"></a><span class="lineno"> 1625</span>&#160;        <span class="keywordflow">return</span> context-&gt;NullString();</div>
<div class="line"><a name="l01626"></a><span class="lineno"> 1626</span>&#160;    }</div>
<div class="line"><a name="l01627"></a><span class="lineno"> 1627</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l01628"></a><span class="lineno"> 1628</span>&#160;    {</div>
<div class="line"><a name="l01629"></a><span class="lineno"> 1629</span>&#160;        <span class="keywordflow">return</span> context-&gt;NewStringFromAsciiz(errmsg);</div>
<div class="line"><a name="l01630"></a><span class="lineno"> 1630</span>&#160;    }</div>
<div class="line"><a name="l01631"></a><span class="lineno"> 1631</span>&#160;}</div>
<div class="ttc" id="a_interpreter_8cpp_html_a5c5fd6ead0e820c49dfd2f1194012f26"><div class="ttname"><a href="_interpreter_8cpp.html#a5c5fd6ead0e820c49dfd2f1194012f26">RexxGetErrorMessageByNumber</a></div><div class="ttdeci">const char *REXXENTRY RexxGetErrorMessageByNumber(int msgid)</div><div class="ttdef"><b>Definition:</b> <a href="_interpreter_8cpp_source.html#l00750">Interpreter.cpp:750</a></div></div>
<div class="ttc" id="a_rexx_internal_apis_8h_html"><div class="ttname"><a href="_rexx_internal_apis_8h.html">RexxInternalApis.h</a></div></div>
<div class="ttc" id="a_rexx_util_common_8hpp_html"><div class="ttname"><a href="_rexx_util_common_8hpp.html">RexxUtilCommon.hpp</a></div></div>
<div class="ttc" id="a_rexx_util_common_8hpp_html_a09190d1437a363d7b59a07c9092cb85d"><div class="ttname"><a href="_rexx_util_common_8hpp.html#a09190d1437a363d7b59a07c9092cb85d">formatMessage</a></div><div class="ttdeci">RexxStringObject formatMessage(RexxCallContext *context, const char *message, RexxArrayObject args, size_t firstSubstitution)</div><div class="ttdef"><b>Definition:</b> <a href="_rexx_util_common_8cpp_source.html#l02014">RexxUtilCommon.cpp:2014</a></div></div>
<div class="ttc" id="a_rexx_util_common_8hpp_html_a1f0cf79aea937d49702908d656a54b9d"><div class="ttname"><a href="_rexx_util_common_8hpp.html#a1f0cf79aea937d49702908d656a54b9d">invalidOptionException</a></div><div class="ttdeci">void invalidOptionException(RexxCallContext *c, const char *fName, const char *aName, const char *options, const char *actual)</div><div class="ttdef"><b>Definition:</b> <a href="_rexx_util_common_8hpp_source.html#l00104">RexxUtilCommon.hpp:104</a></div></div>
<div class="ttc" id="a_utilities_8hpp_html"><div class="ttname"><a href="_utilities_8hpp.html">Utilities.hpp</a></div></div>
<div class="ttc" id="aclass_auto_free_html"><div class="ttname"><a href="class_auto_free.html">AutoFree</a></div><div class="ttdef"><b>Definition:</b> <a href="_utilities_8hpp_source.html#l00068">Utilities.hpp:69</a></div></div>
<div class="ttc" id="aclass_file_name_buffer_html"><div class="ttname"><a href="class_file_name_buffer.html">FileNameBuffer</a></div><div class="ttdef"><b>Definition:</b> <a href="_file_name_buffer_8hpp_source.html#l00052">FileNameBuffer.hpp:53</a></div></div>
<div class="ttc" id="aclass_file_name_buffer_html_a55e0508ed640ffb2959816c441d1fb15"><div class="ttname"><a href="class_file_name_buffer.html#a55e0508ed640ffb2959816c441d1fb15">FileNameBuffer::at</a></div><div class="ttdeci">char &amp; at(size_t pos)</div><div class="ttdef"><b>Definition:</b> <a href="_file_name_buffer_8hpp_source.html#l00207">FileNameBuffer.hpp:207</a></div></div>
<div class="ttc" id="aclass_file_name_buffer_html_a6491632e5158b477d0a09997dd208aae"><div class="ttname"><a href="class_file_name_buffer.html#a6491632e5158b477d0a09997dd208aae">FileNameBuffer::endsWith</a></div><div class="ttdeci">bool endsWith(char c)</div><div class="ttdef"><b>Definition:</b> <a href="_file_name_buffer_8hpp_source.html#l00230">FileNameBuffer.hpp:230</a></div></div>
<div class="ttc" id="aclass_file_name_buffer_html_a6716a194791392dd168bbc37566e652a"><div class="ttname"><a href="class_file_name_buffer.html#a6716a194791392dd168bbc37566e652a">FileNameBuffer::length</a></div><div class="ttdeci">size_t length()</div><div class="ttdef"><b>Definition:</b> <a href="_file_name_buffer_8hpp_source.html#l00071">FileNameBuffer.hpp:71</a></div></div>
<div class="ttc" id="aclass_file_name_buffer_html_abe2e58760c5c2553845be516a5f94e89"><div class="ttname"><a href="class_file_name_buffer.html#abe2e58760c5c2553845be516a5f94e89">FileNameBuffer::startsWith</a></div><div class="ttdeci">bool startsWith(char c)</div><div class="ttdef"><b>Definition:</b> <a href="_file_name_buffer_8hpp_source.html#l00213">FileNameBuffer.hpp:213</a></div></div>
<div class="ttc" id="aclass_file_name_buffer_html_ad5f40320218a98a58bd54e54f78dc609"><div class="ttname"><a href="class_file_name_buffer.html#ad5f40320218a98a58bd54e54f78dc609">FileNameBuffer::addFinalPathDelimiter</a></div><div class="ttdeci">void addFinalPathDelimiter()</div><div class="ttdef"><b>Definition:</b> <a href="_file_name_buffer_8hpp_source.html#l00262">FileNameBuffer.hpp:262</a></div></div>
<div class="ttc" id="aclass_routine_qualified_name_html"><div class="ttname"><a href="class_routine_qualified_name.html">RoutineQualifiedName</a></div><div class="ttdef"><b>Definition:</b> <a href="_external_file_buffer_8hpp_source.html#l00133">ExternalFileBuffer.hpp:134</a></div></div>
<div class="ttc" id="aclass_sys_file_iterator_1_1_file_attributes_html"><div class="ttname"><a href="class_sys_file_iterator_1_1_file_attributes.html">SysFileIterator::FileAttributes</a></div><div class="ttdef"><b>Definition:</b> <a href="unix_2_sys_file_system_8hpp_source.html#l00163">unix/SysFileSystem.hpp:164</a></div></div>
<div class="ttc" id="aclass_sys_file_iterator_1_1_file_attributes_html_a7ed1219470ef7b82df4e45d534919928"><div class="ttname"><a href="class_sys_file_iterator_1_1_file_attributes.html#a7ed1219470ef7b82df4e45d534919928">SysFileIterator::FileAttributes::findFileData</a></div><div class="ttdeci">struct stat64 findFileData</div><div class="ttdef"><b>Definition:</b> <a href="unix_2_sys_file_system_8hpp_source.html#l00166">unix/SysFileSystem.hpp:169</a></div></div>
<div class="ttc" id="aclass_sys_file_system_html_a4178c0be60d7087cb7293988dd6458f9"><div class="ttname"><a href="class_sys_file_system.html#a4178c0be60d7087cb7293988dd6458f9">SysFileSystem::canonicalizeName</a></div><div class="ttdeci">static bool canonicalizeName(FileNameBuffer &amp;resolvedName)</div><div class="ttdef"><b>Definition:</b> <a href="unix_2_sys_file_system_8cpp_source.html#l00613">unix/SysFileSystem.cpp:613</a></div></div>
<div class="ttc" id="aclass_tree_finder_html"><div class="ttname"><a href="class_tree_finder.html">TreeFinder</a></div><div class="ttdef"><b>Definition:</b> <a href="_rexx_util_common_8hpp_source.html#l00260">RexxUtilCommon.hpp:261</a></div></div>
<div class="ttc" id="aclass_tree_finder_html_a062654267e068792887d5905cb97d3bc"><div class="ttname"><a href="class_tree_finder.html#a062654267e068792887d5905cb97d3bc">TreeFinder::options</a></div><div class="ttdeci">FlagSet&lt; OptionFlags, 8 &gt; options</div><div class="ttdef"><b>Definition:</b> <a href="_rexx_util_common_8hpp_source.html#l00411">RexxUtilCommon.hpp:411</a></div></div>
<div class="ttc" id="aclass_tree_finder_html_a167c891316fbc292d7e6f26105aa13b5"><div class="ttname"><a href="class_tree_finder.html#a167c891316fbc292d7e6f26105aa13b5">TreeFinder::filePath</a></div><div class="ttdeci">RoutineFileNameBuffer filePath</div><div class="ttdef"><b>Definition:</b> <a href="_rexx_util_common_8hpp_source.html#l00406">RexxUtilCommon.hpp:406</a></div></div>
<div class="ttc" id="aclass_tree_finder_html_a22df053b3af4a130eaddc8244dc5ceba"><div class="ttname"><a href="class_tree_finder.html#a22df053b3af4a130eaddc8244dc5ceba">TreeFinder::foundFile</a></div><div class="ttdeci">RoutineFileNameBuffer foundFile</div><div class="ttdef"><b>Definition:</b> <a href="_rexx_util_common_8hpp_source.html#l00408">RexxUtilCommon.hpp:408</a></div></div>
<div class="ttc" id="aclass_tree_finder_html_a249125a457591ca48c4e74854545799d"><div class="ttname"><a href="class_tree_finder.html#a249125a457591ca48c4e74854545799d">TreeFinder::findDirectoryEnd</a></div><div class="ttdeci">int findDirectoryEnd()</div><div class="ttdef"><b>Definition:</b> <a href="unix_2_sys_rexx_util_8cpp_source.html#l00524">unix/SysRexxUtil.cpp:524</a></div></div>
<div class="ttc" id="aclass_tree_finder_html_a2ce515910cf14af9f08937e0468fbfdb"><div class="ttname"><a href="class_tree_finder.html#a2ce515910cf14af9f08937e0468fbfdb">TreeFinder::longSize</a></div><div class="ttdeci">bool longSize()</div><div class="ttdef"><b>Definition:</b> <a href="_rexx_util_common_8hpp_source.html#l00394">RexxUtilCommon.hpp:394</a></div></div>
<div class="ttc" id="aclass_tree_finder_html_a3739e861f7c64301134ca49ba5869d2b"><div class="ttname"><a href="class_tree_finder.html#a3739e861f7c64301134ca49ba5869d2b">TreeFinder::adjustFileSpec</a></div><div class="ttdeci">void adjustFileSpec()</div><div class="ttdef"><b>Definition:</b> <a href="unix_2_sys_rexx_util_8cpp_source.html#l00346">unix/SysRexxUtil.cpp:346</a></div></div>
<div class="ttc" id="aclass_tree_finder_html_a43d0063ee437cb87acaa3fea2cdc31a6"><div class="ttname"><a href="class_tree_finder.html#a43d0063ee437cb87acaa3fea2cdc31a6">TreeFinder::nameOnly</a></div><div class="ttdeci">bool nameOnly()</div><div class="ttdef"><b>Definition:</b> <a href="_rexx_util_common_8hpp_source.html#l00391">RexxUtilCommon.hpp:391</a></div></div>
<div class="ttc" id="aclass_tree_finder_html_a4d9cf8dc1c33049c938cdaefdd98db67"><div class="ttname"><a href="class_tree_finder.html#a4d9cf8dc1c33049c938cdaefdd98db67">TreeFinder::editableTime</a></div><div class="ttdeci">bool editableTime()</div><div class="ttdef"><b>Definition:</b> <a href="_rexx_util_common_8hpp_source.html#l00393">RexxUtilCommon.hpp:393</a></div></div>
<div class="ttc" id="aclass_tree_finder_html_a5c4a791393e4b768ef072d4dcf9996ada182c9612403b358fdeb3a0e641e8b7b2"><div class="ttname"><a href="class_tree_finder.html#a5c4a791393e4b768ef072d4dcf9996ada182c9612403b358fdeb3a0e641e8b7b2">TreeFinder::DO_FILES</a></div><div class="ttdeci">@ DO_FILES</div><div class="ttdef"><b>Definition:</b> <a href="_rexx_util_common_8hpp_source.html#l00268">RexxUtilCommon.hpp:268</a></div></div>
<div class="ttc" id="aclass_tree_finder_html_a5c4a791393e4b768ef072d4dcf9996ada1da9e0efa2799217a99634e53d75001a"><div class="ttname"><a href="class_tree_finder.html#a5c4a791393e4b768ef072d4dcf9996ada1da9e0efa2799217a99634e53d75001a">TreeFinder::DO_DIRS</a></div><div class="ttdeci">@ DO_DIRS</div><div class="ttdef"><b>Definition:</b> <a href="_rexx_util_common_8hpp_source.html#l00267">RexxUtilCommon.hpp:267</a></div></div>
<div class="ttc" id="aclass_tree_finder_html_a63157a8d75348d96b33c9082cded22f6"><div class="ttname"><a href="class_tree_finder.html#a63157a8d75348d96b33c9082cded22f6">TreeFinder::addResult</a></div><div class="ttdeci">void addResult(const char *v)</div><div class="ttdef"><b>Definition:</b> <a href="_rexx_util_common_8cpp_source.html#l00743">RexxUtilCommon.cpp:743</a></div></div>
<div class="ttc" id="aclass_tree_finder_html_a6770f8b247bb95dbc230bb4fd8d18751"><div class="ttname"><a href="class_tree_finder.html#a6770f8b247bb95dbc230bb4fd8d18751">TreeFinder::validateFileSpecName</a></div><div class="ttdeci">void validateFileSpecName()</div><div class="ttdef"><b>Definition:</b> <a href="unix_2_sys_rexx_util_8cpp_source.html#l00358">unix/SysRexxUtil.cpp:358</a></div></div>
<div class="ttc" id="aclass_tree_finder_html_a6b9cb316539b42b36237028eb8204951"><div class="ttname"><a href="class_tree_finder.html#a6b9cb316539b42b36237028eb8204951">TreeFinder::adjustDirectory</a></div><div class="ttdeci">void adjustDirectory()</div><div class="ttdef"><b>Definition:</b> <a href="unix_2_sys_rexx_util_8cpp_source.html#l00319">unix/SysRexxUtil.cpp:319</a></div></div>
<div class="ttc" id="aclass_tree_finder_html_aa0b1a5653c7e67d10dcb5ff3c07c6317"><div class="ttname"><a href="class_tree_finder.html#aa0b1a5653c7e67d10dcb5ff3c07c6317">TreeFinder::context</a></div><div class="ttdeci">RexxCallContext * context</div><div class="ttdef"><b>Definition:</b> <a href="_rexx_util_common_8hpp_source.html#l00404">RexxUtilCommon.hpp:404</a></div></div>
<div class="ttc" id="aclass_tree_finder_html_acc73dc32282b020f26cf43f46c1dcdfa"><div class="ttname"><a href="class_tree_finder.html#acc73dc32282b020f26cf43f46c1dcdfa">TreeFinder::fileSpec</a></div><div class="ttdeci">RoutineFileNameBuffer fileSpec</div><div class="ttdef"><b>Definition:</b> <a href="_rexx_util_common_8hpp_source.html#l00407">RexxUtilCommon.hpp:407</a></div></div>
<div class="ttc" id="aclass_tree_finder_html_ad22d76aa47d89fb73cb4e72306fc1dc0"><div class="ttname"><a href="class_tree_finder.html#ad22d76aa47d89fb73cb4e72306fc1dc0">TreeFinder::checkNonPathDrive</a></div><div class="ttdeci">bool checkNonPathDrive()</div><div class="ttdef"><b>Definition:</b> <a href="unix_2_sys_rexx_util_8cpp_source.html#l00370">unix/SysRexxUtil.cpp:370</a></div></div>
<div class="ttc" id="aclass_tree_finder_html_ad888865ea347ad955c445e1159b7a4da"><div class="ttname"><a href="class_tree_finder.html#ad888865ea347ad955c445e1159b7a4da">TreeFinder::foundFileLine</a></div><div class="ttdeci">RoutineFileNameBuffer foundFileLine</div><div class="ttdef"><b>Definition:</b> <a href="_rexx_util_common_8hpp_source.html#l00409">RexxUtilCommon.hpp:409</a></div></div>
<div class="ttc" id="aclass_tree_finder_html_ad89d28086b2df157d93f798864eb47c5"><div class="ttname"><a href="class_tree_finder.html#ad89d28086b2df157d93f798864eb47c5">TreeFinder::checkFile</a></div><div class="ttdeci">void checkFile(SysFileIterator::FileAttributes &amp;attributes)</div><div class="ttdef"><b>Definition:</b> <a href="unix_2_sys_rexx_util_8cpp_source.html#l00477">unix/SysRexxUtil.cpp:477</a></div></div>
<div class="ttc" id="aclass_tree_finder_html_ae868be5e940be0bf3f17477d46a02fff"><div class="ttname"><a href="class_tree_finder.html#ae868be5e940be0bf3f17477d46a02fff">TreeFinder::fixupFilePath</a></div><div class="ttdeci">void fixupFilePath()</div><div class="ttdef"><b>Definition:</b> <a href="unix_2_sys_rexx_util_8cpp_source.html#l00543">unix/SysRexxUtil.cpp:543</a></div></div>
<div class="ttc" id="aclass_tree_finder_html_afbce0a441b278520d2c2843f64ae289e"><div class="ttname"><a href="class_tree_finder.html#afbce0a441b278520d2c2843f64ae289e">TreeFinder::longTime</a></div><div class="ttdeci">bool longTime()</div><div class="ttdef"><b>Definition:</b> <a href="_rexx_util_common_8hpp_source.html#l00392">RexxUtilCommon.hpp:392</a></div></div>
<div class="ttc" id="aoorexxapi_8h_html"><div class="ttname"><a href="oorexxapi_8h.html">oorexxapi.h</a></div></div>
<div class="ttc" id="aoorexxapi_8h_html_a895bccfb4968ae24b153351beadd50f7"><div class="ttname"><a href="oorexxapi_8h.html#a895bccfb4968ae24b153351beadd50f7">argumentOmitted</a></div><div class="ttdeci">#define argumentOmitted(i)</div><div class="ttdef"><b>Definition:</b> <a href="oorexxapi_8h_source.html#l04275">oorexxapi.h:4275</a></div></div>
<div class="ttc" id="aoorexxapi_8h_html_aae1e6d73838504107707970bedfb1a40"><div class="ttname"><a href="oorexxapi_8h.html#aae1e6d73838504107707970bedfb1a40">ARGLIST</a></div><div class="ttdeci">RexxArrayObject ARGLIST</div><div class="ttdef"><b>Definition:</b> <a href="oorexxapi_8h_source.html#l04828">oorexxapi.h:4828</a></div></div>
<div class="ttc" id="arexx_8h_html_a581e376dc8d3b9132e29014c896b9e70"><div class="ttname"><a href="rexx_8h.html#a581e376dc8d3b9132e29014c896b9e70">CSTRING</a></div><div class="ttdeci">const char * CSTRING</div><div class="ttdef"><b>Definition:</b> <a href="rexx_8h_source.html#l00078">rexx.h:78</a></div></div>
<div class="ttc" id="arexx_8h_html_a64dfe004825692637e2075467179fcd9"><div class="ttname"><a href="rexx_8h.html#a64dfe004825692637e2075467179fcd9">RexxStringObject</a></div><div class="ttdeci">struct _RexxStringObject * RexxStringObject</div><div class="ttdef"><b>Definition:</b> <a href="rexx_8h_source.html#l00134">rexx.h:134</a></div></div>
<div class="ttc" id="arexx_8h_html_a96e0cc5eda42aed364b05f3c493e07e8"><div class="ttname"><a href="rexx_8h.html#a96e0cc5eda42aed364b05f3c493e07e8">RexxObjectPtr</a></div><div class="ttdeci">struct _RexxObjectPtr * RexxObjectPtr</div><div class="ttdef"><b>Definition:</b> <a href="rexx_8h_source.html#l00133">rexx.h:133</a></div></div>
<div class="ttc" id="arexx_8h_html_a9a119fa1e31a4af78dee3c12225b240a"><div class="ttname"><a href="rexx_8h.html#a9a119fa1e31a4af78dee3c12225b240a">NULLOBJECT</a></div><div class="ttdeci">#define NULLOBJECT</div><div class="ttdef"><b>Definition:</b> <a href="rexx_8h_source.html#l00155">rexx.h:155</a></div></div>
<div class="ttc" id="astruct_rx_sem_data_html"><div class="ttname"><a href="struct_rx_sem_data.html">RxSemData</a></div><div class="ttdef"><b>Definition:</b> <a href="unix_2_sys_rexx_util_8cpp_source.html#l00622">unix/SysRexxUtil.cpp:623</a></div></div>
<div class="ttc" id="astruct_rx_sem_data_html_a4c3832abbea5592f324dd2c43e16c12c"><div class="ttname"><a href="struct_rx_sem_data.html#a4c3832abbea5592f324dd2c43e16c12c">RxSemData::named</a></div><div class="ttdeci">bool named</div><div class="ttdef"><b>Definition:</b> <a href="unix_2_sys_rexx_util_8cpp_source.html#l00624">unix/SysRexxUtil.cpp:624</a></div></div>
<div class="ttc" id="astruct_rx_sem_data_html_a886bafc79e2d9fab1036d2b71d31ca25"><div class="ttname"><a href="struct_rx_sem_data.html#a886bafc79e2d9fab1036d2b71d31ca25">RxSemData::handle</a></div><div class="ttdeci">sem_t * handle</div><div class="ttdef"><b>Definition:</b> <a href="unix_2_sys_rexx_util_8cpp_source.html#l00625">unix/SysRexxUtil.cpp:625</a></div></div>
<div class="ttc" id="aunix_2_sys_rexx_util_8cpp_html_a007f0b4100064dd50772509ec06a6575"><div class="ttname"><a href="unix_2_sys_rexx_util_8cpp.html#a007f0b4100064dd50772509ec06a6575">stty</a></div><div class="ttdeci">#define stty(a, b)</div><div class="ttdef"><b>Definition:</b> <a href="unix_2_sys_rexx_util_8cpp_source.html#l00188">unix/SysRexxUtil.cpp:188</a></div></div>
<div class="ttc" id="aunix_2_sys_rexx_util_8cpp_html_a04fe5f8ea9dc69e81b9e83701c3dd59e"><div class="ttname"><a href="unix_2_sys_rexx_util_8cpp.html#a04fe5f8ea9dc69e81b9e83701c3dd59e">SEM_WAIT_PERIOD</a></div><div class="ttdeci">#define SEM_WAIT_PERIOD</div><div class="ttdef"><b>Definition:</b> <a href="unix_2_sys_rexx_util_8cpp_source.html#l00800">unix/SysRexxUtil.cpp:800</a></div></div>
<div class="ttc" id="aunix_2_sys_rexx_util_8cpp_html_a0ee1c3247f81b3e4c937ae42528d9362"><div class="ttname"><a href="unix_2_sys_rexx_util_8cpp.html#a0ee1c3247f81b3e4c937ae42528d9362">in_orig</a></div><div class="ttdeci">struct termios in_orig</div><div class="ttdef"><b>Definition:</b> <a href="unix_2_sys_rexx_util_8cpp_source.html#l00001">unix/SysRexxUtil.cpp:195</a></div></div>
<div class="ttc" id="aunix_2_sys_rexx_util_8cpp_html_a1edebb0fd32ce50dcb56a3ce000e41e1"><div class="ttname"><a href="unix_2_sys_rexx_util_8cpp.html#a1edebb0fd32ce50dcb56a3ce000e41e1">RexxRoutine4</a></div><div class="ttdeci">RexxRoutine4(RexxStringObject, SysGetMessageX, positive_wholenumber_t, setnum, positive_wholenumber_t, msgnum, OPTIONAL_CSTRING, msgfile, ARGLIST, args)</div><div class="ttdef"><b>Definition:</b> <a href="unix_2_sys_rexx_util_8cpp_source.html#l01198">unix/SysRexxUtil.cpp:1198</a></div></div>
<div class="ttc" id="aunix_2_sys_rexx_util_8cpp_html_a379643b4a1b8f467f7de46208cb47b46"><div class="ttname"><a href="unix_2_sys_rexx_util_8cpp.html#a379643b4a1b8f467f7de46208cb47b46">RexxRoutine0</a></div><div class="ttdeci">RexxRoutine0(int, SysCls)</div><div class="ttdef"><b>Definition:</b> <a href="unix_2_sys_rexx_util_8cpp_source.html#l00562">unix/SysRexxUtil.cpp:562</a></div></div>
<div class="ttc" id="aunix_2_sys_rexx_util_8cpp_html_a4ef13fe883b83d45549a13ba7aa20943"><div class="ttname"><a href="unix_2_sys_rexx_util_8cpp.html#a4ef13fe883b83d45549a13ba7aa20943">RXSEMDATA</a></div><div class="ttdeci">struct RxSemData RXSEMDATA</div></div>
<div class="ttc" id="aunix_2_sys_rexx_util_8cpp_html_a55c6108da7c0d80fb384255554ac4fa4"><div class="ttname"><a href="unix_2_sys_rexx_util_8cpp.html#a55c6108da7c0d80fb384255554ac4fa4">typeOfEntry</a></div><div class="ttdeci">char typeOfEntry(mode_t m)</div><div class="ttdef"><b>Definition:</b> <a href="unix_2_sys_rexx_util_8cpp_source.html#l00283">unix/SysRexxUtil.cpp:283</a></div></div>
<div class="ttc" id="aunix_2_sys_rexx_util_8cpp_html_a6333d9197444bd8b891f0ddc1bfaca0e"><div class="ttname"><a href="unix_2_sys_rexx_util_8cpp.html#a6333d9197444bd8b891f0ddc1bfaca0e">gtty</a></div><div class="ttdeci">#define gtty(a, b)</div><div class="ttdef"><b>Definition:</b> <a href="unix_2_sys_rexx_util_8cpp_source.html#l00189">unix/SysRexxUtil.cpp:189</a></div></div>
<div class="ttc" id="aunix_2_sys_rexx_util_8cpp_html_a7255a3fd7af0d5bcfa4aacaf7d1fee91"><div class="ttname"><a href="unix_2_sys_rexx_util_8cpp.html#a7255a3fd7af0d5bcfa4aacaf7d1fee91">getkey</a></div><div class="ttdeci">int getkey(char *ret, bool echo)</div><div class="ttdef"><b>Definition:</b> <a href="unix_2_sys_rexx_util_8cpp_source.html#l00216">unix/SysRexxUtil.cpp:216</a></div></div>
<div class="ttc" id="aunix_2_sys_rexx_util_8cpp_html_a7f05a404e70ff76bbda7ba85bc5faf90"><div class="ttname"><a href="unix_2_sys_rexx_util_8cpp.html#a7f05a404e70ff76bbda7ba85bc5faf90">formatFileAttributes</a></div><div class="ttdeci">void formatFileAttributes(TreeFinder *finder, FileNameBuffer &amp;foundFileLine, SysFileIterator::FileAttributes &amp;attributes)</div><div class="ttdef"><b>Definition:</b> <a href="unix_2_sys_rexx_util_8cpp_source.html#l00382">unix/SysRexxUtil.cpp:382</a></div></div>
<div class="ttc" id="aunix_2_sys_rexx_util_8cpp_html_a83a3cabd5d6efd9dfe1c840ea0415167"><div class="ttname"><a href="unix_2_sys_rexx_util_8cpp.html#a83a3cabd5d6efd9dfe1c840ea0415167">RexxRoutine3</a></div><div class="ttdeci">RexxRoutine3(RexxStringObject, SysGetMessage, positive_wholenumber_t, msgnum, OPTIONAL_CSTRING, msgfile, ARGLIST, args)</div><div class="ttdef"><b>Definition:</b> <a href="unix_2_sys_rexx_util_8cpp_source.html#l01169">unix/SysRexxUtil.cpp:1169</a></div></div>
<div class="ttc" id="aunix_2_sys_rexx_util_8cpp_html_aa99b04951a3dd00e93a76a3e69bc83f2"><div class="ttname"><a href="unix_2_sys_rexx_util_8cpp.html#aa99b04951a3dd00e93a76a3e69bc83f2">RexxRoutine1</a></div><div class="ttdeci">RexxRoutine1(uintptr_t, SysOpenEventSem, CSTRING, name)</div><div class="ttdef"><b>Definition:</b> <a href="unix_2_sys_rexx_util_8cpp_source.html#l00689">unix/SysRexxUtil.cpp:689</a></div></div>
<div class="ttc" id="aunix_2_sys_rexx_util_8cpp_html_ab715438f141dbd32bc68f03bae3eac91"><div class="ttname"><a href="unix_2_sys_rexx_util_8cpp.html#ab715438f141dbd32bc68f03bae3eac91">getErrorMessage</a></div><div class="ttdeci">char * getErrorMessage(const char *repository, int setnum, int msgnum)</div><div class="ttdef"><b>Definition:</b> <a href="unix_2_sys_rexx_util_8cpp_source.html#l01107">unix/SysRexxUtil.cpp:1107</a></div></div>
<div class="ttc" id="aunix_2_sys_rexx_util_8cpp_html_abcdf5a573b42c526e95a0ff6c4339d78"><div class="ttname"><a href="unix_2_sys_rexx_util_8cpp.html#abcdf5a573b42c526e95a0ff6c4339d78">REXXMESSAGEFILE</a></div><div class="ttdeci">#define REXXMESSAGEFILE</div><div class="ttdef"><b>Definition:</b> <a href="unix_2_sys_rexx_util_8cpp_source.html#l00175">unix/SysRexxUtil.cpp:175</a></div></div>
<div class="ttc" id="aunix_2_sys_rexx_util_8cpp_html_ae1362a1c00e1354d690a15e9ba82c1e6"><div class="ttname"><a href="unix_2_sys_rexx_util_8cpp.html#ae1362a1c00e1354d690a15e9ba82c1e6">restore_tty</a></div><div class="ttdeci">#define restore_tty(a)</div><div class="ttdef"><b>Definition:</b> <a href="unix_2_sys_rexx_util_8cpp_source.html#l00191">unix/SysRexxUtil.cpp:191</a></div></div>
<div class="ttc" id="aunix_2_sys_rexx_util_8cpp_html_ae4058954d612cdd54a7ef47dbb2f70eb"><div class="ttname"><a href="unix_2_sys_rexx_util_8cpp.html#ae4058954d612cdd54a7ef47dbb2f70eb">restore_terminal</a></div><div class="ttdeci">void restore_terminal(int signal)</div><div class="ttdef"><b>Definition:</b> <a href="unix_2_sys_rexx_util_8cpp_source.html#l00204">unix/SysRexxUtil.cpp:204</a></div></div>
<div class="ttc" id="aunix_2_sys_rexx_util_8cpp_html_ae76cb3e703d83ba4aef58ac990d00ff3"><div class="ttname"><a href="unix_2_sys_rexx_util_8cpp.html#ae76cb3e703d83ba4aef58ac990d00ff3">RexxRoutine2</a></div><div class="ttdeci">RexxRoutine2(int, SysMkDir, CSTRING, path, OPTIONAL_int32_t, mode)</div><div class="ttdef"><b>Definition:</b> <a href="unix_2_sys_rexx_util_8cpp_source.html#l00576">unix/SysRexxUtil.cpp:576</a></div></div>
<div class="ttc" id="awindows_2rexxapitypes_8h_html_a2f338919cf0aa5c3d87df8096b8fa972"><div class="ttname"><a href="windows_2rexxapitypes_8h.html#a2f338919cf0aa5c3d87df8096b8fa972">uintptr_t</a></div><div class="ttdeci">UINT_PTR uintptr_t</div><div class="ttdef"><b>Definition:</b> <a href="windows_2rexxapitypes_8h_source.html#l00050">windows/rexxapitypes.h:50</a></div></div>
<div class="ttc" id="awindows_2rexxapitypes_8h_html_a32f2e37ee053cf2ce8ca28d1f74630e5"><div class="ttname"><a href="windows_2rexxapitypes_8h.html#a32f2e37ee053cf2ce8ca28d1f74630e5">int32_t</a></div><div class="ttdeci">int int32_t</div><div class="ttdef"><b>Definition:</b> <a href="windows_2rexxapitypes_8h_source.html#l00073">windows/rexxapitypes.h:73</a></div></div>
</div><!-- fragment --></div><!-- contents -->
</div><!-- doc-content -->
<!-- HTML footer for doxygen 1.9.2-->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_2b8d323c7289fed1299e6f1b6909d41b.html">oorexx</a></li><li class="navelem"><a class="el" href="dir_2dfb7423ce64cb60f62cee208bb73ae3.html">official</a></li><li class="navelem"><a class="el" href="dir_63144926d93644d0b571decfac4c5baa.html">main</a></li><li class="navelem"><a class="el" href="dir_5131a42d519b9b019d5264fc1f0fe4ab.html">trunk</a></li><li class="navelem"><a class="el" href="dir_07b471ff108ade29d714c67783960c47.html">interpreter</a></li><li class="navelem"><a class="el" href="dir_4350e6caeaece7d6e66e745c6bce97c5.html">platform</a></li><li class="navelem"><a class="el" href="dir_ee1f4bdc11d4ec0f85183b4256a39b67.html">unix</a></li><li class="navelem"><a class="el" href="unix_2_sys_rexx_util_8cpp.html">SysRexxUtil.cpp</a></li>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.2 </li>
  </ul>
</div>
<!-- javascript code to insert the title in the condensed index (tabs) -->
<!-- See the function initMenu in menu.js:
     The condensed index is a list <ul> of several items <li>: Main Page, Classes, Files.
     I append a new item <li> which display the project name. -->
<script type="text/javascript">
$(function() {
  $('#main-menu').append('<li class="title" style="margin-left:3mm">ooRexx</li>')
});
</script>
<!-- end of javascript code -->
</body>
</html>
