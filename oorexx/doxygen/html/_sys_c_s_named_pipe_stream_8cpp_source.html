<!-- HTML header for doxygen 1.9.2-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.2"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>ooRexx: SysCSNamedPipeStream.cpp Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<!--
    Removed completely the TITLEAREA because I don't like the loss of space.
    I want the title in the condensed index (tabs) at top of each HTML page.
    The insertion of the title is managed by javascript code in the footer,
    because this code must be executed AFTER the creation of the condensed index.
    Must have this setting to display the condensed index:
    DISABLE_INDEX = NO
-->
<!-- end header part -->
<!-- Generated by Doxygen 1.9.2 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('_sys_c_s_named_pipe_stream_8cpp_source.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">SysCSNamedPipeStream.cpp</div>  </div>
</div><!--header-->
<div class="contents">
<a href="_sys_c_s_named_pipe_stream_8cpp.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="comment">/*----------------------------------------------------------------------------*/</span></div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="comment">/*                                                                            */</span></div>
<div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="comment">/* Copyright (c) 2005-2022 Rexx Language Association. All rights reserved.    */</span></div>
<div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="comment">/*                                                                            */</span></div>
<div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="comment">/* This program and the accompanying materials are made available under       */</span></div>
<div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="comment">/* the terms of the Common Public License v1.0 which accompanies this         */</span></div>
<div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="comment">/* distribution. A copy is also available at the following address:           */</span></div>
<div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="comment">/* https://www.oorexx.org/license.html                                        */</span></div>
<div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="comment">/*                                                                            */</span></div>
<div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;<span class="comment">/* Redistribution and use in source and binary forms, with or                 */</span></div>
<div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;<span class="comment">/* without modification, are permitted provided that the following            */</span></div>
<div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;<span class="comment">/* conditions are met:                                                        */</span></div>
<div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;<span class="comment">/*                                                                            */</span></div>
<div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;<span class="comment">/* Redistributions of source code must retain the above copyright             */</span></div>
<div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;<span class="comment">/* notice, this list of conditions and the following disclaimer.              */</span></div>
<div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;<span class="comment">/* Redistributions in binary form must reproduce the above copyright          */</span></div>
<div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;<span class="comment">/* notice, this list of conditions and the following disclaimer in            */</span></div>
<div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;<span class="comment">/* the documentation and/or other materials provided with the distribution.   */</span></div>
<div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;<span class="comment">/*                                                                            */</span></div>
<div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;<span class="comment">/* Neither the name of Rexx Language Association nor the names                */</span></div>
<div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;<span class="comment">/* of its contributors may be used to endorse or promote products             */</span></div>
<div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;<span class="comment">/* derived from this software without specific prior written permission.      */</span></div>
<div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;<span class="comment">/*                                                                            */</span></div>
<div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;<span class="comment">/* THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS        */</span></div>
<div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;<span class="comment">/* &quot;AS IS&quot; AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT          */</span></div>
<div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;<span class="comment">/* LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS          */</span></div>
<div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;<span class="comment">/* FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT   */</span></div>
<div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;<span class="comment">/* OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,      */</span></div>
<div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;<span class="comment">/* SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED   */</span></div>
<div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;<span class="comment">/* TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA,        */</span></div>
<div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;<span class="comment">/* OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY     */</span></div>
<div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;<span class="comment">/* OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING    */</span></div>
<div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;<span class="comment">/* NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS         */</span></div>
<div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;<span class="comment">/* SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.               */</span></div>
<div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;<span class="comment">/*                                                                            */</span></div>
<div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;<span class="comment">/*----------------------------------------------------------------------------*/</span></div>
<div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160; </div>
<div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160; </div>
<div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;<span class="preprocessor">#include &lt;string.h&gt;</span></div>
<div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;<span class="preprocessor">#include &lt;stdlib.h&gt;</span></div>
<div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;<span class="preprocessor">#include &lt;stdio.h&gt;</span></div>
<div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;<span class="preprocessor">#include &lt;string.h&gt;</span></div>
<div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="_sys_c_s_named_pipe_stream_8hpp.html">SysCSNamedPipeStream.hpp</a>&quot;</span></div>
<div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="_service_exception_8hpp.html">ServiceException.hpp</a>&quot;</span></div>
<div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;<span class="preprocessor">#include &quot;SysProcess.hpp&quot;</span></div>
<div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="oorexxapi_8h.html">oorexxapi.h</a>&quot;</span></div>
<div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160; </div>
<div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;<span class="preprocessor">#include &quot;aclapi.h&quot;</span></div>
<div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;<span class="preprocessor">#include &quot;sddl.h&quot;</span></div>
<div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160; </div>
<div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;<span class="comment">// the pipe name used for this userid</span></div>
<div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;<span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="class_sys_server_named_pipe_connection_manager.html#a56ada84ba969886eedc6dc544abcb653">SysServerNamedPipeConnectionManager::userPipeName</a> = NULL;</div>
<div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;<span class="comment">// the named mutex used for this userid</span></div>
<div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;<span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="class_sys_server_named_pipe_connection_manager.html#a129a7a2a50ea6dc445b00f0f92a5f244">SysServerNamedPipeConnectionManager::serverMutexName</a> = NULL;</div>
<div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160; </div>
<div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;<span class="comment">/**</span></div>
<div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;<span class="comment"> * Read from the connection.</span></div>
<div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;<span class="comment"> * @param buf       Target buffer for the read operation.</span></div>
<div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;<span class="comment"> * @param bufsize   Size of the target buffer.</span></div>
<div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;<span class="comment"> * @param bytesread Number of bytes actually read.</span></div>
<div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;<span class="comment"> * @return True on an error, otherwise false</span></div>
<div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l00066"></a><span class="lineno"><a class="line" href="class_sys_named_pipe_connection.html#a18a864c8746c071c187131dd36ee5503">   66</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="class_sys_named_pipe_connection.html#a18a864c8746c071c187131dd36ee5503">SysNamedPipeConnection::read</a>(<span class="keywordtype">void</span> *buf, <span class="keywordtype">size_t</span> bufsize, <span class="keywordtype">size_t</span> *bytesread)</div>
<div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;{</div>
<div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="class_sys_named_pipe_connection.html#ade60f4caa1f4f49d29c7d37947d88da4">pipeHandle</a> == INVALID_HANDLE_VALUE)</div>
<div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;    {</div>
<div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;        <a class="code" href="class_api_connection.html#a0084699543e07344b40c8923701135dc">errcode</a> = <a class="code" href="_c_s_stream_8hpp.html#ad0cfb733f4e15ab50f56509ada532f4da71999ceaa9771120d1a4272a268f7479">CSERROR_IO_FAILED</a>;</div>
<div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;    }</div>
<div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160; </div>
<div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;    DWORD actual = 0;</div>
<div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160; </div>
<div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;    <span class="comment">// try to read from the pipe</span></div>
<div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;    <span class="keywordflow">if</span> (!ReadFile(<a class="code" href="class_sys_named_pipe_connection.html#ade60f4caa1f4f49d29c7d37947d88da4">pipeHandle</a>, buf, (DWORD)bufsize, &amp;actual, NULL))</div>
<div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;    {</div>
<div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;        <span class="comment">// a faiure return is a bad problem.  0 might be bad, but allow the</span></div>
<div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;        <span class="comment">// caller to handle that one.</span></div>
<div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;        <a class="code" href="class_api_connection.html#a0084699543e07344b40c8923701135dc">errcode</a> = <a class="code" href="_c_s_stream_8hpp.html#ad0cfb733f4e15ab50f56509ada532f4da71999ceaa9771120d1a4272a268f7479">CSERROR_IO_FAILED</a>;</div>
<div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;    }</div>
<div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;    *bytesread = (size_t)actual;</div>
<div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;    <a class="code" href="class_api_connection.html#a0084699543e07344b40c8923701135dc">errcode</a> = <a class="code" href="_c_s_stream_8hpp.html#ad0cfb733f4e15ab50f56509ada532f4dad79e76fed1e03dff54d77007fc32ba59">CSERROR_OK</a>;</div>
<div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;}</div>
<div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160; </div>
<div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;<span class="comment">/**</span></div>
<div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;<span class="comment"> * Write a buffer to the connection.</span></div>
<div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;<span class="comment"> * @param buf     Source buffer for the write operation.</span></div>
<div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;<span class="comment"> * @param bufsize Size of the source buffer.</span></div>
<div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;<span class="comment"> * @param byteswritten</span></div>
<div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;<span class="comment"> *                Number of bytes actually written to the connection.</span></div>
<div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;<span class="comment"> * @return True on an error, otherwise false</span></div>
<div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l00100"></a><span class="lineno"><a class="line" href="class_sys_named_pipe_connection.html#a356443c005e6c03c859f06add80fce8b">  100</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="class_sys_named_pipe_connection.html#a356443c005e6c03c859f06add80fce8b">SysNamedPipeConnection::write</a>(<span class="keywordtype">void</span> *buf, <span class="keywordtype">size_t</span> bufsize, <span class="keywordtype">size_t</span> *byteswritten)</div>
<div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;{</div>
<div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="class_sys_named_pipe_connection.html#ade60f4caa1f4f49d29c7d37947d88da4">pipeHandle</a> == INVALID_HANDLE_VALUE)</div>
<div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;    {</div>
<div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;        <a class="code" href="class_api_connection.html#a0084699543e07344b40c8923701135dc">errcode</a> = <a class="code" href="_c_s_stream_8hpp.html#ad0cfb733f4e15ab50f56509ada532f4da71999ceaa9771120d1a4272a268f7479">CSERROR_IO_FAILED</a>;</div>
<div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;    }</div>
<div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160; </div>
<div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;    DWORD actual = 0;</div>
<div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160; </div>
<div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;    <span class="comment">// write the data to the pipe</span></div>
<div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;    <span class="keywordflow">if</span> (!WriteFile(<a class="code" href="class_sys_named_pipe_connection.html#ade60f4caa1f4f49d29c7d37947d88da4">pipeHandle</a>, buf, (DWORD)bufsize, &amp;actual, NULL))</div>
<div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;    {</div>
<div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;        <span class="comment">// a false return is a bad problem.  A 0 length, might be bad, but allow the</span></div>
<div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;        <span class="comment">// caller to handle that one.</span></div>
<div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;        <a class="code" href="class_api_connection.html#a0084699543e07344b40c8923701135dc">errcode</a> = <a class="code" href="_c_s_stream_8hpp.html#ad0cfb733f4e15ab50f56509ada532f4da71999ceaa9771120d1a4272a268f7479">CSERROR_IO_FAILED</a>;</div>
<div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;    }</div>
<div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;    *byteswritten = (size_t)actual;</div>
<div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;    <a class="code" href="class_api_connection.html#a0084699543e07344b40c8923701135dc">errcode</a> = <a class="code" href="_c_s_stream_8hpp.html#ad0cfb733f4e15ab50f56509ada532f4dad79e76fed1e03dff54d77007fc32ba59">CSERROR_OK</a>;</div>
<div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;}</div>
<div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160; </div>
<div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;<span class="comment">/**</span></div>
<div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;<span class="comment"> * Write a multi-buffer message to the connection.</span></div>
<div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;<span class="comment"> * @param buf     Source buffer for the write operation.</span></div>
<div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;<span class="comment"> * @param bufsize Size of the source buffer.</span></div>
<div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;<span class="comment"> * @param byteswritten</span></div>
<div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;<span class="comment"> *                Number of bytes actually written to the connection.</span></div>
<div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;<span class="comment"> * @return True on an error, otherwise false</span></div>
<div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l00134"></a><span class="lineno"><a class="line" href="class_sys_named_pipe_connection.html#aafba73319c8861f5f317bb2c079315f0">  134</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="class_sys_named_pipe_connection.html#a356443c005e6c03c859f06add80fce8b">SysNamedPipeConnection::write</a>(<span class="keywordtype">void</span> *buf, <span class="keywordtype">size_t</span> bufsize, <span class="keywordtype">void</span> *buf2, <span class="keywordtype">size_t</span> buf2size, <span class="keywordtype">size_t</span> *byteswritten)</div>
<div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;{</div>
<div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;    <span class="comment">// if the second buffer is of zero size, we can handle without</span></div>
<div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;    <span class="comment">// copying</span></div>
<div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;    <span class="keywordflow">if</span> (buf2size == 0)</div>
<div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;    {</div>
<div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="class_sys_named_pipe_connection.html#a356443c005e6c03c859f06add80fce8b">write</a>(buf, bufsize, byteswritten);</div>
<div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;    }</div>
<div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160; </div>
<div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;    <span class="keywordtype">size_t</span> bufferSize = bufsize + buf2size;</div>
<div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160; </div>
<div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;    <span class="comment">// get a buffer large enough for both buffer</span></div>
<div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;    <span class="keywordtype">char</span> *buffer = <a class="code" href="class_api_connection.html#abb76082d5fc75d3f6e31f45fb0565207">getMessageBuffer</a>(bufferSize);</div>
<div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;    <span class="comment">// if we can&#39;t get a buffer, then try sending this in pieces</span></div>
<div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;    <span class="keywordflow">if</span> (buffer == NULL)</div>
<div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;    {</div>
<div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;        <span class="comment">// write the first buffer</span></div>
<div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;        <span class="keywordflow">if</span> (!<a class="code" href="class_sys_named_pipe_connection.html#a356443c005e6c03c859f06add80fce8b">write</a>(buf, bufsize, byteswritten))</div>
<div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;        {</div>
<div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;            <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;        }</div>
<div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;        <span class="keywordtype">size_t</span> buf2written = 0;</div>
<div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;        <span class="keywordflow">if</span> (!<a class="code" href="class_sys_named_pipe_connection.html#a356443c005e6c03c859f06add80fce8b">write</a>(buf2, buf2size, &amp;buf2written))</div>
<div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;        {</div>
<div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;            <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;        }</div>
<div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;        *byteswritten += buf2written;</div>
<div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;    }</div>
<div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160; </div>
<div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;    <span class="comment">// copy the message and attached data into a single buffer</span></div>
<div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;    memcpy(buffer, buf, bufsize);</div>
<div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;    memcpy(buffer + bufsize, buf2, buf2size);</div>
<div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160; </div>
<div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;    <span class="comment">// perform the write now</span></div>
<div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;    <a class="code" href="class_sys_named_pipe_connection.html#a356443c005e6c03c859f06add80fce8b">write</a>(buffer, bufferSize, byteswritten);</div>
<div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160; </div>
<div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;    <span class="comment">// we&#39;re done with the buffer, regardless of whether this works or fails</span></div>
<div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;    <a class="code" href="class_api_connection.html#abc1ed75e3c8bfc3200f952b8ff3894f4">returnMessageBuffer</a>(buffer);</div>
<div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;}</div>
<div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160; </div>
<div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;<span class="comment">/**</span></div>
<div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;<span class="comment"> * Close the server connection.</span></div>
<div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;<span class="comment"> * @return True on an error, otherwise false</span></div>
<div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l00182"></a><span class="lineno"><a class="line" href="class_sys_named_pipe_connection.html#a78f5cd880c037c66e17b76af54391a62">  182</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="class_sys_named_pipe_connection.html#a78f5cd880c037c66e17b76af54391a62">SysNamedPipeConnection::disconnect</a>()</div>
<div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;{</div>
<div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="class_sys_named_pipe_connection.html#ade60f4caa1f4f49d29c7d37947d88da4">pipeHandle</a> != INVALID_HANDLE_VALUE)</div>
<div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;    {</div>
<div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;        <span class="comment">// this ensures no data is lost</span></div>
<div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;        FlushFileBuffers(<a class="code" href="class_sys_named_pipe_connection.html#ade60f4caa1f4f49d29c7d37947d88da4">pipeHandle</a>);</div>
<div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;        DisconnectNamedPipe(<a class="code" href="class_sys_named_pipe_connection.html#ade60f4caa1f4f49d29c7d37947d88da4">pipeHandle</a>);</div>
<div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;        CloseHandle(<a class="code" href="class_sys_named_pipe_connection.html#ade60f4caa1f4f49d29c7d37947d88da4">pipeHandle</a>);</div>
<div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;        <a class="code" href="class_sys_named_pipe_connection.html#ade60f4caa1f4f49d29c7d37947d88da4">pipeHandle</a> = INVALID_HANDLE_VALUE;</div>
<div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;        <a class="code" href="class_api_connection.html#a0084699543e07344b40c8923701135dc">errcode</a> = <a class="code" href="_c_s_stream_8hpp.html#ad0cfb733f4e15ab50f56509ada532f4dad79e76fed1e03dff54d77007fc32ba59">CSERROR_OK</a>;</div>
<div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;    }</div>
<div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;    {</div>
<div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;        <a class="code" href="class_api_connection.html#a0084699543e07344b40c8923701135dc">errcode</a> = <a class="code" href="_c_s_stream_8hpp.html#ad0cfb733f4e15ab50f56509ada532f4dac2fa12c3801c667161ec37ba8f0c6f01">CSERROR_INTERNAL</a>;</div>
<div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;    }</div>
<div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;}</div>
<div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160; </div>
<div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;<span class="comment">/**</span></div>
<div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;<span class="comment"> * Open a connection to a named pipe.</span></div>
<div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;<span class="comment"> * @param pipeName The name of the target pipe</span></div>
<div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;<span class="comment"> * @return True on success, otherwise false.</span></div>
<div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l00209"></a><span class="lineno"><a class="line" href="class_sys_named_pipe_connection.html#a3fa9d2a8e784472018aaf7bf4f7596af">  209</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="class_sys_named_pipe_connection.html#a3fa9d2a8e784472018aaf7bf4f7596af">SysNamedPipeConnection::connect</a>(<span class="keyword">const</span> <span class="keywordtype">char</span> *pipeName)</div>
<div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;{</div>
<div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;    <span class="comment">// we may need to retry this a few times if things are busy</span></div>
<div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;    <span class="keywordflow">while</span> (1)</div>
<div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;    {</div>
<div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;        <span class="comment">// try to get a handle for the pipe</span></div>
<div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;        <a class="code" href="class_sys_named_pipe_connection.html#ade60f4caa1f4f49d29c7d37947d88da4">pipeHandle</a> = CreateFile(pipeName, GENERIC_READ | GENERIC_WRITE, 0, NULL, OPEN_EXISTING, 0, NULL);</div>
<div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;        <span class="comment">// if we got a valid handle back, we&#39;re done.</span></div>
<div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="class_sys_named_pipe_connection.html#ade60f4caa1f4f49d29c7d37947d88da4">pipeHandle</a> != INVALID_HANDLE_VALUE)</div>
<div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;        {</div>
<div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;            <a class="code" href="class_api_connection.html#a0084699543e07344b40c8923701135dc">errcode</a> = <a class="code" href="_c_s_stream_8hpp.html#ad0cfb733f4e15ab50f56509ada532f4dad79e76fed1e03dff54d77007fc32ba59">CSERROR_OK</a>;</div>
<div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;            <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;        }</div>
<div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160; </div>
<div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;      <span class="comment">// Exit if an error other than ERROR_PIPE_BUSY occurs.</span></div>
<div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;      <span class="keywordflow">if</span> (GetLastError() != ERROR_PIPE_BUSY)</div>
<div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;      {</div>
<div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;          <a class="code" href="class_api_connection.html#a0084699543e07344b40c8923701135dc">errcode</a> = <a class="code" href="_c_s_stream_8hpp.html#ad0cfb733f4e15ab50f56509ada532f4dab4d9cb38446de87a0f2a01c500dfed45">CSERROR_CONNX_FAILED</a>;</div>
<div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;          <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;      }</div>
<div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160; </div>
<div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;      <span class="comment">// All pipe instances are busy, so wait for a second.</span></div>
<div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160; </div>
<div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;      <span class="keywordflow">if</span> (!WaitNamedPipe(pipeName, 1000))</div>
<div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;      {</div>
<div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;          <a class="code" href="class_api_connection.html#a0084699543e07344b40c8923701135dc">errcode</a> = <a class="code" href="_c_s_stream_8hpp.html#ad0cfb733f4e15ab50f56509ada532f4dab4d9cb38446de87a0f2a01c500dfed45">CSERROR_CONNX_FAILED</a>;</div>
<div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;          <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;      }</div>
<div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;   }</div>
<div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;}</div>
<div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160; </div>
<div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;<span class="comment">/**</span></div>
<div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;<span class="comment"> * Accept a connection from a client.</span></div>
<div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;<span class="comment"> * @return True on an error, otherwise false</span></div>
<div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l00246"></a><span class="lineno"><a class="line" href="class_sys_server_named_pipe_connection_manager.html#ac0a84c0f7ca7d5b29750549201012634">  246</a></span>&#160;<a class="code" href="class_api_connection.html">ApiConnection</a> *<a class="code" href="class_sys_server_named_pipe_connection_manager.html#ac0a84c0f7ca7d5b29750549201012634">SysServerNamedPipeConnectionManager::acceptConnection</a>()</div>
<div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;{</div>
<div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;    <span class="comment">// because daemon process is launched from a running rexx process, it</span></div>
<div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;    <span class="comment">// inherits the security profile of launching process. If that process has</span></div>
<div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;    <span class="comment">// elevated priviledges, non-priviledged processes cannot connect to the daemon</span></div>
<div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;    <span class="comment">// named pipe because of the default security profile. We need to override</span></div>
<div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;    <span class="comment">// this so all connections can be accepted. This profile will allow any connections,</span></div>
<div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;    <span class="comment">// which is not really ideal. Better would be to have a security profile that allows</span></div>
<div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;    <span class="comment">// connections only from the same logged in user, but have two months of wrestling</span></div>
<div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;    <span class="comment">// with trying to understand the Windows security APIs, I gave up and implemented</span></div>
<div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;    <span class="comment">// something that works. I welcome anybody to take a stab at doing this.</span></div>
<div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160; </div>
<div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;    SECURITY_ATTRIBUTES sa = {0};</div>
<div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;    SECURITY_DESCRIPTOR sd = { 0 };</div>
<div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160; </div>
<div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;    InitializeSecurityDescriptor(&amp;sd, SECURITY_DESCRIPTOR_REVISION);</div>
<div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160; </div>
<div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;    SetSecurityDescriptorDacl(&amp;sd, TRUE, NULL, FALSE);</div>
<div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160; </div>
<div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;    sa.bInheritHandle = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;    sa.lpSecurityDescriptor = &amp;sd;</div>
<div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;    sa.nLength = <span class="keyword">sizeof</span>(sa);</div>
<div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160; </div>
<div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;    <span class="comment">// We need to create a new named pipe instance for each inbound connection</span></div>
<div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;    HANDLE clientHandle = CreateNamedPipe(<a class="code" href="class_sys_server_named_pipe_connection_manager.html#a56ada84ba969886eedc6dc544abcb653">userPipeName</a>, PIPE_ACCESS_DUPLEX, PIPE_TYPE_BYTE |</div>
<div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;        PIPE_WAIT | PIPE_REJECT_REMOTE_CLIENTS, PIPE_UNLIMITED_INSTANCES, 1024, 1024, 0, &amp;sa);</div>
<div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160; </div>
<div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;    <span class="keywordflow">if</span> (clientHandle == INVALID_HANDLE_VALUE)</div>
<div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;    {</div>
<div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;        <a class="code" href="class_server_connection_manager.html#abd70b82565d260f5e5e51422cbd05960">errcode</a> = <a class="code" href="_c_s_stream_8hpp.html#ad0cfb733f4e15ab50f56509ada532f4dab4d9cb38446de87a0f2a01c500dfed45">CSERROR_CONNX_FAILED</a>;</div>
<div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;        <span class="keywordflow">return</span> NULL;</div>
<div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;    }</div>
<div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160; </div>
<div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;    <span class="comment">// Wait for the client to connect; if it succeeds,</span></div>
<div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;    <span class="comment">// the function returns a nonzero value. If the function</span></div>
<div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;    <span class="comment">// returns zero, GetLastError returns ERROR_PIPE_CONNECTED.</span></div>
<div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;    <span class="keywordtype">bool</span> connected = ConnectNamedPipe(clientHandle, NULL) ? true : (GetLastError() == ERROR_PIPE_CONNECTED);</div>
<div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160; </div>
<div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;    <span class="comment">// we got a connection error</span></div>
<div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;    <span class="keywordflow">if</span> (!connected)</div>
<div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;    {</div>
<div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;        <a class="code" href="class_server_connection_manager.html#abd70b82565d260f5e5e51422cbd05960">errcode</a> = <a class="code" href="_c_s_stream_8hpp.html#ad0cfb733f4e15ab50f56509ada532f4dab4d9cb38446de87a0f2a01c500dfed45">CSERROR_CONNX_FAILED</a>;</div>
<div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;        <span class="keywordflow">return</span> NULL;</div>
<div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;    }</div>
<div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160; </div>
<div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;    <a class="code" href="class_server_connection_manager.html#abd70b82565d260f5e5e51422cbd05960">errcode</a> = <a class="code" href="_c_s_stream_8hpp.html#ad0cfb733f4e15ab50f56509ada532f4dad79e76fed1e03dff54d77007fc32ba59">CSERROR_OK</a>;</div>
<div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;    <span class="comment">// now make a connection object that can be used to read and write the client requests.</span></div>
<div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="class_sys_named_pipe_connection.html">SysNamedPipeConnection</a>(clientHandle);</div>
<div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;}</div>
<div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160; </div>
<div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;<span class="comment">/**</span></div>
<div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;<span class="comment"> * Bind to the named pipe by creating the first instance of the</span></div>
<div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;<span class="comment"> * pipe with the given name.</span></div>
<div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;<span class="comment"> * @return true if the pipe could be created successfully, false for any creation failures.</span></div>
<div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l00303"></a><span class="lineno"><a class="line" href="class_sys_server_named_pipe_connection_manager.html#a82c859957141c090983fc193d77d3069">  303</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="class_sys_server_named_pipe_connection_manager.html#a82c859957141c090983fc193d77d3069">SysServerNamedPipeConnectionManager::bind</a>()</div>
<div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;{</div>
<div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;    <span class="comment">// generate the unique name for this user.</span></div>
<div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;    <a class="code" href="class_sys_server_named_pipe_connection_manager.html#a9003f29b35b0474a11d4db7c43ed89dd">generatePipeName</a>();</div>
<div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;    <span class="comment">// Try to create our unique named mutex. If this fails, there must be another instance running,</span></div>
<div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;    <span class="comment">// so we&#39;ll just shutdown right now.</span></div>
<div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;    <span class="comment">// we are the first creator of this pipe. We use this to detect if we have more</span></div>
<div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;    <span class="comment">// than one occurrence of rxapi running for a given userid.</span></div>
<div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;    <a class="code" href="class_sys_server_named_pipe_connection_manager.html#ab4b56a202aeba958a4ff1417f8bb5d80">serverMutexHandle</a> = CreateMutex(NULL, FALSE, <a class="code" href="class_sys_server_named_pipe_connection_manager.html#a129a7a2a50ea6dc445b00f0f92a5f244">serverMutexName</a>);</div>
<div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;    <span class="comment">// If the mutex already exists CreateMutex returns a handle to it,</span></div>
<div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;    <span class="comment">// but GetLastError returns ERROR_ALREADY_EXISTS</span></div>
<div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="class_sys_server_named_pipe_connection_manager.html#ab4b56a202aeba958a4ff1417f8bb5d80">serverMutexHandle</a> == NULL || GetLastError() == ERROR_ALREADY_EXISTS)</div>
<div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;    {</div>
<div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;        <a class="code" href="class_server_connection_manager.html#abd70b82565d260f5e5e51422cbd05960">errcode</a> = <a class="code" href="_c_s_stream_8hpp.html#ad0cfb733f4e15ab50f56509ada532f4dab4d9cb38446de87a0f2a01c500dfed45">CSERROR_CONNX_FAILED</a>;</div>
<div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;    }</div>
<div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;}</div>
<div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160; </div>
<div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;<span class="comment">/**</span></div>
<div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;<span class="comment"> * Close the connection to the host.</span></div>
<div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;<span class="comment"> * @return True on an error, otherwise false.</span></div>
<div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l00328"></a><span class="lineno"><a class="line" href="class_sys_server_named_pipe_connection_manager.html#aaa355ba05a6702a2d49e5a380f477087">  328</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="class_sys_server_named_pipe_connection_manager.html#aaa355ba05a6702a2d49e5a380f477087">SysServerNamedPipeConnectionManager::disconnect</a>()</div>
<div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;{</div>
<div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;    <span class="comment">// we don&#39;t use the initial instance, but do keep the handle open to</span></div>
<div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;    <span class="comment">// ensure a second instance can&#39;t start up</span></div>
<div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="class_sys_server_named_pipe_connection_manager.html#ab4b56a202aeba958a4ff1417f8bb5d80">serverMutexHandle</a> != NULL)</div>
<div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;    {</div>
<div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;        CloseHandle(<a class="code" href="class_sys_server_named_pipe_connection_manager.html#ab4b56a202aeba958a4ff1417f8bb5d80">serverMutexHandle</a>);</div>
<div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;        <a class="code" href="class_sys_server_named_pipe_connection_manager.html#ab4b56a202aeba958a4ff1417f8bb5d80">serverMutexHandle</a> = NULL;</div>
<div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;        <span class="comment">// this is only done when the server is shutting down prior</span></div>
<div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;        <span class="comment">// to termination. We don&#39;t really need to get rid of this, but</span></div>
<div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;        <span class="comment">// it is good practice</span></div>
<div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;        free((<span class="keywordtype">void</span> *)<a class="code" href="class_sys_server_named_pipe_connection_manager.html#a56ada84ba969886eedc6dc544abcb653">userPipeName</a>);</div>
<div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;        <a class="code" href="class_sys_server_named_pipe_connection_manager.html#a56ada84ba969886eedc6dc544abcb653">userPipeName</a> = NULL;</div>
<div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;        free((<span class="keywordtype">void</span> *)<a class="code" href="class_sys_server_named_pipe_connection_manager.html#a129a7a2a50ea6dc445b00f0f92a5f244">serverMutexName</a>);</div>
<div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;        <a class="code" href="class_sys_server_named_pipe_connection_manager.html#a129a7a2a50ea6dc445b00f0f92a5f244">serverMutexName</a> = NULL;</div>
<div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;    }</div>
<div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160; </div>
<div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;    <span class="comment">// this doesn&#39;t really rely on any persistent state for the connections, so</span></div>
<div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;    <span class="comment">// this is a noop that will always succeed.</span></div>
<div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;    <a class="code" href="class_server_connection_manager.html#abd70b82565d260f5e5e51422cbd05960">errcode</a> = <a class="code" href="_c_s_stream_8hpp.html#ad0cfb733f4e15ab50f56509ada532f4dad79e76fed1e03dff54d77007fc32ba59">CSERROR_OK</a>;</div>
<div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;}</div>
<div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160; </div>
<div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;<span class="comment">/**</span></div>
<div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;<span class="comment"> * Generate a unique string to be used for interprocess</span></div>
<div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;<span class="comment"> * communications for this userid. Also generates the unique</span></div>
<div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;<span class="comment"> * mutex name used to ensure only one instance exists.</span></div>
<div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;<span class="comment"> * @return A unique identifier used to create the named pipes.</span></div>
<div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l00359"></a><span class="lineno"><a class="line" href="class_sys_server_named_pipe_connection_manager.html#a9003f29b35b0474a11d4db7c43ed89dd">  359</a></span>&#160;<span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="class_sys_server_named_pipe_connection_manager.html#a9003f29b35b0474a11d4db7c43ed89dd">SysServerNamedPipeConnectionManager::generatePipeName</a>()</div>
<div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;{</div>
<div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;    <span class="comment">// if we&#39;ve already generated this, we&#39;re done</span></div>
<div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="class_sys_server_named_pipe_connection_manager.html#a56ada84ba969886eedc6dc544abcb653">userPipeName</a> != NULL)</div>
<div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;    {</div>
<div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="class_sys_server_named_pipe_connection_manager.html#a56ada84ba969886eedc6dc544abcb653">userPipeName</a>;</div>
<div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;    }</div>
<div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160; </div>
<div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;    <span class="comment">// a buffer for generating the name</span></div>
<div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;    <span class="keywordtype">char</span> pipeNameBuffer[MAX_PATH];</div>
<div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;    <span class="keywordtype">char</span> userid[<a class="code" href="unix_2_sys_process_8hpp.html#a05589fbab0657f08285ebdfe93f5ec9eabaeea4395097fb383e6ae3f8c5f94de6">MAX_USERID_LENGTH</a>]; <span class="comment">// name of the user</span></div>
<div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160; </div>
<div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;    <span class="comment">// get the userid from the process</span></div>
<div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;    <a class="code" href="class_sys_process.html#aeb1a090480076937c0a1e2cb76e4e7bb">SysProcess::getUserID</a>(userid);</div>
<div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160; </div>
<div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;    snprintf(pipeNameBuffer, <span class="keyword">sizeof</span>(pipeNameBuffer), <span class="stringliteral">&quot;\\\\.\\pipe\\ooRexx %d.%d.%d-%s-%s&quot;</span>, ORX_VER, ORX_REL, ORX_MOD,</div>
<div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;#ifdef __REXX64__</div>
<div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;        <span class="stringliteral">&quot;64&quot;</span>,</div>
<div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;#<span class="keywordflow">else</span></div>
<div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;        <span class="stringliteral">&quot;32&quot;</span>,</div>
<div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;#endif</div>
<div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;        userid);</div>
<div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;    <a class="code" href="class_sys_server_named_pipe_connection_manager.html#a56ada84ba969886eedc6dc544abcb653">userPipeName</a> = strdup(pipeNameBuffer);</div>
<div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;    <span class="comment">// we also create a named mutex to ensure we have a only a single instance running.</span></div>
<div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;    <span class="comment">// we need a different name because backslashes are not allowed in mutex names.</span></div>
<div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160; </div>
<div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;    snprintf(pipeNameBuffer, <span class="keyword">sizeof</span>(pipeNameBuffer), <span class="stringliteral">&quot;ooRexx %d.%d.%d-%s-%s&quot;</span>, ORX_VER, ORX_REL, ORX_MOD,</div>
<div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;#ifdef __REXX64__</div>
<div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;        <span class="stringliteral">&quot;64&quot;</span>,</div>
<div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;#<span class="keywordflow">else</span></div>
<div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;        <span class="stringliteral">&quot;32&quot;</span>,</div>
<div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;#endif</div>
<div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;        userid);</div>
<div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160; </div>
<div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;    <a class="code" href="class_sys_server_named_pipe_connection_manager.html#a129a7a2a50ea6dc445b00f0f92a5f244">serverMutexName</a> = strdup(pipeNameBuffer);</div>
<div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="class_sys_server_named_pipe_connection_manager.html#a56ada84ba969886eedc6dc544abcb653">userPipeName</a>;</div>
<div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;}</div>
<div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160; </div>
<div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160; </div>
<div class="ttc" id="a_c_s_stream_8hpp_html_ad0cfb733f4e15ab50f56509ada532f4da71999ceaa9771120d1a4272a268f7479"><div class="ttname"><a href="_c_s_stream_8hpp.html#ad0cfb733f4e15ab50f56509ada532f4da71999ceaa9771120d1a4272a268f7479">CSERROR_IO_FAILED</a></div><div class="ttdeci">@ CSERROR_IO_FAILED</div><div class="ttdef"><b>Definition:</b> <a href="_c_s_stream_8hpp_source.html#l00047">CSStream.hpp:47</a></div></div>
<div class="ttc" id="a_c_s_stream_8hpp_html_ad0cfb733f4e15ab50f56509ada532f4dab4d9cb38446de87a0f2a01c500dfed45"><div class="ttname"><a href="_c_s_stream_8hpp.html#ad0cfb733f4e15ab50f56509ada532f4dab4d9cb38446de87a0f2a01c500dfed45">CSERROR_CONNX_FAILED</a></div><div class="ttdeci">@ CSERROR_CONNX_FAILED</div><div class="ttdef"><b>Definition:</b> <a href="_c_s_stream_8hpp_source.html#l00046">CSStream.hpp:46</a></div></div>
<div class="ttc" id="a_c_s_stream_8hpp_html_ad0cfb733f4e15ab50f56509ada532f4dac2fa12c3801c667161ec37ba8f0c6f01"><div class="ttname"><a href="_c_s_stream_8hpp.html#ad0cfb733f4e15ab50f56509ada532f4dac2fa12c3801c667161ec37ba8f0c6f01">CSERROR_INTERNAL</a></div><div class="ttdeci">@ CSERROR_INTERNAL</div><div class="ttdef"><b>Definition:</b> <a href="_c_s_stream_8hpp_source.html#l00050">CSStream.hpp:50</a></div></div>
<div class="ttc" id="a_c_s_stream_8hpp_html_ad0cfb733f4e15ab50f56509ada532f4dad79e76fed1e03dff54d77007fc32ba59"><div class="ttname"><a href="_c_s_stream_8hpp.html#ad0cfb733f4e15ab50f56509ada532f4dad79e76fed1e03dff54d77007fc32ba59">CSERROR_OK</a></div><div class="ttdeci">@ CSERROR_OK</div><div class="ttdef"><b>Definition:</b> <a href="_c_s_stream_8hpp_source.html#l00044">CSStream.hpp:44</a></div></div>
<div class="ttc" id="a_service_exception_8hpp_html"><div class="ttname"><a href="_service_exception_8hpp.html">ServiceException.hpp</a></div></div>
<div class="ttc" id="a_sys_c_s_named_pipe_stream_8hpp_html"><div class="ttname"><a href="_sys_c_s_named_pipe_stream_8hpp.html">SysCSNamedPipeStream.hpp</a></div></div>
<div class="ttc" id="aclass_api_connection_html"><div class="ttname"><a href="class_api_connection.html">ApiConnection</a></div><div class="ttdef"><b>Definition:</b> <a href="_c_s_stream_8hpp_source.html#l00060">CSStream.hpp:61</a></div></div>
<div class="ttc" id="aclass_api_connection_html_a0084699543e07344b40c8923701135dc"><div class="ttname"><a href="class_api_connection.html#a0084699543e07344b40c8923701135dc">ApiConnection::errcode</a></div><div class="ttdeci">CSErrorCodeT errcode</div><div class="ttdef"><b>Definition:</b> <a href="_c_s_stream_8hpp_source.html#l00091">CSStream.hpp:91</a></div></div>
<div class="ttc" id="aclass_api_connection_html_abb76082d5fc75d3f6e31f45fb0565207"><div class="ttname"><a href="class_api_connection.html#abb76082d5fc75d3f6e31f45fb0565207">ApiConnection::getMessageBuffer</a></div><div class="ttdeci">char * getMessageBuffer(size_t size)</div><div class="ttdef"><b>Definition:</b> <a href="_c_s_stream_8cpp_source.html#l00052">CSStream.cpp:52</a></div></div>
<div class="ttc" id="aclass_api_connection_html_abc1ed75e3c8bfc3200f952b8ff3894f4"><div class="ttname"><a href="class_api_connection.html#abc1ed75e3c8bfc3200f952b8ff3894f4">ApiConnection::returnMessageBuffer</a></div><div class="ttdeci">void returnMessageBuffer(void *)</div><div class="ttdef"><b>Definition:</b> <a href="_c_s_stream_8cpp_source.html#l00084">CSStream.cpp:84</a></div></div>
<div class="ttc" id="aclass_server_connection_manager_html_abd70b82565d260f5e5e51422cbd05960"><div class="ttname"><a href="class_server_connection_manager.html#abd70b82565d260f5e5e51422cbd05960">ServerConnectionManager::errcode</a></div><div class="ttdeci">CSErrorCodeT errcode</div><div class="ttdef"><b>Definition:</b> <a href="_c_s_stream_8hpp_source.html#l00121">CSStream.hpp:121</a></div></div>
<div class="ttc" id="aclass_sys_named_pipe_connection_html"><div class="ttname"><a href="class_sys_named_pipe_connection.html">SysNamedPipeConnection</a></div><div class="ttdef"><b>Definition:</b> <a href="_sys_c_s_named_pipe_stream_8hpp_source.html#l00044">SysCSNamedPipeStream.hpp:45</a></div></div>
<div class="ttc" id="aclass_sys_named_pipe_connection_html_a18a864c8746c071c187131dd36ee5503"><div class="ttname"><a href="class_sys_named_pipe_connection.html#a18a864c8746c071c187131dd36ee5503">SysNamedPipeConnection::read</a></div><div class="ttdeci">bool read(void *buf, size_t bufsize, size_t *bytesread) override</div><div class="ttdef"><b>Definition:</b> <a href="_sys_c_s_named_pipe_stream_8cpp_source.html#l00066">SysCSNamedPipeStream.cpp:66</a></div></div>
<div class="ttc" id="aclass_sys_named_pipe_connection_html_a356443c005e6c03c859f06add80fce8b"><div class="ttname"><a href="class_sys_named_pipe_connection.html#a356443c005e6c03c859f06add80fce8b">SysNamedPipeConnection::write</a></div><div class="ttdeci">bool write(void *buf, size_t bufsize, size_t *byteswritten) override</div><div class="ttdef"><b>Definition:</b> <a href="_sys_c_s_named_pipe_stream_8cpp_source.html#l00100">SysCSNamedPipeStream.cpp:100</a></div></div>
<div class="ttc" id="aclass_sys_named_pipe_connection_html_a3fa9d2a8e784472018aaf7bf4f7596af"><div class="ttname"><a href="class_sys_named_pipe_connection.html#a3fa9d2a8e784472018aaf7bf4f7596af">SysNamedPipeConnection::connect</a></div><div class="ttdeci">bool connect(const char *pipeName)</div><div class="ttdef"><b>Definition:</b> <a href="_sys_c_s_named_pipe_stream_8cpp_source.html#l00209">SysCSNamedPipeStream.cpp:209</a></div></div>
<div class="ttc" id="aclass_sys_named_pipe_connection_html_a78f5cd880c037c66e17b76af54391a62"><div class="ttname"><a href="class_sys_named_pipe_connection.html#a78f5cd880c037c66e17b76af54391a62">SysNamedPipeConnection::disconnect</a></div><div class="ttdeci">bool disconnect() override</div><div class="ttdef"><b>Definition:</b> <a href="_sys_c_s_named_pipe_stream_8cpp_source.html#l00182">SysCSNamedPipeStream.cpp:182</a></div></div>
<div class="ttc" id="aclass_sys_named_pipe_connection_html_ade60f4caa1f4f49d29c7d37947d88da4"><div class="ttname"><a href="class_sys_named_pipe_connection.html#ade60f4caa1f4f49d29c7d37947d88da4">SysNamedPipeConnection::pipeHandle</a></div><div class="ttdeci">HANDLE pipeHandle</div><div class="ttdef"><b>Definition:</b> <a href="_sys_c_s_named_pipe_stream_8hpp_source.html#l00062">SysCSNamedPipeStream.hpp:62</a></div></div>
<div class="ttc" id="aclass_sys_process_html_aeb1a090480076937c0a1e2cb76e4e7bb"><div class="ttname"><a href="class_sys_process.html#aeb1a090480076937c0a1e2cb76e4e7bb">SysProcess::getUserID</a></div><div class="ttdeci">static void getUserID(char *buffer)</div><div class="ttdef"><b>Definition:</b> <a href="unix_2_sys_process_8cpp_source.html#l00084">unix/SysProcess.cpp:84</a></div></div>
<div class="ttc" id="aclass_sys_server_named_pipe_connection_manager_html_a129a7a2a50ea6dc445b00f0f92a5f244"><div class="ttname"><a href="class_sys_server_named_pipe_connection_manager.html#a129a7a2a50ea6dc445b00f0f92a5f244">SysServerNamedPipeConnectionManager::serverMutexName</a></div><div class="ttdeci">static const char * serverMutexName</div><div class="ttdef"><b>Definition:</b> <a href="_sys_c_s_named_pipe_stream_8hpp_source.html#l00085">SysCSNamedPipeStream.hpp:85</a></div></div>
<div class="ttc" id="aclass_sys_server_named_pipe_connection_manager_html_a56ada84ba969886eedc6dc544abcb653"><div class="ttname"><a href="class_sys_server_named_pipe_connection_manager.html#a56ada84ba969886eedc6dc544abcb653">SysServerNamedPipeConnectionManager::userPipeName</a></div><div class="ttdeci">static const char * userPipeName</div><div class="ttdef"><b>Definition:</b> <a href="_sys_c_s_named_pipe_stream_8hpp_source.html#l00084">SysCSNamedPipeStream.hpp:84</a></div></div>
<div class="ttc" id="aclass_sys_server_named_pipe_connection_manager_html_a82c859957141c090983fc193d77d3069"><div class="ttname"><a href="class_sys_server_named_pipe_connection_manager.html#a82c859957141c090983fc193d77d3069">SysServerNamedPipeConnectionManager::bind</a></div><div class="ttdeci">bool bind()</div><div class="ttdef"><b>Definition:</b> <a href="_sys_c_s_named_pipe_stream_8cpp_source.html#l00303">SysCSNamedPipeStream.cpp:303</a></div></div>
<div class="ttc" id="aclass_sys_server_named_pipe_connection_manager_html_a9003f29b35b0474a11d4db7c43ed89dd"><div class="ttname"><a href="class_sys_server_named_pipe_connection_manager.html#a9003f29b35b0474a11d4db7c43ed89dd">SysServerNamedPipeConnectionManager::generatePipeName</a></div><div class="ttdeci">static const char * generatePipeName()</div><div class="ttdef"><b>Definition:</b> <a href="_sys_c_s_named_pipe_stream_8cpp_source.html#l00359">SysCSNamedPipeStream.cpp:359</a></div></div>
<div class="ttc" id="aclass_sys_server_named_pipe_connection_manager_html_aaa355ba05a6702a2d49e5a380f477087"><div class="ttname"><a href="class_sys_server_named_pipe_connection_manager.html#aaa355ba05a6702a2d49e5a380f477087">SysServerNamedPipeConnectionManager::disconnect</a></div><div class="ttdeci">bool disconnect() override</div><div class="ttdef"><b>Definition:</b> <a href="_sys_c_s_named_pipe_stream_8cpp_source.html#l00328">SysCSNamedPipeStream.cpp:328</a></div></div>
<div class="ttc" id="aclass_sys_server_named_pipe_connection_manager_html_ab4b56a202aeba958a4ff1417f8bb5d80"><div class="ttname"><a href="class_sys_server_named_pipe_connection_manager.html#ab4b56a202aeba958a4ff1417f8bb5d80">SysServerNamedPipeConnectionManager::serverMutexHandle</a></div><div class="ttdeci">HANDLE serverMutexHandle</div><div class="ttdef"><b>Definition:</b> <a href="_sys_c_s_named_pipe_stream_8hpp_source.html#l00087">SysCSNamedPipeStream.hpp:87</a></div></div>
<div class="ttc" id="aclass_sys_server_named_pipe_connection_manager_html_ac0a84c0f7ca7d5b29750549201012634"><div class="ttname"><a href="class_sys_server_named_pipe_connection_manager.html#ac0a84c0f7ca7d5b29750549201012634">SysServerNamedPipeConnectionManager::acceptConnection</a></div><div class="ttdeci">ApiConnection * acceptConnection() override</div><div class="ttdef"><b>Definition:</b> <a href="_sys_c_s_named_pipe_stream_8cpp_source.html#l00246">SysCSNamedPipeStream.cpp:246</a></div></div>
<div class="ttc" id="aoorexxapi_8h_html"><div class="ttname"><a href="oorexxapi_8h.html">oorexxapi.h</a></div></div>
<div class="ttc" id="aunix_2_sys_process_8hpp_html_a05589fbab0657f08285ebdfe93f5ec9eabaeea4395097fb383e6ae3f8c5f94de6"><div class="ttname"><a href="unix_2_sys_process_8hpp.html#a05589fbab0657f08285ebdfe93f5ec9eabaeea4395097fb383e6ae3f8c5f94de6">MAX_USERID_LENGTH</a></div><div class="ttdeci">@ MAX_USERID_LENGTH</div><div class="ttdef"><b>Definition:</b> <a href="unix_2_sys_process_8hpp_source.html#l00054">unix/SysProcess.hpp:53</a></div></div>
</div><!-- fragment --></div><!-- contents -->
</div><!-- doc-content -->
<!-- HTML footer for doxygen 1.9.2-->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_2b8d323c7289fed1299e6f1b6909d41b.html">oorexx</a></li><li class="navelem"><a class="el" href="dir_2dfb7423ce64cb60f62cee208bb73ae3.html">official</a></li><li class="navelem"><a class="el" href="dir_63144926d93644d0b571decfac4c5baa.html">main</a></li><li class="navelem"><a class="el" href="dir_5131a42d519b9b019d5264fc1f0fe4ab.html">trunk</a></li><li class="navelem"><a class="el" href="dir_c37b87fb96506b09d4192068d8670db1.html">rexxapi</a></li><li class="navelem"><a class="el" href="dir_16052fa8f0e8a47369c3fa825cf85415.html">common</a></li><li class="navelem"><a class="el" href="dir_ac1c0cf1720c952d2f897d7aedae6011.html">platform</a></li><li class="navelem"><a class="el" href="dir_2513d14a51ca0701dbe9c44ce4de464a.html">windows</a></li><li class="navelem"><a class="el" href="_sys_c_s_named_pipe_stream_8cpp.html">SysCSNamedPipeStream.cpp</a></li>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.2 </li>
  </ul>
</div>
<!-- javascript code to insert the title in the condensed index (tabs) -->
<!-- See the function initMenu in menu.js:
     The condensed index is a list <ul> of several items <li>: Main Page, Classes, Files.
     I append a new item <li> which display the project name. -->
<script type="text/javascript">
$(function() {
  $('#main-menu').append('<li class="title" style="margin-left:3mm">ooRexx</li>')
});
</script>
<!-- end of javascript code -->
</body>
</html>
