<!-- HTML header for doxygen 1.9.2-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.2"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>executor.master: StreamNative.cpp Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<!--
    Removed completely the TITLEAREA because I don't like the loss of space.
    I want the title in the condensed index (tabs) at top of each HTML page.
    The insertion of the title is managed by javascript code in the footer,
    because this code must be executed AFTER the creation of the condensed index.
    Must have this setting to display the condensed index:
    DISABLE_INDEX = NO
-->
<!-- end header part -->
<!-- Generated by Doxygen 1.9.2 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('_stream_native_8cpp_source.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">StreamNative.cpp</div>  </div>
</div><!--header-->
<div class="contents">
<a href="_stream_native_8cpp.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="comment">/*----------------------------------------------------------------------------*/</span></div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="comment">/*                                                                            */</span></div>
<div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="comment">/* Copyright (c) 1995, 2004 IBM Corporation. All rights reserved.             */</span></div>
<div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="comment">/* Copyright (c) 2005-2009 Rexx Language Association. All rights reserved.    */</span></div>
<div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="comment">/*                                                                            */</span></div>
<div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="comment">/* This program and the accompanying materials are made available under       */</span></div>
<div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="comment">/* the terms of the Common Public License v1.0 which accompanies this         */</span></div>
<div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="comment">/* distribution. A copy is also available at the following address:           */</span></div>
<div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="comment">/* http://www.ibm.com/developerworks/oss/CPLv1.0.htm                          */</span></div>
<div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;<span class="comment">/*                                                                            */</span></div>
<div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;<span class="comment">/* Redistribution and use in source and binary forms, with or                 */</span></div>
<div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;<span class="comment">/* without modification, are permitted provided that the following            */</span></div>
<div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;<span class="comment">/* conditions are met:                                                        */</span></div>
<div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;<span class="comment">/*                                                                            */</span></div>
<div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;<span class="comment">/* Redistributions of source code must retain the above copyright             */</span></div>
<div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;<span class="comment">/* notice, this list of conditions and the following disclaimer.              */</span></div>
<div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;<span class="comment">/* Redistributions in binary form must reproduce the above copyright          */</span></div>
<div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;<span class="comment">/* notice, this list of conditions and the following disclaimer in            */</span></div>
<div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;<span class="comment">/* the documentation and/or other materials provided with the distribution.   */</span></div>
<div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;<span class="comment">/*                                                                            */</span></div>
<div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;<span class="comment">/* Neither the name of Rexx Language Association nor the names                */</span></div>
<div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;<span class="comment">/* of its contributors may be used to endorse or promote products             */</span></div>
<div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;<span class="comment">/* derived from this software without specific prior written permission.      */</span></div>
<div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;<span class="comment">/*                                                                            */</span></div>
<div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;<span class="comment">/* THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS        */</span></div>
<div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;<span class="comment">/* &quot;AS IS&quot; AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT          */</span></div>
<div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;<span class="comment">/* LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS          */</span></div>
<div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;<span class="comment">/* FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT   */</span></div>
<div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;<span class="comment">/* OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,      */</span></div>
<div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;<span class="comment">/* SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED   */</span></div>
<div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;<span class="comment">/* TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA,        */</span></div>
<div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;<span class="comment">/* OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY     */</span></div>
<div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;<span class="comment">/* OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING    */</span></div>
<div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;<span class="comment">/* NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS         */</span></div>
<div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;<span class="comment">/* SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.               */</span></div>
<div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;<span class="comment">/*                                                                            */</span></div>
<div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;<span class="comment">/*----------------------------------------------------------------------------*/</span></div>
<div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;<span class="comment">/******************************************************************************/</span></div>
<div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;<span class="comment">/* REXX Kernel                                                                */</span></div>
<div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;<span class="comment">/*                                                                            */</span></div>
<div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;<span class="comment">/* Stream processing (stream oriented file systems)                           */</span></div>
<div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;<span class="comment">/*                                                                            */</span></div>
<div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;<span class="comment">/******************************************************************************/</span></div>
<div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160; </div>
<div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="oorexxapi_8h.html">oorexxapi.h</a>&quot;</span></div>
<div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="_stream_native_8hpp.html">StreamNative.hpp</a>&quot;</span></div>
<div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="_stream_command_parser_8h.html">StreamCommandParser.h</a>&quot;</span></div>
<div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="_utilities_8hpp.html">Utilities.hpp</a>&quot;</span></div>
<div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;<span class="preprocessor">#include &lt;fcntl.h&gt;</span></div>
<div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;<span class="preprocessor">#include &lt;sys/stat.h&gt;</span></div>
<div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;<span class="preprocessor">#include &lt;string.h&gt;</span></div>
<div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;<span class="preprocessor">#include &lt;errno.h&gt;</span></div>
<div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160; </div>
<div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;<span class="comment">// jlf: I assume I can&#39;t include the constants...</span></div>
<div class="line"><a name="l00055"></a><span class="lineno"><a class="line" href="_stream_native_8cpp.html#ad9c140fb679fc05ead46bb922e5d0873">   55</a></span>&#160;<span class="preprocessor">#define CHAR_positional &quot;positional&quot;</span></div>
<div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160; </div>
<div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;<span class="comment">/********************************************************************************/</span></div>
<div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;<span class="comment">/*                                                                              */</span></div>
<div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;<span class="comment">/* Data area&#39;s for open routines                                                */</span></div>
<div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;<span class="comment">/*                                                                              */</span></div>
<div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;<span class="comment">/********************************************************************************/</span></div>
<div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160; </div>
<div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;<span class="comment">// name of our stream object structure (automatically retrieved for us)</span></div>
<div class="line"><a name="l00064"></a><span class="lineno"><a class="line" href="_stream_native_8cpp.html#a064f2721e7691023309ffc3d6072b5a6">   64</a></span>&#160;<span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="_stream_native_8cpp.html#a064f2721e7691023309ffc3d6072b5a6">StreamInfoProperty</a> = <span class="stringliteral">&quot;CSELF&quot;</span>;</div>
<div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160; </div>
<div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;<span class="comment">/*****************************************************************/</span></div>
<div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;<span class="comment">/* declares needed for command seek/position                     */</span></div>
<div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;<span class="comment">/*****************************************************************/</span></div>
<div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160; </div>
<div class="line"><a name="l00070"></a><span class="lineno"><a class="line" href="_stream_native_8cpp.html#ad7a9284bf8ea3b3039239acacb288e76">   70</a></span>&#160;<span class="keyword">const</span> <span class="keywordtype">int</span>  <a class="code" href="_stream_native_8cpp.html#ad7a9284bf8ea3b3039239acacb288e76">operation_read</a> = 0x01;</div>
<div class="line"><a name="l00071"></a><span class="lineno"><a class="line" href="_stream_native_8cpp.html#ad4b70af3448dc43aedf984ad0d5aa710">   71</a></span>&#160;<span class="keyword">const</span> <span class="keywordtype">int</span>  <a class="code" href="_stream_native_8cpp.html#ad4b70af3448dc43aedf984ad0d5aa710">operation_write</a> = 0x02;</div>
<div class="line"><a name="l00072"></a><span class="lineno"><a class="line" href="_stream_native_8cpp.html#a4279da1660023acc95b42250b2e613ca">   72</a></span>&#160;<span class="keyword">const</span> <span class="keywordtype">int</span>  <a class="code" href="_stream_native_8cpp.html#a4279da1660023acc95b42250b2e613ca">operation_nocreate</a> = 0x04;</div>
<div class="line"><a name="l00073"></a><span class="lineno"><a class="line" href="_stream_native_8cpp.html#a86e848bc27e31e94c9260216866344b3">   73</a></span>&#160;<span class="keyword">const</span> <span class="keywordtype">int</span>  <a class="code" href="_stream_native_8cpp.html#a86e848bc27e31e94c9260216866344b3">position_by_char</a> = 0x04;</div>
<div class="line"><a name="l00074"></a><span class="lineno"><a class="line" href="_stream_native_8cpp.html#a0162d2a1a09558f0c938101981f1ef53">   74</a></span>&#160;<span class="keyword">const</span> <span class="keywordtype">int</span>  <a class="code" href="_stream_native_8cpp.html#a0162d2a1a09558f0c938101981f1ef53">position_by_line</a> = 0x08;</div>
<div class="line"><a name="l00075"></a><span class="lineno"><a class="line" href="_stream_native_8cpp.html#a3637b35bfa0f9a5b95da0b5cac07b60c">   75</a></span>&#160;<span class="keyword">const</span> <span class="keywordtype">int</span>  <a class="code" href="_stream_native_8cpp.html#a3637b35bfa0f9a5b95da0b5cac07b60c">position_offset_specified</a> = 0x10;</div>
<div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160; </div>
<div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;<span class="comment">/*****************************************************************/</span></div>
<div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;<span class="comment">/* declares needed for command query seek/position               */</span></div>
<div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;<span class="comment">/*****************************************************************/</span></div>
<div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160; </div>
<div class="line"><a name="l00081"></a><span class="lineno"><a class="line" href="_stream_native_8cpp.html#a22f07646483ddd8a3f873f5efff082c9">   81</a></span>&#160;<span class="keyword">const</span> <span class="keywordtype">int</span>  <a class="code" href="_stream_native_8cpp.html#a22f07646483ddd8a3f873f5efff082c9">query_read_position</a> = 0x01;</div>
<div class="line"><a name="l00082"></a><span class="lineno"><a class="line" href="_stream_native_8cpp.html#a45f4375c6d2176610424f82043637fec">   82</a></span>&#160;<span class="keyword">const</span> <span class="keywordtype">int</span>  <a class="code" href="_stream_native_8cpp.html#a45f4375c6d2176610424f82043637fec">query_write_position</a> = 0x02;</div>
<div class="line"><a name="l00083"></a><span class="lineno"><a class="line" href="_stream_native_8cpp.html#acab3d74e84fbb9470e5f1485847ff823">   83</a></span>&#160;<span class="keyword">const</span> <span class="keywordtype">int</span>  <a class="code" href="_stream_native_8cpp.html#acab3d74e84fbb9470e5f1485847ff823">query_char_position</a> = 0x04;</div>
<div class="line"><a name="l00084"></a><span class="lineno"><a class="line" href="_stream_native_8cpp.html#a3a39eb84e90cc7bd3c6f556def50ab95">   84</a></span>&#160;<span class="keyword">const</span> <span class="keywordtype">int</span>  <a class="code" href="_stream_native_8cpp.html#a3a39eb84e90cc7bd3c6f556def50ab95">query_line_position</a> = 0x08;</div>
<div class="line"><a name="l00085"></a><span class="lineno"><a class="line" href="_stream_native_8cpp.html#a637640c370dba16a8cc1e9a77d781966">   85</a></span>&#160;<span class="keyword">const</span> <span class="keywordtype">int</span>  <a class="code" href="_stream_native_8cpp.html#a637640c370dba16a8cc1e9a77d781966">query_system_position</a> = 0x10;</div>
<div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160; </div>
<div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160; </div>
<div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;<span class="comment">// short hand defines for some file states</span></div>
<div class="line"><a name="l00089"></a><span class="lineno"><a class="line" href="_stream_native_8cpp.html#a08cd1913f9a5a340f426fda11f00cef5">   89</a></span>&#160;<span class="preprocessor">#define RDWR_CREAT  (RX_O_RDWR | RX_O_CREAT)</span></div>
<div class="line"><a name="l00090"></a><span class="lineno"><a class="line" href="_stream_native_8cpp.html#ac582219db81802c3e505c2135e225ca6">   90</a></span>&#160;<span class="preprocessor">#define WR_CREAT    (RX_O_WRONLY | RX_O_CREAT)</span></div>
<div class="line"><a name="l00091"></a><span class="lineno"><a class="line" href="_stream_native_8cpp.html#a353d1c9fc19fe1dc044744c05df8dc9c">   91</a></span>&#160;<span class="preprocessor">#define IREAD_IWRITE (RX_S_IREAD | RX_S_IWRITE)</span></div>
<div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;<span class="comment">/**</span></div>
<div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;<span class="comment"> * Helper routine for the method stubs to validate the</span></div>
<div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;<span class="comment"> * stream info pointer to ensure that the stream has not</span></div>
<div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;<span class="comment"> * been uninited already.  This can occur when an uninit</span></div>
<div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;<span class="comment"> * method for another object attempts to use a stream.</span></div>
<div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;<span class="comment"> * @param context   The method context</span></div>
<div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;<span class="comment"> * @param streamPtr The CSELF value</span></div>
<div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;<span class="comment"> * @param result    A potential result object set into the context.</span></div>
<div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;<span class="comment"> * @return The StreamInfo object instance.  Throws an exception if</span></div>
<div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;<span class="comment"> *         this is not valid.</span></div>
<div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l00106"></a><span class="lineno"><a class="line" href="_stream_native_8cpp.html#a1fbef9d1aba5e27b6754dda2d30239fa">  106</a></span>&#160;<a class="code" href="class_stream_info.html">StreamInfo</a> *<a class="code" href="_stream_native_8cpp.html#a1fbef9d1aba5e27b6754dda2d30239fa">checkStreamInfo</a>(<a class="code" href="struct_rexx_method_context__.html">RexxMethodContext</a> *context, <span class="keywordtype">void</span> *streamPtr, <a class="code" href="rexx_8h.html#a96e0cc5eda42aed364b05f3c493e07e8">RexxObjectPtr</a> result)</div>
<div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;{</div>
<div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;    <span class="keywordflow">if</span> (streamPtr == NULL)</div>
<div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;    {</div>
<div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;        context-&gt;RaiseException0(<a class="code" href="oorexxerrors_8h.html#abfb697037766bb11720aa2333c70c36a">Rexx_Error_System_service</a>);</div>
<div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;        <span class="keywordflow">throw</span> <a class="code" href="oorexxerrors_8h.html#abfb697037766bb11720aa2333c70c36a">Rexx_Error_System_service</a>;</div>
<div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;    }</div>
<div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160; </div>
<div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;    <a class="code" href="class_stream_info.html">StreamInfo</a> *stream_info = (<a class="code" href="class_stream_info.html">StreamInfo</a> *)streamPtr;</div>
<div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;    stream_info-&gt;<a class="code" href="class_stream_info.html#a7bd9bdab0ad76acbdd5d0e020879b561">setContext</a>(context, result);</div>
<div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;    <span class="keywordflow">return</span> stream_info;</div>
<div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;}</div>
<div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160; </div>
<div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;<span class="comment">/**</span></div>
<div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;<span class="comment"> * Token parsing routine for record length parsing.</span></div>
<div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;<span class="comment"> * @param ttsp      The token action definition associated with this parse.</span></div>
<div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;<span class="comment"> * @param token     The current token.</span></div>
<div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;<span class="comment"> * @param userparms An opaque user parameter info.</span></div>
<div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;<span class="comment"> * @return 0 for success, 1 for any failure.</span></div>
<div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l00129"></a><span class="lineno"><a class="line" href="_stream_native_8cpp.html#aadad8d91bf46dcb0b8e74d74240fc2a6">  129</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="_stream_native_8cpp.html#aadad8d91bf46dcb0b8e74d74240fc2a6">reclength_token</a>(<a class="code" href="class_token_definition.html">TokenDefinition</a>* ttsp, <a class="code" href="class_stream_token.html">StreamToken</a> &amp;tokenizer, <span class="keywordtype">void</span> *userparms)</div>
<div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;{</div>
<div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;                                        <span class="comment">/* get the next token in TokenString */</span></div>
<div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;    <span class="keywordflow">if</span> (tokenizer.<a class="code" href="class_stream_token.html#a50fdd938406ee0fc01783c4b93d5f97e">nextToken</a>())</div>
<div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;    {</div>
<div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;        <span class="keywordtype">int</span> offset = 0;</div>
<div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160; </div>
<div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;        <span class="comment">// must be convertable</span></div>
<div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;        <span class="keywordflow">if</span> (!tokenizer.<a class="code" href="class_stream_token.html#a9c139f24865115edfae72846319e2c80">toNumber</a>(offset))</div>
<div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;        {</div>
<div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;            <span class="keywordflow">return</span> 1;   <span class="comment">// non numeric token, error</span></div>
<div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;        }</div>
<div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160; </div>
<div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;        *((<span class="keywordtype">size_t</span> *)userparms) = offset;</div>
<div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;        <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;    }</div>
<div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160; </div>
<div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;    <span class="comment">// we default the record length, so push this back into the stream</span></div>
<div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;    tokenizer.<a class="code" href="class_stream_token.html#aebbc825f26b8148535a9029880343900">previousToken</a>();</div>
<div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;}</div>
<div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;<span class="comment">/**</span></div>
<div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;<span class="comment"> * Token parsing routine for position offsets.</span></div>
<div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;<span class="comment"> * @param ttsp      The token action definition associated with this parse.</span></div>
<div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;<span class="comment"> * @param token     The current token.</span></div>
<div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;<span class="comment"> * @param userparms An opaque user parameter info.</span></div>
<div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;<span class="comment"> * @return 0 for success, 1 for any failure.</span></div>
<div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l00160"></a><span class="lineno"><a class="line" href="_stream_native_8cpp.html#a3d3bd9f9797502eb5498fefc51a758b9">  160</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="_stream_native_8cpp.html#a3d3bd9f9797502eb5498fefc51a758b9">position_offset</a>(<a class="code" href="class_token_definition.html">TokenDefinition</a>* ttsp, <a class="code" href="class_stream_token.html">StreamToken</a> &amp;tokenizer, <span class="keywordtype">void</span> *userparms)</div>
<div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;{</div>
<div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;                                       <span class="comment">/* get the next token in TokenString */</span></div>
<div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;   <span class="keywordflow">if</span> (tokenizer.<a class="code" href="class_stream_token.html#a50fdd938406ee0fc01783c4b93d5f97e">nextToken</a>())</div>
<div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;   {</div>
<div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;       <a class="code" href="windows_2rexxapitypes_8h.html#a414156feea104f8f75b4ed9e3121b2f6">int64_t</a> offset = 0;</div>
<div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160; </div>
<div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;       <span class="comment">// must be convertable</span></div>
<div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;       <span class="keywordflow">if</span> (!tokenizer.<a class="code" href="class_stream_token.html#a9c139f24865115edfae72846319e2c80">toNumber</a>(offset))</div>
<div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;       {</div>
<div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;           <span class="keywordflow">return</span> 1;   <span class="comment">// non numeric token, error</span></div>
<div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;       }</div>
<div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160; </div>
<div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;       *((<a class="code" href="windows_2rexxapitypes_8h.html#a414156feea104f8f75b4ed9e3121b2f6">int64_t</a> *)userparms) = offset;</div>
<div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;       <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;   }</div>
<div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;                                       <span class="comment">/* no next token - position will     */</span></div>
<div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;                                       <span class="comment">/* raise syntax                      */</span></div>
<div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;   <span class="keywordflow">return</span> 1;</div>
<div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;}</div>
<div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;<span class="comment">/**</span></div>
<div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;<span class="comment"> * Token parsing routine for unknown tokens.  This just forces a parsing error.</span></div>
<div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;<span class="comment"> * @param ttsp      The token action definition associated with this parse.</span></div>
<div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;<span class="comment"> * @param token     The current token.</span></div>
<div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;<span class="comment"> * @param userparms An opaque user parameter info.</span></div>
<div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;<span class="comment"> * @return 0 for success, 1 for any failure.</span></div>
<div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l00190"></a><span class="lineno"><a class="line" href="_stream_native_8cpp.html#a8e4e356b86dac886f097bf2f4431ee79">  190</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="_stream_native_8cpp.html#a8e4e356b86dac886f097bf2f4431ee79">unknown_tr</a>(<a class="code" href="class_token_definition.html">TokenDefinition</a>* ttsp, <a class="code" href="class_stream_token.html">StreamToken</a> &amp;tokenizer, <span class="keywordtype">void</span> *userparms)</div>
<div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;{</div>
<div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;   <span class="keywordflow">return</span> 1;</div>
<div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;}</div>
<div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;<span class="comment">/**</span></div>
<div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;<span class="comment"> * Get the buffer attached to this stream.  If the existing</span></div>
<div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;<span class="comment"> * buffer is large enough for the requested usage, then use</span></div>
<div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;<span class="comment"> * it.  Otherwise, allocate a larger one.</span></div>
<div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;<span class="comment"> * @param length Required buffer length</span></div>
<div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;<span class="comment"> * @return Pointer to the buffer area.</span></div>
<div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l00204"></a><span class="lineno"><a class="line" href="class_stream_info.html#a41fea76cafb2f48513f675360d91f19b">  204</a></span>&#160;<span class="keywordtype">char</span> *<a class="code" href="class_stream_info.html#a41fea76cafb2f48513f675360d91f19b">StreamInfo::allocateBuffer</a>(<span class="keywordtype">size_t</span> length)</div>
<div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;{</div>
<div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;    <span class="comment">// if we already have a sufficiently large buffer, just use it.</span></div>
<div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="class_stream_info.html#ad2b1b1271c87dde90e1f0398a14e680c">bufferAddress</a> != NULL)</div>
<div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;    {</div>
<div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="class_stream_info.html#ac25dd7e08d42d5de9e5f0854a0084811">bufferLength</a> &gt;= length)</div>
<div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;        {</div>
<div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="class_stream_info.html#ad2b1b1271c87dde90e1f0398a14e680c">bufferAddress</a>; <span class="comment">/* return the existing one           */</span></div>
<div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;        }</div>
<div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;        <a class="code" href="class_stream_info.html#ad2b1b1271c87dde90e1f0398a14e680c">bufferAddress</a> = (<span class="keywordtype">char</span> *)realloc(<a class="code" href="class_stream_info.html#ad2b1b1271c87dde90e1f0398a14e680c">bufferAddress</a>, length);</div>
<div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;    }</div>
<div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;    {</div>
<div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;        <span class="comment">// make sure we get at least the minimum</span></div>
<div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;        <span class="keywordflow">if</span> (length &lt; <a class="code" href="class_stream_info.html#ab1115bdc0204f808879ef4d79d1e1b47ae102242096e006b9c0ee0b8fbb80c64f">DefaultBufferSize</a>)</div>
<div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;        {</div>
<div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;            length = <a class="code" href="class_stream_info.html#ab1115bdc0204f808879ef4d79d1e1b47ae102242096e006b9c0ee0b8fbb80c64f">DefaultBufferSize</a>;</div>
<div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;        }</div>
<div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160; </div>
<div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;        <a class="code" href="class_stream_info.html#ad2b1b1271c87dde90e1f0398a14e680c">bufferAddress</a> = (<span class="keywordtype">char</span> *)malloc(length);</div>
<div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;    }</div>
<div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;    <a class="code" href="class_stream_info.html#ac25dd7e08d42d5de9e5f0854a0084811">bufferLength</a> = length;</div>
<div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="class_stream_info.html#ad2b1b1271c87dde90e1f0398a14e680c">bufferAddress</a> == NULL)</div>
<div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;    {</div>
<div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;        <a class="code" href="class_stream_info.html#abf80be8acced099814a34b375353c2e3">raiseException</a>(<a class="code" href="oorexxerrors_8h.html#abfb697037766bb11720aa2333c70c36a">Rexx_Error_System_service</a>);</div>
<div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;    }</div>
<div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;    <span class="comment">// and return the new buffer address</span></div>
<div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="class_stream_info.html#ad2b1b1271c87dde90e1f0398a14e680c">bufferAddress</a>;</div>
<div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;}</div>
<div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;<span class="comment">/**</span></div>
<div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;<span class="comment"> * Get a buffer of at least the default size, returning a</span></div>
<div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;<span class="comment"> * to the buffer and the current size.</span></div>
<div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;<span class="comment"> * @param length The returned buffer length.</span></div>
<div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;<span class="comment"> * @return The pointer to the allocated buffer.</span></div>
<div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l00242"></a><span class="lineno"><a class="line" href="class_stream_info.html#ab0d43c59700af0f30458d0105a3dc792">  242</a></span>&#160;<span class="keywordtype">char</span> *<a class="code" href="class_stream_info.html#ab0d43c59700af0f30458d0105a3dc792">StreamInfo::getDefaultBuffer</a>(<span class="keywordtype">size_t</span> &amp;length)</div>
<div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;{</div>
<div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;    <span class="comment">// make sure we have at least a minimum size buffer allocated,</span></div>
<div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;    <span class="comment">// then return the pointer and length</span></div>
<div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;    <a class="code" href="class_stream_info.html#a41fea76cafb2f48513f675360d91f19b">allocateBuffer</a>(<a class="code" href="class_stream_info.html#ab1115bdc0204f808879ef4d79d1e1b47ae102242096e006b9c0ee0b8fbb80c64f">DefaultBufferSize</a>);</div>
<div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;    length = <a class="code" href="class_stream_info.html#ac25dd7e08d42d5de9e5f0854a0084811">bufferLength</a>;</div>
<div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="class_stream_info.html#ad2b1b1271c87dde90e1f0398a14e680c">bufferAddress</a>;</div>
<div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;}</div>
<div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160; </div>
<div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;<span class="comment">/**</span></div>
<div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;<span class="comment"> * Extend the current I/O buffer, keeping any data in the</span></div>
<div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;<span class="comment"> * buffer intact.</span></div>
<div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;<span class="comment"> * @param length The length of the extended buffer.</span></div>
<div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;<span class="comment"> * @return Pointer to the reallocated buffer.</span></div>
<div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l00260"></a><span class="lineno"><a class="line" href="class_stream_info.html#ae5ffc9e04621a6ad29c979e1d38ab244">  260</a></span>&#160;<span class="keywordtype">char</span> *<a class="code" href="class_stream_info.html#ae5ffc9e04621a6ad29c979e1d38ab244">StreamInfo::extendBuffer</a>(<span class="keywordtype">size_t</span> &amp;length)</div>
<div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;{</div>
<div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;    <span class="comment">// We need more room for reading...extend this by another allocation unit,</span></div>
<div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;    <span class="comment">// keeping the data in the new buffer.</span></div>
<div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;    <a class="code" href="class_stream_info.html#a41fea76cafb2f48513f675360d91f19b">allocateBuffer</a>(<a class="code" href="class_stream_info.html#ac25dd7e08d42d5de9e5f0854a0084811">bufferLength</a> + <a class="code" href="class_stream_info.html#ab1115bdc0204f808879ef4d79d1e1b47ae102242096e006b9c0ee0b8fbb80c64f">DefaultBufferSize</a>);</div>
<div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;    length = <a class="code" href="class_stream_info.html#ac25dd7e08d42d5de9e5f0854a0084811">bufferLength</a>;</div>
<div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="class_stream_info.html#ad2b1b1271c87dde90e1f0398a14e680c">bufferAddress</a>;</div>
<div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;}</div>
<div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160; </div>
<div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;<span class="comment">/**</span></div>
<div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;<span class="comment"> * Release the buffer, if any, attached to this stream object.</span></div>
<div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l00273"></a><span class="lineno"><a class="line" href="class_stream_info.html#a11a2c85501fe84a94096f6488d119bf3">  273</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="class_stream_info.html#a11a2c85501fe84a94096f6488d119bf3">StreamInfo::freeBuffer</a>()</div>
<div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;{</div>
<div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;    <span class="comment">// Free file buffer so it can be collected next time garbage collection</span></div>
<div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;    <span class="comment">// is invoked.</span></div>
<div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="class_stream_info.html#ad2b1b1271c87dde90e1f0398a14e680c">bufferAddress</a> != NULL)</div>
<div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;    {</div>
<div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;        free(<a class="code" href="class_stream_info.html#ad2b1b1271c87dde90e1f0398a14e680c">bufferAddress</a>);</div>
<div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;        <a class="code" href="class_stream_info.html#ad2b1b1271c87dde90e1f0398a14e680c">bufferAddress</a> = NULL;</div>
<div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;        <a class="code" href="class_stream_info.html#ac25dd7e08d42d5de9e5f0854a0084811">bufferLength</a> = 0;</div>
<div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;    }</div>
<div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;}</div>
<div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;<span class="comment">/**</span></div>
<div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;<span class="comment"> * Open the stream in the specified mode.</span></div>
<div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;<span class="comment"> * @param openFlags  Open flags as defined by the _sopen() library function</span></div>
<div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;<span class="comment"> * @param openMode   Mode flags as defined by the _sopen() function.</span></div>
<div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;<span class="comment"> * @param sharedFlag Sharing flags as defined by _sopen()</span></div>
<div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;<span class="comment"> * @return true if the file is opened successfully, false for any failures.</span></div>
<div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l00294"></a><span class="lineno"><a class="line" href="class_stream_info.html#a183f102dcfac11bbbbf5dd8df2e39e7a">  294</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="class_stream_info.html#a183f102dcfac11bbbbf5dd8df2e39e7a">StreamInfo::open</a>(<span class="keywordtype">int</span> openFlags, <span class="keywordtype">int</span> openMode, <span class="keywordtype">int</span> sharedFlag)</div>
<div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;{</div>
<div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;     <span class="keywordflow">return</span> <a class="code" href="class_stream_info.html#a35caea85b14b8f2b8b734c3b51eb7f4b">fileInfo</a>.<a class="code" href="class_sys_file.html#ab59bfdafd28832d21a2b239174eec299">open</a>(<a class="code" href="class_stream_info.html#aa1824fb879c522d827a4c16dd2ff5ae4">qualified_name</a>, openFlags, openMode, sharedFlag);</div>
<div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;}</div>
<div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;<span class="comment">/**</span></div>
<div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;<span class="comment"> * Retrieve the size of the stream, if available.</span></div>
<div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;<span class="comment"> * @return The 64-bit stream size of the target stream.</span></div>
<div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l00304"></a><span class="lineno"><a class="line" href="class_stream_info.html#af21ad8877a6411a69e033790ac94b299">  304</a></span>&#160;<a class="code" href="windows_2rexxapitypes_8h.html#a414156feea104f8f75b4ed9e3121b2f6">int64_t</a> <a class="code" href="class_stream_info.html#af21ad8877a6411a69e033790ac94b299">StreamInfo::size</a>()</div>
<div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;{</div>
<div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;    <a class="code" href="windows_2rexxapitypes_8h.html#a414156feea104f8f75b4ed9e3121b2f6">int64_t</a> streamSize;</div>
<div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;    <a class="code" href="class_stream_info.html#a35caea85b14b8f2b8b734c3b51eb7f4b">fileInfo</a>.<a class="code" href="class_sys_file.html#a4b8eb988e7662d8500b4a7ce31cc78cd">getSize</a>(streamSize);</div>
<div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;    <span class="keywordflow">return</span> streamSize;</div>
<div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;}</div>
<div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;<span class="comment">/**</span></div>
<div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;<span class="comment"> * Raise a stream error condition, including raising a NOTREADY</span></div>
<div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;<span class="comment"> * condition.</span></div>
<div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l00315"></a><span class="lineno"><a class="line" href="class_stream_info.html#a6f99538562048386f872fb1843462267">  315</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="class_stream_info.html#a6f99538562048386f872fb1843462267">StreamInfo::notreadyError</a>()</div>
<div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;{</div>
<div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;    <a class="code" href="class_stream_info.html#a6f99538562048386f872fb1843462267">notreadyError</a>(<a class="code" href="class_stream_info.html#a35caea85b14b8f2b8b734c3b51eb7f4b">fileInfo</a>.<a class="code" href="class_sys_file.html#a0ccd495349312394f088f7716515a78e">errorInfo</a>(), <a class="code" href="class_stream_info.html#a825f1cc4635482e2dbd7c1166532ee54">defaultResult</a>);</div>
<div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;}</div>
<div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;<span class="comment">/**</span></div>
<div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;<span class="comment"> * Raise a stream error condition, including raising a NOTREADY</span></div>
<div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;<span class="comment"> * condition.</span></div>
<div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;<span class="comment"> * @param error_code The Rexx error condition to raise.</span></div>
<div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;<span class="comment"> * @param result     A NOTREADY condition result object.</span></div>
<div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l00327"></a><span class="lineno"><a class="line" href="class_stream_info.html#a3d3300aa9d4c4525469ed185166df0b9">  327</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="class_stream_info.html#a6f99538562048386f872fb1843462267">StreamInfo::notreadyError</a>(<span class="keywordtype">int</span> error_code, <a class="code" href="rexx_8h.html#a96e0cc5eda42aed364b05f3c493e07e8">RexxObjectPtr</a> result)</div>
<div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;{</div>
<div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;    <span class="comment">// if we don&#39;t have a result specified, use the default one.</span></div>
<div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;    <span class="keywordflow">if</span> (result == <a class="code" href="rexx_8h.html#a9a119fa1e31a4af78dee3c12225b240a">NULLOBJECT</a>)</div>
<div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;    {</div>
<div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;        result = <a class="code" href="class_stream_info.html#a825f1cc4635482e2dbd7c1166532ee54">defaultResult</a>;</div>
<div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;    }</div>
<div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;    <a class="code" href="class_stream_info.html#ab0c6d380b9704b6e305f881fc9fa1571">state</a> = <a class="code" href="class_stream_info.html#af8efe21cc9cb6d8da73907c4b6f573f7a5f13f69e16d45d7e37f1c97a86c5fa1f">StreamError</a>;</div>
<div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;    <a class="code" href="class_stream_info.html#aa718ca3a7bf31a0d6a490db4ce3d4ef0">errorInfo</a> = error_code;</div>
<div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;    <a class="code" href="class_stream_info.html#a35caea85b14b8f2b8b734c3b51eb7f4b">fileInfo</a>.<a class="code" href="class_sys_file.html#a0c81c32e9f82071be0d1cb57ccd064c8">clearErrors</a>();              <span class="comment">// clear any errors if the stream is open</span></div>
<div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;    <span class="comment">// raise this as a notready condition</span></div>
<div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;    <span class="comment">// NOTE:  The additional information only needs to</span></div>
<div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;    <a class="code" href="class_stream_info.html#a6a5404d4b7ece722baef78b65cab52d2">context</a>-&gt;RaiseCondition(<span class="stringliteral">&quot;NOTREADY&quot;</span>, <a class="code" href="class_stream_info.html#a6a5404d4b7ece722baef78b65cab52d2">context</a>-&gt;String(<a class="code" href="class_stream_info.html#a6a85550447a4ca095412f9b630504ae9">stream_name</a>), <span class="keyword">self</span>, result);</div>
<div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;    <span class="comment">// throw the stream object as an exception to unwind</span></div>
<div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;    <span class="keywordflow">throw</span> <span class="keyword">this</span>;</div>
<div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;}</div>
<div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;<span class="comment">/**</span></div>
<div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;<span class="comment"> * Raise an exception for the stream code.</span></div>
<div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;<span class="comment"> * @param err     The raised error code.</span></div>
<div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l00349"></a><span class="lineno"><a class="line" href="class_stream_info.html#abf80be8acced099814a34b375353c2e3">  349</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="class_stream_info.html#abf80be8acced099814a34b375353c2e3">StreamInfo::raiseException</a>(<span class="keywordtype">int</span> err)</div>
<div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;{</div>
<div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;    <a class="code" href="class_stream_info.html#a6a5404d4b7ece722baef78b65cab52d2">context</a>-&gt;RaiseException0(err);</div>
<div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;    <span class="comment">// and throw a C++ exception to go back to base camp.</span></div>
<div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;    <span class="keywordflow">throw</span> err;</div>
<div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;}</div>
<div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;<span class="comment">/**</span></div>
<div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;<span class="comment"> * Raise an exception for the stream code.</span></div>
<div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;<span class="comment"> * @param err     The raised error code.</span></div>
<div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;<span class="comment"> * @param sub1    First error substitution value.</span></div>
<div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l00362"></a><span class="lineno"><a class="line" href="class_stream_info.html#a7091a8732441154c437a83b3a5d77f0c">  362</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="class_stream_info.html#abf80be8acced099814a34b375353c2e3">StreamInfo::raiseException</a>(<span class="keywordtype">int</span> err, <a class="code" href="rexx_8h.html#a96e0cc5eda42aed364b05f3c493e07e8">RexxObjectPtr</a> sub1)</div>
<div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;{</div>
<div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;    <a class="code" href="class_stream_info.html#a6a5404d4b7ece722baef78b65cab52d2">context</a>-&gt;RaiseException1(err, sub1);</div>
<div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;    <span class="comment">// and throw a C++ exception to go back to base camp.</span></div>
<div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;    <span class="keywordflow">throw</span> err;</div>
<div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;}</div>
<div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;<span class="comment">/**</span></div>
<div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;<span class="comment"> * Raise an exception for the stream code.</span></div>
<div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;<span class="comment"> * @param err     The raised error code.</span></div>
<div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;<span class="comment"> * @param sub1    First error substitution value.</span></div>
<div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;<span class="comment"> * @param sub2    Second error substitution value.</span></div>
<div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l00376"></a><span class="lineno"><a class="line" href="class_stream_info.html#ace48e52daa767f91a8a473cedcc42a9e">  376</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="class_stream_info.html#abf80be8acced099814a34b375353c2e3">StreamInfo::raiseException</a>(<span class="keywordtype">int</span> err, <a class="code" href="rexx_8h.html#a96e0cc5eda42aed364b05f3c493e07e8">RexxObjectPtr</a> sub1, <a class="code" href="rexx_8h.html#a96e0cc5eda42aed364b05f3c493e07e8">RexxObjectPtr</a> sub2)</div>
<div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;{</div>
<div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;    <a class="code" href="class_stream_info.html#a6a5404d4b7ece722baef78b65cab52d2">context</a>-&gt;RaiseException2(err, sub1, sub2);</div>
<div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;    <span class="comment">// and throw a C++ exception to go back to base camp.</span></div>
<div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;    <span class="keywordflow">throw</span> err;</div>
<div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;}</div>
<div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160; </div>
<div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;<span class="comment">/**</span></div>
<div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;<span class="comment"> * Raise an exception for the stream code.</span></div>
<div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;<span class="comment"> * @param err     The raised error code.</span></div>
<div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;<span class="comment"> * @param sub1    First error substitution value.</span></div>
<div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;<span class="comment"> * @param sub2    Second error substitution value.</span></div>
<div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;<span class="comment"> * @param sub3    Third error substitution value.</span></div>
<div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l00392"></a><span class="lineno"><a class="line" href="class_stream_info.html#a942fc2aa4000aaa201c52cf5deef5ebb">  392</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="class_stream_info.html#abf80be8acced099814a34b375353c2e3">StreamInfo::raiseException</a>(<span class="keywordtype">int</span> err, <a class="code" href="rexx_8h.html#a96e0cc5eda42aed364b05f3c493e07e8">RexxObjectPtr</a> sub1, <a class="code" href="rexx_8h.html#a96e0cc5eda42aed364b05f3c493e07e8">RexxObjectPtr</a> sub2, <a class="code" href="rexx_8h.html#a96e0cc5eda42aed364b05f3c493e07e8">RexxObjectPtr</a> sub3)</div>
<div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;{</div>
<div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;    <a class="code" href="class_stream_info.html#a6a5404d4b7ece722baef78b65cab52d2">context</a>-&gt;RaiseException3(err, sub1, sub2, sub3);</div>
<div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;    <span class="comment">// and throw a C++ exception to go back to base camp.</span></div>
<div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;    <span class="keywordflow">throw</span> err;</div>
<div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;}</div>
<div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160; </div>
<div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;<span class="comment">/**</span></div>
<div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;<span class="comment"> * Raise an exception for the stream code.</span></div>
<div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;<span class="comment"> * @param err     The raised error code.</span></div>
<div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;<span class="comment"> * @param sub1    First error substitution value.</span></div>
<div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;<span class="comment"> * @param sub2    Second error substitution value.</span></div>
<div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;<span class="comment"> * @param sub3    Third error substitution value.</span></div>
<div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;<span class="comment"> * @param sub4    Fourth error substitution value.</span></div>
<div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l00409"></a><span class="lineno"><a class="line" href="class_stream_info.html#a7514ffd0f8d25613e71259b1ce5f8207">  409</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="class_stream_info.html#abf80be8acced099814a34b375353c2e3">StreamInfo::raiseException</a>(<span class="keywordtype">int</span> err, <a class="code" href="rexx_8h.html#a96e0cc5eda42aed364b05f3c493e07e8">RexxObjectPtr</a> sub1, <a class="code" href="rexx_8h.html#a96e0cc5eda42aed364b05f3c493e07e8">RexxObjectPtr</a> sub2, <a class="code" href="rexx_8h.html#a96e0cc5eda42aed364b05f3c493e07e8">RexxObjectPtr</a> sub3, <a class="code" href="rexx_8h.html#a96e0cc5eda42aed364b05f3c493e07e8">RexxObjectPtr</a> sub4)</div>
<div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;{</div>
<div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;    <a class="code" href="class_stream_info.html#a6a5404d4b7ece722baef78b65cab52d2">context</a>-&gt;RaiseException4(err, sub1, sub2, sub3, sub4);</div>
<div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;    <span class="comment">// and throw a C++ exception to go back to base camp.</span></div>
<div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;    <span class="keywordflow">throw</span> err;</div>
<div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;}</div>
<div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160; </div>
<div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;<span class="comment">/**</span></div>
<div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;<span class="comment"> * Raise an exception for the stream code.</span></div>
<div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;<span class="comment"> * @param err     The raised error code.</span></div>
<div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;<span class="comment"> * @param sub1    First error substitution value.</span></div>
<div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;<span class="comment"> * @param sub2    Second error substitution value.</span></div>
<div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;<span class="comment"> * @param sub3    Third error substitution value.</span></div>
<div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;<span class="comment"> * @param sub4    Fourth error substitution value.</span></div>
<div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;<span class="comment"> * @param sub5    Fifth error substitution value.</span></div>
<div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l00427"></a><span class="lineno"><a class="line" href="class_stream_info.html#a4f70690c0cd0135b31fcf151cdbb8381">  427</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="class_stream_info.html#abf80be8acced099814a34b375353c2e3">StreamInfo::raiseException</a>(<span class="keywordtype">int</span> err, <a class="code" href="rexx_8h.html#a96e0cc5eda42aed364b05f3c493e07e8">RexxObjectPtr</a> sub1, <a class="code" href="rexx_8h.html#a96e0cc5eda42aed364b05f3c493e07e8">RexxObjectPtr</a> sub2, <a class="code" href="rexx_8h.html#a96e0cc5eda42aed364b05f3c493e07e8">RexxObjectPtr</a> sub3, <a class="code" href="rexx_8h.html#a96e0cc5eda42aed364b05f3c493e07e8">RexxObjectPtr</a> sub4, <a class="code" href="rexx_8h.html#a96e0cc5eda42aed364b05f3c493e07e8">RexxObjectPtr</a> sub5)</div>
<div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;{</div>
<div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;    <a class="code" href="class_stream_info.html#a6a5404d4b7ece722baef78b65cab52d2">context</a>-&gt;RaiseException5(err, sub1, sub2, sub3, sub4, sub5);</div>
<div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;    <span class="comment">// and throw a C++ exception to go back to base camp.</span></div>
<div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;    <span class="keywordflow">throw</span> err;</div>
<div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;}</div>
<div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160; </div>
<div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;<span class="comment">/**</span></div>
<div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;<span class="comment"> * Process an EOF condition for a stream.</span></div>
<div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l00438"></a><span class="lineno"><a class="line" href="class_stream_info.html#ad7f0af292aa094aec51e43972a5c5c8b">  438</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="class_stream_info.html#ad7f0af292aa094aec51e43972a5c5c8b">StreamInfo::eof</a>()</div>
<div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;{</div>
<div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;    <a class="code" href="class_stream_info.html#ad7f0af292aa094aec51e43972a5c5c8b">eof</a>(<a class="code" href="class_stream_info.html#a825f1cc4635482e2dbd7c1166532ee54">defaultResult</a>);</div>
<div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;}</div>
<div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160; </div>
<div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;<span class="comment">/**</span></div>
<div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;<span class="comment"> * Process an EOF condition for a stream.</span></div>
<div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;<span class="comment"> * @param result  A result object returned with the NotReady condition.</span></div>
<div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l00449"></a><span class="lineno"><a class="line" href="class_stream_info.html#aa9db6230da2bad23656fc2270110e88d">  449</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="class_stream_info.html#ad7f0af292aa094aec51e43972a5c5c8b">StreamInfo::eof</a>(<a class="code" href="rexx_8h.html#a96e0cc5eda42aed364b05f3c493e07e8">RexxObjectPtr</a> result)</div>
<div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;{</div>
<div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;    <span class="comment">/* place this in an eof state        */</span></div>
<div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;    <a class="code" href="class_stream_info.html#ab0c6d380b9704b6e305f881fc9fa1571">state</a> = <a class="code" href="class_stream_info.html#af8efe21cc9cb6d8da73907c4b6f573f7ac1ad97d4ba149f0a0c0074996bcb41e8">StreamEof</a>;</div>
<div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;    <span class="comment">/* raise this as a notready condition*/</span></div>
<div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;    <a class="code" href="class_stream_info.html#a6a5404d4b7ece722baef78b65cab52d2">context</a>-&gt;RaiseCondition(<span class="stringliteral">&quot;NOTREADY&quot;</span>, <a class="code" href="class_stream_info.html#a6a5404d4b7ece722baef78b65cab52d2">context</a>-&gt;String(<a class="code" href="class_stream_info.html#a6a85550447a4ca095412f9b630504ae9">stream_name</a>), <span class="keyword">self</span>, result);</div>
<div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160; </div>
<div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;    <span class="comment">// if a result object was given, the caller&#39;s not expecting control back, so</span></div>
<div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;    <span class="comment">// throw an exception to unwind.</span></div>
<div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160;    <span class="keywordflow">throw</span> <span class="keyword">this</span>;</div>
<div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;}</div>
<div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;<span class="comment">/**</span></div>
<div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;<span class="comment"> * Raise the appropriate not ready condition, checking first for an eof</span></div>
<div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;<span class="comment"> * condition.</span></div>
<div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160;<span class="comment"> * @param result     A result object to be passed with the Notready condition.</span></div>
<div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l00467"></a><span class="lineno"><a class="line" href="class_stream_info.html#a841a460b1c724355c504bd21fe9382fc">  467</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="class_stream_info.html#a841a460b1c724355c504bd21fe9382fc">StreamInfo::checkEof</a>()</div>
<div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160;{</div>
<div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;      <span class="comment">// if this is an eof condition, raise the eof not ready</span></div>
<div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="class_stream_info.html#a35caea85b14b8f2b8b734c3b51eb7f4b">fileInfo</a>.<a class="code" href="class_sys_file.html#a2da4b6f857ccd665bbb0653d895fe33d">atEof</a>())</div>
<div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160;    {</div>
<div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160;        <a class="code" href="class_stream_info.html#ad7f0af292aa094aec51e43972a5c5c8b">eof</a>();</div>
<div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160;    }</div>
<div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;    {</div>
<div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160;        <span class="comment">// must be an error, so raise the error not ready using the file error</span></div>
<div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160;        <span class="comment">// information</span></div>
<div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160;        <a class="code" href="class_stream_info.html#a6f99538562048386f872fb1843462267">notreadyError</a>();</div>
<div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160;    }</div>
<div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160;}</div>
<div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160; </div>
<div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160;<span class="comment">/**</span></div>
<div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160;<span class="comment"> * Get the type of the stream in question.</span></div>
<div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160;<span class="comment"> * @param binary  Indicates whether we believe this to be a binary stream,</span></div>
<div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160;<span class="comment"> *                or not.</span></div>
<div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l00489"></a><span class="lineno"><a class="line" href="class_stream_info.html#a0039dd0ef9744576161528c01ab9061b">  489</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="class_stream_info.html#a0039dd0ef9744576161528c01ab9061b">StreamInfo::checkStreamType</a>()</div>
<div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160;{</div>
<div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160;    <span class="comment">// reset the current type flags</span></div>
<div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160;    <span class="keyword">transient</span> = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;    <span class="comment">// see if the system believes this is transient.</span></div>
<div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="class_stream_info.html#a35caea85b14b8f2b8b734c3b51eb7f4b">fileInfo</a>.<a class="code" href="class_sys_file.html#adfa0d4b71f91895b75ccb2347c42eb0f">isTransient</a>())</div>
<div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160;    {</div>
<div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160;        <span class="comment">// non-transient, now process this as binary or text based.</span></div>
<div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="class_stream_info.html#a4f4b3f5f598efe6f91ee45cd6aadb065">record_based</a>)</div>
<div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160;        {</div>
<div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160;            <span class="comment">// not given as a binary record length?</span></div>
<div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160;            <span class="keywordflow">if</span> (!<a class="code" href="class_stream_info.html#a8fee3f8892f5e912d85d5a1621cdcc8a">binaryRecordLength</a>)</div>
<div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160;            {</div>
<div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160;                <span class="comment">// one stream, one record, up to the record size restriction</span></div>
<div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160;                <a class="code" href="class_stream_info.html#a8fee3f8892f5e912d85d5a1621cdcc8a">binaryRecordLength</a> = (size_t)<a class="code" href="class_stream_info.html#af21ad8877a6411a69e033790ac94b299">size</a>();</div>
<div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160;                <span class="keywordflow">if</span> (<a class="code" href="class_stream_info.html#a8fee3f8892f5e912d85d5a1621cdcc8a">binaryRecordLength</a> == 0)</div>
<div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160;                {</div>
<div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160;                    <span class="comment">// raise an exception for this</span></div>
<div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160;                    <a class="code" href="class_stream_info.html#abf80be8acced099814a34b375353c2e3">raiseException</a>(<a class="code" href="oorexxerrors_8h.html#a43f122d08b1e4bd67b6f301029f72599">Rexx_Error_Incorrect_method</a>);</div>
<div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160;                }</div>
<div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160;            }</div>
<div class="line"><a name="l00510"></a><span class="lineno">  510</span>&#160;        }</div>
<div class="line"><a name="l00511"></a><span class="lineno">  511</span>&#160;    }</div>
<div class="line"><a name="l00512"></a><span class="lineno">  512</span>&#160;    <span class="keywordflow">else</span>   <span class="comment">// a transient stream</span></div>
<div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160;    {</div>
<div class="line"><a name="l00514"></a><span class="lineno">  514</span>&#160;        <span class="keyword">transient</span> = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160;        <span class="comment">// for transient binary streams, if a record length was not provided,</span></div>
<div class="line"><a name="l00516"></a><span class="lineno">  516</span>&#160;        <span class="comment">// we default to 1.</span></div>
<div class="line"><a name="l00517"></a><span class="lineno">  517</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="class_stream_info.html#a4f4b3f5f598efe6f91ee45cd6aadb065">record_based</a>)</div>
<div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160;        {</div>
<div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="class_stream_info.html#a8fee3f8892f5e912d85d5a1621cdcc8a">binaryRecordLength</a> == 0)</div>
<div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160;            {</div>
<div class="line"><a name="l00521"></a><span class="lineno">  521</span>&#160;                <a class="code" href="class_stream_info.html#a8fee3f8892f5e912d85d5a1621cdcc8a">binaryRecordLength</a> = 1;</div>
<div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160;            }</div>
<div class="line"><a name="l00523"></a><span class="lineno">  523</span>&#160;        }</div>
<div class="line"><a name="l00524"></a><span class="lineno">  524</span>&#160;    }</div>
<div class="line"><a name="l00525"></a><span class="lineno">  525</span>&#160;}</div>
<div class="line"><a name="l00526"></a><span class="lineno">  526</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00527"></a><span class="lineno">  527</span>&#160;<span class="comment">/**</span></div>
<div class="line"><a name="l00528"></a><span class="lineno">  528</span>&#160;<span class="comment"> * Close stream, performing any data flushes that might be</span></div>
<div class="line"><a name="l00529"></a><span class="lineno">  529</span>&#160;<span class="comment"> * required.</span></div>
<div class="line"><a name="l00530"></a><span class="lineno">  530</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00531"></a><span class="lineno">  531</span>&#160;<span class="comment"> * This raises a NOTREADY condition if any errors occur on the</span></div>
<div class="line"><a name="l00532"></a><span class="lineno">  532</span>&#160;<span class="comment"> * close.</span></div>
<div class="line"><a name="l00533"></a><span class="lineno">  533</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l00534"></a><span class="lineno"><a class="line" href="class_stream_info.html#a6fd463e10f51648420f870bca5d465e0">  534</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="class_stream_info.html#a6fd463e10f51648420f870bca5d465e0">StreamInfo::close</a>()</div>
<div class="line"><a name="l00535"></a><span class="lineno">  535</span>&#160;{</div>
<div class="line"><a name="l00536"></a><span class="lineno">  536</span>&#160;    <span class="comment">// do the stream close</span></div>
<div class="line"><a name="l00537"></a><span class="lineno">  537</span>&#160;    <span class="keywordtype">bool</span> closed = <a class="code" href="class_stream_info.html#a35caea85b14b8f2b8b734c3b51eb7f4b">fileInfo</a>.<a class="code" href="class_sys_file.html#a86c4fbec300dc5f68d7387e8621a6185">close</a>();</div>
<div class="line"><a name="l00538"></a><span class="lineno">  538</span>&#160;    <span class="comment">// free our data buffer</span></div>
<div class="line"><a name="l00539"></a><span class="lineno">  539</span>&#160;    <a class="code" href="class_stream_info.html#a11a2c85501fe84a94096f6488d119bf3">freeBuffer</a>();</div>
<div class="line"><a name="l00540"></a><span class="lineno">  540</span>&#160;    <span class="comment">// and raise a NOTREADY condition if anything went amiss</span></div>
<div class="line"><a name="l00541"></a><span class="lineno">  541</span>&#160;    <span class="keywordflow">if</span> (!closed)</div>
<div class="line"><a name="l00542"></a><span class="lineno">  542</span>&#160;    {</div>
<div class="line"><a name="l00543"></a><span class="lineno">  543</span>&#160;        <a class="code" href="class_stream_info.html#a825f1cc4635482e2dbd7c1166532ee54">defaultResult</a> = <a class="code" href="class_stream_info.html#a6a5404d4b7ece722baef78b65cab52d2">context</a>-&gt;WholeNumberToObject(<a class="code" href="class_stream_info.html#a35caea85b14b8f2b8b734c3b51eb7f4b">fileInfo</a>.<a class="code" href="class_sys_file.html#a0ccd495349312394f088f7716515a78e">errorInfo</a>());</div>
<div class="line"><a name="l00544"></a><span class="lineno">  544</span>&#160;        <a class="code" href="class_stream_info.html#a6f99538562048386f872fb1843462267">notreadyError</a>();</div>
<div class="line"><a name="l00545"></a><span class="lineno">  545</span>&#160;    }</div>
<div class="line"><a name="l00546"></a><span class="lineno">  546</span>&#160;    <span class="comment">// no longer open for business</span></div>
<div class="line"><a name="l00547"></a><span class="lineno">  547</span>&#160;    <a class="code" href="class_stream_info.html#a69bc9580bb2e54426801fe6fca59c98e">isopen</a> = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00548"></a><span class="lineno">  548</span>&#160;    <a class="code" href="class_stream_info.html#ab0c6d380b9704b6e305f881fc9fa1571">state</a> = <a class="code" href="class_stream_info.html#af8efe21cc9cb6d8da73907c4b6f573f7ac1d3d26e8755c0a3317ad47740f8f0a5">StreamUnknown</a>;</div>
<div class="line"><a name="l00549"></a><span class="lineno">  549</span>&#160;}</div>
<div class="line"><a name="l00550"></a><span class="lineno">  550</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00551"></a><span class="lineno">  551</span>&#160;<span class="comment">/**</span></div>
<div class="line"><a name="l00552"></a><span class="lineno">  552</span>&#160;<span class="comment"> * Helper function to determine if opts contains the no buffer option.</span></div>
<div class="line"><a name="l00553"></a><span class="lineno">  553</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00554"></a><span class="lineno">  554</span>&#160;<span class="comment"> * @param opts   String to search in for NOBUFFER.</span></div>
<div class="line"><a name="l00555"></a><span class="lineno">  555</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00556"></a><span class="lineno">  556</span>&#160;<span class="comment"> * @return True if nobuffer, caseless, is in opts, otherwise false.</span></div>
<div class="line"><a name="l00557"></a><span class="lineno">  557</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l00558"></a><span class="lineno"><a class="line" href="_stream_native_8cpp.html#ac2e3186d442bd54d85b0dfeef17959eb">  558</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="_stream_native_8cpp.html#ac2e3186d442bd54d85b0dfeef17959eb">hasNoBufferOption</a>(<span class="keyword">const</span> <span class="keywordtype">char</span> *opts)</div>
<div class="line"><a name="l00559"></a><span class="lineno">  559</span>&#160;{</div>
<div class="line"><a name="l00560"></a><span class="lineno">  560</span>&#160;    <span class="keywordtype">char</span> *tmp = (<span class="keywordtype">char</span> *)malloc(strlen(opts) + 1);</div>
<div class="line"><a name="l00561"></a><span class="lineno">  561</span>&#160;    <span class="keywordflow">if</span> (tmp == NULL)</div>
<div class="line"><a name="l00562"></a><span class="lineno">  562</span>&#160;    {</div>
<div class="line"><a name="l00563"></a><span class="lineno">  563</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00564"></a><span class="lineno">  564</span>&#160;    }</div>
<div class="line"><a name="l00565"></a><span class="lineno">  565</span>&#160; </div>
<div class="line"><a name="l00566"></a><span class="lineno">  566</span>&#160;    strcpy(tmp, opts);</div>
<div class="line"><a name="l00567"></a><span class="lineno">  567</span>&#160;    <a class="code" href="class_utilities.html#a48f8b5eee5a201ee55dcd874206189b4">Utilities::strupper</a>(tmp);</div>
<div class="line"><a name="l00568"></a><span class="lineno">  568</span>&#160; </div>
<div class="line"><a name="l00569"></a><span class="lineno">  569</span>&#160;    <span class="keywordtype">bool</span> result = strstr(tmp, <span class="stringliteral">&quot;NOBUFFER&quot;</span>) != NULL ? true : <span class="keyword">false</span>;</div>
<div class="line"><a name="l00570"></a><span class="lineno">  570</span>&#160;    free(tmp);</div>
<div class="line"><a name="l00571"></a><span class="lineno">  571</span>&#160; </div>
<div class="line"><a name="l00572"></a><span class="lineno">  572</span>&#160;    <span class="keywordflow">return</span> result;</div>
<div class="line"><a name="l00573"></a><span class="lineno">  573</span>&#160;}</div>
<div class="line"><a name="l00574"></a><span class="lineno">  574</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00575"></a><span class="lineno">  575</span>&#160;<span class="comment">/**</span></div>
<div class="line"><a name="l00576"></a><span class="lineno">  576</span>&#160;<span class="comment"> * Open a standard stream, using the provided options string.</span></div>
<div class="line"><a name="l00577"></a><span class="lineno">  577</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00578"></a><span class="lineno">  578</span>&#160;<span class="comment"> * @param options Open parameters, in character string form.</span></div>
<div class="line"><a name="l00579"></a><span class="lineno">  579</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00580"></a><span class="lineno">  580</span>&#160;<span class="comment"> * @return The open condition string.</span></div>
<div class="line"><a name="l00581"></a><span class="lineno">  581</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l00582"></a><span class="lineno"><a class="line" href="class_stream_info.html#a9d9fb2a06b11c9e3d1430e46e0817dd7">  582</a></span>&#160;<span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="class_stream_info.html#a9d9fb2a06b11c9e3d1430e46e0817dd7">StreamInfo::openStd</a>(<span class="keyword">const</span> <span class="keywordtype">char</span> *options)</div>
<div class="line"><a name="l00583"></a><span class="lineno">  583</span>&#160;{</div>
<div class="line"><a name="l00584"></a><span class="lineno">  584</span>&#160;    <span class="comment">// first check for the standard io streams</span></div>
<div class="line"><a name="l00585"></a><span class="lineno">  585</span>&#160;   <span class="keywordflow">if</span> (!<a class="code" href="class_utilities.html#a99155cc671bfd7846467c1a7fdc7fe80">Utilities::strCaselessCompare</a>(<a class="code" href="class_stream_info.html#a6a85550447a4ca095412f9b630504ae9">stream_name</a>, <span class="stringliteral">&quot;STDIN&quot;</span>) ||</div>
<div class="line"><a name="l00586"></a><span class="lineno">  586</span>&#160;       !<a class="code" href="class_utilities.html#a99155cc671bfd7846467c1a7fdc7fe80">Utilities::strCaselessCompare</a>(<a class="code" href="class_stream_info.html#a6a85550447a4ca095412f9b630504ae9">stream_name</a>,<span class="stringliteral">&quot;STDIN:&quot;</span>))</div>
<div class="line"><a name="l00587"></a><span class="lineno">  587</span>&#160;   {</div>
<div class="line"><a name="l00588"></a><span class="lineno">  588</span>&#160;       <span class="comment">// indicate this is stdin</span></div>
<div class="line"><a name="l00589"></a><span class="lineno">  589</span>&#160;       <a class="code" href="class_stream_info.html#a35caea85b14b8f2b8b734c3b51eb7f4b">fileInfo</a>.<a class="code" href="class_sys_file.html#a05554fb9d7f6e2d797357d915e1d939a">setStdIn</a>();</div>
<div class="line"><a name="l00590"></a><span class="lineno">  590</span>&#160;       <span class="comment">// this is a read only file</span></div>
<div class="line"><a name="l00591"></a><span class="lineno">  591</span>&#160;       <a class="code" href="class_stream_info.html#a7783763d6eec22176a9dfd2f537f6506">read_only</a> = 1;</div>
<div class="line"><a name="l00592"></a><span class="lineno">  592</span>&#160;   }</div>
<div class="line"><a name="l00593"></a><span class="lineno">  593</span>&#160; </div>
<div class="line"><a name="l00594"></a><span class="lineno">  594</span>&#160;   <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!<a class="code" href="class_utilities.html#a99155cc671bfd7846467c1a7fdc7fe80">Utilities::strCaselessCompare</a>(<a class="code" href="class_stream_info.html#a6a85550447a4ca095412f9b630504ae9">stream_name</a>,<span class="stringliteral">&quot;STDOUT&quot;</span>) ||</div>
<div class="line"><a name="l00595"></a><span class="lineno">  595</span>&#160;            !<a class="code" href="class_utilities.html#a99155cc671bfd7846467c1a7fdc7fe80">Utilities::strCaselessCompare</a>(<a class="code" href="class_stream_info.html#a6a85550447a4ca095412f9b630504ae9">stream_name</a>,<span class="stringliteral">&quot;STDOUT:&quot;</span>))</div>
<div class="line"><a name="l00596"></a><span class="lineno">  596</span>&#160;   {</div>
<div class="line"><a name="l00597"></a><span class="lineno">  597</span>&#160;       <span class="comment">// indicate this is stdout</span></div>
<div class="line"><a name="l00598"></a><span class="lineno">  598</span>&#160;       <a class="code" href="class_stream_info.html#a35caea85b14b8f2b8b734c3b51eb7f4b">fileInfo</a>.<a class="code" href="class_sys_file.html#afbc58dba3f5409d7faa7ddfc2467a648">setStdOut</a>();</div>
<div class="line"><a name="l00599"></a><span class="lineno">  599</span>&#160;       <span class="comment">// stdout can only be appended to.</span></div>
<div class="line"><a name="l00600"></a><span class="lineno">  600</span>&#160;       <a class="code" href="class_stream_info.html#ae5d69a23a83ae44083babca8913b9295">append</a> = 1;</div>
<div class="line"><a name="l00601"></a><span class="lineno">  601</span>&#160;   }</div>
<div class="line"><a name="l00602"></a><span class="lineno">  602</span>&#160;   <span class="keywordflow">else</span>                                <span class="comment">/* must be standard error            */</span></div>
<div class="line"><a name="l00603"></a><span class="lineno">  603</span>&#160;   {</div>
<div class="line"><a name="l00604"></a><span class="lineno">  604</span>&#160;       <span class="comment">// indicate this is stderr</span></div>
<div class="line"><a name="l00605"></a><span class="lineno">  605</span>&#160;       <a class="code" href="class_stream_info.html#a35caea85b14b8f2b8b734c3b51eb7f4b">fileInfo</a>.<a class="code" href="class_sys_file.html#a3eb0135940e889a9db1717e868f24a08">setStdErr</a>();</div>
<div class="line"><a name="l00606"></a><span class="lineno">  606</span>&#160;       <span class="comment">// stderr can only be appended to.</span></div>
<div class="line"><a name="l00607"></a><span class="lineno">  607</span>&#160;       <a class="code" href="class_stream_info.html#ae5d69a23a83ae44083babca8913b9295">append</a> = 1;</div>
<div class="line"><a name="l00608"></a><span class="lineno">  608</span>&#160;   }</div>
<div class="line"><a name="l00609"></a><span class="lineno">  609</span>&#160; </div>
<div class="line"><a name="l00610"></a><span class="lineno">  610</span>&#160;   <span class="comment">// check to see if buffering is allowed.</span></div>
<div class="line"><a name="l00611"></a><span class="lineno">  611</span>&#160;   <span class="keywordflow">if</span> (options != NULL &amp;&amp; <a class="code" href="_stream_native_8cpp.html#ac2e3186d442bd54d85b0dfeef17959eb">hasNoBufferOption</a>(options))</div>
<div class="line"><a name="l00612"></a><span class="lineno">  612</span>&#160;   {</div>
<div class="line"><a name="l00613"></a><span class="lineno">  613</span>&#160;       <a class="code" href="class_stream_info.html#ada2b25c7a5fc0a9c1fe9f63f432dfdd4">nobuffer</a> = 1;</div>
<div class="line"><a name="l00614"></a><span class="lineno">  614</span>&#160;   }</div>
<div class="line"><a name="l00615"></a><span class="lineno">  615</span>&#160;   <span class="keywordflow">else</span></div>
<div class="line"><a name="l00616"></a><span class="lineno">  616</span>&#160;   {</div>
<div class="line"><a name="l00617"></a><span class="lineno">  617</span>&#160;       <a class="code" href="class_stream_info.html#ada2b25c7a5fc0a9c1fe9f63f432dfdd4">nobuffer</a> = 0;  <span class="comment">/* buffering is used                 */</span></div>
<div class="line"><a name="l00618"></a><span class="lineno">  618</span>&#160;   }</div>
<div class="line"><a name="l00619"></a><span class="lineno">  619</span>&#160; </div>
<div class="line"><a name="l00620"></a><span class="lineno">  620</span>&#160;   <span class="comment">// the resolved name is the same as the input name.</span></div>
<div class="line"><a name="l00621"></a><span class="lineno">  621</span>&#160;   strcpy(<a class="code" href="class_stream_info.html#aa1824fb879c522d827a4c16dd2ff5ae4">qualified_name</a>, <a class="code" href="class_stream_info.html#a6a85550447a4ca095412f9b630504ae9">stream_name</a>);</div>
<div class="line"><a name="l00622"></a><span class="lineno">  622</span>&#160;   <span class="comment">// we&#39;re open, and ready</span></div>
<div class="line"><a name="l00623"></a><span class="lineno">  623</span>&#160;   <a class="code" href="class_stream_info.html#a69bc9580bb2e54426801fe6fca59c98e">isopen</a> = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00624"></a><span class="lineno">  624</span>&#160; </div>
<div class="line"><a name="l00625"></a><span class="lineno">  625</span>&#160;   <a class="code" href="class_stream_info.html#ab0c6d380b9704b6e305f881fc9fa1571">state</a> = <a class="code" href="class_stream_info.html#af8efe21cc9cb6d8da73907c4b6f573f7a4f89da370429a424003f1dc56d72526e">StreamReady</a>;</div>
<div class="line"><a name="l00626"></a><span class="lineno">  626</span>&#160; </div>
<div class="line"><a name="l00627"></a><span class="lineno">  627</span>&#160;   <span class="comment">// and also record the transient nature of this</span></div>
<div class="line"><a name="l00628"></a><span class="lineno">  628</span>&#160;   <span class="keyword">transient</span> = <a class="code" href="class_stream_info.html#a35caea85b14b8f2b8b734c3b51eb7f4b">fileInfo</a>.<a class="code" href="class_sys_file.html#adfa0d4b71f91895b75ccb2347c42eb0f">isTransient</a>();</div>
<div class="line"><a name="l00629"></a><span class="lineno">  629</span>&#160; </div>
<div class="line"><a name="l00630"></a><span class="lineno">  630</span>&#160;   <span class="comment">// don&#39;t buffer if we&#39;ve explicitly requested no buffering.</span></div>
<div class="line"><a name="l00631"></a><span class="lineno">  631</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="class_stream_info.html#ada2b25c7a5fc0a9c1fe9f63f432dfdd4">nobuffer</a>)</div>
<div class="line"><a name="l00632"></a><span class="lineno">  632</span>&#160;   {</div>
<div class="line"><a name="l00633"></a><span class="lineno">  633</span>&#160;       <span class="comment">// we do not buffer buffer file</span></div>
<div class="line"><a name="l00634"></a><span class="lineno">  634</span>&#160;       <a class="code" href="class_stream_info.html#a35caea85b14b8f2b8b734c3b51eb7f4b">fileInfo</a>.<a class="code" href="class_sys_file.html#a9960f0b73218853df65a100687c3952c">setBuffering</a>(<span class="keyword">false</span>, 0);</div>
<div class="line"><a name="l00635"></a><span class="lineno">  635</span>&#160;   }</div>
<div class="line"><a name="l00636"></a><span class="lineno">  636</span>&#160;   <span class="keywordflow">else</span></div>
<div class="line"><a name="l00637"></a><span class="lineno">  637</span>&#160;   {</div>
<div class="line"><a name="l00638"></a><span class="lineno">  638</span>&#160;       <span class="comment">// we buffer file</span></div>
<div class="line"><a name="l00639"></a><span class="lineno">  639</span>&#160;       <a class="code" href="class_stream_info.html#a35caea85b14b8f2b8b734c3b51eb7f4b">fileInfo</a>.<a class="code" href="class_sys_file.html#a9960f0b73218853df65a100687c3952c">setBuffering</a>(<span class="keyword">true</span>, 0);</div>
<div class="line"><a name="l00640"></a><span class="lineno">  640</span>&#160;   }</div>
<div class="line"><a name="l00641"></a><span class="lineno">  641</span>&#160;   <span class="comment">// this was successful.</span></div>
<div class="line"><a name="l00642"></a><span class="lineno">  642</span>&#160;   <span class="keywordflow">return</span> <span class="stringliteral">&quot;READY:&quot;</span>;</div>
<div class="line"><a name="l00643"></a><span class="lineno">  643</span>&#160;}</div>
<div class="line"><a name="l00644"></a><span class="lineno">  644</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00645"></a><span class="lineno">  645</span>&#160;<span class="comment">/**</span></div>
<div class="line"><a name="l00646"></a><span class="lineno">  646</span>&#160;<span class="comment"> * Do a stream open using a supplied file handle.  This</span></div>
<div class="line"><a name="l00647"></a><span class="lineno">  647</span>&#160;<span class="comment"> * open process parses all of the open parameters, setting</span></div>
<div class="line"><a name="l00648"></a><span class="lineno">  648</span>&#160;<span class="comment"> * the appropriate state</span></div>
<div class="line"><a name="l00649"></a><span class="lineno">  649</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00650"></a><span class="lineno">  650</span>&#160;<span class="comment"> * @param options The character string open optins.</span></div>
<div class="line"><a name="l00651"></a><span class="lineno">  651</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00652"></a><span class="lineno">  652</span>&#160;<span class="comment"> * @return The stream state (READY/NOTREADY)</span></div>
<div class="line"><a name="l00653"></a><span class="lineno">  653</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l00654"></a><span class="lineno"><a class="line" href="class_stream_info.html#a734bb28c3531a07f32c04bc60a920449">  654</a></span>&#160;<span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="class_stream_info.html#a734bb28c3531a07f32c04bc60a920449">StreamInfo::handleOpen</a>(<span class="keyword">const</span> <span class="keywordtype">char</span> *options)</div>
<div class="line"><a name="l00655"></a><span class="lineno">  655</span>&#160;{</div>
<div class="line"><a name="l00656"></a><span class="lineno">  656</span>&#160;    <span class="keywordtype">int</span> oflag = 0;                        <span class="comment">// no default options</span></div>
<div class="line"><a name="l00657"></a><span class="lineno">  657</span>&#160; </div>
<div class="line"><a name="l00658"></a><span class="lineno">  658</span>&#160;    <span class="comment">// reset the standard fields</span></div>
<div class="line"><a name="l00659"></a><span class="lineno">  659</span>&#160;    <a class="code" href="class_stream_info.html#a0a8b2d8b6be32314f2b5ee4013bab4a3">resetFields</a>();</div>
<div class="line"><a name="l00660"></a><span class="lineno">  660</span>&#160; </div>
<div class="line"><a name="l00661"></a><span class="lineno">  661</span>&#160;    <span class="comment">/* copy into the full name from the name */</span></div>
<div class="line"><a name="l00662"></a><span class="lineno">  662</span>&#160;    strcpy(<a class="code" href="class_stream_info.html#aa1824fb879c522d827a4c16dd2ff5ae4">qualified_name</a>,<a class="code" href="class_stream_info.html#a6a85550447a4ca095412f9b630504ae9">stream_name</a>);</div>
<div class="line"><a name="l00663"></a><span class="lineno">  663</span>&#160; </div>
<div class="line"><a name="l00664"></a><span class="lineno">  664</span>&#160;    <span class="comment">// do we have options?</span></div>
<div class="line"><a name="l00665"></a><span class="lineno">  665</span>&#160;    <span class="keywordflow">if</span> (options != NULL)</div>
<div class="line"><a name="l00666"></a><span class="lineno">  666</span>&#160;    {</div>
<div class="line"><a name="l00667"></a><span class="lineno">  667</span>&#160;    <span class="comment">/* Action table for open parameters */</span></div>
<div class="line"><a name="l00668"></a><span class="lineno">  668</span>&#160;        <a class="code" href="class_parse_action.html">ParseAction</a>  OpenActionread[] = {</div>
<div class="line"><a name="l00669"></a><span class="lineno">  669</span>&#160;            <a class="code" href="class_parse_action.html">ParseAction</a>(<a class="code" href="_stream_command_parser_8h.html#a21d5e8f8cdaa838586b31007df0a950ba1c73bf66bffc3067439c90f010b7b2d4">MEB</a>, <a class="code" href="class_stream_info.html#a3d4aeb7b07210713e68491c0c1370fff">write_only</a>),</div>
<div class="line"><a name="l00670"></a><span class="lineno">  670</span>&#160;            <a class="code" href="class_parse_action.html">ParseAction</a>(<a class="code" href="_stream_command_parser_8h.html#a21d5e8f8cdaa838586b31007df0a950ba1c73bf66bffc3067439c90f010b7b2d4">MEB</a>, <a class="code" href="class_stream_info.html#a3a49e7bc25fb6842edc8cc2d5fa95d20">read_write</a>),</div>
<div class="line"><a name="l00671"></a><span class="lineno">  671</span>&#160;            <a class="code" href="class_parse_action.html">ParseAction</a>(<a class="code" href="_stream_command_parser_8h.html#a21d5e8f8cdaa838586b31007df0a950ba9cc5f732de9ad61d2fbdc269ad8fd229">BitOr</a>, oflag, <a class="code" href="unix_2_sys_file_8hpp.html#a517ccdfde2dc2189825304291b428f42">RX_O_RDONLY</a>),</div>
<div class="line"><a name="l00672"></a><span class="lineno">  672</span>&#160;            <a class="code" href="class_parse_action.html">ParseAction</a>(<a class="code" href="_stream_command_parser_8h.html#a21d5e8f8cdaa838586b31007df0a950ba89e3d82509617a35b919da37b9cf2d7b">SetBool</a>, <a class="code" href="class_stream_info.html#a7783763d6eec22176a9dfd2f537f6506">read_only</a>, <span class="keyword">true</span>),</div>
<div class="line"><a name="l00673"></a><span class="lineno">  673</span>&#160;            <a class="code" href="class_parse_action.html">ParseAction</a>()</div>
<div class="line"><a name="l00674"></a><span class="lineno">  674</span>&#160;        };</div>
<div class="line"><a name="l00675"></a><span class="lineno">  675</span>&#160;        <a class="code" href="class_parse_action.html">ParseAction</a> OpenActionwrite[] = {</div>
<div class="line"><a name="l00676"></a><span class="lineno">  676</span>&#160;            <a class="code" href="class_parse_action.html">ParseAction</a>(<a class="code" href="_stream_command_parser_8h.html#a21d5e8f8cdaa838586b31007df0a950ba1c73bf66bffc3067439c90f010b7b2d4">MEB</a>, <a class="code" href="class_stream_info.html#a7783763d6eec22176a9dfd2f537f6506">read_only</a>),</div>
<div class="line"><a name="l00677"></a><span class="lineno">  677</span>&#160;            <a class="code" href="class_parse_action.html">ParseAction</a>(<a class="code" href="_stream_command_parser_8h.html#a21d5e8f8cdaa838586b31007df0a950ba1c73bf66bffc3067439c90f010b7b2d4">MEB</a>, <a class="code" href="class_stream_info.html#a3a49e7bc25fb6842edc8cc2d5fa95d20">read_write</a>),</div>
<div class="line"><a name="l00678"></a><span class="lineno">  678</span>&#160;            <a class="code" href="class_parse_action.html">ParseAction</a>(<a class="code" href="_stream_command_parser_8h.html#a21d5e8f8cdaa838586b31007df0a950ba9cc5f732de9ad61d2fbdc269ad8fd229">BitOr</a>, oflag, <a class="code" href="_stream_native_8cpp.html#ac582219db81802c3e505c2135e225ca6">WR_CREAT</a>),</div>
<div class="line"><a name="l00679"></a><span class="lineno">  679</span>&#160;            <a class="code" href="class_parse_action.html">ParseAction</a>(<a class="code" href="_stream_command_parser_8h.html#a21d5e8f8cdaa838586b31007df0a950ba89e3d82509617a35b919da37b9cf2d7b">SetBool</a>, <a class="code" href="class_stream_info.html#a3d4aeb7b07210713e68491c0c1370fff">write_only</a>, <span class="keyword">true</span>),</div>
<div class="line"><a name="l00680"></a><span class="lineno">  680</span>&#160;            <a class="code" href="class_parse_action.html">ParseAction</a>()</div>
<div class="line"><a name="l00681"></a><span class="lineno">  681</span>&#160;        };</div>
<div class="line"><a name="l00682"></a><span class="lineno">  682</span>&#160;        <a class="code" href="class_parse_action.html">ParseAction</a> OpenActionboth[] = {</div>
<div class="line"><a name="l00683"></a><span class="lineno">  683</span>&#160;            <a class="code" href="class_parse_action.html">ParseAction</a>(<a class="code" href="_stream_command_parser_8h.html#a21d5e8f8cdaa838586b31007df0a950ba1c73bf66bffc3067439c90f010b7b2d4">MEB</a>, <a class="code" href="class_stream_info.html#a7783763d6eec22176a9dfd2f537f6506">read_only</a>),</div>
<div class="line"><a name="l00684"></a><span class="lineno">  684</span>&#160;            <a class="code" href="class_parse_action.html">ParseAction</a>(<a class="code" href="_stream_command_parser_8h.html#a21d5e8f8cdaa838586b31007df0a950ba1c73bf66bffc3067439c90f010b7b2d4">MEB</a>, <a class="code" href="class_stream_info.html#a3d4aeb7b07210713e68491c0c1370fff">write_only</a>),</div>
<div class="line"><a name="l00685"></a><span class="lineno">  685</span>&#160;            <a class="code" href="class_parse_action.html">ParseAction</a>(<a class="code" href="_stream_command_parser_8h.html#a21d5e8f8cdaa838586b31007df0a950ba9cc5f732de9ad61d2fbdc269ad8fd229">BitOr</a>, oflag, <a class="code" href="_stream_native_8cpp.html#a08cd1913f9a5a340f426fda11f00cef5">RDWR_CREAT</a>),</div>
<div class="line"><a name="l00686"></a><span class="lineno">  686</span>&#160;            <a class="code" href="class_parse_action.html">ParseAction</a>(<a class="code" href="_stream_command_parser_8h.html#a21d5e8f8cdaa838586b31007df0a950ba89e3d82509617a35b919da37b9cf2d7b">SetBool</a>, <a class="code" href="class_stream_info.html#a3a49e7bc25fb6842edc8cc2d5fa95d20">read_write</a>, <span class="keyword">true</span>),</div>
<div class="line"><a name="l00687"></a><span class="lineno">  687</span>&#160;            <a class="code" href="class_parse_action.html">ParseAction</a>()</div>
<div class="line"><a name="l00688"></a><span class="lineno">  688</span>&#160;        };</div>
<div class="line"><a name="l00689"></a><span class="lineno">  689</span>&#160;        <a class="code" href="class_parse_action.html">ParseAction</a> OpenActionnobuffer[] = {</div>
<div class="line"><a name="l00690"></a><span class="lineno">  690</span>&#160;            <a class="code" href="class_parse_action.html">ParseAction</a>(<a class="code" href="_stream_command_parser_8h.html#a21d5e8f8cdaa838586b31007df0a950ba89e3d82509617a35b919da37b9cf2d7b">SetBool</a>, <a class="code" href="class_stream_info.html#ada2b25c7a5fc0a9c1fe9f63f432dfdd4">nobuffer</a>, <span class="keyword">true</span>),</div>
<div class="line"><a name="l00691"></a><span class="lineno">  691</span>&#160;            <a class="code" href="class_parse_action.html">ParseAction</a>()</div>
<div class="line"><a name="l00692"></a><span class="lineno">  692</span>&#160;        };</div>
<div class="line"><a name="l00693"></a><span class="lineno">  693</span>&#160;        <a class="code" href="class_parse_action.html">ParseAction</a> OpenActionbinary[] = {</div>
<div class="line"><a name="l00694"></a><span class="lineno">  694</span>&#160;            <a class="code" href="class_parse_action.html">ParseAction</a>(<a class="code" href="_stream_command_parser_8h.html#a21d5e8f8cdaa838586b31007df0a950ba1c73bf66bffc3067439c90f010b7b2d4">MEB</a>, <a class="code" href="class_stream_info.html#a4f4b3f5f598efe6f91ee45cd6aadb065">record_based</a>),</div>
<div class="line"><a name="l00695"></a><span class="lineno">  695</span>&#160;            <a class="code" href="class_parse_action.html">ParseAction</a>(<a class="code" href="_stream_command_parser_8h.html#a21d5e8f8cdaa838586b31007df0a950ba89e3d82509617a35b919da37b9cf2d7b">SetBool</a>, <a class="code" href="class_stream_info.html#a4f4b3f5f598efe6f91ee45cd6aadb065">record_based</a>, <span class="keyword">true</span>),</div>
<div class="line"><a name="l00696"></a><span class="lineno">  696</span>&#160;            <a class="code" href="class_parse_action.html">ParseAction</a>()</div>
<div class="line"><a name="l00697"></a><span class="lineno">  697</span>&#160;        };</div>
<div class="line"><a name="l00698"></a><span class="lineno">  698</span>&#160;        <a class="code" href="class_parse_action.html">ParseAction</a> OpenActionreclength[] = {</div>
<div class="line"><a name="l00699"></a><span class="lineno">  699</span>&#160;            <a class="code" href="class_parse_action.html">ParseAction</a>(<a class="code" href="_stream_command_parser_8h.html#a21d5e8f8cdaa838586b31007df0a950badd355a90ae4b9c19afc7ef69c70b3915">MIB</a>, <a class="code" href="class_stream_info.html#a4f4b3f5f598efe6f91ee45cd6aadb065">record_based</a>, <span class="keyword">true</span>),</div>
<div class="line"><a name="l00700"></a><span class="lineno">  700</span>&#160;            <a class="code" href="class_parse_action.html">ParseAction</a>(<a class="code" href="_stream_command_parser_8h.html#a21d5e8f8cdaa838586b31007df0a950ba79a143049110a823b7db1f0e289fbcbf">CallItem</a>, <a class="code" href="_stream_native_8cpp.html#aadad8d91bf46dcb0b8e74d74240fc2a6">reclength_token</a>, &amp;<a class="code" href="class_stream_info.html#a8fee3f8892f5e912d85d5a1621cdcc8a">binaryRecordLength</a>),</div>
<div class="line"><a name="l00701"></a><span class="lineno">  701</span>&#160;            <a class="code" href="class_parse_action.html">ParseAction</a>()</div>
<div class="line"><a name="l00702"></a><span class="lineno">  702</span>&#160;        };</div>
<div class="line"><a name="l00703"></a><span class="lineno">  703</span>&#160; </div>
<div class="line"><a name="l00704"></a><span class="lineno">  704</span>&#160;    <span class="comment">/* Token table for open parameters */</span></div>
<div class="line"><a name="l00705"></a><span class="lineno">  705</span>&#160;        <a class="code" href="class_token_definition.html">TokenDefinition</a> tts[] = {</div>
<div class="line"><a name="l00706"></a><span class="lineno">  706</span>&#160;            <a class="code" href="class_token_definition.html">TokenDefinition</a>(<span class="stringliteral">&quot;READ&quot;</span>,3,     OpenActionread),</div>
<div class="line"><a name="l00707"></a><span class="lineno">  707</span>&#160;            <a class="code" href="class_token_definition.html">TokenDefinition</a>(<span class="stringliteral">&quot;WRITE&quot;</span>,1,    OpenActionwrite),</div>
<div class="line"><a name="l00708"></a><span class="lineno">  708</span>&#160;            <a class="code" href="class_token_definition.html">TokenDefinition</a>(<span class="stringliteral">&quot;BOTH&quot;</span>,2,     OpenActionboth),</div>
<div class="line"><a name="l00709"></a><span class="lineno">  709</span>&#160;            <a class="code" href="class_token_definition.html">TokenDefinition</a>(<span class="stringliteral">&quot;NOBUFFER&quot;</span>,3, OpenActionnobuffer),</div>
<div class="line"><a name="l00710"></a><span class="lineno">  710</span>&#160;            <a class="code" href="class_token_definition.html">TokenDefinition</a>(<span class="stringliteral">&quot;BINARY&quot;</span>,2,   OpenActionbinary),</div>
<div class="line"><a name="l00711"></a><span class="lineno">  711</span>&#160;            <a class="code" href="class_token_definition.html">TokenDefinition</a>(<span class="stringliteral">&quot;RECLENGTH&quot;</span>,3,OpenActionreclength),</div>
<div class="line"><a name="l00712"></a><span class="lineno">  712</span>&#160;            <a class="code" href="class_token_definition.html">TokenDefinition</a>(<a class="code" href="_stream_native_8cpp.html#a8e4e356b86dac886f097bf2f4431ee79">unknown_tr</a>)</div>
<div class="line"><a name="l00713"></a><span class="lineno">  713</span>&#160;        };</div>
<div class="line"><a name="l00714"></a><span class="lineno">  714</span>&#160;        <span class="comment">/* call the parser to setup the input information */</span></div>
<div class="line"><a name="l00715"></a><span class="lineno">  715</span>&#160;        <span class="comment">/* the input string should be upper cased         */</span></div>
<div class="line"><a name="l00716"></a><span class="lineno">  716</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="_stream_command_parser_8h.html#ae192d5327e15853dda973ca14ebb72e3">parser</a>(tts, options, NULL) != 0)</div>
<div class="line"><a name="l00717"></a><span class="lineno">  717</span>&#160;        {</div>
<div class="line"><a name="l00718"></a><span class="lineno">  718</span>&#160;            <a class="code" href="class_stream_info.html#abf80be8acced099814a34b375353c2e3">raiseException</a>(<a class="code" href="oorexxerrors_8h.html#a43f122d08b1e4bd67b6f301029f72599">Rexx_Error_Incorrect_method</a>);</div>
<div class="line"><a name="l00719"></a><span class="lineno">  719</span>&#160;        }</div>
<div class="line"><a name="l00720"></a><span class="lineno">  720</span>&#160;    }</div>
<div class="line"><a name="l00721"></a><span class="lineno">  721</span>&#160; </div>
<div class="line"><a name="l00722"></a><span class="lineno">  722</span>&#160;<span class="comment">/********************************************************************************************/</span></div>
<div class="line"><a name="l00723"></a><span class="lineno">  723</span>&#160;<span class="comment">/*          if it is a persistant stream put the write character pointer at the end         */</span></div>
<div class="line"><a name="l00724"></a><span class="lineno">  724</span>&#160;<span class="comment">/*   need to check if the last character is end of file and if so write over it             */</span></div>
<div class="line"><a name="l00725"></a><span class="lineno">  725</span>&#160;<span class="comment">/*   if the stream was created it will have a size of 0 but this will mess up the logic     */</span></div>
<div class="line"><a name="l00726"></a><span class="lineno">  726</span>&#160;<span class="comment">/*          so set it to one                                                                */</span></div>
<div class="line"><a name="l00727"></a><span class="lineno">  727</span>&#160;<span class="comment">/********************************************************************************************/</span></div>
<div class="line"><a name="l00728"></a><span class="lineno">  728</span>&#160; </div>
<div class="line"><a name="l00729"></a><span class="lineno">  729</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="class_stream_info.html#a35caea85b14b8f2b8b734c3b51eb7f4b">fileInfo</a>.<a class="code" href="class_sys_file.html#adfa0d4b71f91895b75ccb2347c42eb0f">isTransient</a>() &amp;&amp; (<a class="code" href="class_stream_info.html#a3d4aeb7b07210713e68491c0c1370fff">write_only</a> | <a class="code" href="class_stream_info.html#a3a49e7bc25fb6842edc8cc2d5fa95d20">read_write</a>))</div>
<div class="line"><a name="l00730"></a><span class="lineno">  730</span>&#160;    {</div>
<div class="line"><a name="l00731"></a><span class="lineno">  731</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="class_stream_info.html#af21ad8877a6411a69e033790ac94b299">size</a>() &gt; 0)</div>
<div class="line"><a name="l00732"></a><span class="lineno">  732</span>&#160;        {</div>
<div class="line"><a name="l00733"></a><span class="lineno">  733</span>&#160;            <span class="comment">// if the stream is persistent, check the end position to see</span></div>
<div class="line"><a name="l00734"></a><span class="lineno">  734</span>&#160;            <span class="comment">// if there is an eof marker.  If there is, position to overwrite the</span></div>
<div class="line"><a name="l00735"></a><span class="lineno">  735</span>&#160;            <span class="comment">// eof character.</span></div>
<div class="line"><a name="l00736"></a><span class="lineno">  736</span>&#160;            <span class="comment">// position at the end, and set the write position</span></div>
<div class="line"><a name="l00737"></a><span class="lineno">  737</span>&#160;            <a class="code" href="class_stream_info.html#acd9fe6516d390ecca12931ae2c1d7d20">setPosition</a>(<a class="code" href="class_stream_info.html#af21ad8877a6411a69e033790ac94b299">size</a>(), <a class="code" href="class_stream_info.html#a0ae0ea0f4fcc555c87d7e9be88bea96c">charWritePosition</a>);</div>
<div class="line"><a name="l00738"></a><span class="lineno">  738</span>&#160; </div>
<div class="line"><a name="l00739"></a><span class="lineno">  739</span>&#160;            <span class="keywordtype">char</span>   char_buffer = <span class="charliteral">&#39; &#39;</span>;</div>
<div class="line"><a name="l00740"></a><span class="lineno">  740</span>&#160;            <span class="keywordtype">size_t</span> bytesRead;</div>
<div class="line"><a name="l00741"></a><span class="lineno">  741</span>&#160;            <span class="comment">// read the last character of the buffer.</span></div>
<div class="line"><a name="l00742"></a><span class="lineno">  742</span>&#160;            <span class="comment">// we don&#39;t call readBuffer() for this because it</span></div>
<div class="line"><a name="l00743"></a><span class="lineno">  743</span>&#160;            <span class="comment">// moves the read pointer</span></div>
<div class="line"><a name="l00744"></a><span class="lineno">  744</span>&#160;            <span class="keywordflow">if</span> (!<a class="code" href="class_stream_info.html#a35caea85b14b8f2b8b734c3b51eb7f4b">fileInfo</a>.<a class="code" href="class_sys_file.html#ab96591dd7cfa1192a49c99eb8ab3ce9a">read</a>(&amp;char_buffer, 1, bytesRead))</div>
<div class="line"><a name="l00745"></a><span class="lineno">  745</span>&#160;            {</div>
<div class="line"><a name="l00746"></a><span class="lineno">  746</span>&#160;                <span class="keywordflow">if</span> (!<a class="code" href="class_stream_info.html#a3d4aeb7b07210713e68491c0c1370fff">write_only</a>) <a class="code" href="class_stream_info.html#a6f99538562048386f872fb1843462267">notreadyError</a>();</div>
<div class="line"><a name="l00747"></a><span class="lineno">  747</span>&#160;            }</div>
<div class="line"><a name="l00748"></a><span class="lineno">  748</span>&#160; </div>
<div class="line"><a name="l00749"></a><span class="lineno">  749</span>&#160;            <span class="comment">// if the last character is not a ctrl_z, we need to</span></div>
<div class="line"><a name="l00750"></a><span class="lineno">  750</span>&#160;            <span class="comment">// step past it.</span></div>
<div class="line"><a name="l00751"></a><span class="lineno">  751</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="_source_file_8cpp.html#a4aa83818e72d390465aa1549d66a09c1">ctrl_z</a> != char_buffer)</div>
<div class="line"><a name="l00752"></a><span class="lineno">  752</span>&#160;            {</div>
<div class="line"><a name="l00753"></a><span class="lineno">  753</span>&#160;                <a class="code" href="class_stream_info.html#a0ae0ea0f4fcc555c87d7e9be88bea96c">charWritePosition</a>++;</div>
<div class="line"><a name="l00754"></a><span class="lineno">  754</span>&#160;                <span class="comment">/* error on Windows so we had to put in that */</span></div>
<div class="line"><a name="l00755"></a><span class="lineno">  755</span>&#160;                <span class="comment">/* explicitly set the position       */</span></div>
<div class="line"><a name="l00756"></a><span class="lineno">  756</span>&#160;                <a class="code" href="class_stream_info.html#acd9fe6516d390ecca12931ae2c1d7d20">setPosition</a>(<a class="code" href="class_stream_info.html#a0ae0ea0f4fcc555c87d7e9be88bea96c">charWritePosition</a>, <a class="code" href="class_stream_info.html#a0ae0ea0f4fcc555c87d7e9be88bea96c">charWritePosition</a>);</div>
<div class="line"><a name="l00757"></a><span class="lineno">  757</span>&#160;            }</div>
<div class="line"><a name="l00758"></a><span class="lineno">  758</span>&#160;        }</div>
<div class="line"><a name="l00759"></a><span class="lineno">  759</span>&#160;        <a class="code" href="class_stream_info.html#ac180477faedf3ab1f5f37376d545e916">lineWritePosition</a> = 0;</div>
<div class="line"><a name="l00760"></a><span class="lineno">  760</span>&#160;        <a class="code" href="class_stream_info.html#a520c92ac8d0d8c97c36fccdfdacb2c68">lineWriteCharPosition</a> = 0;</div>
<div class="line"><a name="l00761"></a><span class="lineno">  761</span>&#160;    }</div>
<div class="line"><a name="l00762"></a><span class="lineno">  762</span>&#160;    <span class="comment">// ready to go here</span></div>
<div class="line"><a name="l00763"></a><span class="lineno">  763</span>&#160;    <a class="code" href="class_stream_info.html#a69bc9580bb2e54426801fe6fca59c98e">isopen</a> = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00764"></a><span class="lineno">  764</span>&#160;    <a class="code" href="class_stream_info.html#ab0c6d380b9704b6e305f881fc9fa1571">state</a> = <a class="code" href="class_stream_info.html#af8efe21cc9cb6d8da73907c4b6f573f7a4f89da370429a424003f1dc56d72526e">StreamReady</a>;</div>
<div class="line"><a name="l00765"></a><span class="lineno">  765</span>&#160;    <span class="comment">/* go process the stream type        */</span></div>
<div class="line"><a name="l00766"></a><span class="lineno">  766</span>&#160;    <a class="code" href="class_stream_info.html#a0039dd0ef9744576161528c01ab9061b">checkStreamType</a>();</div>
<div class="line"><a name="l00767"></a><span class="lineno">  767</span>&#160;    <span class="keywordflow">return</span> <span class="stringliteral">&quot;READY:&quot;</span>;                    <span class="comment">/* return success                    */</span></div>
<div class="line"><a name="l00768"></a><span class="lineno">  768</span>&#160;}</div>
<div class="line"><a name="l00769"></a><span class="lineno">  769</span>&#160; </div>
<div class="line"><a name="l00770"></a><span class="lineno">  770</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00771"></a><span class="lineno">  771</span>&#160;<span class="comment">/**</span></div>
<div class="line"><a name="l00772"></a><span class="lineno">  772</span>&#160;<span class="comment"> * Reinitialize the stream fields to default values.</span></div>
<div class="line"><a name="l00773"></a><span class="lineno">  773</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l00774"></a><span class="lineno"><a class="line" href="class_stream_info.html#a0a8b2d8b6be32314f2b5ee4013bab4a3">  774</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="class_stream_info.html#a0a8b2d8b6be32314f2b5ee4013bab4a3">StreamInfo::resetFields</a>()</div>
<div class="line"><a name="l00775"></a><span class="lineno">  775</span>&#160;{</div>
<div class="line"><a name="l00776"></a><span class="lineno">  776</span>&#160;    <span class="comment">// initialize the stream info</span></div>
<div class="line"><a name="l00777"></a><span class="lineno">  777</span>&#160;    <span class="comment">//  in case this is not the first</span></div>
<div class="line"><a name="l00778"></a><span class="lineno">  778</span>&#160;    <span class="comment">// open for this stream</span></div>
<div class="line"><a name="l00779"></a><span class="lineno">  779</span>&#160;    strcpy(<a class="code" href="class_stream_info.html#aa1824fb879c522d827a4c16dd2ff5ae4">qualified_name</a>, <span class="stringliteral">&quot;\0&quot;</span>);</div>
<div class="line"><a name="l00780"></a><span class="lineno">  780</span>&#160;    <a class="code" href="class_stream_info.html#a35caea85b14b8f2b8b734c3b51eb7f4b">fileInfo</a>.<a class="code" href="class_sys_file.html#afc799bb3c9bcb7a727bbbbf84d58d7f0">reset</a>();</div>
<div class="line"><a name="l00781"></a><span class="lineno">  781</span>&#160;    <a class="code" href="class_stream_info.html#ac4e90641d1e2c5b6a30b512e37a7458c">stream_line_size</a> = 0;</div>
<div class="line"><a name="l00782"></a><span class="lineno">  782</span>&#160;    <a class="code" href="class_stream_info.html#a8fee3f8892f5e912d85d5a1621cdcc8a">binaryRecordLength</a> = 0;</div>
<div class="line"><a name="l00783"></a><span class="lineno">  783</span>&#160;    <a class="code" href="class_stream_info.html#a7783763d6eec22176a9dfd2f537f6506">read_only</a> = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00784"></a><span class="lineno">  784</span>&#160;    <a class="code" href="class_stream_info.html#a3d4aeb7b07210713e68491c0c1370fff">write_only</a> = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00785"></a><span class="lineno">  785</span>&#160;    <a class="code" href="class_stream_info.html#a3a49e7bc25fb6842edc8cc2d5fa95d20">read_write</a> = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00786"></a><span class="lineno">  786</span>&#160;    <a class="code" href="class_stream_info.html#ae8d7e2c837a87802e9f1b4c73117003c">stdstream</a> = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00787"></a><span class="lineno">  787</span>&#160;    <a class="code" href="class_stream_info.html#ae5d69a23a83ae44083babca8913b9295">append</a> = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00788"></a><span class="lineno">  788</span>&#160;    <a class="code" href="class_stream_info.html#a5f60cee21e71f36ba5126026cb3401f6">opened_as_handle</a> = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00789"></a><span class="lineno">  789</span>&#160;    <a class="code" href="class_stream_info.html#a7c85128d9aed9f7c648206ad364fb80c">charReadPosition</a> = 1;</div>
<div class="line"><a name="l00790"></a><span class="lineno">  790</span>&#160;    <a class="code" href="class_stream_info.html#a0ae0ea0f4fcc555c87d7e9be88bea96c">charWritePosition</a> = 1;</div>
<div class="line"><a name="l00791"></a><span class="lineno">  791</span>&#160;    <a class="code" href="class_stream_info.html#a08f5a0d7420eceed7503fce2d5b0917b">lineReadPosition</a> = 1;</div>
<div class="line"><a name="l00792"></a><span class="lineno">  792</span>&#160;    <a class="code" href="class_stream_info.html#ac180477faedf3ab1f5f37376d545e916">lineWritePosition</a> = 1;</div>
<div class="line"><a name="l00793"></a><span class="lineno">  793</span>&#160;    <a class="code" href="class_stream_info.html#a44ecba6621790a306f4c08ee99af5e48">lineReadCharPosition</a> = 1;</div>
<div class="line"><a name="l00794"></a><span class="lineno">  794</span>&#160;    <a class="code" href="class_stream_info.html#a520c92ac8d0d8c97c36fccdfdacb2c68">lineWriteCharPosition</a> = 1;</div>
<div class="line"><a name="l00795"></a><span class="lineno">  795</span>&#160;    <a class="code" href="class_stream_info.html#ada2b25c7a5fc0a9c1fe9f63f432dfdd4">nobuffer</a> = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00796"></a><span class="lineno">  796</span>&#160;    <a class="code" href="class_stream_info.html#ad07a90a21f1116a83b681e8f1e966986">last_op_was_read</a> = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00797"></a><span class="lineno">  797</span>&#160;    <span class="keyword">transient</span> = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00798"></a><span class="lineno">  798</span>&#160;    <a class="code" href="class_stream_info.html#a4f4b3f5f598efe6f91ee45cd6aadb065">record_based</a> = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00799"></a><span class="lineno">  799</span>&#160;    <a class="code" href="class_stream_info.html#a69bc9580bb2e54426801fe6fca59c98e">isopen</a> = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00800"></a><span class="lineno">  800</span>&#160;    <span class="comment">// NB:  defaultResult is NOT automatically cleared.  Individual stream methods might</span></div>
<div class="line"><a name="l00801"></a><span class="lineno">  801</span>&#160;    <span class="comment">// set this to a default return value before an implicit open operation takes place,</span></div>
<div class="line"><a name="l00802"></a><span class="lineno">  802</span>&#160;    <span class="comment">// so clearing this will munge the expected return value.</span></div>
<div class="line"><a name="l00803"></a><span class="lineno">  803</span>&#160;<span class="comment">//    defaultResult = NULL;</span></div>
<div class="line"><a name="l00804"></a><span class="lineno">  804</span>&#160;}</div>
<div class="line"><a name="l00805"></a><span class="lineno">  805</span>&#160; </div>
<div class="line"><a name="l00806"></a><span class="lineno">  806</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00807"></a><span class="lineno">  807</span>&#160;<span class="comment">/**</span></div>
<div class="line"><a name="l00808"></a><span class="lineno">  808</span>&#160;<span class="comment"> * Do an implicit open of the stream...this fully parses</span></div>
<div class="line"><a name="l00809"></a><span class="lineno">  809</span>&#160;<span class="comment"> * the information to sort out how the open needs to proceed.</span></div>
<div class="line"><a name="l00810"></a><span class="lineno">  810</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00811"></a><span class="lineno">  811</span>&#160;<span class="comment"> * @param type    The type of open operation.</span></div>
<div class="line"><a name="l00812"></a><span class="lineno">  812</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l00813"></a><span class="lineno"><a class="line" href="class_stream_info.html#a327c44fa31870eeee0ceffca3ea7f006">  813</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="class_stream_info.html#a327c44fa31870eeee0ceffca3ea7f006">StreamInfo::implicitOpen</a>(<span class="keywordtype">int</span> <a class="code" href="cmdparse_8cpp.html#ac765329451135abec74c45e1897abf26">type</a>)</div>
<div class="line"><a name="l00814"></a><span class="lineno">  814</span>&#160;{</div>
<div class="line"><a name="l00815"></a><span class="lineno">  815</span>&#160;    <span class="comment">// is this one of the standard streams?</span></div>
<div class="line"><a name="l00816"></a><span class="lineno">  816</span>&#160;    <span class="comment">// those have their own special open process.</span></div>
<div class="line"><a name="l00817"></a><span class="lineno">  817</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="class_stream_info.html#ae8d7e2c837a87802e9f1b4c73117003c">stdstream</a>)</div>
<div class="line"><a name="l00818"></a><span class="lineno">  818</span>&#160;    {</div>
<div class="line"><a name="l00819"></a><span class="lineno">  819</span>&#160;        <a class="code" href="class_stream_info.html#a9d9fb2a06b11c9e3d1430e46e0817dd7">openStd</a>(NULL);</div>
<div class="line"><a name="l00820"></a><span class="lineno">  820</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00821"></a><span class="lineno">  821</span>&#160;    }</div>
<div class="line"><a name="l00822"></a><span class="lineno">  822</span>&#160;    <span class="comment">// this could be a directly provided handle</span></div>
<div class="line"><a name="l00823"></a><span class="lineno">  823</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="class_stream_info.html#a5f60cee21e71f36ba5126026cb3401f6">opened_as_handle</a>)</div>
<div class="line"><a name="l00824"></a><span class="lineno">  824</span>&#160;    {</div>
<div class="line"><a name="l00825"></a><span class="lineno">  825</span>&#160;        <a class="code" href="class_stream_info.html#a734bb28c3531a07f32c04bc60a920449">handleOpen</a>(NULL);</div>
<div class="line"><a name="l00826"></a><span class="lineno">  826</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00827"></a><span class="lineno">  827</span>&#160;    }</div>
<div class="line"><a name="l00828"></a><span class="lineno">  828</span>&#160; </div>
<div class="line"><a name="l00829"></a><span class="lineno">  829</span>&#160;    <span class="comment">// reset everything to the default.</span></div>
<div class="line"><a name="l00830"></a><span class="lineno">  830</span>&#160;    <a class="code" href="class_stream_info.html#a0a8b2d8b6be32314f2b5ee4013bab4a3">resetFields</a>();</div>
<div class="line"><a name="l00831"></a><span class="lineno">  831</span>&#160; </div>
<div class="line"><a name="l00832"></a><span class="lineno">  832</span>&#160;    <span class="comment">// get the fully qualified name</span></div>
<div class="line"><a name="l00833"></a><span class="lineno">  833</span>&#160;    <a class="code" href="class_stream_info.html#a031ca794b8ef189757f1e034e8d0d122">resolveStreamName</a>();</div>
<div class="line"><a name="l00834"></a><span class="lineno">  834</span>&#160; </div>
<div class="line"><a name="l00835"></a><span class="lineno">  835</span>&#160;    <span class="comment">// first try for read/write and open file without create if specified</span></div>
<div class="line"><a name="l00836"></a><span class="lineno">  836</span>&#160;    <span class="comment">// If this is an implicit open, try to open for shared readwrite, otherwise</span></div>
<div class="line"><a name="l00837"></a><span class="lineno">  837</span>&#160;    <span class="comment">// we&#39;ll break the stream BIFs with nested calls.</span></div>
<div class="line"><a name="l00838"></a><span class="lineno">  838</span>&#160;    <a class="code" href="class_stream_info.html#a3a49e7bc25fb6842edc8cc2d5fa95d20">read_write</a> = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00839"></a><span class="lineno">  839</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="cmdparse_8cpp.html#ac765329451135abec74c45e1897abf26">type</a> == <a class="code" href="_stream_native_8cpp.html#a4279da1660023acc95b42250b2e613ca">operation_nocreate</a>)</div>
<div class="line"><a name="l00840"></a><span class="lineno">  840</span>&#160;    {</div>
<div class="line"><a name="l00841"></a><span class="lineno">  841</span>&#160;        <a class="code" href="class_stream_info.html#a183f102dcfac11bbbbf5dd8df2e39e7a">open</a>(<a class="code" href="unix_2_sys_file_8hpp.html#a52219ba0434d2d6649628fc9c1dc8969">RX_O_RDWR</a>, <a class="code" href="_stream_native_8cpp.html#a353d1c9fc19fe1dc044744c05df8dc9c">IREAD_IWRITE</a>, <a class="code" href="unix_2_sys_file_8hpp.html#a5d6a52000f2d86a1583eeb84cea9cd16">RX_SH_DENYWR</a>);</div>
<div class="line"><a name="l00842"></a><span class="lineno">  842</span>&#160;    }</div>
<div class="line"><a name="l00843"></a><span class="lineno">  843</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l00844"></a><span class="lineno">  844</span>&#160;    {</div>
<div class="line"><a name="l00845"></a><span class="lineno">  845</span>&#160;        <a class="code" href="class_stream_info.html#a183f102dcfac11bbbbf5dd8df2e39e7a">open</a>(<a class="code" href="_stream_native_8cpp.html#a08cd1913f9a5a340f426fda11f00cef5">RDWR_CREAT</a>, <a class="code" href="_stream_native_8cpp.html#a353d1c9fc19fe1dc044744c05df8dc9c">IREAD_IWRITE</a>, <a class="code" href="unix_2_sys_file_8hpp.html#a5d6a52000f2d86a1583eeb84cea9cd16">RX_SH_DENYWR</a>);</div>
<div class="line"><a name="l00846"></a><span class="lineno">  846</span>&#160;    }</div>
<div class="line"><a name="l00847"></a><span class="lineno">  847</span>&#160; </div>
<div class="line"><a name="l00848"></a><span class="lineno">  848</span>&#160;    <span class="comment">// if there was an open error and we have the info to try again - doit</span></div>
<div class="line"><a name="l00849"></a><span class="lineno">  849</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="class_stream_info.html#a35caea85b14b8f2b8b734c3b51eb7f4b">fileInfo</a>.<a class="code" href="class_sys_file.html#afd36518b797efed0477e9ae15cec65e6">isOpen</a>())</div>
<div class="line"><a name="l00850"></a><span class="lineno">  850</span>&#160;    {</div>
<div class="line"><a name="l00851"></a><span class="lineno">  851</span>&#160;        <span class="comment">// turn off the read/write flag and try opening as write only or read</span></div>
<div class="line"><a name="l00852"></a><span class="lineno">  852</span>&#160;        <span class="comment">// only, depending on the type specified.  Also, be sure and clear</span></div>
<div class="line"><a name="l00853"></a><span class="lineno">  853</span>&#160;        <span class="comment">// errors, otherwise the reason for this implicit open, such as</span></div>
<div class="line"><a name="l00854"></a><span class="lineno">  854</span>&#160;        <span class="comment">// linein(), will fail.</span></div>
<div class="line"><a name="l00855"></a><span class="lineno">  855</span>&#160;        <a class="code" href="class_stream_info.html#a3a49e7bc25fb6842edc8cc2d5fa95d20">read_write</a> = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00856"></a><span class="lineno">  856</span>&#160;        <a class="code" href="class_stream_info.html#a35caea85b14b8f2b8b734c3b51eb7f4b">fileInfo</a>.<a class="code" href="class_sys_file.html#a0c81c32e9f82071be0d1cb57ccd064c8">clearErrors</a>();</div>
<div class="line"><a name="l00857"></a><span class="lineno">  857</span>&#160; </div>
<div class="line"><a name="l00858"></a><span class="lineno">  858</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="cmdparse_8cpp.html#ac765329451135abec74c45e1897abf26">type</a> == <a class="code" href="_stream_native_8cpp.html#ad4b70af3448dc43aedf984ad0d5aa710">operation_write</a>)</div>
<div class="line"><a name="l00859"></a><span class="lineno">  859</span>&#160;        {</div>
<div class="line"><a name="l00860"></a><span class="lineno">  860</span>&#160;            <span class="comment">// In Windows, all files are readable. Therefore S_IWRITE is</span></div>
<div class="line"><a name="l00861"></a><span class="lineno">  861</span>&#160;            <span class="comment">// equivalent to S_IREAD | S_IWRITE.</span></div>
<div class="line"><a name="l00862"></a><span class="lineno">  862</span>&#160;            <a class="code" href="class_stream_info.html#a183f102dcfac11bbbbf5dd8df2e39e7a">open</a>(<a class="code" href="unix_2_sys_file_8hpp.html#a0e47e78ccdf29e3dcafec74bab8695a1">RX_O_WRONLY</a>, <a class="code" href="_stream_native_8cpp.html#a353d1c9fc19fe1dc044744c05df8dc9c">IREAD_IWRITE</a>, <a class="code" href="unix_2_sys_file_8hpp.html#a5d6a52000f2d86a1583eeb84cea9cd16">RX_SH_DENYWR</a>);</div>
<div class="line"><a name="l00863"></a><span class="lineno">  863</span>&#160;            <a class="code" href="class_stream_info.html#a3d4aeb7b07210713e68491c0c1370fff">write_only</a> = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00864"></a><span class="lineno">  864</span>&#160;        }</div>
<div class="line"><a name="l00865"></a><span class="lineno">  865</span>&#160;        <span class="keywordflow">else</span></div>
<div class="line"><a name="l00866"></a><span class="lineno">  866</span>&#160;        {</div>
<div class="line"><a name="l00867"></a><span class="lineno">  867</span>&#160;            <a class="code" href="class_stream_info.html#a183f102dcfac11bbbbf5dd8df2e39e7a">open</a>(<a class="code" href="unix_2_sys_file_8hpp.html#a517ccdfde2dc2189825304291b428f42">RX_O_RDONLY</a>, <a class="code" href="unix_2_sys_file_8hpp.html#a4c7585605dc0ab0ed2730a48d4e63f51">RX_S_IREAD</a>, <a class="code" href="unix_2_sys_file_8hpp.html#a5d6a52000f2d86a1583eeb84cea9cd16">RX_SH_DENYWR</a>);</div>
<div class="line"><a name="l00868"></a><span class="lineno">  868</span>&#160;            <a class="code" href="class_stream_info.html#a7783763d6eec22176a9dfd2f537f6506">read_only</a> = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00869"></a><span class="lineno">  869</span>&#160;        }</div>
<div class="line"><a name="l00870"></a><span class="lineno">  870</span>&#160; </div>
<div class="line"><a name="l00871"></a><span class="lineno">  871</span>&#160;        <span class="comment">// if there still was an error, raise notready condition</span></div>
<div class="line"><a name="l00872"></a><span class="lineno">  872</span>&#160;        <span class="keywordflow">if</span> (!<a class="code" href="class_stream_info.html#a35caea85b14b8f2b8b734c3b51eb7f4b">fileInfo</a>.<a class="code" href="class_sys_file.html#afd36518b797efed0477e9ae15cec65e6">isOpen</a>())</div>
<div class="line"><a name="l00873"></a><span class="lineno">  873</span>&#160;        {</div>
<div class="line"><a name="l00874"></a><span class="lineno">  874</span>&#160;            <span class="comment">// if no result given, format the error return</span></div>
<div class="line"><a name="l00875"></a><span class="lineno">  875</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="class_stream_info.html#a825f1cc4635482e2dbd7c1166532ee54">defaultResult</a> == <a class="code" href="rexx_8h.html#a9a119fa1e31a4af78dee3c12225b240a">NULLOBJECT</a>)</div>
<div class="line"><a name="l00876"></a><span class="lineno">  876</span>&#160;            {</div>
<div class="line"><a name="l00877"></a><span class="lineno">  877</span>&#160;                <span class="keywordtype">char</span> <a class="code" href="unix_2rxqueue_8cpp.html#a2edfdad12ca19a7c81c5cf054cd2a12f">work</a>[30];</div>
<div class="line"><a name="l00878"></a><span class="lineno">  878</span>&#160;                sprintf(<a class="code" href="unix_2rxqueue_8cpp.html#a2edfdad12ca19a7c81c5cf054cd2a12f">work</a>, <span class="stringliteral">&quot;ERROR:%d&quot;</span>, <a class="code" href="class_stream_info.html#a35caea85b14b8f2b8b734c3b51eb7f4b">fileInfo</a>.<a class="code" href="class_sys_file.html#a0ccd495349312394f088f7716515a78e">errorInfo</a>());</div>
<div class="line"><a name="l00879"></a><span class="lineno">  879</span>&#160;                <a class="code" href="class_stream_info.html#a825f1cc4635482e2dbd7c1166532ee54">defaultResult</a> = <a class="code" href="class_stream_info.html#a6a5404d4b7ece722baef78b65cab52d2">context</a>-&gt;NewStringFromAsciiz(<a class="code" href="unix_2rxqueue_8cpp.html#a2edfdad12ca19a7c81c5cf054cd2a12f">work</a>);</div>
<div class="line"><a name="l00880"></a><span class="lineno">  880</span>&#160;            }</div>
<div class="line"><a name="l00881"></a><span class="lineno">  881</span>&#160;            <a class="code" href="class_stream_info.html#a6f99538562048386f872fb1843462267">notreadyError</a>();</div>
<div class="line"><a name="l00882"></a><span class="lineno">  882</span>&#160;            <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00883"></a><span class="lineno">  883</span>&#160;        }</div>
<div class="line"><a name="l00884"></a><span class="lineno">  884</span>&#160;    }</div>
<div class="line"><a name="l00885"></a><span class="lineno">  885</span>&#160;    <span class="comment">// ready to go...positioning the stream will attempt an implicit open</span></div>
<div class="line"><a name="l00886"></a><span class="lineno">  886</span>&#160;    <span class="comment">// if this is not on, so flip it now before doing the remainder of the</span></div>
<div class="line"><a name="l00887"></a><span class="lineno">  887</span>&#160;    <span class="comment">// operations.</span></div>
<div class="line"><a name="l00888"></a><span class="lineno">  888</span>&#160;    <a class="code" href="class_stream_info.html#a69bc9580bb2e54426801fe6fca59c98e">isopen</a> = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00889"></a><span class="lineno">  889</span>&#160; </div>
<div class="line"><a name="l00890"></a><span class="lineno">  890</span>&#160;    <span class="comment">// persistent writeable stream?</span></div>
<div class="line"><a name="l00891"></a><span class="lineno">  891</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="class_stream_info.html#a35caea85b14b8f2b8b734c3b51eb7f4b">fileInfo</a>.<a class="code" href="class_sys_file.html#adfa0d4b71f91895b75ccb2347c42eb0f">isTransient</a>() &amp;&amp; !<a class="code" href="class_stream_info.html#a7783763d6eec22176a9dfd2f537f6506">read_only</a>)</div>
<div class="line"><a name="l00892"></a><span class="lineno">  892</span>&#160;    {</div>
<div class="line"><a name="l00893"></a><span class="lineno">  893</span>&#160;        <span class="comment">// if the stream already exists, so we need to</span></div>
<div class="line"><a name="l00894"></a><span class="lineno">  894</span>&#160;        <span class="comment">// see if there is a terminationg eof marker.</span></div>
<div class="line"><a name="l00895"></a><span class="lineno">  895</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="class_stream_info.html#af21ad8877a6411a69e033790ac94b299">size</a>() &gt; 0)</div>
<div class="line"><a name="l00896"></a><span class="lineno">  896</span>&#160;        {</div>
<div class="line"><a name="l00897"></a><span class="lineno">  897</span>&#160;            <span class="comment">// position at the end, and set the write position</span></div>
<div class="line"><a name="l00898"></a><span class="lineno">  898</span>&#160;            <a class="code" href="class_stream_info.html#acd9fe6516d390ecca12931ae2c1d7d20">setPosition</a>(<a class="code" href="class_stream_info.html#af21ad8877a6411a69e033790ac94b299">size</a>(), <a class="code" href="class_stream_info.html#a0ae0ea0f4fcc555c87d7e9be88bea96c">charWritePosition</a>);</div>
<div class="line"><a name="l00899"></a><span class="lineno">  899</span>&#160; </div>
<div class="line"><a name="l00900"></a><span class="lineno">  900</span>&#160;            <span class="keywordtype">char</span>   char_buffer = <span class="charliteral">&#39; &#39;</span>;</div>
<div class="line"><a name="l00901"></a><span class="lineno">  901</span>&#160;            <span class="keywordtype">size_t</span> bytesRead;</div>
<div class="line"><a name="l00902"></a><span class="lineno">  902</span>&#160;            <span class="comment">// read the last character of the buffer.</span></div>
<div class="line"><a name="l00903"></a><span class="lineno">  903</span>&#160;            <span class="comment">// we don&#39;t call readBuffer() for this because it</span></div>
<div class="line"><a name="l00904"></a><span class="lineno">  904</span>&#160;            <span class="comment">// moves the read pointer</span></div>
<div class="line"><a name="l00905"></a><span class="lineno">  905</span>&#160;            <span class="keywordflow">if</span> (!<a class="code" href="class_stream_info.html#a35caea85b14b8f2b8b734c3b51eb7f4b">fileInfo</a>.<a class="code" href="class_sys_file.html#ab96591dd7cfa1192a49c99eb8ab3ce9a">read</a>(&amp;char_buffer, 1, bytesRead))</div>
<div class="line"><a name="l00906"></a><span class="lineno">  906</span>&#160;            {</div>
<div class="line"><a name="l00907"></a><span class="lineno">  907</span>&#160;                <span class="keywordflow">if</span> (!<a class="code" href="class_stream_info.html#a3d4aeb7b07210713e68491c0c1370fff">write_only</a>) <a class="code" href="class_stream_info.html#a6f99538562048386f872fb1843462267">notreadyError</a>();</div>
<div class="line"><a name="l00908"></a><span class="lineno">  908</span>&#160;            }</div>
<div class="line"><a name="l00909"></a><span class="lineno">  909</span>&#160; </div>
<div class="line"><a name="l00910"></a><span class="lineno">  910</span>&#160;            <span class="comment">// if the last character is not a ctrl_z, we need to</span></div>
<div class="line"><a name="l00911"></a><span class="lineno">  911</span>&#160;            <span class="comment">// step past it.</span></div>
<div class="line"><a name="l00912"></a><span class="lineno">  912</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="_source_file_8cpp.html#a4aa83818e72d390465aa1549d66a09c1">ctrl_z</a> != char_buffer)</div>
<div class="line"><a name="l00913"></a><span class="lineno">  913</span>&#160;            {</div>
<div class="line"><a name="l00914"></a><span class="lineno">  914</span>&#160;                <a class="code" href="class_stream_info.html#a0ae0ea0f4fcc555c87d7e9be88bea96c">charWritePosition</a>++;</div>
<div class="line"><a name="l00915"></a><span class="lineno">  915</span>&#160;                <span class="comment">/* error on Windows so we had to put in that */</span></div>
<div class="line"><a name="l00916"></a><span class="lineno">  916</span>&#160;                <span class="comment">/* explicitly set the position       */</span></div>
<div class="line"><a name="l00917"></a><span class="lineno">  917</span>&#160;                <a class="code" href="class_stream_info.html#acd9fe6516d390ecca12931ae2c1d7d20">setPosition</a>(<a class="code" href="class_stream_info.html#a0ae0ea0f4fcc555c87d7e9be88bea96c">charWritePosition</a>, <a class="code" href="class_stream_info.html#a0ae0ea0f4fcc555c87d7e9be88bea96c">charWritePosition</a>);</div>
<div class="line"><a name="l00918"></a><span class="lineno">  918</span>&#160;            }</div>
<div class="line"><a name="l00919"></a><span class="lineno">  919</span>&#160;        }</div>
<div class="line"><a name="l00920"></a><span class="lineno">  920</span>&#160;        <span class="comment">// set default line positioning</span></div>
<div class="line"><a name="l00921"></a><span class="lineno">  921</span>&#160;        <a class="code" href="class_stream_info.html#ac180477faedf3ab1f5f37376d545e916">lineWritePosition</a> = 0;</div>
<div class="line"><a name="l00922"></a><span class="lineno">  922</span>&#160;        <a class="code" href="class_stream_info.html#a520c92ac8d0d8c97c36fccdfdacb2c68">lineWriteCharPosition</a> = 0;</div>
<div class="line"><a name="l00923"></a><span class="lineno">  923</span>&#160;    }</div>
<div class="line"><a name="l00924"></a><span class="lineno">  924</span>&#160;    <a class="code" href="class_stream_info.html#ab0c6d380b9704b6e305f881fc9fa1571">state</a> = <a class="code" href="class_stream_info.html#af8efe21cc9cb6d8da73907c4b6f573f7a4f89da370429a424003f1dc56d72526e">StreamReady</a>;</div>
<div class="line"><a name="l00925"></a><span class="lineno">  925</span>&#160; </div>
<div class="line"><a name="l00926"></a><span class="lineno">  926</span>&#160;    <span class="comment">// go process the stream type</span></div>
<div class="line"><a name="l00927"></a><span class="lineno">  927</span>&#160;    <a class="code" href="class_stream_info.html#a0039dd0ef9744576161528c01ab9061b">checkStreamType</a>();</div>
<div class="line"><a name="l00928"></a><span class="lineno">  928</span>&#160;}</div>
<div class="line"><a name="l00929"></a><span class="lineno">  929</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00930"></a><span class="lineno">  930</span>&#160;<span class="comment">/**</span></div>
<div class="line"><a name="l00931"></a><span class="lineno">  931</span>&#160;<span class="comment"> * Set up the stream for reading.</span></div>
<div class="line"><a name="l00932"></a><span class="lineno">  932</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l00933"></a><span class="lineno"><a class="line" href="class_stream_info.html#a1cea3fe0284cc4761746767d4c302fcb">  933</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="class_stream_info.html#a1cea3fe0284cc4761746767d4c302fcb">StreamInfo::readSetup</a>()</div>
<div class="line"><a name="l00934"></a><span class="lineno">  934</span>&#160;{</div>
<div class="line"><a name="l00935"></a><span class="lineno">  935</span>&#160;    <span class="comment">// make sure we&#39;re open</span></div>
<div class="line"><a name="l00936"></a><span class="lineno">  936</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="class_stream_info.html#a69bc9580bb2e54426801fe6fca59c98e">isopen</a>)</div>
<div class="line"><a name="l00937"></a><span class="lineno">  937</span>&#160;    {</div>
<div class="line"><a name="l00938"></a><span class="lineno">  938</span>&#160;        <a class="code" href="class_stream_info.html#a327c44fa31870eeee0ceffca3ea7f006">implicitOpen</a>(<a class="code" href="_stream_native_8cpp.html#a4279da1660023acc95b42250b2e613ca">operation_nocreate</a>);</div>
<div class="line"><a name="l00939"></a><span class="lineno">  939</span>&#160;    }</div>
<div class="line"><a name="l00940"></a><span class="lineno">  940</span>&#160; </div>
<div class="line"><a name="l00941"></a><span class="lineno">  941</span>&#160;    <span class="comment">// reset to ready state until something goes bad.</span></div>
<div class="line"><a name="l00942"></a><span class="lineno">  942</span>&#160;    <a class="code" href="class_stream_info.html#ab0c6d380b9704b6e305f881fc9fa1571">state</a> = <a class="code" href="class_stream_info.html#af8efe21cc9cb6d8da73907c4b6f573f7a4f89da370429a424003f1dc56d72526e">StreamReady</a>;</div>
<div class="line"><a name="l00943"></a><span class="lineno">  943</span>&#160; </div>
<div class="line"><a name="l00944"></a><span class="lineno">  944</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="class_stream_info.html#a35caea85b14b8f2b8b734c3b51eb7f4b">fileInfo</a>.<a class="code" href="class_sys_file.html#adfa0d4b71f91895b75ccb2347c42eb0f">isTransient</a>())</div>
<div class="line"><a name="l00945"></a><span class="lineno">  945</span>&#160;    {</div>
<div class="line"><a name="l00946"></a><span class="lineno">  946</span>&#160;        <span class="comment">// get the current stream position</span></div>
<div class="line"><a name="l00947"></a><span class="lineno">  947</span>&#160;        <a class="code" href="windows_2rexxapitypes_8h.html#a414156feea104f8f75b4ed9e3121b2f6">int64_t</a> tell_position;</div>
<div class="line"><a name="l00948"></a><span class="lineno">  948</span>&#160;        <a class="code" href="class_stream_info.html#a35caea85b14b8f2b8b734c3b51eb7f4b">fileInfo</a>.<a class="code" href="class_sys_file.html#a8c77a233d2b05cf4d300785fc23abcc7">getPosition</a>(tell_position);</div>
<div class="line"><a name="l00949"></a><span class="lineno">  949</span>&#160;                                            <span class="comment">/* at the correct position?          */</span></div>
<div class="line"><a name="l00950"></a><span class="lineno">  950</span>&#160;        <span class="keywordflow">if</span> (tell_position != -1 &amp;&amp; (<a class="code" href="class_stream_info.html#a7c85128d9aed9f7c648206ad364fb80c">charReadPosition</a> - 1) != tell_position)</div>
<div class="line"><a name="l00951"></a><span class="lineno">  951</span>&#160;        {</div>
<div class="line"><a name="l00952"></a><span class="lineno">  952</span>&#160;                                            <span class="comment">/* do a seek to charReadPosition   */</span></div>
<div class="line"><a name="l00953"></a><span class="lineno">  953</span>&#160;            <a class="code" href="class_stream_info.html#acd9fe6516d390ecca12931ae2c1d7d20">setPosition</a>(<a class="code" href="class_stream_info.html#a7c85128d9aed9f7c648206ad364fb80c">charReadPosition</a>, <a class="code" href="class_stream_info.html#a7c85128d9aed9f7c648206ad364fb80c">charReadPosition</a>);</div>
<div class="line"><a name="l00954"></a><span class="lineno">  954</span>&#160;        }</div>
<div class="line"><a name="l00955"></a><span class="lineno">  955</span>&#160;    }</div>
<div class="line"><a name="l00956"></a><span class="lineno">  956</span>&#160;}</div>
<div class="line"><a name="l00957"></a><span class="lineno">  957</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00958"></a><span class="lineno">  958</span>&#160;<span class="comment">/**</span></div>
<div class="line"><a name="l00959"></a><span class="lineno">  959</span>&#160;<span class="comment"> * Set up the stream for a write operation.</span></div>
<div class="line"><a name="l00960"></a><span class="lineno">  960</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l00961"></a><span class="lineno"><a class="line" href="class_stream_info.html#a1b2b9fc5ae93374cf7593ea60f3749e3">  961</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="class_stream_info.html#a1b2b9fc5ae93374cf7593ea60f3749e3">StreamInfo::writeSetup</a>()</div>
<div class="line"><a name="l00962"></a><span class="lineno">  962</span>&#160;{</div>
<div class="line"><a name="l00963"></a><span class="lineno">  963</span>&#160;    <span class="comment">// make sure we are properly opened</span></div>
<div class="line"><a name="l00964"></a><span class="lineno">  964</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="class_stream_info.html#a69bc9580bb2e54426801fe6fca59c98e">isopen</a>)</div>
<div class="line"><a name="l00965"></a><span class="lineno">  965</span>&#160;    {</div>
<div class="line"><a name="l00966"></a><span class="lineno">  966</span>&#160;        <a class="code" href="class_stream_info.html#a327c44fa31870eeee0ceffca3ea7f006">implicitOpen</a>(<a class="code" href="_stream_native_8cpp.html#ad4b70af3448dc43aedf984ad0d5aa710">operation_write</a>);</div>
<div class="line"><a name="l00967"></a><span class="lineno">  967</span>&#160;    }</div>
<div class="line"><a name="l00968"></a><span class="lineno">  968</span>&#160; </div>
<div class="line"><a name="l00969"></a><span class="lineno">  969</span>&#160;    <span class="comment">// opened read only?  we can&#39;t do this</span></div>
<div class="line"><a name="l00970"></a><span class="lineno">  970</span>&#160;    <span class="comment">// handle as a not ready condition</span></div>
<div class="line"><a name="l00971"></a><span class="lineno">  971</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="class_stream_info.html#a7783763d6eec22176a9dfd2f537f6506">read_only</a>)</div>
<div class="line"><a name="l00972"></a><span class="lineno">  972</span>&#160;    {</div>
<div class="line"><a name="l00973"></a><span class="lineno">  973</span>&#160;        <a class="code" href="class_stream_info.html#a6f99538562048386f872fb1843462267">notreadyError</a>(EACCES);</div>
<div class="line"><a name="l00974"></a><span class="lineno">  974</span>&#160;    }</div>
<div class="line"><a name="l00975"></a><span class="lineno">  975</span>&#160; </div>
<div class="line"><a name="l00976"></a><span class="lineno">  976</span>&#160;    <span class="comment">/* do the open                       */</span></div>
<div class="line"><a name="l00977"></a><span class="lineno">  977</span>&#160;    <span class="comment">/* reset to a ready state            */</span></div>
<div class="line"><a name="l00978"></a><span class="lineno">  978</span>&#160;    <a class="code" href="class_stream_info.html#ab0c6d380b9704b6e305f881fc9fa1571">state</a> = <a class="code" href="class_stream_info.html#af8efe21cc9cb6d8da73907c4b6f573f7a4f89da370429a424003f1dc56d72526e">StreamReady</a>;</div>
<div class="line"><a name="l00979"></a><span class="lineno">  979</span>&#160;    <span class="comment">/* get the current stream position   */</span></div>
<div class="line"><a name="l00980"></a><span class="lineno">  980</span>&#160;    <a class="code" href="windows_2rexxapitypes_8h.html#a414156feea104f8f75b4ed9e3121b2f6">int64_t</a> tell_position;</div>
<div class="line"><a name="l00981"></a><span class="lineno">  981</span>&#160;    <a class="code" href="class_stream_info.html#a35caea85b14b8f2b8b734c3b51eb7f4b">fileInfo</a>.<a class="code" href="class_sys_file.html#a8c77a233d2b05cf4d300785fc23abcc7">getPosition</a>(tell_position);</div>
<div class="line"><a name="l00982"></a><span class="lineno">  982</span>&#160;    <span class="comment">/* at the correct position?          */</span></div>
<div class="line"><a name="l00983"></a><span class="lineno">  983</span>&#160;    <span class="keywordflow">if</span> (tell_position != -1 &amp;&amp; (<a class="code" href="class_stream_info.html#a0ae0ea0f4fcc555c87d7e9be88bea96c">charWritePosition</a> - 1) != tell_position)</div>
<div class="line"><a name="l00984"></a><span class="lineno">  984</span>&#160;    {</div>
<div class="line"><a name="l00985"></a><span class="lineno">  985</span>&#160;        <span class="comment">// not opened for append?</span></div>
<div class="line"><a name="l00986"></a><span class="lineno">  986</span>&#160;        <span class="keywordflow">if</span> (!<a class="code" href="class_stream_info.html#ae5d69a23a83ae44083babca8913b9295">append</a>)</div>
<div class="line"><a name="l00987"></a><span class="lineno">  987</span>&#160;        {</div>
<div class="line"><a name="l00988"></a><span class="lineno">  988</span>&#160;            <span class="comment">/* set stream back to write position */</span></div>
<div class="line"><a name="l00989"></a><span class="lineno">  989</span>&#160;            <a class="code" href="class_stream_info.html#acd9fe6516d390ecca12931ae2c1d7d20">setPosition</a>(<a class="code" href="class_stream_info.html#a0ae0ea0f4fcc555c87d7e9be88bea96c">charWritePosition</a>, <a class="code" href="class_stream_info.html#a0ae0ea0f4fcc555c87d7e9be88bea96c">charWritePosition</a>);</div>
<div class="line"><a name="l00990"></a><span class="lineno">  990</span>&#160;        }</div>
<div class="line"><a name="l00991"></a><span class="lineno">  991</span>&#160;    }</div>
<div class="line"><a name="l00992"></a><span class="lineno">  992</span>&#160;}</div>
<div class="line"><a name="l00993"></a><span class="lineno">  993</span>&#160; </div>
<div class="line"><a name="l00994"></a><span class="lineno">  994</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00995"></a><span class="lineno">  995</span>&#160;<span class="comment">/**</span></div>
<div class="line"><a name="l00996"></a><span class="lineno">  996</span>&#160;<span class="comment"> * Read a line from the stream</span></div>
<div class="line"><a name="l00997"></a><span class="lineno">  997</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00998"></a><span class="lineno">  998</span>&#160;<span class="comment"> * @param buffer  The data to write to the stream</span></div>
<div class="line"><a name="l00999"></a><span class="lineno">  999</span>&#160;<span class="comment"> * @param length  The length of the data buffer.</span></div>
<div class="line"><a name="l01000"></a><span class="lineno"> 1000</span>&#160;<span class="comment"> * @param update_position</span></div>
<div class="line"><a name="l01001"></a><span class="lineno"> 1001</span>&#160;<span class="comment"> *                determines whether the read will also update the write position.</span></div>
<div class="line"><a name="l01002"></a><span class="lineno"> 1002</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l01003"></a><span class="lineno"> 1003</span>&#160;<span class="comment"> * @return A string object representing the line.</span></div>
<div class="line"><a name="l01004"></a><span class="lineno"> 1004</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l01005"></a><span class="lineno"><a class="line" href="class_stream_info.html#ac2630a55973b80d4d9fe31c5747aca45"> 1005</a></span>&#160;<a class="code" href="rexx_8h.html#a64dfe004825692637e2075467179fcd9">RexxStringObject</a> <a class="code" href="class_stream_info.html#ac2630a55973b80d4d9fe31c5747aca45">StreamInfo::readLine</a>(<span class="keywordtype">char</span> *buffer, <span class="keywordtype">size_t</span> length, <span class="keywordtype">bool</span> update_position)</div>
<div class="line"><a name="l01006"></a><span class="lineno"> 1006</span>&#160;{</div>
<div class="line"><a name="l01007"></a><span class="lineno"> 1007</span>&#160;    <span class="keywordtype">size_t</span> bytesRead;</div>
<div class="line"><a name="l01008"></a><span class="lineno"> 1008</span>&#160; </div>
<div class="line"><a name="l01009"></a><span class="lineno"> 1009</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="class_stream_info.html#a35caea85b14b8f2b8b734c3b51eb7f4b">fileInfo</a>.<a class="code" href="class_sys_file.html#ab96591dd7cfa1192a49c99eb8ab3ce9a">read</a>(buffer, length, bytesRead))</div>
<div class="line"><a name="l01010"></a><span class="lineno"> 1010</span>&#160;    {</div>
<div class="line"><a name="l01011"></a><span class="lineno"> 1011</span>&#160;        <a class="code" href="class_stream_info.html#a841a460b1c724355c504bd21fe9382fc">checkEof</a>();</div>
<div class="line"><a name="l01012"></a><span class="lineno"> 1012</span>&#160;    }</div>
<div class="line"><a name="l01013"></a><span class="lineno"> 1013</span>&#160; </div>
<div class="line"><a name="l01014"></a><span class="lineno"> 1014</span>&#160;    <span class="keywordflow">if</span> (bytesRead == 0)                 <span class="comment">/* work ok?                          */</span></div>
<div class="line"><a name="l01015"></a><span class="lineno"> 1015</span>&#160;    {</div>
<div class="line"><a name="l01016"></a><span class="lineno"> 1016</span>&#160;        <span class="comment">// must be an eof condition</span></div>
<div class="line"><a name="l01017"></a><span class="lineno"> 1017</span>&#160;        <a class="code" href="class_stream_info.html#ad7f0af292aa094aec51e43972a5c5c8b">eof</a>();</div>
<div class="line"><a name="l01018"></a><span class="lineno"> 1018</span>&#160;    }</div>
<div class="line"><a name="l01019"></a><span class="lineno"> 1019</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l01020"></a><span class="lineno"> 1020</span>&#160;    {</div>
<div class="line"><a name="l01021"></a><span class="lineno"> 1021</span>&#160;        <span class="comment">/* create a result string            */</span></div>
<div class="line"><a name="l01022"></a><span class="lineno"> 1022</span>&#160;        <a class="code" href="rexx_8h.html#a64dfe004825692637e2075467179fcd9">RexxStringObject</a> <span class="keywordtype">string</span> = <a class="code" href="class_stream_info.html#a6a5404d4b7ece722baef78b65cab52d2">context</a>-&gt;NewString(buffer, bytesRead);</div>
<div class="line"><a name="l01023"></a><span class="lineno"> 1023</span>&#160;        <span class="keywordflow">if</span> (update_position)              <span class="comment">/* need to move read position?       */</span></div>
<div class="line"><a name="l01024"></a><span class="lineno"> 1024</span>&#160;        {</div>
<div class="line"><a name="l01025"></a><span class="lineno"> 1025</span>&#160;            <span class="comment">/* update the read position          */</span></div>
<div class="line"><a name="l01026"></a><span class="lineno"> 1026</span>&#160;            <a class="code" href="class_stream_info.html#a7c85128d9aed9f7c648206ad364fb80c">charReadPosition</a> += bytesRead;</div>
<div class="line"><a name="l01027"></a><span class="lineno"> 1027</span>&#160;        }</div>
<div class="line"><a name="l01028"></a><span class="lineno"> 1028</span>&#160;        <span class="keywordflow">if</span> (bytesRead != length)             <span class="comment">/* not get it all?                   */</span></div>
<div class="line"><a name="l01029"></a><span class="lineno"> 1029</span>&#160;        {</div>
<div class="line"><a name="l01030"></a><span class="lineno"> 1030</span>&#160;            <a class="code" href="class_stream_info.html#a825f1cc4635482e2dbd7c1166532ee54">defaultResult</a> = string;</div>
<div class="line"><a name="l01031"></a><span class="lineno"> 1031</span>&#160;            <a class="code" href="class_stream_info.html#ad7f0af292aa094aec51e43972a5c5c8b">eof</a>();</div>
<div class="line"><a name="l01032"></a><span class="lineno"> 1032</span>&#160;        }</div>
<div class="line"><a name="l01033"></a><span class="lineno"> 1033</span>&#160;        <span class="keywordflow">return</span> string;                      <span class="comment">/* return the string                 */</span></div>
<div class="line"><a name="l01034"></a><span class="lineno"> 1034</span>&#160;        <span class="comment">/* go raise a notready condition     */</span></div>
<div class="line"><a name="l01035"></a><span class="lineno"> 1035</span>&#160;    }</div>
<div class="line"><a name="l01036"></a><span class="lineno"> 1036</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="class_stream_info.html#a6a5404d4b7ece722baef78b65cab52d2">context</a>-&gt;NullString();       <span class="comment">/* return the string                 */</span></div>
<div class="line"><a name="l01037"></a><span class="lineno"> 1037</span>&#160;}</div>
<div class="line"><a name="l01038"></a><span class="lineno"> 1038</span>&#160; </div>
<div class="line"><a name="l01039"></a><span class="lineno"> 1039</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l01040"></a><span class="lineno"> 1040</span>&#160;<span class="comment">/**</span></div>
<div class="line"><a name="l01041"></a><span class="lineno"> 1041</span>&#160;<span class="comment"> * Convert a specified stream name into it&#39;s fully qualified</span></div>
<div class="line"><a name="l01042"></a><span class="lineno"> 1042</span>&#160;<span class="comment"> * name.</span></div>
<div class="line"><a name="l01043"></a><span class="lineno"> 1043</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l01044"></a><span class="lineno"><a class="line" href="class_stream_info.html#a031ca794b8ef189757f1e034e8d0d122"> 1044</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="class_stream_info.html#a031ca794b8ef189757f1e034e8d0d122">StreamInfo::resolveStreamName</a>()</div>
<div class="line"><a name="l01045"></a><span class="lineno"> 1045</span>&#160;{</div>
<div class="line"><a name="l01046"></a><span class="lineno"> 1046</span>&#160;    <span class="keywordflow">if</span> (strlen(<a class="code" href="class_stream_info.html#aa1824fb879c522d827a4c16dd2ff5ae4">qualified_name</a>) == 0)</div>
<div class="line"><a name="l01047"></a><span class="lineno"> 1047</span>&#160;    {</div>
<div class="line"><a name="l01048"></a><span class="lineno"> 1048</span>&#160;        <a class="code" href="class_sys_file_system.html#acc4db7ab3f7129157783511592a3963d">SysFileSystem::qualifyStreamName</a>(<a class="code" href="class_stream_info.html#a6a85550447a4ca095412f9b630504ae9">stream_name</a>, <a class="code" href="class_stream_info.html#aa1824fb879c522d827a4c16dd2ff5ae4">qualified_name</a>, <span class="keyword">sizeof</span>(<a class="code" href="class_stream_info.html#aa1824fb879c522d827a4c16dd2ff5ae4">qualified_name</a>));</div>
<div class="line"><a name="l01049"></a><span class="lineno"> 1049</span>&#160;    }</div>
<div class="line"><a name="l01050"></a><span class="lineno"> 1050</span>&#160;}</div>
<div class="line"><a name="l01051"></a><span class="lineno"> 1051</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l01052"></a><span class="lineno"> 1052</span>&#160;<span class="comment">/**</span></div>
<div class="line"><a name="l01053"></a><span class="lineno"> 1053</span>&#160;<span class="comment"> * Write a buffer of data to the stream, raising an notready</span></div>
<div class="line"><a name="l01054"></a><span class="lineno"> 1054</span>&#160;<span class="comment"> * condition if it fails.</span></div>
<div class="line"><a name="l01055"></a><span class="lineno"> 1055</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l01056"></a><span class="lineno"> 1056</span>&#160;<span class="comment"> * @param data   Pointer to the first byte of data</span></div>
<div class="line"><a name="l01057"></a><span class="lineno"> 1057</span>&#160;<span class="comment"> * @param length length of the data buffer</span></div>
<div class="line"><a name="l01058"></a><span class="lineno"> 1058</span>&#160;<span class="comment"> * @param bytesWritten</span></div>
<div class="line"><a name="l01059"></a><span class="lineno"> 1059</span>&#160;<span class="comment"> *               Actual number of bytes written to the stream.</span></div>
<div class="line"><a name="l01060"></a><span class="lineno"> 1060</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l01061"></a><span class="lineno"><a class="line" href="class_stream_info.html#a80fec83823509c1c203aefcf9078937d"> 1061</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="class_stream_info.html#a80fec83823509c1c203aefcf9078937d">StreamInfo::writeBuffer</a>(<span class="keyword">const</span> <span class="keywordtype">char</span> *data, <span class="keywordtype">size_t</span> length, <span class="keywordtype">size_t</span> &amp;bytesWritten)</div>
<div class="line"><a name="l01062"></a><span class="lineno"> 1062</span>&#160;{</div>
<div class="line"><a name="l01063"></a><span class="lineno"> 1063</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="class_stream_info.html#a35caea85b14b8f2b8b734c3b51eb7f4b">fileInfo</a>.<a class="code" href="class_sys_file.html#ad1b4b4f0b7d69f8daaf33243a17916b5">write</a>(data, length, bytesWritten))</div>
<div class="line"><a name="l01064"></a><span class="lineno"> 1064</span>&#160;    {</div>
<div class="line"><a name="l01065"></a><span class="lineno"> 1065</span>&#160;        <a class="code" href="class_stream_info.html#a6f99538562048386f872fb1843462267">notreadyError</a>();</div>
<div class="line"><a name="l01066"></a><span class="lineno"> 1066</span>&#160;    }</div>
<div class="line"><a name="l01067"></a><span class="lineno"> 1067</span>&#160;    <span class="comment">// we can&#39;t update or query the position for a transient stream, so</span></div>
<div class="line"><a name="l01068"></a><span class="lineno"> 1068</span>&#160;    <span class="comment">// we have to assume this was written correctly.</span></div>
<div class="line"><a name="l01069"></a><span class="lineno"> 1069</span>&#160;    <span class="keywordflow">if</span> (!<span class="keyword">transient</span>)</div>
<div class="line"><a name="l01070"></a><span class="lineno"> 1070</span>&#160;    {</div>
<div class="line"><a name="l01071"></a><span class="lineno"> 1071</span>&#160;        <span class="comment">// make sure the current write position is updated after the write.</span></div>
<div class="line"><a name="l01072"></a><span class="lineno"> 1072</span>&#160;        <span class="keywordflow">if</span> (!<a class="code" href="class_stream_info.html#a35caea85b14b8f2b8b734c3b51eb7f4b">fileInfo</a>.<a class="code" href="class_sys_file.html#a8c77a233d2b05cf4d300785fc23abcc7">getPosition</a>(<a class="code" href="class_stream_info.html#a0ae0ea0f4fcc555c87d7e9be88bea96c">charWritePosition</a>))</div>
<div class="line"><a name="l01073"></a><span class="lineno"> 1073</span>&#160;        {</div>
<div class="line"><a name="l01074"></a><span class="lineno"> 1074</span>&#160;            <a class="code" href="class_stream_info.html#a6f99538562048386f872fb1843462267">notreadyError</a>();</div>
<div class="line"><a name="l01075"></a><span class="lineno"> 1075</span>&#160;        }</div>
<div class="line"><a name="l01076"></a><span class="lineno"> 1076</span>&#160;        <span class="comment">// make sure we keep this origin 1</span></div>
<div class="line"><a name="l01077"></a><span class="lineno"> 1077</span>&#160;        <a class="code" href="class_stream_info.html#a0ae0ea0f4fcc555c87d7e9be88bea96c">charWritePosition</a>++;</div>
<div class="line"><a name="l01078"></a><span class="lineno"> 1078</span>&#160;    }</div>
<div class="line"><a name="l01079"></a><span class="lineno"> 1079</span>&#160;}</div>
<div class="line"><a name="l01080"></a><span class="lineno"> 1080</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l01081"></a><span class="lineno"> 1081</span>&#160;<span class="comment">/**</span></div>
<div class="line"><a name="l01082"></a><span class="lineno"> 1082</span>&#160;<span class="comment"> * Write a terminated line of data to the stream, raising an notready</span></div>
<div class="line"><a name="l01083"></a><span class="lineno"> 1083</span>&#160;<span class="comment"> * condition if it fails.</span></div>
<div class="line"><a name="l01084"></a><span class="lineno"> 1084</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l01085"></a><span class="lineno"> 1085</span>&#160;<span class="comment"> * @param data   Pointer to the first byte of data</span></div>
<div class="line"><a name="l01086"></a><span class="lineno"> 1086</span>&#160;<span class="comment"> * @param length length of the data buffer</span></div>
<div class="line"><a name="l01087"></a><span class="lineno"> 1087</span>&#160;<span class="comment"> * @param bytesWritten</span></div>
<div class="line"><a name="l01088"></a><span class="lineno"> 1088</span>&#160;<span class="comment"> *               Actual number of bytes written to the stream.</span></div>
<div class="line"><a name="l01089"></a><span class="lineno"> 1089</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l01090"></a><span class="lineno"><a class="line" href="class_stream_info.html#af12895c61e9458a31e3fcd632cbc96e9"> 1090</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="class_stream_info.html#af12895c61e9458a31e3fcd632cbc96e9">StreamInfo::writeLine</a>(<span class="keyword">const</span> <span class="keywordtype">char</span> *data, <span class="keywordtype">size_t</span> length, <span class="keywordtype">size_t</span> &amp;bytesWritten)</div>
<div class="line"><a name="l01091"></a><span class="lineno"> 1091</span>&#160;{</div>
<div class="line"><a name="l01092"></a><span class="lineno"> 1092</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="class_stream_info.html#a35caea85b14b8f2b8b734c3b51eb7f4b">fileInfo</a>.<a class="code" href="class_sys_file.html#a0ab7fddc5eaa83ee52dbb18e3ac2ff8c">putLine</a>(data, length, bytesWritten))</div>
<div class="line"><a name="l01093"></a><span class="lineno"> 1093</span>&#160;    {</div>
<div class="line"><a name="l01094"></a><span class="lineno"> 1094</span>&#160;        <a class="code" href="class_stream_info.html#a6f99538562048386f872fb1843462267">notreadyError</a>();</div>
<div class="line"><a name="l01095"></a><span class="lineno"> 1095</span>&#160;    }</div>
<div class="line"><a name="l01096"></a><span class="lineno"> 1096</span>&#160; </div>
<div class="line"><a name="l01097"></a><span class="lineno"> 1097</span>&#160;    <span class="comment">// for non-transient streams, update the output position</span></div>
<div class="line"><a name="l01098"></a><span class="lineno"> 1098</span>&#160;    <span class="keywordflow">if</span> (!<span class="keyword">transient</span>)</div>
<div class="line"><a name="l01099"></a><span class="lineno"> 1099</span>&#160;    {</div>
<div class="line"><a name="l01100"></a><span class="lineno"> 1100</span>&#160;        <span class="comment">// make sure the current write position is updated after the write.</span></div>
<div class="line"><a name="l01101"></a><span class="lineno"> 1101</span>&#160;        <span class="keywordflow">if</span> (!<a class="code" href="class_stream_info.html#a35caea85b14b8f2b8b734c3b51eb7f4b">fileInfo</a>.<a class="code" href="class_sys_file.html#a8c77a233d2b05cf4d300785fc23abcc7">getPosition</a>(<a class="code" href="class_stream_info.html#a0ae0ea0f4fcc555c87d7e9be88bea96c">charWritePosition</a>))</div>
<div class="line"><a name="l01102"></a><span class="lineno"> 1102</span>&#160;        {</div>
<div class="line"><a name="l01103"></a><span class="lineno"> 1103</span>&#160;            <a class="code" href="class_stream_info.html#a6f99538562048386f872fb1843462267">notreadyError</a>();</div>
<div class="line"><a name="l01104"></a><span class="lineno"> 1104</span>&#160;        }</div>
<div class="line"><a name="l01105"></a><span class="lineno"> 1105</span>&#160;        <span class="comment">// make sure we keep this origin 1</span></div>
<div class="line"><a name="l01106"></a><span class="lineno"> 1106</span>&#160;        <a class="code" href="class_stream_info.html#a0ae0ea0f4fcc555c87d7e9be88bea96c">charWritePosition</a>++;</div>
<div class="line"><a name="l01107"></a><span class="lineno"> 1107</span>&#160;    }</div>
<div class="line"><a name="l01108"></a><span class="lineno"> 1108</span>&#160;}</div>
<div class="line"><a name="l01109"></a><span class="lineno"> 1109</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l01110"></a><span class="lineno"> 1110</span>&#160;<span class="comment">/**</span></div>
<div class="line"><a name="l01111"></a><span class="lineno"> 1111</span>&#160;<span class="comment"> * Read a buffer of data from the current position for the</span></div>
<div class="line"><a name="l01112"></a><span class="lineno"> 1112</span>&#160;<span class="comment"> * given length.  This also updates our character input</span></div>
<div class="line"><a name="l01113"></a><span class="lineno"> 1113</span>&#160;<span class="comment"> * position information.</span></div>
<div class="line"><a name="l01114"></a><span class="lineno"> 1114</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l01115"></a><span class="lineno"> 1115</span>&#160;<span class="comment"> * @param data      The location to place the data.</span></div>
<div class="line"><a name="l01116"></a><span class="lineno"> 1116</span>&#160;<span class="comment"> * @param length    The length to read.</span></div>
<div class="line"><a name="l01117"></a><span class="lineno"> 1117</span>&#160;<span class="comment"> * @param bytesRead The number of bytes actually read.</span></div>
<div class="line"><a name="l01118"></a><span class="lineno"> 1118</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l01119"></a><span class="lineno"><a class="line" href="class_stream_info.html#af6a6171af162ebfe3338bf423735b96d"> 1119</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="class_stream_info.html#af6a6171af162ebfe3338bf423735b96d">StreamInfo::readBuffer</a>(<span class="keywordtype">char</span> *data, <span class="keywordtype">size_t</span> length, <span class="keywordtype">size_t</span> &amp;bytesRead)</div>
<div class="line"><a name="l01120"></a><span class="lineno"> 1120</span>&#160;{</div>
<div class="line"><a name="l01121"></a><span class="lineno"> 1121</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="class_stream_info.html#a35caea85b14b8f2b8b734c3b51eb7f4b">fileInfo</a>.<a class="code" href="class_sys_file.html#ab96591dd7cfa1192a49c99eb8ab3ce9a">read</a>(data, length, bytesRead))</div>
<div class="line"><a name="l01122"></a><span class="lineno"> 1122</span>&#160;    {</div>
<div class="line"><a name="l01123"></a><span class="lineno"> 1123</span>&#160;        <a class="code" href="class_stream_info.html#a6f99538562048386f872fb1843462267">notreadyError</a>();</div>
<div class="line"><a name="l01124"></a><span class="lineno"> 1124</span>&#160;    }</div>
<div class="line"><a name="l01125"></a><span class="lineno"> 1125</span>&#160;    <span class="comment">// we track the character read position whenever we do a read, so</span></div>
<div class="line"><a name="l01126"></a><span class="lineno"> 1126</span>&#160;    <span class="comment">// update the position for the actual number we&#39;ve advanced.</span></div>
<div class="line"><a name="l01127"></a><span class="lineno"> 1127</span>&#160;    <a class="code" href="class_stream_info.html#a7c85128d9aed9f7c648206ad364fb80c">charReadPosition</a> += bytesRead;</div>
<div class="line"><a name="l01128"></a><span class="lineno"> 1128</span>&#160;}</div>
<div class="line"><a name="l01129"></a><span class="lineno"> 1129</span>&#160; </div>
<div class="line"><a name="l01130"></a><span class="lineno"> 1130</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l01131"></a><span class="lineno"> 1131</span>&#160;<span class="comment">/**</span></div>
<div class="line"><a name="l01132"></a><span class="lineno"> 1132</span>&#160;<span class="comment"> * Write out the remainder of an output line for a record oriented I/O operation.</span></div>
<div class="line"><a name="l01133"></a><span class="lineno"> 1133</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l01134"></a><span class="lineno"><a class="line" href="class_stream_info.html#ac53710ab6d501f9cf93970b22fe7219f"> 1134</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="class_stream_info.html#ac53710ab6d501f9cf93970b22fe7219f">StreamInfo::completeLine</a>(<span class="keywordtype">size_t</span> writeLength)</div>
<div class="line"><a name="l01135"></a><span class="lineno"> 1135</span>&#160;{</div>
<div class="line"><a name="l01136"></a><span class="lineno"> 1136</span>&#160;    <span class="comment">// write this out in chunks</span></div>
<div class="line"><a name="l01137"></a><span class="lineno"> 1137</span>&#160;    <span class="keywordtype">char</span> buffer[256];</div>
<div class="line"><a name="l01138"></a><span class="lineno"> 1138</span>&#160;    memset(buffer, <span class="charliteral">&#39; &#39;</span>, <span class="keyword">sizeof</span>(buffer)); <span class="comment">/* fill buffer with blanks           */</span></div>
<div class="line"><a name="l01139"></a><span class="lineno"> 1139</span>&#160; </div>
<div class="line"><a name="l01140"></a><span class="lineno"> 1140</span>&#160;    <span class="keywordflow">while</span> (writeLength &gt; 0)</div>
<div class="line"><a name="l01141"></a><span class="lineno"> 1141</span>&#160;    {</div>
<div class="line"><a name="l01142"></a><span class="lineno"> 1142</span>&#160;        <span class="keywordtype">size_t</span> bytesWritten;</div>
<div class="line"><a name="l01143"></a><span class="lineno"> 1143</span>&#160;        <a class="code" href="class_stream_info.html#a80fec83823509c1c203aefcf9078937d">writeBuffer</a>(buffer, writeLength &lt; <span class="keyword">sizeof</span>(buffer) ? writeLength : <span class="keyword">sizeof</span>(buffer), bytesWritten);</div>
<div class="line"><a name="l01144"></a><span class="lineno"> 1144</span>&#160;        writeLength -= bytesWritten;</div>
<div class="line"><a name="l01145"></a><span class="lineno"> 1145</span>&#160;    }</div>
<div class="line"><a name="l01146"></a><span class="lineno"> 1146</span>&#160;}</div>
<div class="line"><a name="l01147"></a><span class="lineno"> 1147</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l01148"></a><span class="lineno"> 1148</span>&#160;<span class="comment">/**</span></div>
<div class="line"><a name="l01149"></a><span class="lineno"> 1149</span>&#160;<span class="comment"> * Write out a fixed record line, padding with blanks if the</span></div>
<div class="line"><a name="l01150"></a><span class="lineno"> 1150</span>&#160;<span class="comment"> * line is not of the correct size.</span></div>
<div class="line"><a name="l01151"></a><span class="lineno"> 1151</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l01152"></a><span class="lineno"> 1152</span>&#160;<span class="comment"> * @param data    The data to write.</span></div>
<div class="line"><a name="l01153"></a><span class="lineno"> 1153</span>&#160;<span class="comment"> * @param length  length of the buffered data.</span></div>
<div class="line"><a name="l01154"></a><span class="lineno"> 1154</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l01155"></a><span class="lineno"> 1155</span>&#160;<span class="comment"> * @return The line residual count.</span></div>
<div class="line"><a name="l01156"></a><span class="lineno"> 1156</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l01157"></a><span class="lineno"><a class="line" href="class_stream_info.html#aaf3d7a79c48b481b299eca8d178e45ed"> 1157</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="class_stream_info.html#aaf3d7a79c48b481b299eca8d178e45ed">StreamInfo::writeFixedLine</a>(<span class="keyword">const</span> <span class="keywordtype">char</span> *data, <span class="keywordtype">size_t</span> length)</div>
<div class="line"><a name="l01158"></a><span class="lineno"> 1158</span>&#160;{</div>
<div class="line"><a name="l01159"></a><span class="lineno"> 1159</span>&#160;    <span class="comment">/* calculate the length needed       */</span></div>
<div class="line"><a name="l01160"></a><span class="lineno"> 1160</span>&#160;    <span class="keywordtype">size_t</span> write_length = <a class="code" href="class_stream_info.html#a8fee3f8892f5e912d85d5a1621cdcc8a">binaryRecordLength</a> - (size_t)((<a class="code" href="class_stream_info.html#a0ae0ea0f4fcc555c87d7e9be88bea96c">charWritePosition</a> % <a class="code" href="class_stream_info.html#a8fee3f8892f5e912d85d5a1621cdcc8a">binaryRecordLength</a>) - 1);</div>
<div class="line"><a name="l01161"></a><span class="lineno"> 1161</span>&#160;    <span class="comment">// make sure we don&#39;t go over the length of the record.</span></div>
<div class="line"><a name="l01162"></a><span class="lineno"> 1162</span>&#160;    <span class="keywordflow">if</span> (length &gt; write_length)</div>
<div class="line"><a name="l01163"></a><span class="lineno"> 1163</span>&#160;    {</div>
<div class="line"><a name="l01164"></a><span class="lineno"> 1164</span>&#160;        length = write_length;</div>
<div class="line"><a name="l01165"></a><span class="lineno"> 1165</span>&#160;    }</div>
<div class="line"><a name="l01166"></a><span class="lineno"> 1166</span>&#160;    <span class="comment">// get the padding amount</span></div>
<div class="line"><a name="l01167"></a><span class="lineno"> 1167</span>&#160;    <span class="keywordtype">size_t</span> padding = write_length - length;</div>
<div class="line"><a name="l01168"></a><span class="lineno"> 1168</span>&#160; </div>
<div class="line"><a name="l01169"></a><span class="lineno"> 1169</span>&#160;    <span class="comment">// write the line, then complete with blanks up to the padding length.</span></div>
<div class="line"><a name="l01170"></a><span class="lineno"> 1170</span>&#160;    <a class="code" href="class_stream_info.html#a80fec83823509c1c203aefcf9078937d">writeBuffer</a>(data, length, length);</div>
<div class="line"><a name="l01171"></a><span class="lineno"> 1171</span>&#160;    <a class="code" href="class_stream_info.html#ac53710ab6d501f9cf93970b22fe7219f">completeLine</a>(padding);</div>
<div class="line"><a name="l01172"></a><span class="lineno"> 1172</span>&#160;}</div>
<div class="line"><a name="l01173"></a><span class="lineno"> 1173</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l01174"></a><span class="lineno"> 1174</span>&#160;<span class="comment">/**</span></div>
<div class="line"><a name="l01175"></a><span class="lineno"> 1175</span>&#160;<span class="comment"> * Move the stream position, with error checking.</span></div>
<div class="line"><a name="l01176"></a><span class="lineno"> 1176</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l01177"></a><span class="lineno"> 1177</span>&#160;<span class="comment"> * @param position The target position.</span></div>
<div class="line"><a name="l01178"></a><span class="lineno"> 1178</span>&#160;<span class="comment"> * @param newPosition</span></div>
<div class="line"><a name="l01179"></a><span class="lineno"> 1179</span>&#160;<span class="comment"> *                 The updated final position of the move.</span></div>
<div class="line"><a name="l01180"></a><span class="lineno"> 1180</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l01181"></a><span class="lineno"><a class="line" href="class_stream_info.html#acd9fe6516d390ecca12931ae2c1d7d20"> 1181</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="class_stream_info.html#acd9fe6516d390ecca12931ae2c1d7d20">StreamInfo::setPosition</a>(<a class="code" href="windows_2rexxapitypes_8h.html#a414156feea104f8f75b4ed9e3121b2f6">int64_t</a> position, <a class="code" href="windows_2rexxapitypes_8h.html#a414156feea104f8f75b4ed9e3121b2f6">int64_t</a> &amp;newPosition)</div>
<div class="line"><a name="l01182"></a><span class="lineno"> 1182</span>&#160;{</div>
<div class="line"><a name="l01183"></a><span class="lineno"> 1183</span>&#160;    <span class="comment">// if not open yet, open now, but don&#39;t create this if doesn&#39;t</span></div>
<div class="line"><a name="l01184"></a><span class="lineno"> 1184</span>&#160;    <span class="comment">// already exist.</span></div>
<div class="line"><a name="l01185"></a><span class="lineno"> 1185</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="class_stream_info.html#a69bc9580bb2e54426801fe6fca59c98e">isopen</a>)</div>
<div class="line"><a name="l01186"></a><span class="lineno"> 1186</span>&#160;    {</div>
<div class="line"><a name="l01187"></a><span class="lineno"> 1187</span>&#160;        <a class="code" href="class_stream_info.html#a327c44fa31870eeee0ceffca3ea7f006">implicitOpen</a>(<a class="code" href="_stream_native_8cpp.html#a4279da1660023acc95b42250b2e613ca">operation_nocreate</a>);</div>
<div class="line"><a name="l01188"></a><span class="lineno"> 1188</span>&#160;    }</div>
<div class="line"><a name="l01189"></a><span class="lineno"> 1189</span>&#160;    <span class="comment">// Seek to the target position, if possible.  The request position</span></div>
<div class="line"><a name="l01190"></a><span class="lineno"> 1190</span>&#160;    <span class="comment">// is a 1-based character number.  We need to convert this into</span></div>
<div class="line"><a name="l01191"></a><span class="lineno"> 1191</span>&#160;    <span class="comment">// a zero-based one before moving.</span></div>
<div class="line"><a name="l01192"></a><span class="lineno"> 1192</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="class_stream_info.html#a35caea85b14b8f2b8b734c3b51eb7f4b">fileInfo</a>.<a class="code" href="class_sys_file.html#a4cc14e33be3be5d8e89c6aa872eb4381">seek</a>(position - 1, SEEK_SET, newPosition))</div>
<div class="line"><a name="l01193"></a><span class="lineno"> 1193</span>&#160;    {</div>
<div class="line"><a name="l01194"></a><span class="lineno"> 1194</span>&#160;        <span class="comment">// Failed, raise a not ready condition.</span></div>
<div class="line"><a name="l01195"></a><span class="lineno"> 1195</span>&#160;        <a class="code" href="class_stream_info.html#a841a460b1c724355c504bd21fe9382fc">checkEof</a>();</div>
<div class="line"><a name="l01196"></a><span class="lineno"> 1196</span>&#160;    }</div>
<div class="line"><a name="l01197"></a><span class="lineno"> 1197</span>&#160;    <span class="comment">// convert the target position back to 1-based.</span></div>
<div class="line"><a name="l01198"></a><span class="lineno"> 1198</span>&#160;    newPosition++;</div>
<div class="line"><a name="l01199"></a><span class="lineno"> 1199</span>&#160;}</div>
<div class="line"><a name="l01200"></a><span class="lineno"> 1200</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l01201"></a><span class="lineno"> 1201</span>&#160;<span class="comment">/**</span></div>
<div class="line"><a name="l01202"></a><span class="lineno"> 1202</span>&#160;<span class="comment"> * Move the stream position, with error checking.</span></div>
<div class="line"><a name="l01203"></a><span class="lineno"> 1203</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l01204"></a><span class="lineno"> 1204</span>&#160;<span class="comment"> * @param position The target position.</span></div>
<div class="line"><a name="l01205"></a><span class="lineno"> 1205</span>&#160;<span class="comment"> * @param newPosition</span></div>
<div class="line"><a name="l01206"></a><span class="lineno"> 1206</span>&#160;<span class="comment"> *                 The updated final position of the move.</span></div>
<div class="line"><a name="l01207"></a><span class="lineno"> 1207</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l01208"></a><span class="lineno"><a class="line" href="class_stream_info.html#a1bc16cd611afd18c0b66c981a4201962"> 1208</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="class_stream_info.html#acd9fe6516d390ecca12931ae2c1d7d20">StreamInfo::setPosition</a>(<a class="code" href="windows_2rexxapitypes_8h.html#a414156feea104f8f75b4ed9e3121b2f6">int64_t</a> offset, <span class="keywordtype">int</span> style, <a class="code" href="windows_2rexxapitypes_8h.html#a414156feea104f8f75b4ed9e3121b2f6">int64_t</a> &amp;newPosition)</div>
<div class="line"><a name="l01209"></a><span class="lineno"> 1209</span>&#160;{</div>
<div class="line"><a name="l01210"></a><span class="lineno"> 1210</span>&#160;    <span class="comment">// if doing absolute positioning, then we need to fudge the offset</span></div>
<div class="line"><a name="l01211"></a><span class="lineno"> 1211</span>&#160;    <span class="keywordflow">if</span> (style == SEEK_SET)</div>
<div class="line"><a name="l01212"></a><span class="lineno"> 1212</span>&#160;    {</div>
<div class="line"><a name="l01213"></a><span class="lineno"> 1213</span>&#160;        offset--;</div>
<div class="line"><a name="l01214"></a><span class="lineno"> 1214</span>&#160;    }</div>
<div class="line"><a name="l01215"></a><span class="lineno"> 1215</span>&#160;    <span class="comment">// Seek to the target position, if possible.  The request position</span></div>
<div class="line"><a name="l01216"></a><span class="lineno"> 1216</span>&#160;    <span class="comment">// is a 1-based character number.  We need to convert this into</span></div>
<div class="line"><a name="l01217"></a><span class="lineno"> 1217</span>&#160;    <span class="comment">// a zero-based one before moving.</span></div>
<div class="line"><a name="l01218"></a><span class="lineno"> 1218</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="class_stream_info.html#a35caea85b14b8f2b8b734c3b51eb7f4b">fileInfo</a>.<a class="code" href="class_sys_file.html#a4cc14e33be3be5d8e89c6aa872eb4381">seek</a>(offset, style, newPosition))</div>
<div class="line"><a name="l01219"></a><span class="lineno"> 1219</span>&#160;    {</div>
<div class="line"><a name="l01220"></a><span class="lineno"> 1220</span>&#160;        <span class="comment">// Failed, raise a not ready condition.</span></div>
<div class="line"><a name="l01221"></a><span class="lineno"> 1221</span>&#160;        <a class="code" href="class_stream_info.html#a841a460b1c724355c504bd21fe9382fc">checkEof</a>();</div>
<div class="line"><a name="l01222"></a><span class="lineno"> 1222</span>&#160;    }</div>
<div class="line"><a name="l01223"></a><span class="lineno"> 1223</span>&#160;    <span class="comment">// convert the target position back to 1-based.</span></div>
<div class="line"><a name="l01224"></a><span class="lineno"> 1224</span>&#160;    newPosition++;</div>
<div class="line"><a name="l01225"></a><span class="lineno"> 1225</span>&#160;}</div>
<div class="line"><a name="l01226"></a><span class="lineno"> 1226</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l01227"></a><span class="lineno"> 1227</span>&#160;<span class="comment">/**</span></div>
<div class="line"><a name="l01228"></a><span class="lineno"> 1228</span>&#160;<span class="comment"> * Sets the current read position for the stream.  This</span></div>
<div class="line"><a name="l01229"></a><span class="lineno"> 1229</span>&#160;<span class="comment"> * updates charReadPosition to point to the target location.</span></div>
<div class="line"><a name="l01230"></a><span class="lineno"> 1230</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l01231"></a><span class="lineno"> 1231</span>&#160;<span class="comment"> * @param position The target character position (Rexx coordinates, which</span></div>
<div class="line"><a name="l01232"></a><span class="lineno"> 1232</span>&#160;<span class="comment"> *                 means 1 based rather than the native zero-based).</span></div>
<div class="line"><a name="l01233"></a><span class="lineno"> 1233</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l01234"></a><span class="lineno"><a class="line" href="class_stream_info.html#afbda41cfa60155b0abc38125e0b99318"> 1234</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="class_stream_info.html#afbda41cfa60155b0abc38125e0b99318">StreamInfo::setReadPosition</a>(<a class="code" href="windows_2rexxapitypes_8h.html#a414156feea104f8f75b4ed9e3121b2f6">int64_t</a> position)</div>
<div class="line"><a name="l01235"></a><span class="lineno"> 1235</span>&#160;{</div>
<div class="line"><a name="l01236"></a><span class="lineno"> 1236</span>&#160;    <a class="code" href="class_stream_info.html#acd9fe6516d390ecca12931ae2c1d7d20">setPosition</a>(position, <a class="code" href="class_stream_info.html#a7c85128d9aed9f7c648206ad364fb80c">charReadPosition</a>);</div>
<div class="line"><a name="l01237"></a><span class="lineno"> 1237</span>&#160;}</div>
<div class="line"><a name="l01238"></a><span class="lineno"> 1238</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l01239"></a><span class="lineno"> 1239</span>&#160;<span class="comment">/**</span></div>
<div class="line"><a name="l01240"></a><span class="lineno"> 1240</span>&#160;<span class="comment"> * Sets the current write position for the stream.  This</span></div>
<div class="line"><a name="l01241"></a><span class="lineno"> 1241</span>&#160;<span class="comment"> * updates charWritePosition to point to the target location.</span></div>
<div class="line"><a name="l01242"></a><span class="lineno"> 1242</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l01243"></a><span class="lineno"> 1243</span>&#160;<span class="comment"> * @param position The target character position (Rexx coordinates, which</span></div>
<div class="line"><a name="l01244"></a><span class="lineno"> 1244</span>&#160;<span class="comment"> *                 means 1 based rather than the native zero-based).</span></div>
<div class="line"><a name="l01245"></a><span class="lineno"> 1245</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l01246"></a><span class="lineno"><a class="line" href="class_stream_info.html#aec46c954315c6782a9e1414af191ef07"> 1246</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="class_stream_info.html#aec46c954315c6782a9e1414af191ef07">StreamInfo::setWritePosition</a>(<a class="code" href="windows_2rexxapitypes_8h.html#a414156feea104f8f75b4ed9e3121b2f6">int64_t</a> position)</div>
<div class="line"><a name="l01247"></a><span class="lineno"> 1247</span>&#160;{</div>
<div class="line"><a name="l01248"></a><span class="lineno"> 1248</span>&#160;    <a class="code" href="class_stream_info.html#acd9fe6516d390ecca12931ae2c1d7d20">setPosition</a>(position, <a class="code" href="class_stream_info.html#a0ae0ea0f4fcc555c87d7e9be88bea96c">charWritePosition</a>);</div>
<div class="line"><a name="l01249"></a><span class="lineno"> 1249</span>&#160;}</div>
<div class="line"><a name="l01250"></a><span class="lineno"> 1250</span>&#160; </div>
<div class="line"><a name="l01251"></a><span class="lineno"> 1251</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l01252"></a><span class="lineno"> 1252</span>&#160;<span class="comment">/**</span></div>
<div class="line"><a name="l01253"></a><span class="lineno"> 1253</span>&#160;<span class="comment"> * Set the current character read position, raising a NOTREADY</span></div>
<div class="line"><a name="l01254"></a><span class="lineno"> 1254</span>&#160;<span class="comment"> * condition of there is a problem.</span></div>
<div class="line"><a name="l01255"></a><span class="lineno"> 1255</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l01256"></a><span class="lineno"> 1256</span>&#160;<span class="comment"> * @param position The target stream position.</span></div>
<div class="line"><a name="l01257"></a><span class="lineno"> 1257</span>&#160;<span class="comment"> * @param result   A result object returned to the caller after raising the</span></div>
<div class="line"><a name="l01258"></a><span class="lineno"> 1258</span>&#160;<span class="comment"> *                 condition.</span></div>
<div class="line"><a name="l01259"></a><span class="lineno"> 1259</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l01260"></a><span class="lineno"><a class="line" href="class_stream_info.html#aad4c8e3e1f02de1840276b794663000f"> 1260</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="class_stream_info.html#aad4c8e3e1f02de1840276b794663000f">StreamInfo::setCharReadPosition</a>(<a class="code" href="windows_2rexxapitypes_8h.html#a414156feea104f8f75b4ed9e3121b2f6">int64_t</a> position)</div>
<div class="line"><a name="l01261"></a><span class="lineno"> 1261</span>&#160;{</div>
<div class="line"><a name="l01262"></a><span class="lineno"> 1262</span>&#160;    <span class="keywordflow">if</span> (<span class="keyword">transient</span>)  <span class="comment">/* trying to move a transient stream?*/</span></div>
<div class="line"><a name="l01263"></a><span class="lineno"> 1263</span>&#160;    {</div>
<div class="line"><a name="l01264"></a><span class="lineno"> 1264</span>&#160;        <a class="code" href="class_stream_info.html#abf80be8acced099814a34b375353c2e3">raiseException</a>(<a class="code" href="oorexxerrors_8h.html#aba194bb31fb4e07a463542cdeff0d373">Rexx_Error_Incorrect_method_stream_type</a>);</div>
<div class="line"><a name="l01265"></a><span class="lineno"> 1265</span>&#160;    }</div>
<div class="line"><a name="l01266"></a><span class="lineno"> 1266</span>&#160; </div>
<div class="line"><a name="l01267"></a><span class="lineno"> 1267</span>&#160;    <span class="keywordflow">if</span> (position &lt; 1)                  <span class="comment">/* too small?                        */</span></div>
<div class="line"><a name="l01268"></a><span class="lineno"> 1268</span>&#160;    {</div>
<div class="line"><a name="l01269"></a><span class="lineno"> 1269</span>&#160;        <a class="code" href="class_stream_info.html#abf80be8acced099814a34b375353c2e3">raiseException</a>(<a class="code" href="oorexxerrors_8h.html#a4ef7c54dc948f65ea68d42ab536bf048">Rexx_Error_Incorrect_method_positive</a>, <a class="code" href="class_stream_info.html#a6a5404d4b7ece722baef78b65cab52d2">context</a>-&gt;String(<a class="code" href="_stream_native_8cpp.html#ad9c140fb679fc05ead46bb922e5d0873">CHAR_positional</a>), <a class="code" href="class_stream_info.html#a6a5404d4b7ece722baef78b65cab52d2">context</a>-&gt;WholeNumberToObject(1), <a class="code" href="class_stream_info.html#a6a5404d4b7ece722baef78b65cab52d2">context</a>-&gt;Int64ToObject(position));</div>
<div class="line"><a name="l01270"></a><span class="lineno"> 1270</span>&#160;    }</div>
<div class="line"><a name="l01271"></a><span class="lineno"> 1271</span>&#160;                                       <span class="comment">/* make sure we&#39;re within the bounds */</span></div>
<div class="line"><a name="l01272"></a><span class="lineno"> 1272</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="class_stream_info.html#af21ad8877a6411a69e033790ac94b299">size</a>() &gt;= position)</div>
<div class="line"><a name="l01273"></a><span class="lineno"> 1273</span>&#160;    {</div>
<div class="line"><a name="l01274"></a><span class="lineno"> 1274</span>&#160;        <span class="comment">// try to move to the new position, raising the appropriate NOTREADY</span></div>
<div class="line"><a name="l01275"></a><span class="lineno"> 1275</span>&#160;        <span class="comment">// if this is a failure.</span></div>
<div class="line"><a name="l01276"></a><span class="lineno"> 1276</span>&#160;        <a class="code" href="class_stream_info.html#afbda41cfa60155b0abc38125e0b99318">setReadPosition</a>(position);</div>
<div class="line"><a name="l01277"></a><span class="lineno"> 1277</span>&#160;    }</div>
<div class="line"><a name="l01278"></a><span class="lineno"> 1278</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l01279"></a><span class="lineno"> 1279</span>&#160;    {</div>
<div class="line"><a name="l01280"></a><span class="lineno"> 1280</span>&#160;        <span class="comment">// I can&#39;t do that Dave...raise an eof NOTREADY.</span></div>
<div class="line"><a name="l01281"></a><span class="lineno"> 1281</span>&#160;        <a class="code" href="class_stream_info.html#ad7f0af292aa094aec51e43972a5c5c8b">eof</a>();</div>
<div class="line"><a name="l01282"></a><span class="lineno"> 1282</span>&#160;    }</div>
<div class="line"><a name="l01283"></a><span class="lineno"> 1283</span>&#160;}</div>
<div class="line"><a name="l01284"></a><span class="lineno"> 1284</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l01285"></a><span class="lineno"> 1285</span>&#160;<span class="comment">/**</span></div>
<div class="line"><a name="l01286"></a><span class="lineno"> 1286</span>&#160;<span class="comment"> * Set the line read position.</span></div>
<div class="line"><a name="l01287"></a><span class="lineno"> 1287</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l01288"></a><span class="lineno"> 1288</span>&#160;<span class="comment"> * @param position The target position.</span></div>
<div class="line"><a name="l01289"></a><span class="lineno"> 1289</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l01290"></a><span class="lineno"><a class="line" href="class_stream_info.html#a02eb025b59624a43c189673c78f72cf4"> 1290</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="class_stream_info.html#a02eb025b59624a43c189673c78f72cf4">StreamInfo::setLineReadPosition</a>(<a class="code" href="windows_2rexxapitypes_8h.html#a414156feea104f8f75b4ed9e3121b2f6">int64_t</a> position)</div>
<div class="line"><a name="l01291"></a><span class="lineno"> 1291</span>&#160;{</div>
<div class="line"><a name="l01292"></a><span class="lineno"> 1292</span>&#160;    <span class="keywordflow">if</span> (<span class="keyword">transient</span>)  <span class="comment">/* trying to move a transient stream?*/</span></div>
<div class="line"><a name="l01293"></a><span class="lineno"> 1293</span>&#160;    {</div>
<div class="line"><a name="l01294"></a><span class="lineno"> 1294</span>&#160;        <a class="code" href="class_stream_info.html#abf80be8acced099814a34b375353c2e3">raiseException</a>(<a class="code" href="oorexxerrors_8h.html#aba194bb31fb4e07a463542cdeff0d373">Rexx_Error_Incorrect_method_stream_type</a>);</div>
<div class="line"><a name="l01295"></a><span class="lineno"> 1295</span>&#160;    }</div>
<div class="line"><a name="l01296"></a><span class="lineno"> 1296</span>&#160; </div>
<div class="line"><a name="l01297"></a><span class="lineno"> 1297</span>&#160;    <span class="keywordflow">if</span> (position &lt; 1)                  <span class="comment">/* too small?                        */</span></div>
<div class="line"><a name="l01298"></a><span class="lineno"> 1298</span>&#160;    {</div>
<div class="line"><a name="l01299"></a><span class="lineno"> 1299</span>&#160;        <a class="code" href="class_stream_info.html#abf80be8acced099814a34b375353c2e3">raiseException</a>(<a class="code" href="oorexxerrors_8h.html#a4ef7c54dc948f65ea68d42ab536bf048">Rexx_Error_Incorrect_method_positive</a>, <a class="code" href="class_stream_info.html#a6a5404d4b7ece722baef78b65cab52d2">context</a>-&gt;String(<a class="code" href="_stream_native_8cpp.html#ad9c140fb679fc05ead46bb922e5d0873">CHAR_positional</a>), <a class="code" href="class_stream_info.html#a6a5404d4b7ece722baef78b65cab52d2">context</a>-&gt;WholeNumberToObject(1), <a class="code" href="class_stream_info.html#a6a5404d4b7ece722baef78b65cab52d2">context</a>-&gt;Int64ToObject(position));</div>
<div class="line"><a name="l01300"></a><span class="lineno"> 1300</span>&#160;    }</div>
<div class="line"><a name="l01301"></a><span class="lineno"> 1301</span>&#160; </div>
<div class="line"><a name="l01302"></a><span class="lineno"> 1302</span>&#160;    <span class="comment">// go set the new locations information.</span></div>
<div class="line"><a name="l01303"></a><span class="lineno"> 1303</span>&#160;    <a class="code" href="class_stream_info.html#ad969f8a485a8785a3afa0bfd35286aee">setLinePosition</a>(position, <a class="code" href="class_stream_info.html#a08f5a0d7420eceed7503fce2d5b0917b">lineReadPosition</a>, <a class="code" href="class_stream_info.html#a44ecba6621790a306f4c08ee99af5e48">lineReadCharPosition</a>);</div>
<div class="line"><a name="l01304"></a><span class="lineno"> 1304</span>&#160;    <span class="comment">// and go set our read position appropriately</span></div>
<div class="line"><a name="l01305"></a><span class="lineno"> 1305</span>&#160;    <a class="code" href="class_stream_info.html#afbda41cfa60155b0abc38125e0b99318">setReadPosition</a>(<a class="code" href="class_stream_info.html#a44ecba6621790a306f4c08ee99af5e48">lineReadCharPosition</a>);</div>
<div class="line"><a name="l01306"></a><span class="lineno"> 1306</span>&#160;}</div>
<div class="line"><a name="l01307"></a><span class="lineno"> 1307</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l01308"></a><span class="lineno"> 1308</span>&#160;<span class="comment">/**</span></div>
<div class="line"><a name="l01309"></a><span class="lineno"> 1309</span>&#160;<span class="comment"> * Set the char write position.</span></div>
<div class="line"><a name="l01310"></a><span class="lineno"> 1310</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l01311"></a><span class="lineno"> 1311</span>&#160;<span class="comment"> * @param position The target position.</span></div>
<div class="line"><a name="l01312"></a><span class="lineno"> 1312</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l01313"></a><span class="lineno"><a class="line" href="class_stream_info.html#aaa8212d63b5021ee66ae024e71e9a5dd"> 1313</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="class_stream_info.html#aaa8212d63b5021ee66ae024e71e9a5dd">StreamInfo::setCharWritePosition</a>(<a class="code" href="windows_2rexxapitypes_8h.html#a414156feea104f8f75b4ed9e3121b2f6">int64_t</a> position)</div>
<div class="line"><a name="l01314"></a><span class="lineno"> 1314</span>&#160;{</div>
<div class="line"><a name="l01315"></a><span class="lineno"> 1315</span>&#160;    <span class="keywordflow">if</span> (<span class="keyword">transient</span>)  <span class="comment">/* trying to move a transient stream?*/</span></div>
<div class="line"><a name="l01316"></a><span class="lineno"> 1316</span>&#160;    {</div>
<div class="line"><a name="l01317"></a><span class="lineno"> 1317</span>&#160;        <a class="code" href="class_stream_info.html#abf80be8acced099814a34b375353c2e3">raiseException</a>(<a class="code" href="oorexxerrors_8h.html#aba194bb31fb4e07a463542cdeff0d373">Rexx_Error_Incorrect_method_stream_type</a>);</div>
<div class="line"><a name="l01318"></a><span class="lineno"> 1318</span>&#160;    }</div>
<div class="line"><a name="l01319"></a><span class="lineno"> 1319</span>&#160;    <span class="keywordflow">if</span> (position &lt; 1)                  <span class="comment">/* too small?                        */</span></div>
<div class="line"><a name="l01320"></a><span class="lineno"> 1320</span>&#160;    {</div>
<div class="line"><a name="l01321"></a><span class="lineno"> 1321</span>&#160;        <a class="code" href="class_stream_info.html#abf80be8acced099814a34b375353c2e3">raiseException</a>(<a class="code" href="oorexxerrors_8h.html#a4ef7c54dc948f65ea68d42ab536bf048">Rexx_Error_Incorrect_method_positive</a>, <a class="code" href="class_stream_info.html#a6a5404d4b7ece722baef78b65cab52d2">context</a>-&gt;String(<a class="code" href="_stream_native_8cpp.html#ad9c140fb679fc05ead46bb922e5d0873">CHAR_positional</a>), <a class="code" href="class_stream_info.html#a6a5404d4b7ece722baef78b65cab52d2">context</a>-&gt;WholeNumberToObject(1), <a class="code" href="class_stream_info.html#a6a5404d4b7ece722baef78b65cab52d2">context</a>-&gt;Int64ToObject(position));</div>
<div class="line"><a name="l01322"></a><span class="lineno"> 1322</span>&#160;    }</div>
<div class="line"><a name="l01323"></a><span class="lineno"> 1323</span>&#160;    <span class="comment">// go move to this position</span></div>
<div class="line"><a name="l01324"></a><span class="lineno"> 1324</span>&#160;    <a class="code" href="class_stream_info.html#aec46c954315c6782a9e1414af191ef07">setWritePosition</a>(position);</div>
<div class="line"><a name="l01325"></a><span class="lineno"> 1325</span>&#160;}</div>
<div class="line"><a name="l01326"></a><span class="lineno"> 1326</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l01327"></a><span class="lineno"> 1327</span>&#160;<span class="comment">/**</span></div>
<div class="line"><a name="l01328"></a><span class="lineno"> 1328</span>&#160;<span class="comment"> * Set the line write position.</span></div>
<div class="line"><a name="l01329"></a><span class="lineno"> 1329</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l01330"></a><span class="lineno"> 1330</span>&#160;<span class="comment"> * @param position The target position.</span></div>
<div class="line"><a name="l01331"></a><span class="lineno"> 1331</span>&#160;<span class="comment"> * @param result   A result value to be used when raising a condition.</span></div>
<div class="line"><a name="l01332"></a><span class="lineno"> 1332</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l01333"></a><span class="lineno"><a class="line" href="class_stream_info.html#ab63b31212a2404f52534a7ee890efdb6"> 1333</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="class_stream_info.html#ab63b31212a2404f52534a7ee890efdb6">StreamInfo::setLineWritePosition</a>(<a class="code" href="windows_2rexxapitypes_8h.html#a414156feea104f8f75b4ed9e3121b2f6">int64_t</a> position)</div>
<div class="line"><a name="l01334"></a><span class="lineno"> 1334</span>&#160;{</div>
<div class="line"><a name="l01335"></a><span class="lineno"> 1335</span>&#160;    <span class="keywordflow">if</span> (<span class="keyword">transient</span>)  <span class="comment">/* trying to move a transient stream?*/</span></div>
<div class="line"><a name="l01336"></a><span class="lineno"> 1336</span>&#160;    {</div>
<div class="line"><a name="l01337"></a><span class="lineno"> 1337</span>&#160;        <span class="comment">/* this is an error                  */</span></div>
<div class="line"><a name="l01338"></a><span class="lineno"> 1338</span>&#160;        <a class="code" href="class_stream_info.html#abf80be8acced099814a34b375353c2e3">raiseException</a>(<a class="code" href="oorexxerrors_8h.html#aba194bb31fb4e07a463542cdeff0d373">Rexx_Error_Incorrect_method_stream_type</a>);</div>
<div class="line"><a name="l01339"></a><span class="lineno"> 1339</span>&#160; </div>
<div class="line"><a name="l01340"></a><span class="lineno"> 1340</span>&#160;    }</div>
<div class="line"><a name="l01341"></a><span class="lineno"> 1341</span>&#160;    <span class="keywordflow">if</span> (position &lt; 1)                  <span class="comment">/* too small?                        */</span></div>
<div class="line"><a name="l01342"></a><span class="lineno"> 1342</span>&#160;    {</div>
<div class="line"><a name="l01343"></a><span class="lineno"> 1343</span>&#160;        <span class="comment">/* report an error also              */</span></div>
<div class="line"><a name="l01344"></a><span class="lineno"> 1344</span>&#160;        <a class="code" href="class_stream_info.html#abf80be8acced099814a34b375353c2e3">raiseException</a>(<a class="code" href="oorexxerrors_8h.html#a4ef7c54dc948f65ea68d42ab536bf048">Rexx_Error_Incorrect_method_positive</a>, <a class="code" href="class_stream_info.html#a6a5404d4b7ece722baef78b65cab52d2">context</a>-&gt;String(<a class="code" href="_stream_native_8cpp.html#ad9c140fb679fc05ead46bb922e5d0873">CHAR_positional</a>), <a class="code" href="class_stream_info.html#a6a5404d4b7ece722baef78b65cab52d2">context</a>-&gt;WholeNumberToObject(1), <a class="code" href="class_stream_info.html#a6a5404d4b7ece722baef78b65cab52d2">context</a>-&gt;Int64ToObject(position));</div>
<div class="line"><a name="l01345"></a><span class="lineno"> 1345</span>&#160; </div>
<div class="line"><a name="l01346"></a><span class="lineno"> 1346</span>&#160;    }</div>
<div class="line"><a name="l01347"></a><span class="lineno"> 1347</span>&#160; </div>
<div class="line"><a name="l01348"></a><span class="lineno"> 1348</span>&#160;    <span class="comment">// go set the new locations information.</span></div>
<div class="line"><a name="l01349"></a><span class="lineno"> 1349</span>&#160;    <a class="code" href="class_stream_info.html#ad969f8a485a8785a3afa0bfd35286aee">setLinePosition</a>(position, <a class="code" href="class_stream_info.html#ac180477faedf3ab1f5f37376d545e916">lineWritePosition</a>, <a class="code" href="class_stream_info.html#a520c92ac8d0d8c97c36fccdfdacb2c68">lineWriteCharPosition</a>);</div>
<div class="line"><a name="l01350"></a><span class="lineno"> 1350</span>&#160;    <span class="comment">// and go set our read position appropriately</span></div>
<div class="line"><a name="l01351"></a><span class="lineno"> 1351</span>&#160;    <a class="code" href="class_stream_info.html#aec46c954315c6782a9e1414af191ef07">setWritePosition</a>(<a class="code" href="class_stream_info.html#a520c92ac8d0d8c97c36fccdfdacb2c68">lineWriteCharPosition</a>);</div>
<div class="line"><a name="l01352"></a><span class="lineno"> 1352</span>&#160;}</div>
<div class="line"><a name="l01353"></a><span class="lineno"> 1353</span>&#160; </div>
<div class="line"><a name="l01354"></a><span class="lineno"> 1354</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l01355"></a><span class="lineno"> 1355</span>&#160;<span class="comment">/**</span></div>
<div class="line"><a name="l01356"></a><span class="lineno"> 1356</span>&#160;<span class="comment"> * Read in a variable length line, searching for the eol marker</span></div>
<div class="line"><a name="l01357"></a><span class="lineno"> 1357</span>&#160;<span class="comment"> * for the line.</span></div>
<div class="line"><a name="l01358"></a><span class="lineno"> 1358</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l01359"></a><span class="lineno"> 1359</span>&#160;<span class="comment"> * @return The read line.</span></div>
<div class="line"><a name="l01360"></a><span class="lineno"> 1360</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l01361"></a><span class="lineno"><a class="line" href="class_stream_info.html#a397cd3ca9e8626c2623ddd2036bc2334"> 1361</a></span>&#160;<a class="code" href="rexx_8h.html#a64dfe004825692637e2075467179fcd9">RexxStringObject</a> <a class="code" href="class_stream_info.html#a397cd3ca9e8626c2623ddd2036bc2334">StreamInfo::readVariableLine</a>()</div>
<div class="line"><a name="l01362"></a><span class="lineno"> 1362</span>&#160;{</div>
<div class="line"><a name="l01363"></a><span class="lineno"> 1363</span>&#160;    <span class="comment">// allocate a buffer for this line.  We get a pretty good size one, which will</span></div>
<div class="line"><a name="l01364"></a><span class="lineno"> 1364</span>&#160;    <span class="comment">// most likely be sufficient for most file lines.</span></div>
<div class="line"><a name="l01365"></a><span class="lineno"> 1365</span>&#160;    <span class="keywordtype">size_t</span> bufferSize;</div>
<div class="line"><a name="l01366"></a><span class="lineno"> 1366</span>&#160;    <span class="keywordtype">char</span>  *buffer = <a class="code" href="class_stream_info.html#ab0d43c59700af0f30458d0105a3dc792">getDefaultBuffer</a>(bufferSize);</div>
<div class="line"><a name="l01367"></a><span class="lineno"> 1367</span>&#160;    <span class="keywordtype">size_t</span> currentLength = 0;</div>
<div class="line"><a name="l01368"></a><span class="lineno"> 1368</span>&#160; </div>
<div class="line"><a name="l01369"></a><span class="lineno"> 1369</span>&#160;    <span class="comment">// now loop until get an entire line read in.</span></div>
<div class="line"><a name="l01370"></a><span class="lineno"> 1370</span>&#160;    <span class="keywordflow">for</span> (;;)</div>
<div class="line"><a name="l01371"></a><span class="lineno"> 1371</span>&#160;    {</div>
<div class="line"><a name="l01372"></a><span class="lineno"> 1372</span>&#160;        <span class="keywordtype">char</span> *readPosition = buffer + currentLength;</div>
<div class="line"><a name="l01373"></a><span class="lineno"> 1373</span>&#160;        <span class="keywordtype">size_t</span> bytesRead = 0;</div>
<div class="line"><a name="l01374"></a><span class="lineno"> 1374</span>&#160;        <span class="keywordflow">if</span> (!<a class="code" href="class_stream_info.html#a35caea85b14b8f2b8b734c3b51eb7f4b">fileInfo</a>.<a class="code" href="class_sys_file.html#a48ce2e3345bf0b3d2ab875dacd326b8f">gets</a>(readPosition, bufferSize - currentLength, bytesRead))</div>
<div class="line"><a name="l01375"></a><span class="lineno"> 1375</span>&#160;        {</div>
<div class="line"><a name="l01376"></a><span class="lineno"> 1376</span>&#160;            <a class="code" href="class_stream_info.html#a841a460b1c724355c504bd21fe9382fc">checkEof</a>();</div>
<div class="line"><a name="l01377"></a><span class="lineno"> 1377</span>&#160;        }</div>
<div class="line"><a name="l01378"></a><span class="lineno"> 1378</span>&#160;        <span class="comment">// update the size of the line now</span></div>
<div class="line"><a name="l01379"></a><span class="lineno"> 1379</span>&#160;        currentLength += bytesRead;</div>
<div class="line"><a name="l01380"></a><span class="lineno"> 1380</span>&#160; </div>
<div class="line"><a name="l01381"></a><span class="lineno"> 1381</span>&#160;        <span class="comment">// Check for new line character first.  If we are at eof and the last</span></div>
<div class="line"><a name="l01382"></a><span class="lineno"> 1382</span>&#160;        <span class="comment">// line ended in a new line, we don&#39;t want the \n in the returned</span></div>
<div class="line"><a name="l01383"></a><span class="lineno"> 1383</span>&#160;        <span class="comment">// string.</span></div>
<div class="line"><a name="l01384"></a><span class="lineno"> 1384</span>&#160; </div>
<div class="line"><a name="l01385"></a><span class="lineno"> 1385</span>&#160;        <span class="comment">// If we have a new line character in the last position, we have</span></div>
<div class="line"><a name="l01386"></a><span class="lineno"> 1386</span>&#160;        <span class="comment">// a line.  The gets() function has translated crlf sequences into</span></div>
<div class="line"><a name="l01387"></a><span class="lineno"> 1387</span>&#160;        <span class="comment">// single lf characters.</span></div>
<div class="line"><a name="l01388"></a><span class="lineno"> 1388</span>&#160;        <span class="keywordflow">if</span> (buffer[currentLength - 1] == <span class="charliteral">&#39;\n&#39;</span>)</div>
<div class="line"><a name="l01389"></a><span class="lineno"> 1389</span>&#160;        {</div>
<div class="line"><a name="l01390"></a><span class="lineno"> 1390</span>&#160;            <a class="code" href="class_stream_info.html#a37008c68746b1e391b61f2f8da6b5e80">lineReadIncrement</a>();</div>
<div class="line"><a name="l01391"></a><span class="lineno"> 1391</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="class_stream_info.html#a6a5404d4b7ece722baef78b65cab52d2">context</a>-&gt;NewString(buffer, currentLength - 1);</div>
<div class="line"><a name="l01392"></a><span class="lineno"> 1392</span>&#160;        }</div>
<div class="line"><a name="l01393"></a><span class="lineno"> 1393</span>&#160; </div>
<div class="line"><a name="l01394"></a><span class="lineno"> 1394</span>&#160;        <span class="comment">// No new line but we hit end of file reading this?  This will be the</span></div>
<div class="line"><a name="l01395"></a><span class="lineno"> 1395</span>&#160;        <span class="comment">// entire line then.</span></div>
<div class="line"><a name="l01396"></a><span class="lineno"> 1396</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="class_stream_info.html#a35caea85b14b8f2b8b734c3b51eb7f4b">fileInfo</a>.<a class="code" href="class_sys_file.html#a2da4b6f857ccd665bbb0653d895fe33d">atEof</a>())</div>
<div class="line"><a name="l01397"></a><span class="lineno"> 1397</span>&#160;        {</div>
<div class="line"><a name="l01398"></a><span class="lineno"> 1398</span>&#160;            <a class="code" href="class_stream_info.html#a37008c68746b1e391b61f2f8da6b5e80">lineReadIncrement</a>();</div>
<div class="line"><a name="l01399"></a><span class="lineno"> 1399</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="class_stream_info.html#a6a5404d4b7ece722baef78b65cab52d2">context</a>-&gt;NewString(buffer, currentLength);</div>
<div class="line"><a name="l01400"></a><span class="lineno"> 1400</span>&#160;        }</div>
<div class="line"><a name="l01401"></a><span class="lineno"> 1401</span>&#160;        buffer = <a class="code" href="class_stream_info.html#ae5ffc9e04621a6ad29c979e1d38ab244">extendBuffer</a>(bufferSize);</div>
<div class="line"><a name="l01402"></a><span class="lineno"> 1402</span>&#160;    }</div>
<div class="line"><a name="l01403"></a><span class="lineno"> 1403</span>&#160;}</div>
<div class="line"><a name="l01404"></a><span class="lineno"> 1404</span>&#160; </div>
<div class="line"><a name="l01405"></a><span class="lineno"> 1405</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l01406"></a><span class="lineno"> 1406</span>&#160;<span class="comment">/**</span></div>
<div class="line"><a name="l01407"></a><span class="lineno"> 1407</span>&#160;<span class="comment"> * Read in a variable length line, searching for the eol marker</span></div>
<div class="line"><a name="l01408"></a><span class="lineno"> 1408</span>&#160;<span class="comment"> * for the line.</span></div>
<div class="line"><a name="l01409"></a><span class="lineno"> 1409</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l01410"></a><span class="lineno"> 1410</span>&#160;<span class="comment"> * @return The read line.</span></div>
<div class="line"><a name="l01411"></a><span class="lineno"> 1411</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l01412"></a><span class="lineno"><a class="line" href="class_stream_info.html#abe511e95dadd82f3135c71bf22f7b378"> 1412</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="class_stream_info.html#abe511e95dadd82f3135c71bf22f7b378">StreamInfo::appendVariableLine</a>(<a class="code" href="rexx_8h.html#a67754d7374685ba954286d7268debd80">RexxArrayObject</a> result)</div>
<div class="line"><a name="l01413"></a><span class="lineno"> 1413</span>&#160;{</div>
<div class="line"><a name="l01414"></a><span class="lineno"> 1414</span>&#160;    <span class="comment">// allocate a buffer for this line.  We get a pretty good size one, which will</span></div>
<div class="line"><a name="l01415"></a><span class="lineno"> 1415</span>&#160;    <span class="comment">// most likely be sufficient for most file lines.</span></div>
<div class="line"><a name="l01416"></a><span class="lineno"> 1416</span>&#160;    <span class="keywordtype">size_t</span> bufferSize;</div>
<div class="line"><a name="l01417"></a><span class="lineno"> 1417</span>&#160;    <span class="keywordtype">char</span>  *buffer = <a class="code" href="class_stream_info.html#ab0d43c59700af0f30458d0105a3dc792">getDefaultBuffer</a>(bufferSize);</div>
<div class="line"><a name="l01418"></a><span class="lineno"> 1418</span>&#160;    <span class="keywordtype">size_t</span> currentLength = 0;</div>
<div class="line"><a name="l01419"></a><span class="lineno"> 1419</span>&#160; </div>
<div class="line"><a name="l01420"></a><span class="lineno"> 1420</span>&#160;    <span class="comment">// now loop until get an entire line read in.</span></div>
<div class="line"><a name="l01421"></a><span class="lineno"> 1421</span>&#160;    <span class="keywordflow">for</span> (;;)</div>
<div class="line"><a name="l01422"></a><span class="lineno"> 1422</span>&#160;    {</div>
<div class="line"><a name="l01423"></a><span class="lineno"> 1423</span>&#160;        <span class="keywordtype">char</span> *readPosition = buffer + currentLength;</div>
<div class="line"><a name="l01424"></a><span class="lineno"> 1424</span>&#160;        <span class="keywordtype">size_t</span> bytesRead = 0;</div>
<div class="line"><a name="l01425"></a><span class="lineno"> 1425</span>&#160;        <span class="keywordflow">if</span> (!<a class="code" href="class_stream_info.html#a35caea85b14b8f2b8b734c3b51eb7f4b">fileInfo</a>.<a class="code" href="class_sys_file.html#a48ce2e3345bf0b3d2ab875dacd326b8f">gets</a>(readPosition, bufferSize - currentLength, bytesRead))</div>
<div class="line"><a name="l01426"></a><span class="lineno"> 1426</span>&#160;        {</div>
<div class="line"><a name="l01427"></a><span class="lineno"> 1427</span>&#160;            <a class="code" href="class_stream_info.html#a841a460b1c724355c504bd21fe9382fc">checkEof</a>();</div>
<div class="line"><a name="l01428"></a><span class="lineno"> 1428</span>&#160;        }</div>
<div class="line"><a name="l01429"></a><span class="lineno"> 1429</span>&#160; </div>
<div class="line"><a name="l01430"></a><span class="lineno"> 1430</span>&#160;        <span class="comment">// update the size of the line now</span></div>
<div class="line"><a name="l01431"></a><span class="lineno"> 1431</span>&#160;        currentLength += bytesRead;</div>
<div class="line"><a name="l01432"></a><span class="lineno"> 1432</span>&#160; </div>
<div class="line"><a name="l01433"></a><span class="lineno"> 1433</span>&#160;        <span class="comment">// Check for new line character first.  If we are at eof and the last</span></div>
<div class="line"><a name="l01434"></a><span class="lineno"> 1434</span>&#160;        <span class="comment">// line ended in a new line, we don&#39;t want the \n in the returned</span></div>
<div class="line"><a name="l01435"></a><span class="lineno"> 1435</span>&#160;        <span class="comment">// string.</span></div>
<div class="line"><a name="l01436"></a><span class="lineno"> 1436</span>&#160; </div>
<div class="line"><a name="l01437"></a><span class="lineno"> 1437</span>&#160;        <span class="comment">// If we have a new line character in the last position, we have</span></div>
<div class="line"><a name="l01438"></a><span class="lineno"> 1438</span>&#160;        <span class="comment">// a line.  The gets() function has translated crlf sequences into</span></div>
<div class="line"><a name="l01439"></a><span class="lineno"> 1439</span>&#160;        <span class="comment">// single lf characters.</span></div>
<div class="line"><a name="l01440"></a><span class="lineno"> 1440</span>&#160;        <span class="keywordflow">if</span> (buffer[currentLength - 1] == <span class="charliteral">&#39;\n&#39;</span>)</div>
<div class="line"><a name="l01441"></a><span class="lineno"> 1441</span>&#160;        {</div>
<div class="line"><a name="l01442"></a><span class="lineno"> 1442</span>&#160;            <a class="code" href="class_stream_info.html#a37008c68746b1e391b61f2f8da6b5e80">lineReadIncrement</a>();</div>
<div class="line"><a name="l01443"></a><span class="lineno"> 1443</span>&#160;            <a class="code" href="class_stream_info.html#a6a5404d4b7ece722baef78b65cab52d2">context</a>-&gt;ArrayAppendString(result, buffer, currentLength - 1);</div>
<div class="line"><a name="l01444"></a><span class="lineno"> 1444</span>&#160;            <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01445"></a><span class="lineno"> 1445</span>&#160;        }</div>
<div class="line"><a name="l01446"></a><span class="lineno"> 1446</span>&#160; </div>
<div class="line"><a name="l01447"></a><span class="lineno"> 1447</span>&#160;        <span class="comment">// No new line but we hit end of file reading this?  This will be the</span></div>
<div class="line"><a name="l01448"></a><span class="lineno"> 1448</span>&#160;        <span class="comment">// entire line then.</span></div>
<div class="line"><a name="l01449"></a><span class="lineno"> 1449</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="class_stream_info.html#a35caea85b14b8f2b8b734c3b51eb7f4b">fileInfo</a>.<a class="code" href="class_sys_file.html#a2da4b6f857ccd665bbb0653d895fe33d">atEof</a>())</div>
<div class="line"><a name="l01450"></a><span class="lineno"> 1450</span>&#160;        {</div>
<div class="line"><a name="l01451"></a><span class="lineno"> 1451</span>&#160;            <a class="code" href="class_stream_info.html#a37008c68746b1e391b61f2f8da6b5e80">lineReadIncrement</a>();</div>
<div class="line"><a name="l01452"></a><span class="lineno"> 1452</span>&#160;            <a class="code" href="class_stream_info.html#a6a5404d4b7ece722baef78b65cab52d2">context</a>-&gt;ArrayAppendString(result, buffer, currentLength);</div>
<div class="line"><a name="l01453"></a><span class="lineno"> 1453</span>&#160;        }</div>
<div class="line"><a name="l01454"></a><span class="lineno"> 1454</span>&#160;        buffer = <a class="code" href="class_stream_info.html#ae5ffc9e04621a6ad29c979e1d38ab244">extendBuffer</a>(bufferSize);</div>
<div class="line"><a name="l01455"></a><span class="lineno"> 1455</span>&#160;    }</div>
<div class="line"><a name="l01456"></a><span class="lineno"> 1456</span>&#160;}</div>
<div class="line"><a name="l01457"></a><span class="lineno"> 1457</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l01458"></a><span class="lineno"> 1458</span>&#160;<span class="comment">/**</span></div>
<div class="line"><a name="l01459"></a><span class="lineno"> 1459</span>&#160;<span class="comment"> * Increments the read positions, including the line-orientated positions, after</span></div>
<div class="line"><a name="l01460"></a><span class="lineno"> 1460</span>&#160;<span class="comment"> * a single line has been read. Assumes one line has actually been read.</span></div>
<div class="line"><a name="l01461"></a><span class="lineno"> 1461</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l01462"></a><span class="lineno"><a class="line" href="class_stream_info.html#a37008c68746b1e391b61f2f8da6b5e80"> 1462</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="class_stream_info.html#a37008c68746b1e391b61f2f8da6b5e80">StreamInfo::lineReadIncrement</a>()</div>
<div class="line"><a name="l01463"></a><span class="lineno"> 1463</span>&#160;{</div>
<div class="line"><a name="l01464"></a><span class="lineno"> 1464</span>&#160;    <span class="comment">// transient streams don&#39;t have moveable positions</span></div>
<div class="line"><a name="l01465"></a><span class="lineno"> 1465</span>&#160;    <span class="keywordflow">if</span> (<span class="keyword">transient</span>)</div>
<div class="line"><a name="l01466"></a><span class="lineno"> 1466</span>&#160;    {</div>
<div class="line"><a name="l01467"></a><span class="lineno"> 1467</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01468"></a><span class="lineno"> 1468</span>&#160;    }</div>
<div class="line"><a name="l01469"></a><span class="lineno"> 1469</span>&#160; </div>
<div class="line"><a name="l01470"></a><span class="lineno"> 1470</span>&#160;    <span class="keywordflow">if</span> ( !<a class="code" href="class_stream_info.html#a35caea85b14b8f2b8b734c3b51eb7f4b">fileInfo</a>.<a class="code" href="class_sys_file.html#a8c77a233d2b05cf4d300785fc23abcc7">getPosition</a>(<a class="code" href="class_stream_info.html#a7c85128d9aed9f7c648206ad364fb80c">charReadPosition</a>) )</div>
<div class="line"><a name="l01471"></a><span class="lineno"> 1471</span>&#160;    {</div>
<div class="line"><a name="l01472"></a><span class="lineno"> 1472</span>&#160;        <a class="code" href="class_stream_info.html#a6f99538562048386f872fb1843462267">notreadyError</a>();</div>
<div class="line"><a name="l01473"></a><span class="lineno"> 1473</span>&#160;    }</div>
<div class="line"><a name="l01474"></a><span class="lineno"> 1474</span>&#160;    <span class="comment">// Keep this 1-based.</span></div>
<div class="line"><a name="l01475"></a><span class="lineno"> 1475</span>&#160;    <a class="code" href="class_stream_info.html#a7c85128d9aed9f7c648206ad364fb80c">charReadPosition</a>++;</div>
<div class="line"><a name="l01476"></a><span class="lineno"> 1476</span>&#160; </div>
<div class="line"><a name="l01477"></a><span class="lineno"> 1477</span>&#160;    <a class="code" href="class_stream_info.html#a08f5a0d7420eceed7503fce2d5b0917b">lineReadPosition</a>++;</div>
<div class="line"><a name="l01478"></a><span class="lineno"> 1478</span>&#160;    <a class="code" href="class_stream_info.html#a44ecba6621790a306f4c08ee99af5e48">lineReadCharPosition</a> = <a class="code" href="class_stream_info.html#a7c85128d9aed9f7c648206ad364fb80c">charReadPosition</a>;</div>
<div class="line"><a name="l01479"></a><span class="lineno"> 1479</span>&#160;    <a class="code" href="class_stream_info.html#ad07a90a21f1116a83b681e8f1e966986">last_op_was_read</a> = <span class="keyword">true</span>;</div>
<div class="line"><a name="l01480"></a><span class="lineno"> 1480</span>&#160;}</div>
<div class="line"><a name="l01481"></a><span class="lineno"> 1481</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l01482"></a><span class="lineno"> 1482</span>&#160;<span class="comment">/**</span></div>
<div class="line"><a name="l01483"></a><span class="lineno"> 1483</span>&#160;<span class="comment"> * Reset all line-oriented position information after an</span></div>
<div class="line"><a name="l01484"></a><span class="lineno"> 1484</span>&#160;<span class="comment"> * operation that will invalidate the values (for example, a</span></div>
<div class="line"><a name="l01485"></a><span class="lineno"> 1485</span>&#160;<span class="comment"> * charin() or charout() operation).</span></div>
<div class="line"><a name="l01486"></a><span class="lineno"> 1486</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l01487"></a><span class="lineno"><a class="line" href="class_stream_info.html#a76bfce967cb2779165750bda09ba2402"> 1487</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="class_stream_info.html#a76bfce967cb2779165750bda09ba2402">StreamInfo::resetLinePositions</a>()</div>
<div class="line"><a name="l01488"></a><span class="lineno"> 1488</span>&#160;{</div>
<div class="line"><a name="l01489"></a><span class="lineno"> 1489</span>&#160;    <span class="comment">// reset all cached line information after an invalidating operation.</span></div>
<div class="line"><a name="l01490"></a><span class="lineno"> 1490</span>&#160;    <a class="code" href="class_stream_info.html#a44ecba6621790a306f4c08ee99af5e48">lineReadCharPosition</a> = 0;</div>
<div class="line"><a name="l01491"></a><span class="lineno"> 1491</span>&#160;    <a class="code" href="class_stream_info.html#a08f5a0d7420eceed7503fce2d5b0917b">lineReadPosition</a> = 0;</div>
<div class="line"><a name="l01492"></a><span class="lineno"> 1492</span>&#160;    <a class="code" href="class_stream_info.html#ac4e90641d1e2c5b6a30b512e37a7458c">stream_line_size</a> = 0;</div>
<div class="line"><a name="l01493"></a><span class="lineno"> 1493</span>&#160;}</div>
<div class="line"><a name="l01494"></a><span class="lineno"> 1494</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l01495"></a><span class="lineno"> 1495</span>&#160;<span class="comment">/**</span></div>
<div class="line"><a name="l01496"></a><span class="lineno"> 1496</span>&#160;<span class="comment"> * Perform a charin() operation on the stream.</span></div>
<div class="line"><a name="l01497"></a><span class="lineno"> 1497</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l01498"></a><span class="lineno"> 1498</span>&#160;<span class="comment"> * @param setPosition</span></div>
<div class="line"><a name="l01499"></a><span class="lineno"> 1499</span>&#160;<span class="comment"> *                 Indicates whether it is necessary to move the read pointer</span></div>
<div class="line"><a name="l01500"></a><span class="lineno"> 1500</span>&#160;<span class="comment"> *                 before reading.</span></div>
<div class="line"><a name="l01501"></a><span class="lineno"> 1501</span>&#160;<span class="comment"> * @param position New target position.</span></div>
<div class="line"><a name="l01502"></a><span class="lineno"> 1502</span>&#160;<span class="comment"> * @param read_length</span></div>
<div class="line"><a name="l01503"></a><span class="lineno"> 1503</span>&#160;<span class="comment"> *                 Length to read.</span></div>
<div class="line"><a name="l01504"></a><span class="lineno"> 1504</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l01505"></a><span class="lineno"> 1505</span>&#160;<span class="comment"> * @return A string object containing the read characters.</span></div>
<div class="line"><a name="l01506"></a><span class="lineno"> 1506</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l01507"></a><span class="lineno"><a class="line" href="class_stream_info.html#a764822b890bf76de1237d91485a80de8"> 1507</a></span>&#160;<a class="code" href="rexx_8h.html#a64dfe004825692637e2075467179fcd9">RexxStringObject</a> <a class="code" href="class_stream_info.html#a764822b890bf76de1237d91485a80de8">StreamInfo::charin</a>(<span class="keywordtype">bool</span> _setPosition, <a class="code" href="windows_2rexxapitypes_8h.html#a414156feea104f8f75b4ed9e3121b2f6">int64_t</a> position, <span class="keywordtype">size_t</span> read_length)</div>
<div class="line"><a name="l01508"></a><span class="lineno"> 1508</span>&#160;{</div>
<div class="line"><a name="l01509"></a><span class="lineno"> 1509</span>&#160;    <a class="code" href="class_stream_info.html#a1cea3fe0284cc4761746767d4c302fcb">readSetup</a>();                        <span class="comment">/* do needed setup                   */</span></div>
<div class="line"><a name="l01510"></a><span class="lineno"> 1510</span>&#160;    <span class="comment">// given a position?...go set it.</span></div>
<div class="line"><a name="l01511"></a><span class="lineno"> 1511</span>&#160;    <span class="keywordflow">if</span> (_setPosition)</div>
<div class="line"><a name="l01512"></a><span class="lineno"> 1512</span>&#160;    {</div>
<div class="line"><a name="l01513"></a><span class="lineno"> 1513</span>&#160;       <a class="code" href="class_stream_info.html#aad4c8e3e1f02de1840276b794663000f">setCharReadPosition</a>(position);</div>
<div class="line"><a name="l01514"></a><span class="lineno"> 1514</span>&#160;    }</div>
<div class="line"><a name="l01515"></a><span class="lineno"> 1515</span>&#160;    <span class="comment">// reading nothing (silly, but allowed)</span></div>
<div class="line"><a name="l01516"></a><span class="lineno"> 1516</span>&#160;    <span class="keywordflow">if</span> (read_length == 0)</div>
<div class="line"><a name="l01517"></a><span class="lineno"> 1517</span>&#160;    {</div>
<div class="line"><a name="l01518"></a><span class="lineno"> 1518</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="class_stream_info.html#a6a5404d4b7ece722baef78b65cab52d2">context</a>-&gt;NullString();</div>
<div class="line"><a name="l01519"></a><span class="lineno"> 1519</span>&#160;    }</div>
<div class="line"><a name="l01520"></a><span class="lineno"> 1520</span>&#160; </div>
<div class="line"><a name="l01521"></a><span class="lineno"> 1521</span>&#160;    <span class="comment">// a buffer string allows us to read the data into an actual string object</span></div>
<div class="line"><a name="l01522"></a><span class="lineno"> 1522</span>&#160;    <span class="comment">// without having to first read it into a separate buffer.  Since charin()</span></div>
<div class="line"><a name="l01523"></a><span class="lineno"> 1523</span>&#160;    <span class="comment">// is frequently used to read in entire files at one shot, this can be a</span></div>
<div class="line"><a name="l01524"></a><span class="lineno"> 1524</span>&#160;    <span class="comment">// fairly significant savings.</span></div>
<div class="line"><a name="l01525"></a><span class="lineno"> 1525</span>&#160;    <a class="code" href="rexx_8h.html#a7b083927909eb2c01187f82602161d11">RexxBufferStringObject</a> result = <a class="code" href="class_stream_info.html#a6a5404d4b7ece722baef78b65cab52d2">context</a>-&gt;NewBufferString(read_length);</div>
<div class="line"><a name="l01526"></a><span class="lineno"> 1526</span>&#160;    <span class="keywordtype">char</span> *buffer = (<span class="keywordtype">char</span> *)<a class="code" href="class_stream_info.html#a6a5404d4b7ece722baef78b65cab52d2">context</a>-&gt;BufferStringData(result);</div>
<div class="line"><a name="l01527"></a><span class="lineno"> 1527</span>&#160; </div>
<div class="line"><a name="l01528"></a><span class="lineno"> 1528</span>&#160;    <span class="comment">// do the actual read</span></div>
<div class="line"><a name="l01529"></a><span class="lineno"> 1529</span>&#160;    <span class="keywordtype">size_t</span> bytesRead;</div>
<div class="line"><a name="l01530"></a><span class="lineno"> 1530</span>&#160;    <a class="code" href="class_stream_info.html#af6a6171af162ebfe3338bf423735b96d">readBuffer</a>(buffer, read_length, bytesRead);</div>
<div class="line"><a name="l01531"></a><span class="lineno"> 1531</span>&#160; </div>
<div class="line"><a name="l01532"></a><span class="lineno"> 1532</span>&#160;    <span class="comment">// invalidate all of the line positioning info</span></div>
<div class="line"><a name="l01533"></a><span class="lineno"> 1533</span>&#160;    <a class="code" href="class_stream_info.html#a76bfce967cb2779165750bda09ba2402">resetLinePositions</a>();</div>
<div class="line"><a name="l01534"></a><span class="lineno"> 1534</span>&#160; </div>
<div class="line"><a name="l01535"></a><span class="lineno"> 1535</span>&#160;    <span class="comment">// now convert our buffered string into a real string object and return it.</span></div>
<div class="line"><a name="l01536"></a><span class="lineno"> 1536</span>&#160;    <a class="code" href="rexx_8h.html#a64dfe004825692637e2075467179fcd9">RexxStringObject</a> res = <a class="code" href="class_stream_info.html#a6a5404d4b7ece722baef78b65cab52d2">context</a>-&gt;FinishBufferString(result, bytesRead);</div>
<div class="line"><a name="l01537"></a><span class="lineno"> 1537</span>&#160;    <span class="comment">// if we didn&#39;t get the requested amount, return what we got but raise a</span></div>
<div class="line"><a name="l01538"></a><span class="lineno"> 1538</span>&#160;    <span class="comment">// notready condition</span></div>
<div class="line"><a name="l01539"></a><span class="lineno"> 1539</span>&#160;    <span class="keywordflow">if</span> (bytesRead &lt; read_length)</div>
<div class="line"><a name="l01540"></a><span class="lineno"> 1540</span>&#160;    {</div>
<div class="line"><a name="l01541"></a><span class="lineno"> 1541</span>&#160;        <a class="code" href="class_stream_info.html#ad7f0af292aa094aec51e43972a5c5c8b">eof</a>(res);</div>
<div class="line"><a name="l01542"></a><span class="lineno"> 1542</span>&#160;    }</div>
<div class="line"><a name="l01543"></a><span class="lineno"> 1543</span>&#160;    <span class="keywordflow">return</span> res;</div>
<div class="line"><a name="l01544"></a><span class="lineno"> 1544</span>&#160;}</div>
<div class="line"><a name="l01545"></a><span class="lineno"> 1545</span>&#160; </div>
<div class="line"><a name="l01546"></a><span class="lineno"> 1546</span>&#160;<span class="comment">/********************************************************************************************/</span></div>
<div class="line"><a name="l01547"></a><span class="lineno"> 1547</span>&#160;<span class="comment">/* stream_charin                                                                            */</span></div>
<div class="line"><a name="l01548"></a><span class="lineno"> 1548</span>&#160;<span class="comment">/********************************************************************************************/</span></div>
<div class="line"><a name="l01549"></a><span class="lineno"><a class="line" href="_stream_native_8cpp.html#ae7f9b5a15d54057c1cebabeff85b2ac8"> 1549</a></span>&#160;<a class="code" href="_stream_native_8cpp.html#ae7f9b5a15d54057c1cebabeff85b2ac8">RexxMethod3</a>(<a class="code" href="rexx_8h.html#a64dfe004825692637e2075467179fcd9">RexxStringObject</a>, stream_charin, <a class="code" href="oorexxapi_8h.html#a3b5f38e088a2ba7f412c33f6d97f852a">CSELF</a>, streamPtr, OPTIONAL_int64_t, position, OPTIONAL_size_t, read_length)</div>
<div class="line"><a name="l01550"></a><span class="lineno"> 1550</span>&#160;{</div>
<div class="line"><a name="l01551"></a><span class="lineno"> 1551</span>&#160;    <span class="keywordflow">try</span></div>
<div class="line"><a name="l01552"></a><span class="lineno"> 1552</span>&#160;    {</div>
<div class="line"><a name="l01553"></a><span class="lineno"> 1553</span>&#160;        <a class="code" href="class_stream_info.html">StreamInfo</a> *stream_info = <a class="code" href="_stream_native_8cpp.html#a1fbef9d1aba5e27b6754dda2d30239fa">checkStreamInfo</a>(context, streamPtr, context-&gt;NullString());</div>
<div class="line"><a name="l01554"></a><span class="lineno"> 1554</span>&#160;        <span class="keywordflow">return</span> stream_info-&gt;<a class="code" href="class_stream_info.html#a764822b890bf76de1237d91485a80de8">charin</a>(<a class="code" href="oorexxapi_8h.html#a15c340ee5245f15f32265d54a1e5a3f5">argumentExists</a>(2), position, <a class="code" href="oorexxapi_8h.html#a895bccfb4968ae24b153351beadd50f7">argumentOmitted</a>(3) ? 1 : read_length);</div>
<div class="line"><a name="l01555"></a><span class="lineno"> 1555</span>&#160;    }</div>
<div class="line"><a name="l01556"></a><span class="lineno"> 1556</span>&#160;    <span class="keywordflow">catch</span> (<a class="code" href="class_stream_info.html">StreamInfo</a> *)</div>
<div class="line"><a name="l01557"></a><span class="lineno"> 1557</span>&#160;    {</div>
<div class="line"><a name="l01558"></a><span class="lineno"> 1558</span>&#160;    }</div>
<div class="line"><a name="l01559"></a><span class="lineno"> 1559</span>&#160;    <span class="comment">// this is thrown for any exceptions</span></div>
<div class="line"><a name="l01560"></a><span class="lineno"> 1560</span>&#160;    <span class="keywordflow">catch</span> (<span class="keywordtype">int</span>)</div>
<div class="line"><a name="l01561"></a><span class="lineno"> 1561</span>&#160;    {</div>
<div class="line"><a name="l01562"></a><span class="lineno"> 1562</span>&#160;        <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l01563"></a><span class="lineno"> 1563</span>&#160;    }</div>
<div class="line"><a name="l01564"></a><span class="lineno"> 1564</span>&#160; </div>
<div class="line"><a name="l01565"></a><span class="lineno"> 1565</span>&#160;    <span class="comment">// give default return in case there is an error</span></div>
<div class="line"><a name="l01566"></a><span class="lineno"> 1566</span>&#160;    <span class="keywordflow">return</span> context-&gt;NullString();</div>
<div class="line"><a name="l01567"></a><span class="lineno"> 1567</span>&#160;}</div>
<div class="line"><a name="l01568"></a><span class="lineno"> 1568</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l01569"></a><span class="lineno"> 1569</span>&#160;<span class="comment">/**</span></div>
<div class="line"><a name="l01570"></a><span class="lineno"> 1570</span>&#160;<span class="comment"> * Write character data to the stream.</span></div>
<div class="line"><a name="l01571"></a><span class="lineno"> 1571</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l01572"></a><span class="lineno"> 1572</span>&#160;<span class="comment"> * @param data     The string object data we&#39;re writing.</span></div>
<div class="line"><a name="l01573"></a><span class="lineno"> 1573</span>&#160;<span class="comment"> * @param setPosition</span></div>
<div class="line"><a name="l01574"></a><span class="lineno"> 1574</span>&#160;<span class="comment"> *                 An order to reset the position information.</span></div>
<div class="line"><a name="l01575"></a><span class="lineno"> 1575</span>&#160;<span class="comment"> * @param position The new write position, if specified.</span></div>
<div class="line"><a name="l01576"></a><span class="lineno"> 1576</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l01577"></a><span class="lineno"> 1577</span>&#160;<span class="comment"> * @return The residual count on the write.</span></div>
<div class="line"><a name="l01578"></a><span class="lineno"> 1578</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l01579"></a><span class="lineno"><a class="line" href="class_stream_info.html#af73bad913ef56b7aceefda90551f07b1"> 1579</a></span>&#160;<span class="keywordtype">size_t</span> <a class="code" href="class_stream_info.html#af73bad913ef56b7aceefda90551f07b1">StreamInfo::charout</a>(<a class="code" href="rexx_8h.html#a64dfe004825692637e2075467179fcd9">RexxStringObject</a> data, <span class="keywordtype">bool</span> _setPosition, <a class="code" href="windows_2rexxapitypes_8h.html#a414156feea104f8f75b4ed9e3121b2f6">int64_t</a> position)</div>
<div class="line"><a name="l01580"></a><span class="lineno"> 1580</span>&#160;{</div>
<div class="line"><a name="l01581"></a><span class="lineno"> 1581</span>&#160;    <span class="comment">// no data given?  This is really a close operation.</span></div>
<div class="line"><a name="l01582"></a><span class="lineno"> 1582</span>&#160;    <span class="keywordflow">if</span> (data == <a class="code" href="rexx_8h.html#a9a119fa1e31a4af78dee3c12225b240a">NULLOBJECT</a>)</div>
<div class="line"><a name="l01583"></a><span class="lineno"> 1583</span>&#160;    {</div>
<div class="line"><a name="l01584"></a><span class="lineno"> 1584</span>&#160;        <span class="comment">// do the setup operations</span></div>
<div class="line"><a name="l01585"></a><span class="lineno"> 1585</span>&#160;        <a class="code" href="class_stream_info.html#a1b2b9fc5ae93374cf7593ea60f3749e3">writeSetup</a>();</div>
<div class="line"><a name="l01586"></a><span class="lineno"> 1586</span>&#160;        <span class="comment">// if no position was specified, close this out</span></div>
<div class="line"><a name="l01587"></a><span class="lineno"> 1587</span>&#160;        <span class="keywordflow">if</span> (!_setPosition)</div>
<div class="line"><a name="l01588"></a><span class="lineno"> 1588</span>&#160;        {</div>
<div class="line"><a name="l01589"></a><span class="lineno"> 1589</span>&#160;            <a class="code" href="class_stream_info.html#a6fd463e10f51648420f870bca5d465e0">close</a>();</div>
<div class="line"><a name="l01590"></a><span class="lineno"> 1590</span>&#160;        }</div>
<div class="line"><a name="l01591"></a><span class="lineno"> 1591</span>&#160;        <span class="keywordflow">else</span></div>
<div class="line"><a name="l01592"></a><span class="lineno"> 1592</span>&#160;        {</div>
<div class="line"><a name="l01593"></a><span class="lineno"> 1593</span>&#160;            <a class="code" href="class_stream_info.html#aaa8212d63b5021ee66ae024e71e9a5dd">setCharWritePosition</a>(position);</div>
<div class="line"><a name="l01594"></a><span class="lineno"> 1594</span>&#160;        }</div>
<div class="line"><a name="l01595"></a><span class="lineno"> 1595</span>&#160;        <span class="comment">// no data, no residual!</span></div>
<div class="line"><a name="l01596"></a><span class="lineno"> 1596</span>&#160;        <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l01597"></a><span class="lineno"> 1597</span>&#160;    }</div>
<div class="line"><a name="l01598"></a><span class="lineno"> 1598</span>&#160; </div>
<div class="line"><a name="l01599"></a><span class="lineno"> 1599</span>&#160;    <span class="comment">// get the string pointer and length info</span></div>
<div class="line"><a name="l01600"></a><span class="lineno"> 1600</span>&#160;    <span class="keywordtype">size_t</span> length = <a class="code" href="class_stream_info.html#a6a5404d4b7ece722baef78b65cab52d2">context</a>-&gt;StringLength(data);</div>
<div class="line"><a name="l01601"></a><span class="lineno"> 1601</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">char</span> *stringData = <a class="code" href="class_stream_info.html#a6a5404d4b7ece722baef78b65cab52d2">context</a>-&gt;StringData(data);</div>
<div class="line"><a name="l01602"></a><span class="lineno"> 1602</span>&#160;    <span class="comment">// errors from here return the residual count, so set up the default</span></div>
<div class="line"><a name="l01603"></a><span class="lineno"> 1603</span>&#160;    <span class="comment">// result based on the string size.</span></div>
<div class="line"><a name="l01604"></a><span class="lineno"> 1604</span>&#160;    <a class="code" href="class_stream_info.html#a825f1cc4635482e2dbd7c1166532ee54">defaultResult</a> = <a class="code" href="class_stream_info.html#a6a5404d4b7ece722baef78b65cab52d2">context</a>-&gt;WholeNumberToObject(length);</div>
<div class="line"><a name="l01605"></a><span class="lineno"> 1605</span>&#160;    <span class="comment">// and prepare for the write</span></div>
<div class="line"><a name="l01606"></a><span class="lineno"> 1606</span>&#160;    <a class="code" href="class_stream_info.html#a1b2b9fc5ae93374cf7593ea60f3749e3">writeSetup</a>();</div>
<div class="line"><a name="l01607"></a><span class="lineno"> 1607</span>&#160;    <span class="comment">// set the output position to the new location, if given.</span></div>
<div class="line"><a name="l01608"></a><span class="lineno"> 1608</span>&#160;    <span class="keywordflow">if</span> (_setPosition)</div>
<div class="line"><a name="l01609"></a><span class="lineno"> 1609</span>&#160;    {</div>
<div class="line"><a name="l01610"></a><span class="lineno"> 1610</span>&#160;        <a class="code" href="class_stream_info.html#aaa8212d63b5021ee66ae024e71e9a5dd">setCharWritePosition</a>(position);</div>
<div class="line"><a name="l01611"></a><span class="lineno"> 1611</span>&#160;    }</div>
<div class="line"><a name="l01612"></a><span class="lineno"> 1612</span>&#160;    <span class="comment">// only write if this is not a null string</span></div>
<div class="line"><a name="l01613"></a><span class="lineno"> 1613</span>&#160;    <span class="keywordflow">if</span> (length &gt; 0)</div>
<div class="line"><a name="l01614"></a><span class="lineno"> 1614</span>&#160;    {</div>
<div class="line"><a name="l01615"></a><span class="lineno"> 1615</span>&#160;        <span class="comment">// now write everything out</span></div>
<div class="line"><a name="l01616"></a><span class="lineno"> 1616</span>&#160;        <span class="keywordtype">size_t</span> bytesWritten;</div>
<div class="line"><a name="l01617"></a><span class="lineno"> 1617</span>&#160;        <a class="code" href="class_stream_info.html#a80fec83823509c1c203aefcf9078937d">writeBuffer</a>(stringData, length, bytesWritten);</div>
<div class="line"><a name="l01618"></a><span class="lineno"> 1618</span>&#160;        <span class="comment">// unable to write for some reason?</span></div>
<div class="line"><a name="l01619"></a><span class="lineno"> 1619</span>&#160;        <span class="keywordflow">if</span> (bytesWritten != length)</div>
<div class="line"><a name="l01620"></a><span class="lineno"> 1620</span>&#160;        {</div>
<div class="line"><a name="l01621"></a><span class="lineno"> 1621</span>&#160;            <a class="code" href="class_stream_info.html#a825f1cc4635482e2dbd7c1166532ee54">defaultResult</a> = <a class="code" href="class_stream_info.html#a6a5404d4b7ece722baef78b65cab52d2">context</a>-&gt;WholeNumberToObject(length - bytesWritten);</div>
<div class="line"><a name="l01622"></a><span class="lineno"> 1622</span>&#160;            <a class="code" href="class_stream_info.html#a6f99538562048386f872fb1843462267">notreadyError</a>();</div>
<div class="line"><a name="l01623"></a><span class="lineno"> 1623</span>&#160;        }</div>
<div class="line"><a name="l01624"></a><span class="lineno"> 1624</span>&#160;    }</div>
<div class="line"><a name="l01625"></a><span class="lineno"> 1625</span>&#160;    <span class="comment">// reset any line positioning information.</span></div>
<div class="line"><a name="l01626"></a><span class="lineno"> 1626</span>&#160;    <a class="code" href="class_stream_info.html#a76bfce967cb2779165750bda09ba2402">resetLinePositions</a>();</div>
<div class="line"><a name="l01627"></a><span class="lineno"> 1627</span>&#160;    <span class="comment">// all written...life is good.</span></div>
<div class="line"><a name="l01628"></a><span class="lineno"> 1628</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l01629"></a><span class="lineno"> 1629</span>&#160;}</div>
<div class="line"><a name="l01630"></a><span class="lineno"> 1630</span>&#160; </div>
<div class="line"><a name="l01631"></a><span class="lineno"> 1631</span>&#160; </div>
<div class="line"><a name="l01632"></a><span class="lineno"><a class="line" href="_stream_native_8cpp.html#a5619949d1febc9e043b8ece8fefb89b6"> 1632</a></span>&#160;<a class="code" href="_stream_native_8cpp.html#ae7f9b5a15d54057c1cebabeff85b2ac8">RexxMethod3</a>(<span class="keywordtype">size_t</span>, stream_charout, <a class="code" href="oorexxapi_8h.html#a3b5f38e088a2ba7f412c33f6d97f852a">CSELF</a>, streamPtr, OPTIONAL_RexxStringObject, data, OPTIONAL_int64_t, position)</div>
<div class="line"><a name="l01633"></a><span class="lineno"> 1633</span>&#160;{</div>
<div class="line"><a name="l01634"></a><span class="lineno"> 1634</span>&#160;    <span class="keywordflow">try</span></div>
<div class="line"><a name="l01635"></a><span class="lineno"> 1635</span>&#160;    {</div>
<div class="line"><a name="l01636"></a><span class="lineno"> 1636</span>&#160;        <a class="code" href="class_stream_info.html">StreamInfo</a> *stream_info = <a class="code" href="_stream_native_8cpp.html#a1fbef9d1aba5e27b6754dda2d30239fa">checkStreamInfo</a>(context, streamPtr, context-&gt;False());</div>
<div class="line"><a name="l01637"></a><span class="lineno"> 1637</span>&#160;        <span class="keywordflow">return</span> stream_info-&gt;<a class="code" href="class_stream_info.html#af73bad913ef56b7aceefda90551f07b1">charout</a>(data, <a class="code" href="oorexxapi_8h.html#a15c340ee5245f15f32265d54a1e5a3f5">argumentExists</a>(3), position);</div>
<div class="line"><a name="l01638"></a><span class="lineno"> 1638</span>&#160;    }</div>
<div class="line"><a name="l01639"></a><span class="lineno"> 1639</span>&#160;    <span class="comment">// this is thrown for any exceptions</span></div>
<div class="line"><a name="l01640"></a><span class="lineno"> 1640</span>&#160;    <span class="keywordflow">catch</span> (<span class="keywordtype">int</span>)</div>
<div class="line"><a name="l01641"></a><span class="lineno"> 1641</span>&#160;    {</div>
<div class="line"><a name="l01642"></a><span class="lineno"> 1642</span>&#160;        <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l01643"></a><span class="lineno"> 1643</span>&#160;    }</div>
<div class="line"><a name="l01644"></a><span class="lineno"> 1644</span>&#160;    <span class="keywordflow">catch</span> (<a class="code" href="class_stream_info.html">StreamInfo</a> *)</div>
<div class="line"><a name="l01645"></a><span class="lineno"> 1645</span>&#160;    {</div>
<div class="line"><a name="l01646"></a><span class="lineno"> 1646</span>&#160;    }</div>
<div class="line"><a name="l01647"></a><span class="lineno"> 1647</span>&#160;    <span class="keywordflow">return</span> 0;     <span class="comment">// return 0 for all exceptions...the result value has already been set.</span></div>
<div class="line"><a name="l01648"></a><span class="lineno"> 1648</span>&#160;}</div>
<div class="line"><a name="l01649"></a><span class="lineno"> 1649</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l01650"></a><span class="lineno"> 1650</span>&#160;<span class="comment">/**</span></div>
<div class="line"><a name="l01651"></a><span class="lineno"> 1651</span>&#160;<span class="comment"> * Perform a linein() operation on the stream.</span></div>
<div class="line"><a name="l01652"></a><span class="lineno"> 1652</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l01653"></a><span class="lineno"> 1653</span>&#160;<span class="comment"> * @param setPosition</span></div>
<div class="line"><a name="l01654"></a><span class="lineno"> 1654</span>&#160;<span class="comment"> *                 Indicates whether it is necessary to move the read pointer</span></div>
<div class="line"><a name="l01655"></a><span class="lineno"> 1655</span>&#160;<span class="comment"> *                 before reading.</span></div>
<div class="line"><a name="l01656"></a><span class="lineno"> 1656</span>&#160;<span class="comment"> * @param position New target position.</span></div>
<div class="line"><a name="l01657"></a><span class="lineno"> 1657</span>&#160;<span class="comment"> * @param count    count of lines to read.</span></div>
<div class="line"><a name="l01658"></a><span class="lineno"> 1658</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l01659"></a><span class="lineno"> 1659</span>&#160;<span class="comment"> * @return A string object containing the read characters.</span></div>
<div class="line"><a name="l01660"></a><span class="lineno"> 1660</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l01661"></a><span class="lineno"><a class="line" href="class_stream_info.html#af3e03da2091e7b4b1beb8eb969114d43"> 1661</a></span>&#160;<a class="code" href="rexx_8h.html#a64dfe004825692637e2075467179fcd9">RexxStringObject</a> <a class="code" href="class_stream_info.html#af3e03da2091e7b4b1beb8eb969114d43">StreamInfo::linein</a>(<span class="keywordtype">bool</span> _setPosition, <a class="code" href="windows_2rexxapitypes_8h.html#a414156feea104f8f75b4ed9e3121b2f6">int64_t</a> position, <span class="keywordtype">size_t</span> count)</div>
<div class="line"><a name="l01662"></a><span class="lineno"> 1662</span>&#160;{</div>
<div class="line"><a name="l01663"></a><span class="lineno"> 1663</span>&#160;    <span class="keywordflow">if</span> (count != 1 &amp;&amp; count != 0)       <span class="comment">/* count out of range?               */</span></div>
<div class="line"><a name="l01664"></a><span class="lineno"> 1664</span>&#160;    {</div>
<div class="line"><a name="l01665"></a><span class="lineno"> 1665</span>&#160;        <a class="code" href="class_stream_info.html#abf80be8acced099814a34b375353c2e3">raiseException</a>(<a class="code" href="oorexxerrors_8h.html#a43f122d08b1e4bd67b6f301029f72599">Rexx_Error_Incorrect_method</a>);</div>
<div class="line"><a name="l01666"></a><span class="lineno"> 1666</span>&#160;    }</div>
<div class="line"><a name="l01667"></a><span class="lineno"> 1667</span>&#160; </div>
<div class="line"><a name="l01668"></a><span class="lineno"> 1668</span>&#160;    <span class="comment">// do read setup</span></div>
<div class="line"><a name="l01669"></a><span class="lineno"> 1669</span>&#160;    <a class="code" href="class_stream_info.html#a1cea3fe0284cc4761746767d4c302fcb">readSetup</a>();</div>
<div class="line"><a name="l01670"></a><span class="lineno"> 1670</span>&#160;    <span class="comment">// set a position if we have one</span></div>
<div class="line"><a name="l01671"></a><span class="lineno"> 1671</span>&#160;    <span class="keywordflow">if</span> (_setPosition)</div>
<div class="line"><a name="l01672"></a><span class="lineno"> 1672</span>&#160;    {</div>
<div class="line"><a name="l01673"></a><span class="lineno"> 1673</span>&#160;                                        <span class="comment">/* set the proper position           */</span></div>
<div class="line"><a name="l01674"></a><span class="lineno"> 1674</span>&#160;        <a class="code" href="class_stream_info.html#a02eb025b59624a43c189673c78f72cf4">setLineReadPosition</a>(position);</div>
<div class="line"><a name="l01675"></a><span class="lineno"> 1675</span>&#160;    }</div>
<div class="line"><a name="l01676"></a><span class="lineno"> 1676</span>&#160; </div>
<div class="line"><a name="l01677"></a><span class="lineno"> 1677</span>&#160;    <span class="keywordflow">if</span> (count == 0)                     <span class="comment">/* nothing to read?                  */</span></div>
<div class="line"><a name="l01678"></a><span class="lineno"> 1678</span>&#160;    {</div>
<div class="line"><a name="l01679"></a><span class="lineno"> 1679</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="class_stream_info.html#a6a5404d4b7ece722baef78b65cab52d2">context</a>-&gt;NullString();   <span class="comment">/* just return a null string         */</span></div>
<div class="line"><a name="l01680"></a><span class="lineno"> 1680</span>&#160;    }</div>
<div class="line"><a name="l01681"></a><span class="lineno"> 1681</span>&#160; </div>
<div class="line"><a name="l01682"></a><span class="lineno"> 1682</span>&#160;    <span class="comment">// reading fixed length records?</span></div>
<div class="line"><a name="l01683"></a><span class="lineno"> 1683</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="class_stream_info.html#a4f4b3f5f598efe6f91ee45cd6aadb065">record_based</a>)</div>
<div class="line"><a name="l01684"></a><span class="lineno"> 1684</span>&#160;    {</div>
<div class="line"><a name="l01685"></a><span class="lineno"> 1685</span>&#160;        <span class="comment">// we need to adjust for any charin operations that might have</span></div>
<div class="line"><a name="l01686"></a><span class="lineno"> 1686</span>&#160;        <span class="comment">// occurred within this record</span></div>
<div class="line"><a name="l01687"></a><span class="lineno"> 1687</span>&#160;        <span class="keywordtype">size_t</span> read_length = <a class="code" href="class_stream_info.html#a8fee3f8892f5e912d85d5a1621cdcc8a">binaryRecordLength</a> - (size_t)((<a class="code" href="class_stream_info.html#a7c85128d9aed9f7c648206ad364fb80c">charReadPosition</a> % (<a class="code" href="windows_2rexxapitypes_8h.html#a414156feea104f8f75b4ed9e3121b2f6">int64_t</a>)<a class="code" href="class_stream_info.html#a8fee3f8892f5e912d85d5a1621cdcc8a">binaryRecordLength</a>) - 1);</div>
<div class="line"><a name="l01688"></a><span class="lineno"> 1688</span>&#160;        <span class="comment">// a buffer string allows us to read the data into an actual string object</span></div>
<div class="line"><a name="l01689"></a><span class="lineno"> 1689</span>&#160;        <span class="comment">// without having to first read it into a separate buffer.  Since charin()</span></div>
<div class="line"><a name="l01690"></a><span class="lineno"> 1690</span>&#160;        <span class="comment">// is frequently used to read in entire files at one shot, this can be a</span></div>
<div class="line"><a name="l01691"></a><span class="lineno"> 1691</span>&#160;        <span class="comment">// fairly significant savings.</span></div>
<div class="line"><a name="l01692"></a><span class="lineno"> 1692</span>&#160;        <a class="code" href="rexx_8h.html#a7b083927909eb2c01187f82602161d11">RexxBufferStringObject</a> temp = <a class="code" href="class_stream_info.html#a6a5404d4b7ece722baef78b65cab52d2">context</a>-&gt;NewBufferString(read_length);</div>
<div class="line"><a name="l01693"></a><span class="lineno"> 1693</span>&#160;        <span class="keywordtype">char</span> *buffer = (<span class="keywordtype">char</span> *)<a class="code" href="class_stream_info.html#a6a5404d4b7ece722baef78b65cab52d2">context</a>-&gt;BufferStringData(temp);</div>
<div class="line"><a name="l01694"></a><span class="lineno"> 1694</span>&#160; </div>
<div class="line"><a name="l01695"></a><span class="lineno"> 1695</span>&#160;        <span class="comment">// do the actual read</span></div>
<div class="line"><a name="l01696"></a><span class="lineno"> 1696</span>&#160;        <span class="keywordtype">size_t</span> bytesRead;</div>
<div class="line"><a name="l01697"></a><span class="lineno"> 1697</span>&#160;        <a class="code" href="class_stream_info.html#af6a6171af162ebfe3338bf423735b96d">readBuffer</a>(buffer, read_length, bytesRead);</div>
<div class="line"><a name="l01698"></a><span class="lineno"> 1698</span>&#160; </div>
<div class="line"><a name="l01699"></a><span class="lineno"> 1699</span>&#160;        <span class="comment">// now convert our buffered string into a real string object and return it.</span></div>
<div class="line"><a name="l01700"></a><span class="lineno"> 1700</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="class_stream_info.html#a6a5404d4b7ece722baef78b65cab52d2">context</a>-&gt;FinishBufferString(temp, bytesRead);</div>
<div class="line"><a name="l01701"></a><span class="lineno"> 1701</span>&#160;    }</div>
<div class="line"><a name="l01702"></a><span class="lineno"> 1702</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l01703"></a><span class="lineno"> 1703</span>&#160;    {</div>
<div class="line"><a name="l01704"></a><span class="lineno"> 1704</span>&#160;        <span class="comment">// we need to read a variable length line</span></div>
<div class="line"><a name="l01705"></a><span class="lineno"> 1705</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="class_stream_info.html#a397cd3ca9e8626c2623ddd2036bc2334">readVariableLine</a>();</div>
<div class="line"><a name="l01706"></a><span class="lineno"> 1706</span>&#160;    }</div>
<div class="line"><a name="l01707"></a><span class="lineno"> 1707</span>&#160;}</div>
<div class="line"><a name="l01708"></a><span class="lineno"> 1708</span>&#160; </div>
<div class="line"><a name="l01709"></a><span class="lineno"> 1709</span>&#160; </div>
<div class="line"><a name="l01710"></a><span class="lineno"> 1710</span>&#160;<span class="comment">/********************************************************************************************/</span></div>
<div class="line"><a name="l01711"></a><span class="lineno"> 1711</span>&#160;<span class="comment">/* stream_linein                                                                            */</span></div>
<div class="line"><a name="l01712"></a><span class="lineno"> 1712</span>&#160;<span class="comment">/********************************************************************************************/</span></div>
<div class="line"><a name="l01713"></a><span class="lineno"><a class="line" href="_stream_native_8cpp.html#aeb8de8be1a69cfb4f85ef698b9ba8405"> 1713</a></span>&#160;<a class="code" href="_stream_native_8cpp.html#ae7f9b5a15d54057c1cebabeff85b2ac8">RexxMethod3</a>(<a class="code" href="rexx_8h.html#a64dfe004825692637e2075467179fcd9">RexxStringObject</a>, stream_linein, <a class="code" href="oorexxapi_8h.html#a3b5f38e088a2ba7f412c33f6d97f852a">CSELF</a>, streamPtr, OPTIONAL_int64_t, position, OPTIONAL_size_t, count)</div>
<div class="line"><a name="l01714"></a><span class="lineno"> 1714</span>&#160;{</div>
<div class="line"><a name="l01715"></a><span class="lineno"> 1715</span>&#160;    <span class="keywordflow">try</span></div>
<div class="line"><a name="l01716"></a><span class="lineno"> 1716</span>&#160;    {</div>
<div class="line"><a name="l01717"></a><span class="lineno"> 1717</span>&#160;        <a class="code" href="class_stream_info.html">StreamInfo</a> *stream_info = <a class="code" href="_stream_native_8cpp.html#a1fbef9d1aba5e27b6754dda2d30239fa">checkStreamInfo</a>(context, streamPtr, context-&gt;NullString());</div>
<div class="line"><a name="l01718"></a><span class="lineno"> 1718</span>&#160;        <span class="keywordflow">return</span> stream_info-&gt;<a class="code" href="class_stream_info.html#af3e03da2091e7b4b1beb8eb969114d43">linein</a>(<a class="code" href="oorexxapi_8h.html#a15c340ee5245f15f32265d54a1e5a3f5">argumentExists</a>(2), position, <a class="code" href="oorexxapi_8h.html#a895bccfb4968ae24b153351beadd50f7">argumentOmitted</a>(3) ? 1 : count);</div>
<div class="line"><a name="l01719"></a><span class="lineno"> 1719</span>&#160;    }</div>
<div class="line"><a name="l01720"></a><span class="lineno"> 1720</span>&#160;    <span class="comment">// this is thrown for any exceptions</span></div>
<div class="line"><a name="l01721"></a><span class="lineno"> 1721</span>&#160;    <span class="keywordflow">catch</span> (<span class="keywordtype">int</span>)</div>
<div class="line"><a name="l01722"></a><span class="lineno"> 1722</span>&#160;    {</div>
<div class="line"><a name="l01723"></a><span class="lineno"> 1723</span>&#160;        <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l01724"></a><span class="lineno"> 1724</span>&#160;    }</div>
<div class="line"><a name="l01725"></a><span class="lineno"> 1725</span>&#160;    <span class="keywordflow">catch</span> (<a class="code" href="class_stream_info.html">StreamInfo</a> *)</div>
<div class="line"><a name="l01726"></a><span class="lineno"> 1726</span>&#160;    {</div>
<div class="line"><a name="l01727"></a><span class="lineno"> 1727</span>&#160;    }</div>
<div class="line"><a name="l01728"></a><span class="lineno"> 1728</span>&#160; </div>
<div class="line"><a name="l01729"></a><span class="lineno"> 1729</span>&#160;    <span class="keywordflow">return</span> context-&gt;NullString();</div>
<div class="line"><a name="l01730"></a><span class="lineno"> 1730</span>&#160;}</div>
<div class="line"><a name="l01731"></a><span class="lineno"> 1731</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l01732"></a><span class="lineno"> 1732</span>&#160;<span class="comment">/**</span></div>
<div class="line"><a name="l01733"></a><span class="lineno"> 1733</span>&#160;<span class="comment"> * Perform a line-oriented arrayin operation on the stream</span></div>
<div class="line"><a name="l01734"></a><span class="lineno"> 1734</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l01735"></a><span class="lineno"> 1735</span>&#160;<span class="comment"> * @param setPosition</span></div>
<div class="line"><a name="l01736"></a><span class="lineno"> 1736</span>&#160;<span class="comment"> *                 Indicates whether it is necessary to move the read pointer</span></div>
<div class="line"><a name="l01737"></a><span class="lineno"> 1737</span>&#160;<span class="comment"> *                 before reading.</span></div>
<div class="line"><a name="l01738"></a><span class="lineno"> 1738</span>&#160;<span class="comment"> * @param position New target position.</span></div>
<div class="line"><a name="l01739"></a><span class="lineno"> 1739</span>&#160;<span class="comment"> * @param count    count of lines to read.</span></div>
<div class="line"><a name="l01740"></a><span class="lineno"> 1740</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l01741"></a><span class="lineno"> 1741</span>&#160;<span class="comment"> * @return A string object containing the read characters.</span></div>
<div class="line"><a name="l01742"></a><span class="lineno"> 1742</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l01743"></a><span class="lineno"><a class="line" href="class_stream_info.html#ade427513480a51eb0a313e8162415bfb"> 1743</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="class_stream_info.html#ade427513480a51eb0a313e8162415bfb">StreamInfo::arrayin</a>(<a class="code" href="rexx_8h.html#a67754d7374685ba954286d7268debd80">RexxArrayObject</a> result)</div>
<div class="line"><a name="l01744"></a><span class="lineno"> 1744</span>&#160;{</div>
<div class="line"><a name="l01745"></a><span class="lineno"> 1745</span>&#160;    <span class="comment">// do read setup</span></div>
<div class="line"><a name="l01746"></a><span class="lineno"> 1746</span>&#160;    <a class="code" href="class_stream_info.html#a1cea3fe0284cc4761746767d4c302fcb">readSetup</a>();</div>
<div class="line"><a name="l01747"></a><span class="lineno"> 1747</span>&#160;    <span class="comment">// reading fixed length records?</span></div>
<div class="line"><a name="l01748"></a><span class="lineno"> 1748</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="class_stream_info.html#a4f4b3f5f598efe6f91ee45cd6aadb065">record_based</a>)</div>
<div class="line"><a name="l01749"></a><span class="lineno"> 1749</span>&#160;    {</div>
<div class="line"><a name="l01750"></a><span class="lineno"> 1750</span>&#160;        <span class="keywordflow">while</span> (<span class="keyword">true</span>)</div>
<div class="line"><a name="l01751"></a><span class="lineno"> 1751</span>&#160;        {</div>
<div class="line"><a name="l01752"></a><span class="lineno"> 1752</span>&#160;            <span class="comment">// we need to adjust for any charin operations that might have</span></div>
<div class="line"><a name="l01753"></a><span class="lineno"> 1753</span>&#160;            <span class="comment">// occurred within this record</span></div>
<div class="line"><a name="l01754"></a><span class="lineno"> 1754</span>&#160;            <span class="keywordtype">size_t</span> read_length = <a class="code" href="class_stream_info.html#a8fee3f8892f5e912d85d5a1621cdcc8a">binaryRecordLength</a> -</div>
<div class="line"><a name="l01755"></a><span class="lineno"> 1755</span>&#160;             ((<a class="code" href="class_stream_info.html#a7c85128d9aed9f7c648206ad364fb80c">charReadPosition</a> % (<a class="code" href="windows_2rexxapitypes_8h.html#a414156feea104f8f75b4ed9e3121b2f6">int64_t</a>)<a class="code" href="class_stream_info.html#a8fee3f8892f5e912d85d5a1621cdcc8a">binaryRecordLength</a>) == 0 ? 0 :</div>
<div class="line"><a name="l01756"></a><span class="lineno"> 1756</span>&#160;             (size_t)(<a class="code" href="class_stream_info.html#a7c85128d9aed9f7c648206ad364fb80c">charReadPosition</a> % (<a class="code" href="windows_2rexxapitypes_8h.html#a414156feea104f8f75b4ed9e3121b2f6">int64_t</a>)<a class="code" href="class_stream_info.html#a8fee3f8892f5e912d85d5a1621cdcc8a">binaryRecordLength</a>) - 1);</div>
<div class="line"><a name="l01757"></a><span class="lineno"> 1757</span>&#160;            <span class="comment">// a buffer string allows us to read the data into an actual string object</span></div>
<div class="line"><a name="l01758"></a><span class="lineno"> 1758</span>&#160;            <span class="comment">// without having to first read it into a separate buffer.  Since charin()</span></div>
<div class="line"><a name="l01759"></a><span class="lineno"> 1759</span>&#160;            <span class="comment">// is frequently used to read in entire files at one shot, this can be a</span></div>
<div class="line"><a name="l01760"></a><span class="lineno"> 1760</span>&#160;            <span class="comment">// fairly significant savings.</span></div>
<div class="line"><a name="l01761"></a><span class="lineno"> 1761</span>&#160;            <a class="code" href="rexx_8h.html#a7b083927909eb2c01187f82602161d11">RexxBufferStringObject</a> temp = <a class="code" href="class_stream_info.html#a6a5404d4b7ece722baef78b65cab52d2">context</a>-&gt;NewBufferString(read_length);</div>
<div class="line"><a name="l01762"></a><span class="lineno"> 1762</span>&#160;            <span class="keywordtype">char</span> *buffer = (<span class="keywordtype">char</span> *)<a class="code" href="class_stream_info.html#a6a5404d4b7ece722baef78b65cab52d2">context</a>-&gt;BufferStringData(temp);</div>
<div class="line"><a name="l01763"></a><span class="lineno"> 1763</span>&#160; </div>
<div class="line"><a name="l01764"></a><span class="lineno"> 1764</span>&#160;            <span class="comment">// do the actual read</span></div>
<div class="line"><a name="l01765"></a><span class="lineno"> 1765</span>&#160;            <span class="keywordtype">size_t</span> bytesRead;</div>
<div class="line"><a name="l01766"></a><span class="lineno"> 1766</span>&#160;            <a class="code" href="class_stream_info.html#af6a6171af162ebfe3338bf423735b96d">readBuffer</a>(buffer, read_length, bytesRead);</div>
<div class="line"><a name="l01767"></a><span class="lineno"> 1767</span>&#160; </div>
<div class="line"><a name="l01768"></a><span class="lineno"> 1768</span>&#160;            <span class="comment">// now convert our buffered string into a real string object and return it.</span></div>
<div class="line"><a name="l01769"></a><span class="lineno"> 1769</span>&#160;            <a class="code" href="class_stream_info.html#a6a5404d4b7ece722baef78b65cab52d2">context</a>-&gt;FinishBufferString(temp, bytesRead);</div>
<div class="line"><a name="l01770"></a><span class="lineno"> 1770</span>&#160;            <a class="code" href="class_stream_info.html#a6a5404d4b7ece722baef78b65cab52d2">context</a>-&gt;ArrayAppend(result, temp);</div>
<div class="line"><a name="l01771"></a><span class="lineno"> 1771</span>&#160;        }</div>
<div class="line"><a name="l01772"></a><span class="lineno"> 1772</span>&#160;    }</div>
<div class="line"><a name="l01773"></a><span class="lineno"> 1773</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l01774"></a><span class="lineno"> 1774</span>&#160;    {</div>
<div class="line"><a name="l01775"></a><span class="lineno"> 1775</span>&#160;        <span class="keywordflow">while</span> (<span class="keyword">true</span>)</div>
<div class="line"><a name="l01776"></a><span class="lineno"> 1776</span>&#160;        {</div>
<div class="line"><a name="l01777"></a><span class="lineno"> 1777</span>&#160;            <span class="comment">// we need to read a variable length line</span></div>
<div class="line"><a name="l01778"></a><span class="lineno"> 1778</span>&#160;            <a class="code" href="class_stream_info.html#abe511e95dadd82f3135c71bf22f7b378">appendVariableLine</a>(result);</div>
<div class="line"><a name="l01779"></a><span class="lineno"> 1779</span>&#160;        }</div>
<div class="line"><a name="l01780"></a><span class="lineno"> 1780</span>&#160;    }</div>
<div class="line"><a name="l01781"></a><span class="lineno"> 1781</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l01782"></a><span class="lineno"> 1782</span>&#160;}</div>
<div class="line"><a name="l01783"></a><span class="lineno"> 1783</span>&#160; </div>
<div class="line"><a name="l01784"></a><span class="lineno"> 1784</span>&#160; </div>
<div class="line"><a name="l01785"></a><span class="lineno"> 1785</span>&#160;<span class="comment">/********************************************************************************************/</span></div>
<div class="line"><a name="l01786"></a><span class="lineno"> 1786</span>&#160;<span class="comment">/* native method for doing an arrayin line operation                                        */</span></div>
<div class="line"><a name="l01787"></a><span class="lineno"> 1787</span>&#160;<span class="comment">/********************************************************************************************/</span></div>
<div class="line"><a name="l01788"></a><span class="lineno"><a class="line" href="_stream_native_8cpp.html#a0132244173a5fe2980fd36a20185bc10"> 1788</a></span>&#160;<a class="code" href="_stream_native_8cpp.html#a0132244173a5fe2980fd36a20185bc10">RexxMethod2</a>(<span class="keywordtype">int</span>, stream_arrayin, <a class="code" href="oorexxapi_8h.html#a3b5f38e088a2ba7f412c33f6d97f852a">CSELF</a>, streamPtr, <a class="code" href="rexx_8h.html#a67754d7374685ba954286d7268debd80">RexxArrayObject</a>, result)</div>
<div class="line"><a name="l01789"></a><span class="lineno"> 1789</span>&#160;{</div>
<div class="line"><a name="l01790"></a><span class="lineno"> 1790</span>&#160;    <span class="keywordflow">try</span></div>
<div class="line"><a name="l01791"></a><span class="lineno"> 1791</span>&#160;    {</div>
<div class="line"><a name="l01792"></a><span class="lineno"> 1792</span>&#160;        <a class="code" href="class_stream_info.html">StreamInfo</a> *stream_info = <a class="code" href="_stream_native_8cpp.html#a1fbef9d1aba5e27b6754dda2d30239fa">checkStreamInfo</a>(context, streamPtr, context-&gt;NullString());</div>
<div class="line"><a name="l01793"></a><span class="lineno"> 1793</span>&#160;        <span class="keywordflow">return</span> stream_info-&gt;<a class="code" href="class_stream_info.html#ade427513480a51eb0a313e8162415bfb">arrayin</a>(result);</div>
<div class="line"><a name="l01794"></a><span class="lineno"> 1794</span>&#160;    }</div>
<div class="line"><a name="l01795"></a><span class="lineno"> 1795</span>&#160;    <span class="comment">// this is thrown for any exceptions</span></div>
<div class="line"><a name="l01796"></a><span class="lineno"> 1796</span>&#160;    <span class="keywordflow">catch</span> (<span class="keywordtype">int</span>)</div>
<div class="line"><a name="l01797"></a><span class="lineno"> 1797</span>&#160;    {</div>
<div class="line"><a name="l01798"></a><span class="lineno"> 1798</span>&#160;    }</div>
<div class="line"><a name="l01799"></a><span class="lineno"> 1799</span>&#160;    <span class="keywordflow">catch</span> (<a class="code" href="class_stream_info.html">StreamInfo</a> *)</div>
<div class="line"><a name="l01800"></a><span class="lineno"> 1800</span>&#160;    {</div>
<div class="line"><a name="l01801"></a><span class="lineno"> 1801</span>&#160;    }</div>
<div class="line"><a name="l01802"></a><span class="lineno"> 1802</span>&#160; </div>
<div class="line"><a name="l01803"></a><span class="lineno"> 1803</span>&#160;    <span class="comment">// this will generally terminate because of a NOTREADY condition.  We&#39;ve been filling</span></div>
<div class="line"><a name="l01804"></a><span class="lineno"> 1804</span>&#160;    <span class="comment">// the array in as we go along, so the caller has the reference already, and will</span></div>
<div class="line"><a name="l01805"></a><span class="lineno"> 1805</span>&#160;    <span class="comment">// return whatever we&#39;ve managed to fill in before the notready occurred;</span></div>
<div class="line"><a name="l01806"></a><span class="lineno"> 1806</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l01807"></a><span class="lineno"> 1807</span>&#160;}</div>
<div class="line"><a name="l01808"></a><span class="lineno"> 1808</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l01809"></a><span class="lineno"> 1809</span>&#160;<span class="comment">/**</span></div>
<div class="line"><a name="l01810"></a><span class="lineno"> 1810</span>&#160;<span class="comment"> * Count the number lines in the stream.</span></div>
<div class="line"><a name="l01811"></a><span class="lineno"> 1811</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l01812"></a><span class="lineno"> 1812</span>&#160;<span class="comment"> * @param quick  Controls whether we just return a 1/0 indicicator that</span></div>
<div class="line"><a name="l01813"></a><span class="lineno"> 1813</span>&#160;<span class="comment"> *               there is more data, or do an actualy count of the lines.</span></div>
<div class="line"><a name="l01814"></a><span class="lineno"> 1814</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l01815"></a><span class="lineno"> 1815</span>&#160;<span class="comment"> * @return Either a 1/0 indicator of more or the actual count of lines.</span></div>
<div class="line"><a name="l01816"></a><span class="lineno"> 1816</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l01817"></a><span class="lineno"><a class="line" href="class_stream_info.html#af08fcca727639931f393769a8761df24"> 1817</a></span>&#160;<a class="code" href="windows_2rexxapitypes_8h.html#a414156feea104f8f75b4ed9e3121b2f6">int64_t</a> <a class="code" href="class_stream_info.html#af08fcca727639931f393769a8761df24">StreamInfo::lines</a>(<span class="keywordtype">bool</span> quick)</div>
<div class="line"><a name="l01818"></a><span class="lineno"> 1818</span>&#160;{</div>
<div class="line"><a name="l01819"></a><span class="lineno"> 1819</span>&#160;    <span class="comment">// if not open yet, open now, but don&#39;t create this if doesn&#39;t</span></div>
<div class="line"><a name="l01820"></a><span class="lineno"> 1820</span>&#160;    <span class="comment">// already exist.</span></div>
<div class="line"><a name="l01821"></a><span class="lineno"> 1821</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="class_stream_info.html#a69bc9580bb2e54426801fe6fca59c98e">isopen</a>)</div>
<div class="line"><a name="l01822"></a><span class="lineno"> 1822</span>&#160;    {</div>
<div class="line"><a name="l01823"></a><span class="lineno"> 1823</span>&#160;        <a class="code" href="class_stream_info.html#a327c44fa31870eeee0ceffca3ea7f006">implicitOpen</a>(<a class="code" href="_stream_native_8cpp.html#a4279da1660023acc95b42250b2e613ca">operation_nocreate</a>);</div>
<div class="line"><a name="l01824"></a><span class="lineno"> 1824</span>&#160;    }</div>
<div class="line"><a name="l01825"></a><span class="lineno"> 1825</span>&#160; </div>
<div class="line"><a name="l01826"></a><span class="lineno"> 1826</span>&#160;    <span class="comment">// is this a non-persisent stream?</span></div>
<div class="line"><a name="l01827"></a><span class="lineno"> 1827</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="class_stream_info.html#a35caea85b14b8f2b8b734c3b51eb7f4b">fileInfo</a>.<a class="code" href="class_sys_file.html#adfa0d4b71f91895b75ccb2347c42eb0f">isTransient</a>())</div>
<div class="line"><a name="l01828"></a><span class="lineno"> 1828</span>&#160;    {</div>
<div class="line"><a name="l01829"></a><span class="lineno"> 1829</span>&#160;        <span class="comment">// just return a success/failure indicator</span></div>
<div class="line"><a name="l01830"></a><span class="lineno"> 1830</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="class_stream_info.html#a35caea85b14b8f2b8b734c3b51eb7f4b">fileInfo</a>.<a class="code" href="class_sys_file.html#ada9d719671c79d677dfdffb61eea4dc8">hasData</a>() ? 1 : 0;</div>
<div class="line"><a name="l01831"></a><span class="lineno"> 1831</span>&#160;    }</div>
<div class="line"><a name="l01832"></a><span class="lineno"> 1832</span>&#160;    <span class="comment">// non-input stream?  Never have lines for those</span></div>
<div class="line"><a name="l01833"></a><span class="lineno"> 1833</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="class_stream_info.html#a7783763d6eec22176a9dfd2f537f6506">read_only</a> &amp;&amp; !<a class="code" href="class_stream_info.html#a3a49e7bc25fb6842edc8cc2d5fa95d20">read_write</a>)</div>
<div class="line"><a name="l01834"></a><span class="lineno"> 1834</span>&#160;    {</div>
<div class="line"><a name="l01835"></a><span class="lineno"> 1835</span>&#160;        <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l01836"></a><span class="lineno"> 1836</span>&#160;    }</div>
<div class="line"><a name="l01837"></a><span class="lineno"> 1837</span>&#160; </div>
<div class="line"><a name="l01838"></a><span class="lineno"> 1838</span>&#160;    <span class="comment">// if opened with fixed length records, we just check against the character position.</span></div>
<div class="line"><a name="l01839"></a><span class="lineno"> 1839</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="class_stream_info.html#a4f4b3f5f598efe6f91ee45cd6aadb065">record_based</a>)      <span class="comment">/* opened as a binary stream?        */</span></div>
<div class="line"><a name="l01840"></a><span class="lineno"> 1840</span>&#160;    {</div>
<div class="line"><a name="l01841"></a><span class="lineno"> 1841</span>&#160;        <span class="comment">// get the current size</span></div>
<div class="line"><a name="l01842"></a><span class="lineno"> 1842</span>&#160;        <a class="code" href="windows_2rexxapitypes_8h.html#a414156feea104f8f75b4ed9e3121b2f6">int64_t</a> currentSize = <a class="code" href="class_stream_info.html#af21ad8877a6411a69e033790ac94b299">size</a>();</div>
<div class="line"><a name="l01843"></a><span class="lineno"> 1843</span>&#160;        <span class="comment">// already read past that point?</span></div>
<div class="line"><a name="l01844"></a><span class="lineno"> 1844</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="class_stream_info.html#a7c85128d9aed9f7c648206ad364fb80c">charReadPosition</a> &gt; currentSize)</div>
<div class="line"><a name="l01845"></a><span class="lineno"> 1845</span>&#160;        {</div>
<div class="line"><a name="l01846"></a><span class="lineno"> 1846</span>&#160;            <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l01847"></a><span class="lineno"> 1847</span>&#160;        }</div>
<div class="line"><a name="l01848"></a><span class="lineno"> 1848</span>&#160; </div>
<div class="line"><a name="l01849"></a><span class="lineno"> 1849</span>&#160;        <span class="comment">// now calculate the number of lines in the stream from the size,</span></div>
<div class="line"><a name="l01850"></a><span class="lineno"> 1850</span>&#160;        <span class="comment">// making sure we count any partial lines hanging off the end.</span></div>
<div class="line"><a name="l01851"></a><span class="lineno"> 1851</span>&#160;        <a class="code" href="windows_2rexxapitypes_8h.html#a414156feea104f8f75b4ed9e3121b2f6">int64_t</a> lineCount = currentSize / <a class="code" href="class_stream_info.html#a8fee3f8892f5e912d85d5a1621cdcc8a">binaryRecordLength</a>;</div>
<div class="line"><a name="l01852"></a><span class="lineno"> 1852</span>&#160;        <span class="keywordflow">if</span> ((currentSize % <a class="code" href="class_stream_info.html#a8fee3f8892f5e912d85d5a1621cdcc8a">binaryRecordLength</a>) &gt; 0)</div>
<div class="line"><a name="l01853"></a><span class="lineno"> 1853</span>&#160;        {</div>
<div class="line"><a name="l01854"></a><span class="lineno"> 1854</span>&#160;            lineCount++;</div>
<div class="line"><a name="l01855"></a><span class="lineno"> 1855</span>&#160;        }</div>
<div class="line"><a name="l01856"></a><span class="lineno"> 1856</span>&#160; </div>
<div class="line"><a name="l01857"></a><span class="lineno"> 1857</span>&#160;        <span class="comment">// get the current line position.  We don&#39;t need to fudge this...since</span></div>
<div class="line"><a name="l01858"></a><span class="lineno"> 1858</span>&#160;        <span class="comment">// this still gives us the line we&#39;re currently within.</span></div>
<div class="line"><a name="l01859"></a><span class="lineno"> 1859</span>&#160;        <a class="code" href="windows_2rexxapitypes_8h.html#a414156feea104f8f75b4ed9e3121b2f6">int64_t</a> currentLine = (<a class="code" href="class_stream_info.html#a7c85128d9aed9f7c648206ad364fb80c">charReadPosition</a> - 1) / <a class="code" href="class_stream_info.html#a8fee3f8892f5e912d85d5a1621cdcc8a">binaryRecordLength</a>;</div>
<div class="line"><a name="l01860"></a><span class="lineno"> 1860</span>&#160; </div>
<div class="line"><a name="l01861"></a><span class="lineno"> 1861</span>&#160;        <span class="comment">// and return the delta count.</span></div>
<div class="line"><a name="l01862"></a><span class="lineno"> 1862</span>&#160;        <span class="keywordflow">return</span> lineCount - currentLine;</div>
<div class="line"><a name="l01863"></a><span class="lineno"> 1863</span>&#160;    }</div>
<div class="line"><a name="l01864"></a><span class="lineno"> 1864</span>&#160;    <span class="comment">// non-binary persistent stream...these are a pain</span></div>
<div class="line"><a name="l01865"></a><span class="lineno"> 1865</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l01866"></a><span class="lineno"> 1866</span>&#160;    {</div>
<div class="line"><a name="l01867"></a><span class="lineno"> 1867</span>&#160;        <a class="code" href="windows_2rexxapitypes_8h.html#a414156feea104f8f75b4ed9e3121b2f6">int64_t</a> currentSize = <a class="code" href="class_stream_info.html#af21ad8877a6411a69e033790ac94b299">size</a>();</div>
<div class="line"><a name="l01868"></a><span class="lineno"> 1868</span>&#160; </div>
<div class="line"><a name="l01869"></a><span class="lineno"> 1869</span>&#160;        <span class="comment">// if our read position is in no-man&#39;s land, this is zero</span></div>
<div class="line"><a name="l01870"></a><span class="lineno"> 1870</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="class_stream_info.html#a7c85128d9aed9f7c648206ad364fb80c">charReadPosition</a> &gt; currentSize)</div>
<div class="line"><a name="l01871"></a><span class="lineno"> 1871</span>&#160;        {</div>
<div class="line"><a name="l01872"></a><span class="lineno"> 1872</span>&#160;            <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l01873"></a><span class="lineno"> 1873</span>&#160;        }</div>
<div class="line"><a name="l01874"></a><span class="lineno"> 1874</span>&#160;        <span class="comment">// if we&#39;re doing a quick check, we can return 1 now.</span></div>
<div class="line"><a name="l01875"></a><span class="lineno"> 1875</span>&#160;        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (quick)</div>
<div class="line"><a name="l01876"></a><span class="lineno"> 1876</span>&#160;        {</div>
<div class="line"><a name="l01877"></a><span class="lineno"> 1877</span>&#160;            <span class="keywordflow">return</span> 1;</div>
<div class="line"><a name="l01878"></a><span class="lineno"> 1878</span>&#160;        }</div>
<div class="line"><a name="l01879"></a><span class="lineno"> 1879</span>&#160; </div>
<div class="line"><a name="l01880"></a><span class="lineno"> 1880</span>&#160;        <span class="comment">// do we have good line size information?</span></div>
<div class="line"><a name="l01881"></a><span class="lineno"> 1881</span>&#160;        <span class="comment">// This is pretty easy to calculate now.</span></div>
<div class="line"><a name="l01882"></a><span class="lineno"> 1882</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="class_stream_info.html#ac4e90641d1e2c5b6a30b512e37a7458c">stream_line_size</a> &gt; 0 &amp;&amp; <a class="code" href="class_stream_info.html#a08f5a0d7420eceed7503fce2d5b0917b">lineReadPosition</a> &gt; 0)</div>
<div class="line"><a name="l01883"></a><span class="lineno"> 1883</span>&#160;        {</div>
<div class="line"><a name="l01884"></a><span class="lineno"> 1884</span>&#160;            <span class="keywordflow">return</span>(<a class="code" href="class_stream_info.html#ac4e90641d1e2c5b6a30b512e37a7458c">stream_line_size</a> - <a class="code" href="class_stream_info.html#a08f5a0d7420eceed7503fce2d5b0917b">lineReadPosition</a>) + 1;</div>
<div class="line"><a name="l01885"></a><span class="lineno"> 1885</span>&#160;        }</div>
<div class="line"><a name="l01886"></a><span class="lineno"> 1886</span>&#160; </div>
<div class="line"><a name="l01887"></a><span class="lineno"> 1887</span>&#160;        <span class="comment">// need to do an actual scan (bummer)</span></div>
<div class="line"><a name="l01888"></a><span class="lineno"> 1888</span>&#160;        <a class="code" href="class_stream_info.html#a1cea3fe0284cc4761746767d4c302fcb">readSetup</a>();</div>
<div class="line"><a name="l01889"></a><span class="lineno"> 1889</span>&#160; </div>
<div class="line"><a name="l01890"></a><span class="lineno"> 1890</span>&#160;        <span class="comment">// Now go count.  If our position is at the beginning,</span></div>
<div class="line"><a name="l01891"></a><span class="lineno"> 1891</span>&#160;        <span class="comment">// this reads everything.  Else, it counts from our current</span></div>
<div class="line"><a name="l01892"></a><span class="lineno"> 1892</span>&#160;        <span class="comment">// know line read point and returns the full count based on</span></div>
<div class="line"><a name="l01893"></a><span class="lineno"> 1893</span>&#160;        <span class="comment">// that.</span></div>
<div class="line"><a name="l01894"></a><span class="lineno"> 1894</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="class_stream_info.html#ab0ea1081e0badef5a78483510df7fca3">countStreamLines</a>(<a class="code" href="class_stream_info.html#a08f5a0d7420eceed7503fce2d5b0917b">lineReadPosition</a>, <a class="code" href="class_stream_info.html#a7c85128d9aed9f7c648206ad364fb80c">charReadPosition</a>);</div>
<div class="line"><a name="l01895"></a><span class="lineno"> 1895</span>&#160;    }</div>
<div class="line"><a name="l01896"></a><span class="lineno"> 1896</span>&#160;}</div>
<div class="line"><a name="l01897"></a><span class="lineno"> 1897</span>&#160; </div>
<div class="line"><a name="l01898"></a><span class="lineno"> 1898</span>&#160;<span class="comment">/********************************************************************************************/</span></div>
<div class="line"><a name="l01899"></a><span class="lineno"> 1899</span>&#160;<span class="comment">/* stream_lines                                                                             */</span></div>
<div class="line"><a name="l01900"></a><span class="lineno"> 1900</span>&#160;<span class="comment">/********************************************************************************************/</span></div>
<div class="line"><a name="l01901"></a><span class="lineno"><a class="line" href="_stream_native_8cpp.html#a4a0db43f18b590d2097a9f816032a652"> 1901</a></span>&#160;<a class="code" href="_stream_native_8cpp.html#a0132244173a5fe2980fd36a20185bc10">RexxMethod2</a>(<a class="code" href="windows_2rexxapitypes_8h.html#a414156feea104f8f75b4ed9e3121b2f6">int64_t</a>, stream_lines, <a class="code" href="oorexxapi_8h.html#a3b5f38e088a2ba7f412c33f6d97f852a">CSELF</a>, streamPtr, OPTIONAL_CSTRING, option)</div>
<div class="line"><a name="l01902"></a><span class="lineno"> 1902</span>&#160;{</div>
<div class="line"><a name="l01903"></a><span class="lineno"> 1903</span>&#160;    <span class="keywordtype">bool</span> quick = <span class="keyword">false</span>;</div>
<div class="line"><a name="l01904"></a><span class="lineno"> 1904</span>&#160;    <span class="keywordflow">if</span> (option != NULL)</div>
<div class="line"><a name="l01905"></a><span class="lineno"> 1905</span>&#160;    {</div>
<div class="line"><a name="l01906"></a><span class="lineno"> 1906</span>&#160;        <span class="keywordflow">if</span> (toupper(*option) == <span class="charliteral">&#39;N&#39;</span>)</div>
<div class="line"><a name="l01907"></a><span class="lineno"> 1907</span>&#160;        {</div>
<div class="line"><a name="l01908"></a><span class="lineno"> 1908</span>&#160;            quick = <span class="keyword">true</span>;</div>
<div class="line"><a name="l01909"></a><span class="lineno"> 1909</span>&#160;        }</div>
<div class="line"><a name="l01910"></a><span class="lineno"> 1910</span>&#160;        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (toupper(*option) != <span class="charliteral">&#39;C&#39;</span>)</div>
<div class="line"><a name="l01911"></a><span class="lineno"> 1911</span>&#160;        {</div>
<div class="line"><a name="l01912"></a><span class="lineno"> 1912</span>&#160;            context-&gt;RaiseException0(<a class="code" href="oorexxerrors_8h.html#a43f122d08b1e4bd67b6f301029f72599">Rexx_Error_Incorrect_method</a>);</div>
<div class="line"><a name="l01913"></a><span class="lineno"> 1913</span>&#160;            <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l01914"></a><span class="lineno"> 1914</span>&#160;        }</div>
<div class="line"><a name="l01915"></a><span class="lineno"> 1915</span>&#160;    }</div>
<div class="line"><a name="l01916"></a><span class="lineno"> 1916</span>&#160; </div>
<div class="line"><a name="l01917"></a><span class="lineno"> 1917</span>&#160;    <span class="keywordflow">try</span></div>
<div class="line"><a name="l01918"></a><span class="lineno"> 1918</span>&#160;    {</div>
<div class="line"><a name="l01919"></a><span class="lineno"> 1919</span>&#160;        <a class="code" href="class_stream_info.html">StreamInfo</a> *stream_info = <a class="code" href="_stream_native_8cpp.html#a1fbef9d1aba5e27b6754dda2d30239fa">checkStreamInfo</a>(context, streamPtr, context-&gt;False());</div>
<div class="line"><a name="l01920"></a><span class="lineno"> 1920</span>&#160;        <span class="keywordflow">return</span> stream_info-&gt;<a class="code" href="class_stream_info.html#af08fcca727639931f393769a8761df24">lines</a>(quick);</div>
<div class="line"><a name="l01921"></a><span class="lineno"> 1921</span>&#160;    }</div>
<div class="line"><a name="l01922"></a><span class="lineno"> 1922</span>&#160;    <span class="comment">// this is thrown for any exceptions</span></div>
<div class="line"><a name="l01923"></a><span class="lineno"> 1923</span>&#160;    <span class="keywordflow">catch</span> (<span class="keywordtype">int</span>)</div>
<div class="line"><a name="l01924"></a><span class="lineno"> 1924</span>&#160;    {</div>
<div class="line"><a name="l01925"></a><span class="lineno"> 1925</span>&#160;        <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l01926"></a><span class="lineno"> 1926</span>&#160;    }</div>
<div class="line"><a name="l01927"></a><span class="lineno"> 1927</span>&#160;    <span class="keywordflow">catch</span> (<a class="code" href="class_stream_info.html">StreamInfo</a> *)</div>
<div class="line"><a name="l01928"></a><span class="lineno"> 1928</span>&#160;    {</div>
<div class="line"><a name="l01929"></a><span class="lineno"> 1929</span>&#160;    }</div>
<div class="line"><a name="l01930"></a><span class="lineno"> 1930</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l01931"></a><span class="lineno"> 1931</span>&#160;}</div>
<div class="line"><a name="l01932"></a><span class="lineno"> 1932</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l01933"></a><span class="lineno"> 1933</span>&#160;<span class="comment">/**</span></div>
<div class="line"><a name="l01934"></a><span class="lineno"> 1934</span>&#160;<span class="comment"> * Return the remaining character indicator for a stream.</span></div>
<div class="line"><a name="l01935"></a><span class="lineno"> 1935</span>&#160;<span class="comment"> * For transient streams, this is a 1/0 value.  For persistent</span></div>
<div class="line"><a name="l01936"></a><span class="lineno"> 1936</span>&#160;<span class="comment"> * streams, this is the remaining data left in the stream.</span></div>
<div class="line"><a name="l01937"></a><span class="lineno"> 1937</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l01938"></a><span class="lineno"> 1938</span>&#160;<span class="comment"> * @return A count of characters in the stream.</span></div>
<div class="line"><a name="l01939"></a><span class="lineno"> 1939</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l01940"></a><span class="lineno"><a class="line" href="class_stream_info.html#ad808617f7b9bb4fa36eebd7e52ced5ff"> 1940</a></span>&#160;<a class="code" href="windows_2rexxapitypes_8h.html#a414156feea104f8f75b4ed9e3121b2f6">int64_t</a> <a class="code" href="class_stream_info.html#ad808617f7b9bb4fa36eebd7e52ced5ff">StreamInfo::chars</a>()</div>
<div class="line"><a name="l01941"></a><span class="lineno"> 1941</span>&#160;{</div>
<div class="line"><a name="l01942"></a><span class="lineno"> 1942</span>&#160;    <span class="comment">// if not open, we go ahead and open, but do not create implicitly.</span></div>
<div class="line"><a name="l01943"></a><span class="lineno"> 1943</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="class_stream_info.html#a69bc9580bb2e54426801fe6fca59c98e">isopen</a>)</div>
<div class="line"><a name="l01944"></a><span class="lineno"> 1944</span>&#160;    {</div>
<div class="line"><a name="l01945"></a><span class="lineno"> 1945</span>&#160;        <a class="code" href="class_stream_info.html#a327c44fa31870eeee0ceffca3ea7f006">implicitOpen</a>(<a class="code" href="_stream_native_8cpp.html#a4279da1660023acc95b42250b2e613ca">operation_nocreate</a>);</div>
<div class="line"><a name="l01946"></a><span class="lineno"> 1946</span>&#160;    }</div>
<div class="line"><a name="l01947"></a><span class="lineno"> 1947</span>&#160; </div>
<div class="line"><a name="l01948"></a><span class="lineno"> 1948</span>&#160;    <span class="comment">// is this a non-persisent stream?</span></div>
<div class="line"><a name="l01949"></a><span class="lineno"> 1949</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="class_stream_info.html#a35caea85b14b8f2b8b734c3b51eb7f4b">fileInfo</a>.<a class="code" href="class_sys_file.html#adfa0d4b71f91895b75ccb2347c42eb0f">isTransient</a>())</div>
<div class="line"><a name="l01950"></a><span class="lineno"> 1950</span>&#160;    {</div>
<div class="line"><a name="l01951"></a><span class="lineno"> 1951</span>&#160;        <span class="comment">// just return a success/failure indicator</span></div>
<div class="line"><a name="l01952"></a><span class="lineno"> 1952</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="class_stream_info.html#a35caea85b14b8f2b8b734c3b51eb7f4b">fileInfo</a>.<a class="code" href="class_sys_file.html#ada9d719671c79d677dfdffb61eea4dc8">hasData</a>() ? 1 : 0;</div>
<div class="line"><a name="l01953"></a><span class="lineno"> 1953</span>&#160;    }</div>
<div class="line"><a name="l01954"></a><span class="lineno"> 1954</span>&#160;    <span class="comment">// non-input stream?  Never have lines for those</span></div>
<div class="line"><a name="l01955"></a><span class="lineno"> 1955</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="class_stream_info.html#a7783763d6eec22176a9dfd2f537f6506">read_only</a> &amp;&amp; !<a class="code" href="class_stream_info.html#a3a49e7bc25fb6842edc8cc2d5fa95d20">read_write</a>)</div>
<div class="line"><a name="l01956"></a><span class="lineno"> 1956</span>&#160;    {</div>
<div class="line"><a name="l01957"></a><span class="lineno"> 1957</span>&#160;        <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l01958"></a><span class="lineno"> 1958</span>&#160;    }</div>
<div class="line"><a name="l01959"></a><span class="lineno"> 1959</span>&#160; </div>
<div class="line"><a name="l01960"></a><span class="lineno"> 1960</span>&#160;    <span class="comment">/* check for a negative return value and set it to 0 if neces.*/</span></div>
<div class="line"><a name="l01961"></a><span class="lineno"> 1961</span>&#160;    <a class="code" href="windows_2rexxapitypes_8h.html#a414156feea104f8f75b4ed9e3121b2f6">int64_t</a> remainder = <a class="code" href="class_stream_info.html#af21ad8877a6411a69e033790ac94b299">size</a>() - (<a class="code" href="class_stream_info.html#a7c85128d9aed9f7c648206ad364fb80c">charReadPosition</a> - 1);</div>
<div class="line"><a name="l01962"></a><span class="lineno"> 1962</span>&#160;    <span class="keywordflow">return</span> remainder &gt; 0 ? remainder : 0;</div>
<div class="line"><a name="l01963"></a><span class="lineno"> 1963</span>&#160;}</div>
<div class="line"><a name="l01964"></a><span class="lineno"> 1964</span>&#160; </div>
<div class="line"><a name="l01965"></a><span class="lineno"> 1965</span>&#160;<span class="comment">/********************************************************************************************/</span></div>
<div class="line"><a name="l01966"></a><span class="lineno"> 1966</span>&#160;<span class="comment">/* stream_chars                                                                             */</span></div>
<div class="line"><a name="l01967"></a><span class="lineno"> 1967</span>&#160;<span class="comment">/********************************************************************************************/</span></div>
<div class="line"><a name="l01968"></a><span class="lineno"><a class="line" href="_stream_native_8cpp.html#ac0de8e5ebdd5918f23e35b899691fbbe"> 1968</a></span>&#160;<a class="code" href="_stream_native_8cpp.html#ac0de8e5ebdd5918f23e35b899691fbbe">RexxMethod1</a>(<a class="code" href="windows_2rexxapitypes_8h.html#a414156feea104f8f75b4ed9e3121b2f6">int64_t</a>, stream_chars, <a class="code" href="oorexxapi_8h.html#a3b5f38e088a2ba7f412c33f6d97f852a">CSELF</a>, streamPtr)</div>
<div class="line"><a name="l01969"></a><span class="lineno"> 1969</span>&#160;{</div>
<div class="line"><a name="l01970"></a><span class="lineno"> 1970</span>&#160;    <span class="keywordflow">try</span></div>
<div class="line"><a name="l01971"></a><span class="lineno"> 1971</span>&#160;    {</div>
<div class="line"><a name="l01972"></a><span class="lineno"> 1972</span>&#160;        <a class="code" href="class_stream_info.html">StreamInfo</a> *stream_info = <a class="code" href="_stream_native_8cpp.html#a1fbef9d1aba5e27b6754dda2d30239fa">checkStreamInfo</a>(context, streamPtr, context-&gt;False());</div>
<div class="line"><a name="l01973"></a><span class="lineno"> 1973</span>&#160;        <span class="keywordflow">return</span> stream_info-&gt;<a class="code" href="class_stream_info.html#ad808617f7b9bb4fa36eebd7e52ced5ff">chars</a>();</div>
<div class="line"><a name="l01974"></a><span class="lineno"> 1974</span>&#160;    }</div>
<div class="line"><a name="l01975"></a><span class="lineno"> 1975</span>&#160;    <span class="comment">// this is thrown for any exceptions</span></div>
<div class="line"><a name="l01976"></a><span class="lineno"> 1976</span>&#160;    <span class="keywordflow">catch</span> (<span class="keywordtype">int</span>)</div>
<div class="line"><a name="l01977"></a><span class="lineno"> 1977</span>&#160;    {</div>
<div class="line"><a name="l01978"></a><span class="lineno"> 1978</span>&#160;        <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l01979"></a><span class="lineno"> 1979</span>&#160;    }</div>
<div class="line"><a name="l01980"></a><span class="lineno"> 1980</span>&#160;    <span class="keywordflow">catch</span> (<a class="code" href="class_stream_info.html">StreamInfo</a> *)</div>
<div class="line"><a name="l01981"></a><span class="lineno"> 1981</span>&#160;    {</div>
<div class="line"><a name="l01982"></a><span class="lineno"> 1982</span>&#160;    }</div>
<div class="line"><a name="l01983"></a><span class="lineno"> 1983</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l01984"></a><span class="lineno"> 1984</span>&#160;}</div>
<div class="line"><a name="l01985"></a><span class="lineno"> 1985</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l01986"></a><span class="lineno"> 1986</span>&#160;<span class="comment">/**</span></div>
<div class="line"><a name="l01987"></a><span class="lineno"> 1987</span>&#160;<span class="comment"> * Write a line out to the stream.</span></div>
<div class="line"><a name="l01988"></a><span class="lineno"> 1988</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l01989"></a><span class="lineno"> 1989</span>&#160;<span class="comment"> * @param data     The string object to write.</span></div>
<div class="line"><a name="l01990"></a><span class="lineno"> 1990</span>&#160;<span class="comment"> * @param setPosition</span></div>
<div class="line"><a name="l01991"></a><span class="lineno"> 1991</span>&#160;<span class="comment"> *                 Indicates whether we&#39;ve been given a line position to use</span></div>
<div class="line"><a name="l01992"></a><span class="lineno"> 1992</span>&#160;<span class="comment"> *                 for the write.</span></div>
<div class="line"><a name="l01993"></a><span class="lineno"> 1993</span>&#160;<span class="comment"> * @param position The provided line position.</span></div>
<div class="line"><a name="l01994"></a><span class="lineno"> 1994</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l01995"></a><span class="lineno"> 1995</span>&#160;<span class="comment"> * @return 0 if everything worked.  All failures result in notready</span></div>
<div class="line"><a name="l01996"></a><span class="lineno"> 1996</span>&#160;<span class="comment"> *         conditions, which throw an exception.</span></div>
<div class="line"><a name="l01997"></a><span class="lineno"> 1997</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l01998"></a><span class="lineno"><a class="line" href="class_stream_info.html#a81f3f32504e823d7a38eec923360e696"> 1998</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="class_stream_info.html#a81f3f32504e823d7a38eec923360e696">StreamInfo::lineout</a>(<a class="code" href="rexx_8h.html#a64dfe004825692637e2075467179fcd9">RexxStringObject</a> data, <span class="keywordtype">bool</span> _setPosition, <a class="code" href="windows_2rexxapitypes_8h.html#a414156feea104f8f75b4ed9e3121b2f6">int64_t</a> position)</div>
<div class="line"><a name="l01999"></a><span class="lineno"> 1999</span>&#160;{</div>
<div class="line"><a name="l02000"></a><span class="lineno"> 2000</span>&#160;    <span class="comment">// nothing to process?</span></div>
<div class="line"><a name="l02001"></a><span class="lineno"> 2001</span>&#160;    <span class="keywordflow">if</span> (data == <a class="code" href="rexx_8h.html#a9a119fa1e31a4af78dee3c12225b240a">NULLOBJECT</a>)</div>
<div class="line"><a name="l02002"></a><span class="lineno"> 2002</span>&#160;    {</div>
<div class="line"><a name="l02003"></a><span class="lineno"> 2003</span>&#160;        <a class="code" href="class_stream_info.html#a1b2b9fc5ae93374cf7593ea60f3749e3">writeSetup</a>();</div>
<div class="line"><a name="l02004"></a><span class="lineno"> 2004</span>&#160;        <span class="comment">// if this is a binary stream, we may have a line to complete</span></div>
<div class="line"><a name="l02005"></a><span class="lineno"> 2005</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="class_stream_info.html#a4f4b3f5f598efe6f91ee45cd6aadb065">record_based</a>)</div>
<div class="line"><a name="l02006"></a><span class="lineno"> 2006</span>&#160;        {</div>
<div class="line"><a name="l02007"></a><span class="lineno"> 2007</span>&#160;            <span class="comment">// calculate length to write out</span></div>
<div class="line"><a name="l02008"></a><span class="lineno"> 2008</span>&#160;            <span class="keywordtype">size_t</span> padding = <a class="code" href="class_stream_info.html#a8fee3f8892f5e912d85d5a1621cdcc8a">binaryRecordLength</a> - (size_t)((<a class="code" href="class_stream_info.html#a0ae0ea0f4fcc555c87d7e9be88bea96c">charWritePosition</a> % <a class="code" href="class_stream_info.html#a8fee3f8892f5e912d85d5a1621cdcc8a">binaryRecordLength</a>) - 1);</div>
<div class="line"><a name="l02009"></a><span class="lineno"> 2009</span>&#160;            <a class="code" href="class_stream_info.html#ac53710ab6d501f9cf93970b22fe7219f">completeLine</a>(padding);</div>
<div class="line"><a name="l02010"></a><span class="lineno"> 2010</span>&#160;        }</div>
<div class="line"><a name="l02011"></a><span class="lineno"> 2011</span>&#160;        <span class="comment">// not a line repositioning?  we need to close</span></div>
<div class="line"><a name="l02012"></a><span class="lineno"> 2012</span>&#160;        <span class="keywordflow">if</span> (!_setPosition)</div>
<div class="line"><a name="l02013"></a><span class="lineno"> 2013</span>&#160;        {</div>
<div class="line"><a name="l02014"></a><span class="lineno"> 2014</span>&#160;            <a class="code" href="class_stream_info.html#a6fd463e10f51648420f870bca5d465e0">close</a>();</div>
<div class="line"><a name="l02015"></a><span class="lineno"> 2015</span>&#160;        }</div>
<div class="line"><a name="l02016"></a><span class="lineno"> 2016</span>&#160;        <span class="keywordflow">else</span>  <span class="comment">// setting the line position</span></div>
<div class="line"><a name="l02017"></a><span class="lineno"> 2017</span>&#160;        {</div>
<div class="line"><a name="l02018"></a><span class="lineno"> 2018</span>&#160;            <a class="code" href="class_stream_info.html#ab63b31212a2404f52534a7ee890efdb6">setLineWritePosition</a>(position);</div>
<div class="line"><a name="l02019"></a><span class="lineno"> 2019</span>&#160;        }</div>
<div class="line"><a name="l02020"></a><span class="lineno"> 2020</span>&#160;        <span class="comment">/* set the proper position           */</span></div>
<div class="line"><a name="l02021"></a><span class="lineno"> 2021</span>&#160;        <span class="keywordflow">return</span> 0;                       <span class="comment">/* no residual                       */</span></div>
<div class="line"><a name="l02022"></a><span class="lineno"> 2022</span>&#160;    }</div>
<div class="line"><a name="l02023"></a><span class="lineno"> 2023</span>&#160; </div>
<div class="line"><a name="l02024"></a><span class="lineno"> 2024</span>&#160;    <span class="comment">// get the specifics</span></div>
<div class="line"><a name="l02025"></a><span class="lineno"> 2025</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">char</span> *stringData = <a class="code" href="class_stream_info.html#a6a5404d4b7ece722baef78b65cab52d2">context</a>-&gt;StringData(data);</div>
<div class="line"><a name="l02026"></a><span class="lineno"> 2026</span>&#160;    <span class="keywordtype">size_t</span> length = <a class="code" href="class_stream_info.html#a6a5404d4b7ece722baef78b65cab52d2">context</a>-&gt;StringLength(data);</div>
<div class="line"><a name="l02027"></a><span class="lineno"> 2027</span>&#160; </div>
<div class="line"><a name="l02028"></a><span class="lineno"> 2028</span>&#160;    <a class="code" href="class_stream_info.html#a1b2b9fc5ae93374cf7593ea60f3749e3">writeSetup</a>();</div>
<div class="line"><a name="l02029"></a><span class="lineno"> 2029</span>&#160;    <span class="comment">// set the position if needed</span></div>
<div class="line"><a name="l02030"></a><span class="lineno"> 2030</span>&#160;    <span class="keywordflow">if</span> (_setPosition)</div>
<div class="line"><a name="l02031"></a><span class="lineno"> 2031</span>&#160;    {</div>
<div class="line"><a name="l02032"></a><span class="lineno"> 2032</span>&#160;        <a class="code" href="class_stream_info.html#ab63b31212a2404f52534a7ee890efdb6">setLineWritePosition</a>(position);</div>
<div class="line"><a name="l02033"></a><span class="lineno"> 2033</span>&#160;    }</div>
<div class="line"><a name="l02034"></a><span class="lineno"> 2034</span>&#160; </div>
<div class="line"><a name="l02035"></a><span class="lineno"> 2035</span>&#160; </div>
<div class="line"><a name="l02036"></a><span class="lineno"> 2036</span>&#160;    <span class="comment">// binary mode write?</span></div>
<div class="line"><a name="l02037"></a><span class="lineno"> 2037</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="class_stream_info.html#a4f4b3f5f598efe6f91ee45cd6aadb065">record_based</a>)</div>
<div class="line"><a name="l02038"></a><span class="lineno"> 2038</span>&#160;    {</div>
<div class="line"><a name="l02039"></a><span class="lineno"> 2039</span>&#160;        <span class="comment">/* if the line_out is longer than    */</span></div>
<div class="line"><a name="l02040"></a><span class="lineno"> 2040</span>&#160;        <span class="comment">/* reclength plus any char out data  */</span></div>
<div class="line"><a name="l02041"></a><span class="lineno"> 2041</span>&#160;        <span class="comment">/*  raise a syntax error - invalid   */</span></div>
<div class="line"><a name="l02042"></a><span class="lineno"> 2042</span>&#160;        <span class="comment">/* call to routine                   */</span></div>
<div class="line"><a name="l02043"></a><span class="lineno"> 2043</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="class_stream_info.html#a8fee3f8892f5e912d85d5a1621cdcc8a">binaryRecordLength</a> &lt; length + ((<a class="code" href="class_stream_info.html#a0ae0ea0f4fcc555c87d7e9be88bea96c">charWritePosition</a> % <a class="code" href="class_stream_info.html#a8fee3f8892f5e912d85d5a1621cdcc8a">binaryRecordLength</a>) - 1))</div>
<div class="line"><a name="l02044"></a><span class="lineno"> 2044</span>&#160;        {</div>
<div class="line"><a name="l02045"></a><span class="lineno"> 2045</span>&#160;            <a class="code" href="class_stream_info.html#abf80be8acced099814a34b375353c2e3">raiseException</a>(<a class="code" href="oorexxerrors_8h.html#a43f122d08b1e4bd67b6f301029f72599">Rexx_Error_Incorrect_method</a>);</div>
<div class="line"><a name="l02046"></a><span class="lineno"> 2046</span>&#160;        }</div>
<div class="line"><a name="l02047"></a><span class="lineno"> 2047</span>&#160; </div>
<div class="line"><a name="l02048"></a><span class="lineno"> 2048</span>&#160;        <span class="comment">// write the line out, padding if necessary</span></div>
<div class="line"><a name="l02049"></a><span class="lineno"> 2049</span>&#160;        <a class="code" href="class_stream_info.html#aaf3d7a79c48b481b299eca8d178e45ed">writeFixedLine</a>(stringData, length);</div>
<div class="line"><a name="l02050"></a><span class="lineno"> 2050</span>&#160;        <span class="comment">// not ready conditions won&#39;t return here, so this is successful.</span></div>
<div class="line"><a name="l02051"></a><span class="lineno"> 2051</span>&#160;        <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l02052"></a><span class="lineno"> 2052</span>&#160;    }</div>
<div class="line"><a name="l02053"></a><span class="lineno"> 2053</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l02054"></a><span class="lineno"> 2054</span>&#160;    {</div>
<div class="line"><a name="l02055"></a><span class="lineno"> 2055</span>&#160;        <span class="comment">// are we keeping count of the lines?</span></div>
<div class="line"><a name="l02056"></a><span class="lineno"> 2056</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="class_stream_info.html#ac4e90641d1e2c5b6a30b512e37a7458c">stream_line_size</a> &gt; 0)</div>
<div class="line"><a name="l02057"></a><span class="lineno"> 2057</span>&#160;        {</div>
<div class="line"><a name="l02058"></a><span class="lineno"> 2058</span>&#160;            <span class="comment">// appending?  Then we know we can increase the size</span></div>
<div class="line"><a name="l02059"></a><span class="lineno"> 2059</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="class_stream_info.html#ae5d69a23a83ae44083babca8913b9295">append</a> || <a class="code" href="class_stream_info.html#a0ae0ea0f4fcc555c87d7e9be88bea96c">charWritePosition</a> == <a class="code" href="class_stream_info.html#af21ad8877a6411a69e033790ac94b299">size</a>())</div>
<div class="line"><a name="l02060"></a><span class="lineno"> 2060</span>&#160;            {</div>
<div class="line"><a name="l02061"></a><span class="lineno"> 2061</span>&#160;                <a class="code" href="class_stream_info.html#ac4e90641d1e2c5b6a30b512e37a7458c">stream_line_size</a>++;</div>
<div class="line"><a name="l02062"></a><span class="lineno"> 2062</span>&#160;            }</div>
<div class="line"><a name="l02063"></a><span class="lineno"> 2063</span>&#160;            <span class="keywordflow">else</span>  <span class="comment">// the counted number of lines can no longer be relied on.</span></div>
<div class="line"><a name="l02064"></a><span class="lineno"> 2064</span>&#160;            {</div>
<div class="line"><a name="l02065"></a><span class="lineno"> 2065</span>&#160;                <a class="code" href="class_stream_info.html#ac4e90641d1e2c5b6a30b512e37a7458c">stream_line_size</a> = 0;</div>
<div class="line"><a name="l02066"></a><span class="lineno"> 2066</span>&#160;            }</div>
<div class="line"><a name="l02067"></a><span class="lineno"> 2067</span>&#160;        }</div>
<div class="line"><a name="l02068"></a><span class="lineno"> 2068</span>&#160;        <span class="comment">// write the data and line terminator.</span></div>
<div class="line"><a name="l02069"></a><span class="lineno"> 2069</span>&#160;        <a class="code" href="class_stream_info.html#af12895c61e9458a31e3fcd632cbc96e9">writeLine</a>(stringData, length, length);</div>
<div class="line"><a name="l02070"></a><span class="lineno"> 2070</span>&#160;        <span class="comment">/* need to adjust line positions?    */</span></div>
<div class="line"><a name="l02071"></a><span class="lineno"> 2071</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="class_stream_info.html#ac180477faedf3ab1f5f37376d545e916">lineWritePosition</a> &gt; 0)</div>
<div class="line"><a name="l02072"></a><span class="lineno"> 2072</span>&#160;        {</div>
<div class="line"><a name="l02073"></a><span class="lineno"> 2073</span>&#160;            ++<a class="code" href="class_stream_info.html#ac180477faedf3ab1f5f37376d545e916">lineWritePosition</a>;</div>
<div class="line"><a name="l02074"></a><span class="lineno"> 2074</span>&#160;            <a class="code" href="class_stream_info.html#a520c92ac8d0d8c97c36fccdfdacb2c68">lineWriteCharPosition</a> = <a class="code" href="class_stream_info.html#a0ae0ea0f4fcc555c87d7e9be88bea96c">charWritePosition</a>;</div>
<div class="line"><a name="l02075"></a><span class="lineno"> 2075</span>&#160;        }</div>
<div class="line"><a name="l02076"></a><span class="lineno"> 2076</span>&#160;        <span class="keywordflow">return</span> 0;                         <span class="comment">/* line written correctly            */</span></div>
<div class="line"><a name="l02077"></a><span class="lineno"> 2077</span>&#160;    }</div>
<div class="line"><a name="l02078"></a><span class="lineno"> 2078</span>&#160;}</div>
<div class="line"><a name="l02079"></a><span class="lineno"> 2079</span>&#160; </div>
<div class="line"><a name="l02080"></a><span class="lineno"> 2080</span>&#160;<span class="comment">/********************************************************************************************/</span></div>
<div class="line"><a name="l02081"></a><span class="lineno"> 2081</span>&#160;<span class="comment">/* stream_lineout                                                                           */</span></div>
<div class="line"><a name="l02082"></a><span class="lineno"> 2082</span>&#160;<span class="comment">/********************************************************************************************/</span></div>
<div class="line"><a name="l02083"></a><span class="lineno"><a class="line" href="_stream_native_8cpp.html#a53de7452277cc577a140ac82b30e833f"> 2083</a></span>&#160;<a class="code" href="_stream_native_8cpp.html#ae7f9b5a15d54057c1cebabeff85b2ac8">RexxMethod3</a>(<span class="keywordtype">int</span>, stream_lineout, <a class="code" href="oorexxapi_8h.html#a3b5f38e088a2ba7f412c33f6d97f852a">CSELF</a>, streamPtr, OPTIONAL_RexxStringObject, <span class="keywordtype">string</span>, OPTIONAL_int64_t, position)</div>
<div class="line"><a name="l02084"></a><span class="lineno"> 2084</span>&#160;{</div>
<div class="line"><a name="l02085"></a><span class="lineno"> 2085</span>&#160;    <span class="keywordflow">try</span></div>
<div class="line"><a name="l02086"></a><span class="lineno"> 2086</span>&#160;    {</div>
<div class="line"><a name="l02087"></a><span class="lineno"> 2087</span>&#160;        <span class="comment">// we give a 1 residual count for all errors</span></div>
<div class="line"><a name="l02088"></a><span class="lineno"> 2088</span>&#160;        <a class="code" href="class_stream_info.html">StreamInfo</a> *stream_info = <a class="code" href="_stream_native_8cpp.html#a1fbef9d1aba5e27b6754dda2d30239fa">checkStreamInfo</a>(context, streamPtr, context-&gt;True());</div>
<div class="line"><a name="l02089"></a><span class="lineno"> 2089</span>&#160;        <span class="keywordflow">return</span> stream_info-&gt;<a class="code" href="class_stream_info.html#a81f3f32504e823d7a38eec923360e696">lineout</a>(<span class="keywordtype">string</span>, <a class="code" href="oorexxapi_8h.html#a15c340ee5245f15f32265d54a1e5a3f5">argumentExists</a>(3), position);</div>
<div class="line"><a name="l02090"></a><span class="lineno"> 2090</span>&#160;    }</div>
<div class="line"><a name="l02091"></a><span class="lineno"> 2091</span>&#160;    <span class="comment">// this is thrown for any exceptions</span></div>
<div class="line"><a name="l02092"></a><span class="lineno"> 2092</span>&#160;    <span class="keywordflow">catch</span> (<span class="keywordtype">int</span>)</div>
<div class="line"><a name="l02093"></a><span class="lineno"> 2093</span>&#160;    {</div>
<div class="line"><a name="l02094"></a><span class="lineno"> 2094</span>&#160;        <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l02095"></a><span class="lineno"> 2095</span>&#160;    }</div>
<div class="line"><a name="l02096"></a><span class="lineno"> 2096</span>&#160;    <span class="keywordflow">catch</span> (<a class="code" href="class_stream_info.html">StreamInfo</a> *)</div>
<div class="line"><a name="l02097"></a><span class="lineno"> 2097</span>&#160;    {</div>
<div class="line"><a name="l02098"></a><span class="lineno"> 2098</span>&#160;    }</div>
<div class="line"><a name="l02099"></a><span class="lineno"> 2099</span>&#160;    <span class="keywordflow">return</span> 0;     <span class="comment">// return 0 for all exceptions...the result value has already been set.</span></div>
<div class="line"><a name="l02100"></a><span class="lineno"> 2100</span>&#160;}</div>
<div class="line"><a name="l02101"></a><span class="lineno"> 2101</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l02102"></a><span class="lineno"> 2102</span>&#160;<span class="comment">/**</span></div>
<div class="line"><a name="l02103"></a><span class="lineno"> 2103</span>&#160;<span class="comment"> * Close the stream.</span></div>
<div class="line"><a name="l02104"></a><span class="lineno"> 2104</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l02105"></a><span class="lineno"> 2105</span>&#160;<span class="comment"> * @return The character string success/failure indicator.</span></div>
<div class="line"><a name="l02106"></a><span class="lineno"> 2106</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l02107"></a><span class="lineno"><a class="line" href="class_stream_info.html#af91849960253aa6fb5e0df914c6057a0"> 2107</a></span>&#160;<span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="class_stream_info.html#af91849960253aa6fb5e0df914c6057a0">StreamInfo::streamClose</a>()</div>
<div class="line"><a name="l02108"></a><span class="lineno"> 2108</span>&#160;{</div>
<div class="line"><a name="l02109"></a><span class="lineno"> 2109</span>&#160;    <span class="comment">// not open, just return a &quot;&quot; value</span></div>
<div class="line"><a name="l02110"></a><span class="lineno"> 2110</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="class_stream_info.html#a69bc9580bb2e54426801fe6fca59c98e">isopen</a>)</div>
<div class="line"><a name="l02111"></a><span class="lineno"> 2111</span>&#160;    {</div>
<div class="line"><a name="l02112"></a><span class="lineno"> 2112</span>&#160;        <a class="code" href="class_stream_info.html#ab0c6d380b9704b6e305f881fc9fa1571">state</a> = <a class="code" href="class_stream_info.html#af8efe21cc9cb6d8da73907c4b6f573f7ac1d3d26e8755c0a3317ad47740f8f0a5">StreamUnknown</a>;</div>
<div class="line"><a name="l02113"></a><span class="lineno"> 2113</span>&#160;        <span class="keywordflow">return</span> <span class="stringliteral">&quot;&quot;</span>;                        <span class="comment">/* return empty string               */</span></div>
<div class="line"><a name="l02114"></a><span class="lineno"> 2114</span>&#160;    }</div>
<div class="line"><a name="l02115"></a><span class="lineno"> 2115</span>&#160; </div>
<div class="line"><a name="l02116"></a><span class="lineno"> 2116</span>&#160;    <a class="code" href="class_stream_info.html#a6fd463e10f51648420f870bca5d465e0">close</a>();                            <span class="comment">/* go close the stream               */</span></div>
<div class="line"><a name="l02117"></a><span class="lineno"> 2117</span>&#160;    <span class="keywordflow">return</span> <span class="stringliteral">&quot;READY:&quot;</span>;                    <span class="comment">/* return the success indicator      */</span></div>
<div class="line"><a name="l02118"></a><span class="lineno"> 2118</span>&#160;}</div>
<div class="line"><a name="l02119"></a><span class="lineno"> 2119</span>&#160; </div>
<div class="line"><a name="l02120"></a><span class="lineno"> 2120</span>&#160;<span class="comment">/********************************************************************************************/</span></div>
<div class="line"><a name="l02121"></a><span class="lineno"> 2121</span>&#160;<span class="comment">/* stream_close                                                                             */</span></div>
<div class="line"><a name="l02122"></a><span class="lineno"> 2122</span>&#160;<span class="comment">/********************************************************************************************/</span></div>
<div class="line"><a name="l02123"></a><span class="lineno"><a class="line" href="_stream_native_8cpp.html#a93426436132666c81716e955dae5d940"> 2123</a></span>&#160;<a class="code" href="_stream_native_8cpp.html#ac0de8e5ebdd5918f23e35b899691fbbe">RexxMethod1</a>(<a class="code" href="rexx_8h.html#a581e376dc8d3b9132e29014c896b9e70">CSTRING</a>, stream_close, <a class="code" href="oorexxapi_8h.html#a3b5f38e088a2ba7f412c33f6d97f852a">CSELF</a>, streamPtr)</div>
<div class="line"><a name="l02124"></a><span class="lineno"> 2124</span>&#160;{</div>
<div class="line"><a name="l02125"></a><span class="lineno"> 2125</span>&#160;    <a class="code" href="class_stream_info.html">StreamInfo</a> *stream_info = (<a class="code" href="class_stream_info.html">StreamInfo</a> *)streamPtr;</div>
<div class="line"><a name="l02126"></a><span class="lineno"> 2126</span>&#160;    <span class="comment">// we might be getting called from the uninit method after a creation</span></div>
<div class="line"><a name="l02127"></a><span class="lineno"> 2127</span>&#160;    <span class="comment">// error, so only close if we have the stream info</span></div>
<div class="line"><a name="l02128"></a><span class="lineno"> 2128</span>&#160;    <span class="keywordflow">if</span> (stream_info == NULL)</div>
<div class="line"><a name="l02129"></a><span class="lineno"> 2129</span>&#160;    {</div>
<div class="line"><a name="l02130"></a><span class="lineno"> 2130</span>&#160;        <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l02131"></a><span class="lineno"> 2131</span>&#160;    }</div>
<div class="line"><a name="l02132"></a><span class="lineno"> 2132</span>&#160; </div>
<div class="line"><a name="l02133"></a><span class="lineno"> 2133</span>&#160;    stream_info-&gt;<a class="code" href="class_stream_info.html#a7bd9bdab0ad76acbdd5d0e020879b561">setContext</a>(context, context-&gt;NullString());</div>
<div class="line"><a name="l02134"></a><span class="lineno"> 2134</span>&#160; </div>
<div class="line"><a name="l02135"></a><span class="lineno"> 2135</span>&#160;    <span class="keywordflow">try</span></div>
<div class="line"><a name="l02136"></a><span class="lineno"> 2136</span>&#160;    {</div>
<div class="line"><a name="l02137"></a><span class="lineno"> 2137</span>&#160;        <span class="keywordflow">return</span> stream_info-&gt;<a class="code" href="class_stream_info.html#af91849960253aa6fb5e0df914c6057a0">streamClose</a>();</div>
<div class="line"><a name="l02138"></a><span class="lineno"> 2138</span>&#160;    }</div>
<div class="line"><a name="l02139"></a><span class="lineno"> 2139</span>&#160;    <span class="comment">// this is thrown for any exceptions</span></div>
<div class="line"><a name="l02140"></a><span class="lineno"> 2140</span>&#160;    <span class="keywordflow">catch</span> (<span class="keywordtype">int</span>)</div>
<div class="line"><a name="l02141"></a><span class="lineno"> 2141</span>&#160;    {</div>
<div class="line"><a name="l02142"></a><span class="lineno"> 2142</span>&#160;        <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l02143"></a><span class="lineno"> 2143</span>&#160;    }</div>
<div class="line"><a name="l02144"></a><span class="lineno"> 2144</span>&#160;    <span class="keywordflow">catch</span> (<a class="code" href="class_stream_info.html">StreamInfo</a> *)</div>
<div class="line"><a name="l02145"></a><span class="lineno"> 2145</span>&#160;    {</div>
<div class="line"><a name="l02146"></a><span class="lineno"> 2146</span>&#160;    }</div>
<div class="line"><a name="l02147"></a><span class="lineno"> 2147</span>&#160;    <span class="keywordflow">return</span> 0;     <span class="comment">// return 0 for all exceptions...the result value has already been set.</span></div>
<div class="line"><a name="l02148"></a><span class="lineno"> 2148</span>&#160;}</div>
<div class="line"><a name="l02149"></a><span class="lineno"> 2149</span>&#160; </div>
<div class="line"><a name="l02150"></a><span class="lineno"> 2150</span>&#160; </div>
<div class="line"><a name="l02151"></a><span class="lineno"> 2151</span>&#160;<span class="comment">/********************************************************************************************/</span></div>
<div class="line"><a name="l02152"></a><span class="lineno"> 2152</span>&#160;<span class="comment">/* stream_uninit -- really close this and perform final cleanup                             */</span></div>
<div class="line"><a name="l02153"></a><span class="lineno"> 2153</span>&#160;<span class="comment">/********************************************************************************************/</span></div>
<div class="line"><a name="l02154"></a><span class="lineno"><a class="line" href="_stream_native_8cpp.html#ab7d34dedb205e4b1e5da23bcb5209118"> 2154</a></span>&#160;<a class="code" href="_stream_native_8cpp.html#ac0de8e5ebdd5918f23e35b899691fbbe">RexxMethod1</a>(<a class="code" href="rexx_8h.html#a581e376dc8d3b9132e29014c896b9e70">CSTRING</a>, stream_uninit, <a class="code" href="oorexxapi_8h.html#a3b5f38e088a2ba7f412c33f6d97f852a">CSELF</a>, streamPtr)</div>
<div class="line"><a name="l02155"></a><span class="lineno"> 2155</span>&#160;{</div>
<div class="line"><a name="l02156"></a><span class="lineno"> 2156</span>&#160;    <a class="code" href="class_stream_info.html">StreamInfo</a> *stream_info = (<a class="code" href="class_stream_info.html">StreamInfo</a> *)streamPtr;</div>
<div class="line"><a name="l02157"></a><span class="lineno"> 2157</span>&#160;    <span class="comment">// we might be getting called from the uninit method after a creation</span></div>
<div class="line"><a name="l02158"></a><span class="lineno"> 2158</span>&#160;    <span class="comment">// error, so only close if we have the stream info</span></div>
<div class="line"><a name="l02159"></a><span class="lineno"> 2159</span>&#160;    <span class="keywordflow">if</span> (stream_info == NULL)</div>
<div class="line"><a name="l02160"></a><span class="lineno"> 2160</span>&#160;    {</div>
<div class="line"><a name="l02161"></a><span class="lineno"> 2161</span>&#160;        <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l02162"></a><span class="lineno"> 2162</span>&#160;    }</div>
<div class="line"><a name="l02163"></a><span class="lineno"> 2163</span>&#160; </div>
<div class="line"><a name="l02164"></a><span class="lineno"> 2164</span>&#160;    stream_info-&gt;<a class="code" href="class_stream_info.html#a7bd9bdab0ad76acbdd5d0e020879b561">setContext</a>(context, context-&gt;NullString());</div>
<div class="line"><a name="l02165"></a><span class="lineno"> 2165</span>&#160; </div>
<div class="line"><a name="l02166"></a><span class="lineno"> 2166</span>&#160;    <span class="keywordflow">try</span></div>
<div class="line"><a name="l02167"></a><span class="lineno"> 2167</span>&#160;    {</div>
<div class="line"><a name="l02168"></a><span class="lineno"> 2168</span>&#160;        stream_info-&gt;<a class="code" href="class_stream_info.html#af91849960253aa6fb5e0df914c6057a0">streamClose</a>();</div>
<div class="line"><a name="l02169"></a><span class="lineno"> 2169</span>&#160;        <span class="comment">// delete the stream information backing this.  This can only</span></div>
<div class="line"><a name="l02170"></a><span class="lineno"> 2170</span>&#160;        <span class="comment">// be done by the uninit, not by close, because a stream object</span></div>
<div class="line"><a name="l02171"></a><span class="lineno"> 2171</span>&#160;        <span class="comment">// can be reused.  We need to wait until the garbage collector</span></div>
<div class="line"><a name="l02172"></a><span class="lineno"> 2172</span>&#160;        <span class="comment">// reclaims this.</span></div>
<div class="line"><a name="l02173"></a><span class="lineno"> 2173</span>&#160;        <span class="keyword">delete</span> stream_info;</div>
<div class="line"><a name="l02174"></a><span class="lineno"> 2174</span>&#160;        stream_info = NULL;</div>
<div class="line"><a name="l02175"></a><span class="lineno"> 2175</span>&#160;        <span class="comment">// clear the backing pointer for the stream info</span></div>
<div class="line"><a name="l02176"></a><span class="lineno"> 2176</span>&#160;        context-&gt;DropObjectVariable(<span class="stringliteral">&quot;CSELF&quot;</span>);</div>
<div class="line"><a name="l02177"></a><span class="lineno"> 2177</span>&#160;        <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l02178"></a><span class="lineno"> 2178</span>&#160;    }</div>
<div class="line"><a name="l02179"></a><span class="lineno"> 2179</span>&#160;    <span class="comment">// this is thrown for any exceptions</span></div>
<div class="line"><a name="l02180"></a><span class="lineno"> 2180</span>&#160;    <span class="keywordflow">catch</span> (<span class="keywordtype">int</span>)</div>
<div class="line"><a name="l02181"></a><span class="lineno"> 2181</span>&#160;    {</div>
<div class="line"><a name="l02182"></a><span class="lineno"> 2182</span>&#160;        <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l02183"></a><span class="lineno"> 2183</span>&#160;    }</div>
<div class="line"><a name="l02184"></a><span class="lineno"> 2184</span>&#160;    <span class="keywordflow">catch</span> (<a class="code" href="class_stream_info.html">StreamInfo</a> *)</div>
<div class="line"><a name="l02185"></a><span class="lineno"> 2185</span>&#160;    {</div>
<div class="line"><a name="l02186"></a><span class="lineno"> 2186</span>&#160;    }</div>
<div class="line"><a name="l02187"></a><span class="lineno"> 2187</span>&#160;    <span class="keywordflow">return</span> 0;     <span class="comment">// return 0 for all exceptions...the result value has already been set.</span></div>
<div class="line"><a name="l02188"></a><span class="lineno"> 2188</span>&#160;}</div>
<div class="line"><a name="l02189"></a><span class="lineno"> 2189</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l02190"></a><span class="lineno"> 2190</span>&#160;<span class="comment">/**</span></div>
<div class="line"><a name="l02191"></a><span class="lineno"> 2191</span>&#160;<span class="comment"> * Try to flush the stream, returning the appropriate error</span></div>
<div class="line"><a name="l02192"></a><span class="lineno"> 2192</span>&#160;<span class="comment"> * state if there is a problem.</span></div>
<div class="line"><a name="l02193"></a><span class="lineno"> 2193</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l02194"></a><span class="lineno"> 2194</span>&#160;<span class="comment"> * @return &quot;READY&quot; if everything works.  If this fails, a notready</span></div>
<div class="line"><a name="l02195"></a><span class="lineno"> 2195</span>&#160;<span class="comment"> *         condition is raised and an exception is thrown.</span></div>
<div class="line"><a name="l02196"></a><span class="lineno"> 2196</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l02197"></a><span class="lineno"><a class="line" href="class_stream_info.html#a8e0a7fcb718af8e94350aa728e2d22bb"> 2197</a></span>&#160;<span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="class_stream_info.html#a8e0a7fcb718af8e94350aa728e2d22bb">StreamInfo::streamFlush</a>()</div>
<div class="line"><a name="l02198"></a><span class="lineno"> 2198</span>&#160;{</div>
<div class="line"><a name="l02199"></a><span class="lineno"> 2199</span>&#160;    <span class="comment">// try to flush</span></div>
<div class="line"><a name="l02200"></a><span class="lineno"> 2200</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="class_stream_info.html#a35caea85b14b8f2b8b734c3b51eb7f4b">fileInfo</a>.<a class="code" href="class_sys_file.html#a5cb87e26700f6dd8244bfb4bd2bf07c9">flush</a>())</div>
<div class="line"><a name="l02201"></a><span class="lineno"> 2201</span>&#160;    {</div>
<div class="line"><a name="l02202"></a><span class="lineno"> 2202</span>&#160;        <span class="keywordtype">char</span>         <a class="code" href="unix_2rxqueue_8cpp.html#a2edfdad12ca19a7c81c5cf054cd2a12f">work</a>[30];              <span class="comment">/* error information buffer          */</span></div>
<div class="line"><a name="l02203"></a><span class="lineno"> 2203</span>&#160;        sprintf(<a class="code" href="unix_2rxqueue_8cpp.html#a2edfdad12ca19a7c81c5cf054cd2a12f">work</a>, <span class="stringliteral">&quot;ERROR:%d&quot;</span>, <a class="code" href="class_stream_info.html#a35caea85b14b8f2b8b734c3b51eb7f4b">fileInfo</a>.<a class="code" href="class_sys_file.html#a0ccd495349312394f088f7716515a78e">errorInfo</a>());   <span class="comment">/* format the error return           */</span></div>
<div class="line"><a name="l02204"></a><span class="lineno"> 2204</span>&#160;                                        <span class="comment">/* go raise a notready condition     */</span></div>
<div class="line"><a name="l02205"></a><span class="lineno"> 2205</span>&#160;        <a class="code" href="class_stream_info.html#a6f99538562048386f872fb1843462267">notreadyError</a>(<a class="code" href="class_stream_info.html#a35caea85b14b8f2b8b734c3b51eb7f4b">fileInfo</a>.<a class="code" href="class_sys_file.html#a0ccd495349312394f088f7716515a78e">errorInfo</a>(), <a class="code" href="class_stream_info.html#a6a5404d4b7ece722baef78b65cab52d2">context</a>-&gt;NewStringFromAsciiz(<a class="code" href="unix_2rxqueue_8cpp.html#a2edfdad12ca19a7c81c5cf054cd2a12f">work</a>));</div>
<div class="line"><a name="l02206"></a><span class="lineno"> 2206</span>&#160;    }</div>
<div class="line"><a name="l02207"></a><span class="lineno"> 2207</span>&#160;    <span class="keywordflow">return</span> <span class="stringliteral">&quot;READY:&quot;</span>;                    <span class="comment">/* return success indicator          */</span></div>
<div class="line"><a name="l02208"></a><span class="lineno"> 2208</span>&#160; </div>
<div class="line"><a name="l02209"></a><span class="lineno"> 2209</span>&#160;}</div>
<div class="line"><a name="l02210"></a><span class="lineno"> 2210</span>&#160; </div>
<div class="line"><a name="l02211"></a><span class="lineno"> 2211</span>&#160;<span class="comment">/********************************************************************************************/</span></div>
<div class="line"><a name="l02212"></a><span class="lineno"> 2212</span>&#160;<span class="comment">/* stream_flush                                                                             */</span></div>
<div class="line"><a name="l02213"></a><span class="lineno"> 2213</span>&#160;<span class="comment">/********************************************************************************************/</span></div>
<div class="line"><a name="l02214"></a><span class="lineno"><a class="line" href="_stream_native_8cpp.html#a8978440c5fe580c293fdc5c76413d348"> 2214</a></span>&#160;<a class="code" href="_stream_native_8cpp.html#ac0de8e5ebdd5918f23e35b899691fbbe">RexxMethod1</a>(<a class="code" href="rexx_8h.html#a581e376dc8d3b9132e29014c896b9e70">CSTRING</a>, stream_flush, <a class="code" href="oorexxapi_8h.html#a3b5f38e088a2ba7f412c33f6d97f852a">CSELF</a>, streamPtr)</div>
<div class="line"><a name="l02215"></a><span class="lineno"> 2215</span>&#160;{</div>
<div class="line"><a name="l02216"></a><span class="lineno"> 2216</span>&#160;    <span class="keywordflow">try</span></div>
<div class="line"><a name="l02217"></a><span class="lineno"> 2217</span>&#160;    {</div>
<div class="line"><a name="l02218"></a><span class="lineno"> 2218</span>&#160;        <a class="code" href="class_stream_info.html">StreamInfo</a> *stream_info = <a class="code" href="_stream_native_8cpp.html#a1fbef9d1aba5e27b6754dda2d30239fa">checkStreamInfo</a>(context, streamPtr, context-&gt;NullString());</div>
<div class="line"><a name="l02219"></a><span class="lineno"> 2219</span>&#160;        <span class="keywordflow">return</span> stream_info-&gt;<a class="code" href="class_stream_info.html#a8e0a7fcb718af8e94350aa728e2d22bb">streamFlush</a>();</div>
<div class="line"><a name="l02220"></a><span class="lineno"> 2220</span>&#160;    }</div>
<div class="line"><a name="l02221"></a><span class="lineno"> 2221</span>&#160;    <span class="comment">// this is thrown for any exceptions</span></div>
<div class="line"><a name="l02222"></a><span class="lineno"> 2222</span>&#160;    <span class="keywordflow">catch</span> (<span class="keywordtype">int</span>)</div>
<div class="line"><a name="l02223"></a><span class="lineno"> 2223</span>&#160;    {</div>
<div class="line"><a name="l02224"></a><span class="lineno"> 2224</span>&#160;        <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l02225"></a><span class="lineno"> 2225</span>&#160;    }</div>
<div class="line"><a name="l02226"></a><span class="lineno"> 2226</span>&#160;    <span class="keywordflow">catch</span> (<a class="code" href="class_stream_info.html">StreamInfo</a> *)</div>
<div class="line"><a name="l02227"></a><span class="lineno"> 2227</span>&#160;    {</div>
<div class="line"><a name="l02228"></a><span class="lineno"> 2228</span>&#160;    }</div>
<div class="line"><a name="l02229"></a><span class="lineno"> 2229</span>&#160;    <span class="keywordflow">return</span> 0;     <span class="comment">// return 0 for all exceptions...the result value has already been set.</span></div>
<div class="line"><a name="l02230"></a><span class="lineno"> 2230</span>&#160;}</div>
<div class="line"><a name="l02231"></a><span class="lineno"> 2231</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l02232"></a><span class="lineno"> 2232</span>&#160;<span class="comment">/**</span></div>
<div class="line"><a name="l02233"></a><span class="lineno"> 2233</span>&#160;<span class="comment"> * Process explicit stream open requests, handling all of the</span></div>
<div class="line"><a name="l02234"></a><span class="lineno"> 2234</span>&#160;<span class="comment"> * open option variations.</span></div>
<div class="line"><a name="l02235"></a><span class="lineno"> 2235</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l02236"></a><span class="lineno"> 2236</span>&#160;<span class="comment"> * @param options The specified option strings.</span></div>
<div class="line"><a name="l02237"></a><span class="lineno"> 2237</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l02238"></a><span class="lineno"> 2238</span>&#160;<span class="comment"> * @return The READY or NOTREADY strings.</span></div>
<div class="line"><a name="l02239"></a><span class="lineno"> 2239</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l02240"></a><span class="lineno"><a class="line" href="class_stream_info.html#a1068046147d3b99ab5c8e51b8ac8da75"> 2240</a></span>&#160;<span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="class_stream_info.html#a1068046147d3b99ab5c8e51b8ac8da75">StreamInfo::streamOpen</a>(<span class="keyword">const</span> <span class="keywordtype">char</span> *options)</div>
<div class="line"><a name="l02241"></a><span class="lineno"> 2241</span>&#160;{</div>
<div class="line"><a name="l02242"></a><span class="lineno"> 2242</span>&#160;    <span class="keywordtype">int</span> oflag = 0;                      <span class="comment">// no default open options</span></div>
<div class="line"><a name="l02243"></a><span class="lineno"> 2243</span>&#160;    <span class="keywordtype">int</span> pmode = 0;                      <span class="comment">/* and the protection mode           */</span></div>
<div class="line"><a name="l02244"></a><span class="lineno"> 2244</span>&#160;    <span class="keywordtype">int</span> shared = <a class="code" href="unix_2_sys_file_8hpp.html#a58257d847f32cc235506950910167db1">RX_SH_DENYRW</a>;             <span class="comment">/* def. open is non shared           */</span></div>
<div class="line"><a name="l02245"></a><span class="lineno"> 2245</span>&#160; </div>
<div class="line"><a name="l02246"></a><span class="lineno"> 2246</span>&#160;    <span class="comment">// if already open, make sure we close this</span></div>
<div class="line"><a name="l02247"></a><span class="lineno"> 2247</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="class_stream_info.html#a69bc9580bb2e54426801fe6fca59c98e">isopen</a>)</div>
<div class="line"><a name="l02248"></a><span class="lineno"> 2248</span>&#160;    {</div>
<div class="line"><a name="l02249"></a><span class="lineno"> 2249</span>&#160;        <a class="code" href="class_stream_info.html#a6fd463e10f51648420f870bca5d465e0">close</a>();</div>
<div class="line"><a name="l02250"></a><span class="lineno"> 2250</span>&#160;    }</div>
<div class="line"><a name="l02251"></a><span class="lineno"> 2251</span>&#160; </div>
<div class="line"><a name="l02252"></a><span class="lineno"> 2252</span>&#160;    <span class="comment">// we sorted out the characteristics of this during the init.  Make</span></div>
<div class="line"><a name="l02253"></a><span class="lineno"> 2253</span>&#160;    <span class="comment">// sure we open this the appropriate way.</span></div>
<div class="line"><a name="l02254"></a><span class="lineno"> 2254</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="class_stream_info.html#ae8d7e2c837a87802e9f1b4c73117003c">stdstream</a>)        <span class="comment">/* standard stream?                  */</span></div>
<div class="line"><a name="l02255"></a><span class="lineno"> 2255</span>&#160;    {</div>
<div class="line"><a name="l02256"></a><span class="lineno"> 2256</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="class_stream_info.html#a9d9fb2a06b11c9e3d1430e46e0817dd7">openStd</a>(options); <span class="comment">/* handle as a standard stream       */</span></div>
<div class="line"><a name="l02257"></a><span class="lineno"> 2257</span>&#160;    }</div>
<div class="line"><a name="l02258"></a><span class="lineno"> 2258</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="class_stream_info.html#a5f60cee21e71f36ba5126026cb3401f6">opened_as_handle</a>)</div>
<div class="line"><a name="l02259"></a><span class="lineno"> 2259</span>&#160;    {</div>
<div class="line"><a name="l02260"></a><span class="lineno"> 2260</span>&#160;        <span class="comment">/* do a handle open                  */</span></div>
<div class="line"><a name="l02261"></a><span class="lineno"> 2261</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="class_stream_info.html#a734bb28c3531a07f32c04bc60a920449">handleOpen</a>(options);</div>
<div class="line"><a name="l02262"></a><span class="lineno"> 2262</span>&#160;    }</div>
<div class="line"><a name="l02263"></a><span class="lineno"> 2263</span>&#160; </div>
<div class="line"><a name="l02264"></a><span class="lineno"> 2264</span>&#160; </div>
<div class="line"><a name="l02265"></a><span class="lineno"> 2265</span>&#160;    <span class="comment">// reset the standard fields</span></div>
<div class="line"><a name="l02266"></a><span class="lineno"> 2266</span>&#160;    <a class="code" href="class_stream_info.html#a0a8b2d8b6be32314f2b5ee4013bab4a3">resetFields</a>();</div>
<div class="line"><a name="l02267"></a><span class="lineno"> 2267</span>&#160; </div>
<div class="line"><a name="l02268"></a><span class="lineno"> 2268</span>&#160;    <span class="comment">// if we have parameters, parse them</span></div>
<div class="line"><a name="l02269"></a><span class="lineno"> 2269</span>&#160;    <span class="keywordflow">if</span> (options != NULL)</div>
<div class="line"><a name="l02270"></a><span class="lineno"> 2270</span>&#160;    {</div>
<div class="line"><a name="l02271"></a><span class="lineno"> 2271</span>&#160;    <span class="comment">/* Action table for open parameters */</span></div>
<div class="line"><a name="l02272"></a><span class="lineno"> 2272</span>&#160;        <a class="code" href="class_parse_action.html">ParseAction</a>  OpenActionread[] = {</div>
<div class="line"><a name="l02273"></a><span class="lineno"> 2273</span>&#160;            <a class="code" href="class_parse_action.html">ParseAction</a>(<a class="code" href="_stream_command_parser_8h.html#a21d5e8f8cdaa838586b31007df0a950ba1c73bf66bffc3067439c90f010b7b2d4">MEB</a>, <a class="code" href="class_stream_info.html#a3a49e7bc25fb6842edc8cc2d5fa95d20">read_write</a>),</div>
<div class="line"><a name="l02274"></a><span class="lineno"> 2274</span>&#160;            <a class="code" href="class_parse_action.html">ParseAction</a>(<a class="code" href="_stream_command_parser_8h.html#a21d5e8f8cdaa838586b31007df0a950ba1c73bf66bffc3067439c90f010b7b2d4">MEB</a>, <a class="code" href="class_stream_info.html#a3d4aeb7b07210713e68491c0c1370fff">write_only</a>),</div>
<div class="line"><a name="l02275"></a><span class="lineno"> 2275</span>&#160;            <a class="code" href="class_parse_action.html">ParseAction</a>(<a class="code" href="_stream_command_parser_8h.html#a21d5e8f8cdaa838586b31007df0a950ba1c73bf66bffc3067439c90f010b7b2d4">MEB</a>, <a class="code" href="class_stream_info.html#ae5d69a23a83ae44083babca8913b9295">append</a>),</div>
<div class="line"><a name="l02276"></a><span class="lineno"> 2276</span>&#160;            <a class="code" href="class_parse_action.html">ParseAction</a>(<a class="code" href="_stream_command_parser_8h.html#a21d5e8f8cdaa838586b31007df0a950baf88e46564f67a88a18b9ba3af5792b02">ME</a>, oflag, <a class="code" href="unix_2_sys_file_8hpp.html#a363f215532814764f2f4b040eab7c919">RX_O_TRUNC</a>),</div>
<div class="line"><a name="l02277"></a><span class="lineno"> 2277</span>&#160;            <a class="code" href="class_parse_action.html">ParseAction</a>(<a class="code" href="_stream_command_parser_8h.html#a21d5e8f8cdaa838586b31007df0a950ba89e3d82509617a35b919da37b9cf2d7b">SetBool</a>, <a class="code" href="class_stream_info.html#a7783763d6eec22176a9dfd2f537f6506">read_only</a>, <span class="keyword">true</span>),</div>
<div class="line"><a name="l02278"></a><span class="lineno"> 2278</span>&#160;            <a class="code" href="class_parse_action.html">ParseAction</a>(<a class="code" href="_stream_command_parser_8h.html#a21d5e8f8cdaa838586b31007df0a950ba9cc5f732de9ad61d2fbdc269ad8fd229">BitOr</a>, oflag, <a class="code" href="unix_2_sys_file_8hpp.html#a517ccdfde2dc2189825304291b428f42">RX_O_RDONLY</a>),</div>
<div class="line"><a name="l02279"></a><span class="lineno"> 2279</span>&#160;            <a class="code" href="class_parse_action.html">ParseAction</a>(<a class="code" href="_stream_command_parser_8h.html#a21d5e8f8cdaa838586b31007df0a950ba9cc5f732de9ad61d2fbdc269ad8fd229">BitOr</a>, pmode, <a class="code" href="unix_2_sys_file_8hpp.html#a4c7585605dc0ab0ed2730a48d4e63f51">RX_S_IREAD</a>),</div>
<div class="line"><a name="l02280"></a><span class="lineno"> 2280</span>&#160;            <a class="code" href="class_parse_action.html">ParseAction</a>()</div>
<div class="line"><a name="l02281"></a><span class="lineno"> 2281</span>&#160;        };</div>
<div class="line"><a name="l02282"></a><span class="lineno"> 2282</span>&#160; </div>
<div class="line"><a name="l02283"></a><span class="lineno"> 2283</span>&#160;        <a class="code" href="class_parse_action.html">ParseAction</a> OpenActionwrite[] = {</div>
<div class="line"><a name="l02284"></a><span class="lineno"> 2284</span>&#160;            <a class="code" href="class_parse_action.html">ParseAction</a>(<a class="code" href="_stream_command_parser_8h.html#a21d5e8f8cdaa838586b31007df0a950ba1c73bf66bffc3067439c90f010b7b2d4">MEB</a>, <a class="code" href="class_stream_info.html#a3a49e7bc25fb6842edc8cc2d5fa95d20">read_write</a>),</div>
<div class="line"><a name="l02285"></a><span class="lineno"> 2285</span>&#160;            <a class="code" href="class_parse_action.html">ParseAction</a>(<a class="code" href="_stream_command_parser_8h.html#a21d5e8f8cdaa838586b31007df0a950ba1c73bf66bffc3067439c90f010b7b2d4">MEB</a>, <a class="code" href="class_stream_info.html#a7783763d6eec22176a9dfd2f537f6506">read_only</a>),</div>
<div class="line"><a name="l02286"></a><span class="lineno"> 2286</span>&#160;            <a class="code" href="class_parse_action.html">ParseAction</a>(<a class="code" href="_stream_command_parser_8h.html#a21d5e8f8cdaa838586b31007df0a950ba89e3d82509617a35b919da37b9cf2d7b">SetBool</a>, <a class="code" href="class_stream_info.html#a3d4aeb7b07210713e68491c0c1370fff">write_only</a>, <span class="keyword">true</span>),</div>
<div class="line"><a name="l02287"></a><span class="lineno"> 2287</span>&#160;            <a class="code" href="class_parse_action.html">ParseAction</a>(<a class="code" href="_stream_command_parser_8h.html#a21d5e8f8cdaa838586b31007df0a950ba9cc5f732de9ad61d2fbdc269ad8fd229">BitOr</a>, oflag, <a class="code" href="_stream_native_8cpp.html#ac582219db81802c3e505c2135e225ca6">WR_CREAT</a>),</div>
<div class="line"><a name="l02288"></a><span class="lineno"> 2288</span>&#160;            <a class="code" href="class_parse_action.html">ParseAction</a>(<a class="code" href="_stream_command_parser_8h.html#a21d5e8f8cdaa838586b31007df0a950ba9cc5f732de9ad61d2fbdc269ad8fd229">BitOr</a>, pmode, <a class="code" href="unix_2_sys_file_8hpp.html#a0e4d18f8a0f213e2d8420dcb25b1f4a7">RX_S_IWRITE</a>),</div>
<div class="line"><a name="l02289"></a><span class="lineno"> 2289</span>&#160;            <a class="code" href="class_parse_action.html">ParseAction</a>()</div>
<div class="line"><a name="l02290"></a><span class="lineno"> 2290</span>&#160;        };</div>
<div class="line"><a name="l02291"></a><span class="lineno"> 2291</span>&#160;        <a class="code" href="class_parse_action.html">ParseAction</a> OpenActionboth[] = {</div>
<div class="line"><a name="l02292"></a><span class="lineno"> 2292</span>&#160;            <a class="code" href="class_parse_action.html">ParseAction</a>(<a class="code" href="_stream_command_parser_8h.html#a21d5e8f8cdaa838586b31007df0a950ba1c73bf66bffc3067439c90f010b7b2d4">MEB</a>, <a class="code" href="class_stream_info.html#a3d4aeb7b07210713e68491c0c1370fff">write_only</a>),</div>
<div class="line"><a name="l02293"></a><span class="lineno"> 2293</span>&#160;            <a class="code" href="class_parse_action.html">ParseAction</a>(<a class="code" href="_stream_command_parser_8h.html#a21d5e8f8cdaa838586b31007df0a950ba1c73bf66bffc3067439c90f010b7b2d4">MEB</a>, <a class="code" href="class_stream_info.html#a7783763d6eec22176a9dfd2f537f6506">read_only</a>),</div>
<div class="line"><a name="l02294"></a><span class="lineno"> 2294</span>&#160;            <a class="code" href="class_parse_action.html">ParseAction</a>(<a class="code" href="_stream_command_parser_8h.html#a21d5e8f8cdaa838586b31007df0a950ba89e3d82509617a35b919da37b9cf2d7b">SetBool</a>, <a class="code" href="class_stream_info.html#a3a49e7bc25fb6842edc8cc2d5fa95d20">read_write</a>, <span class="keyword">true</span>),</div>
<div class="line"><a name="l02295"></a><span class="lineno"> 2295</span>&#160;            <a class="code" href="class_parse_action.html">ParseAction</a>(<a class="code" href="_stream_command_parser_8h.html#a21d5e8f8cdaa838586b31007df0a950ba9cc5f732de9ad61d2fbdc269ad8fd229">BitOr</a>, oflag, <a class="code" href="_stream_native_8cpp.html#a08cd1913f9a5a340f426fda11f00cef5">RDWR_CREAT</a>),</div>
<div class="line"><a name="l02296"></a><span class="lineno"> 2296</span>&#160;            <a class="code" href="class_parse_action.html">ParseAction</a>(<a class="code" href="_stream_command_parser_8h.html#a21d5e8f8cdaa838586b31007df0a950ba9cc5f732de9ad61d2fbdc269ad8fd229">BitOr</a>, pmode, <a class="code" href="_stream_native_8cpp.html#a353d1c9fc19fe1dc044744c05df8dc9c">IREAD_IWRITE</a>),</div>
<div class="line"><a name="l02297"></a><span class="lineno"> 2297</span>&#160;            <a class="code" href="class_parse_action.html">ParseAction</a>()</div>
<div class="line"><a name="l02298"></a><span class="lineno"> 2298</span>&#160;        };</div>
<div class="line"><a name="l02299"></a><span class="lineno"> 2299</span>&#160;        <a class="code" href="class_parse_action.html">ParseAction</a> OpenActionappend[] = {</div>
<div class="line"><a name="l02300"></a><span class="lineno"> 2300</span>&#160;            <a class="code" href="class_parse_action.html">ParseAction</a>(<a class="code" href="_stream_command_parser_8h.html#a21d5e8f8cdaa838586b31007df0a950ba1c73bf66bffc3067439c90f010b7b2d4">MEB</a>, <a class="code" href="class_stream_info.html#a7783763d6eec22176a9dfd2f537f6506">read_only</a>),</div>
<div class="line"><a name="l02301"></a><span class="lineno"> 2301</span>&#160;            <a class="code" href="class_parse_action.html">ParseAction</a>(<a class="code" href="_stream_command_parser_8h.html#a21d5e8f8cdaa838586b31007df0a950baf88e46564f67a88a18b9ba3af5792b02">ME</a>, oflag, <a class="code" href="unix_2_sys_file_8hpp.html#a363f215532814764f2f4b040eab7c919">RX_O_TRUNC</a>),</div>
<div class="line"><a name="l02302"></a><span class="lineno"> 2302</span>&#160;            <a class="code" href="class_parse_action.html">ParseAction</a>(<a class="code" href="_stream_command_parser_8h.html#a21d5e8f8cdaa838586b31007df0a950ba89e3d82509617a35b919da37b9cf2d7b">SetBool</a>, <a class="code" href="class_stream_info.html#ae5d69a23a83ae44083babca8913b9295">append</a>, <span class="keyword">true</span>),</div>
<div class="line"><a name="l02303"></a><span class="lineno"> 2303</span>&#160;            <a class="code" href="class_parse_action.html">ParseAction</a>(<a class="code" href="_stream_command_parser_8h.html#a21d5e8f8cdaa838586b31007df0a950ba9cc5f732de9ad61d2fbdc269ad8fd229">BitOr</a>, oflag, <a class="code" href="unix_2_sys_file_8hpp.html#a419ed61c34fd6bce28216d2ece437ff4">RX_O_APPEND</a>),</div>
<div class="line"><a name="l02304"></a><span class="lineno"> 2304</span>&#160;            <a class="code" href="class_parse_action.html">ParseAction</a>()</div>
<div class="line"><a name="l02305"></a><span class="lineno"> 2305</span>&#160;        };</div>
<div class="line"><a name="l02306"></a><span class="lineno"> 2306</span>&#160;        <a class="code" href="class_parse_action.html">ParseAction</a> OpenActionreplace[] = {</div>
<div class="line"><a name="l02307"></a><span class="lineno"> 2307</span>&#160;            <a class="code" href="class_parse_action.html">ParseAction</a>(<a class="code" href="_stream_command_parser_8h.html#a21d5e8f8cdaa838586b31007df0a950ba1c73bf66bffc3067439c90f010b7b2d4">MEB</a>, <a class="code" href="class_stream_info.html#a7783763d6eec22176a9dfd2f537f6506">read_only</a>),</div>
<div class="line"><a name="l02308"></a><span class="lineno"> 2308</span>&#160;            <a class="code" href="class_parse_action.html">ParseAction</a>(<a class="code" href="_stream_command_parser_8h.html#a21d5e8f8cdaa838586b31007df0a950baf88e46564f67a88a18b9ba3af5792b02">ME</a>, oflag, <a class="code" href="unix_2_sys_file_8hpp.html#a419ed61c34fd6bce28216d2ece437ff4">RX_O_APPEND</a>),</div>
<div class="line"><a name="l02309"></a><span class="lineno"> 2309</span>&#160;            <a class="code" href="class_parse_action.html">ParseAction</a>(<a class="code" href="_stream_command_parser_8h.html#a21d5e8f8cdaa838586b31007df0a950ba9cc5f732de9ad61d2fbdc269ad8fd229">BitOr</a>, oflag, <a class="code" href="unix_2_sys_file_8hpp.html#a363f215532814764f2f4b040eab7c919">RX_O_TRUNC</a>),</div>
<div class="line"><a name="l02310"></a><span class="lineno"> 2310</span>&#160;            <a class="code" href="class_parse_action.html">ParseAction</a>()</div>
<div class="line"><a name="l02311"></a><span class="lineno"> 2311</span>&#160;        };</div>
<div class="line"><a name="l02312"></a><span class="lineno"> 2312</span>&#160;        <a class="code" href="class_parse_action.html">ParseAction</a> OpenActionnobuffer[] = {</div>
<div class="line"><a name="l02313"></a><span class="lineno"> 2313</span>&#160;            <a class="code" href="class_parse_action.html">ParseAction</a>(<a class="code" href="_stream_command_parser_8h.html#a21d5e8f8cdaa838586b31007df0a950ba89e3d82509617a35b919da37b9cf2d7b">SetBool</a>, <a class="code" href="class_stream_info.html#ada2b25c7a5fc0a9c1fe9f63f432dfdd4">nobuffer</a>, <span class="keyword">true</span>),</div>
<div class="line"><a name="l02314"></a><span class="lineno"> 2314</span>&#160;            <a class="code" href="class_parse_action.html">ParseAction</a>()</div>
<div class="line"><a name="l02315"></a><span class="lineno"> 2315</span>&#160;        };</div>
<div class="line"><a name="l02316"></a><span class="lineno"> 2316</span>&#160;        <a class="code" href="class_parse_action.html">ParseAction</a> OpenActionbinary[] = {</div>
<div class="line"><a name="l02317"></a><span class="lineno"> 2317</span>&#160;            <a class="code" href="class_parse_action.html">ParseAction</a>(<a class="code" href="_stream_command_parser_8h.html#a21d5e8f8cdaa838586b31007df0a950ba1c73bf66bffc3067439c90f010b7b2d4">MEB</a>, <a class="code" href="class_stream_info.html#a4f4b3f5f598efe6f91ee45cd6aadb065">record_based</a>, <span class="keyword">true</span>),</div>
<div class="line"><a name="l02318"></a><span class="lineno"> 2318</span>&#160;            <a class="code" href="class_parse_action.html">ParseAction</a>(<a class="code" href="_stream_command_parser_8h.html#a21d5e8f8cdaa838586b31007df0a950ba89e3d82509617a35b919da37b9cf2d7b">SetBool</a>, <a class="code" href="class_stream_info.html#a4f4b3f5f598efe6f91ee45cd6aadb065">record_based</a>, <span class="keyword">true</span>),</div>
<div class="line"><a name="l02319"></a><span class="lineno"> 2319</span>&#160;            <a class="code" href="class_parse_action.html">ParseAction</a>()</div>
<div class="line"><a name="l02320"></a><span class="lineno"> 2320</span>&#160;        };</div>
<div class="line"><a name="l02321"></a><span class="lineno"> 2321</span>&#160;        <a class="code" href="class_parse_action.html">ParseAction</a> OpenActionreclength[] = {</div>
<div class="line"><a name="l02322"></a><span class="lineno"> 2322</span>&#160;            <a class="code" href="class_parse_action.html">ParseAction</a>(<a class="code" href="_stream_command_parser_8h.html#a21d5e8f8cdaa838586b31007df0a950badd355a90ae4b9c19afc7ef69c70b3915">MIB</a>, <a class="code" href="class_stream_info.html#a4f4b3f5f598efe6f91ee45cd6aadb065">record_based</a>),</div>
<div class="line"><a name="l02323"></a><span class="lineno"> 2323</span>&#160;            <a class="code" href="class_parse_action.html">ParseAction</a>(<a class="code" href="_stream_command_parser_8h.html#a21d5e8f8cdaa838586b31007df0a950ba79a143049110a823b7db1f0e289fbcbf">CallItem</a>, <a class="code" href="_stream_native_8cpp.html#aadad8d91bf46dcb0b8e74d74240fc2a6">reclength_token</a>, &amp;<a class="code" href="class_stream_info.html#a8fee3f8892f5e912d85d5a1621cdcc8a">binaryRecordLength</a>),</div>
<div class="line"><a name="l02324"></a><span class="lineno"> 2324</span>&#160;            <a class="code" href="class_parse_action.html">ParseAction</a>()</div>
<div class="line"><a name="l02325"></a><span class="lineno"> 2325</span>&#160;        };</div>
<div class="line"><a name="l02326"></a><span class="lineno"> 2326</span>&#160; </div>
<div class="line"><a name="l02327"></a><span class="lineno"> 2327</span>&#160;        <a class="code" href="class_parse_action.html">ParseAction</a> OpenActionshared[] = {</div>
<div class="line"><a name="l02328"></a><span class="lineno"> 2328</span>&#160;            <a class="code" href="class_parse_action.html">ParseAction</a>(<a class="code" href="_stream_command_parser_8h.html#a21d5e8f8cdaa838586b31007df0a950ba8b21e950b760f9939243c67524486aec">SetItem</a>, shared, <a class="code" href="unix_2_sys_file_8hpp.html#aa9690b9c4b5f76310990f0f67766ddf3">RX_SH_DENYNO</a>),</div>
<div class="line"><a name="l02329"></a><span class="lineno"> 2329</span>&#160;            <a class="code" href="class_parse_action.html">ParseAction</a>()</div>
<div class="line"><a name="l02330"></a><span class="lineno"> 2330</span>&#160;        };</div>
<div class="line"><a name="l02331"></a><span class="lineno"> 2331</span>&#160; </div>
<div class="line"><a name="l02332"></a><span class="lineno"> 2332</span>&#160;        <a class="code" href="class_parse_action.html">ParseAction</a> OpenActionsharedread[] = {</div>
<div class="line"><a name="l02333"></a><span class="lineno"> 2333</span>&#160;            <a class="code" href="class_parse_action.html">ParseAction</a>(<a class="code" href="_stream_command_parser_8h.html#a21d5e8f8cdaa838586b31007df0a950ba8b21e950b760f9939243c67524486aec">SetItem</a>, shared, <a class="code" href="unix_2_sys_file_8hpp.html#a5d6a52000f2d86a1583eeb84cea9cd16">RX_SH_DENYWR</a>),</div>
<div class="line"><a name="l02334"></a><span class="lineno"> 2334</span>&#160;            <a class="code" href="class_parse_action.html">ParseAction</a>()</div>
<div class="line"><a name="l02335"></a><span class="lineno"> 2335</span>&#160;        };</div>
<div class="line"><a name="l02336"></a><span class="lineno"> 2336</span>&#160; </div>
<div class="line"><a name="l02337"></a><span class="lineno"> 2337</span>&#160;        <a class="code" href="class_parse_action.html">ParseAction</a> OpenActionsharedwrite[] = {</div>
<div class="line"><a name="l02338"></a><span class="lineno"> 2338</span>&#160;            <a class="code" href="class_parse_action.html">ParseAction</a>(<a class="code" href="_stream_command_parser_8h.html#a21d5e8f8cdaa838586b31007df0a950ba8b21e950b760f9939243c67524486aec">SetItem</a>, shared, <a class="code" href="unix_2_sys_file_8hpp.html#aeeb5f1ad006eedc1fc37f12380b15598">RX_SH_DENYRD</a>),</div>
<div class="line"><a name="l02339"></a><span class="lineno"> 2339</span>&#160;            <a class="code" href="class_parse_action.html">ParseAction</a>()</div>
<div class="line"><a name="l02340"></a><span class="lineno"> 2340</span>&#160;        };</div>
<div class="line"><a name="l02341"></a><span class="lineno"> 2341</span>&#160; </div>
<div class="line"><a name="l02342"></a><span class="lineno"> 2342</span>&#160;<span class="preprocessor">    #ifdef STREAM_AUTOSYNC</span></div>
<div class="line"><a name="l02343"></a><span class="lineno"> 2343</span>&#160;        <a class="code" href="class_parse_action.html">ParseAction</a> OpenActionautosync[] = {</div>
<div class="line"><a name="l02344"></a><span class="lineno"> 2344</span>&#160;            <a class="code" href="class_parse_action.html">ParseAction</a>(<a class="code" href="_stream_command_parser_8h.html#a21d5e8f8cdaa838586b31007df0a950ba9cc5f732de9ad61d2fbdc269ad8fd229">BitOr</a>, oflag, RX_O_SYNC),</div>
<div class="line"><a name="l02345"></a><span class="lineno"> 2345</span>&#160;            <a class="code" href="class_parse_action.html">ParseAction</a>()</div>
<div class="line"><a name="l02346"></a><span class="lineno"> 2346</span>&#160;        };</div>
<div class="line"><a name="l02347"></a><span class="lineno"> 2347</span>&#160;<span class="preprocessor">    #endif</span></div>
<div class="line"><a name="l02348"></a><span class="lineno"> 2348</span>&#160; </div>
<div class="line"><a name="l02349"></a><span class="lineno"> 2349</span>&#160;<span class="preprocessor">    #ifdef STREAM_SHAREDOPEN</span></div>
<div class="line"><a name="l02350"></a><span class="lineno"> 2350</span>&#160;        <a class="code" href="class_parse_action.html">ParseAction</a> OpenActionshareread[] = {</div>
<div class="line"><a name="l02351"></a><span class="lineno"> 2351</span>&#160;            <a class="code" href="class_parse_action.html">ParseAction</a>(<a class="code" href="_stream_command_parser_8h.html#a21d5e8f8cdaa838586b31007df0a950ba8b9857852eaaa2816b407b5de9348565">MI</a>, oflag, RX_O_DELAY),</div>
<div class="line"><a name="l02352"></a><span class="lineno"> 2352</span>&#160;            <a class="code" href="class_parse_action.html">ParseAction</a>(<a class="code" href="_stream_command_parser_8h.html#a21d5e8f8cdaa838586b31007df0a950ba9cc5f732de9ad61d2fbdc269ad8fd229">BitOr</a>, oflag, RX_O_RSHARE),</div>
<div class="line"><a name="l02353"></a><span class="lineno"> 2353</span>&#160;            <a class="code" href="class_parse_action.html">ParseAction</a>()</div>
<div class="line"><a name="l02354"></a><span class="lineno"> 2354</span>&#160;        };</div>
<div class="line"><a name="l02355"></a><span class="lineno"> 2355</span>&#160;        <a class="code" href="class_parse_action.html">ParseAction</a> OpenActionnoshare[] = {</div>
<div class="line"><a name="l02356"></a><span class="lineno"> 2356</span>&#160;            <a class="code" href="class_parse_action.html">ParseAction</a>(<a class="code" href="_stream_command_parser_8h.html#a21d5e8f8cdaa838586b31007df0a950ba8b9857852eaaa2816b407b5de9348565">MI</a>, oflag, RX_O_DELAY),</div>
<div class="line"><a name="l02357"></a><span class="lineno"> 2357</span>&#160;            <a class="code" href="class_parse_action.html">ParseAction</a>(<a class="code" href="_stream_command_parser_8h.html#a21d5e8f8cdaa838586b31007df0a950ba9cc5f732de9ad61d2fbdc269ad8fd229">BitOr</a>, oflag, RX_O_NSHARE),</div>
<div class="line"><a name="l02358"></a><span class="lineno"> 2358</span>&#160;            <a class="code" href="class_parse_action.html">ParseAction</a>()</div>
<div class="line"><a name="l02359"></a><span class="lineno"> 2359</span>&#160;        };</div>
<div class="line"><a name="l02360"></a><span class="lineno"> 2360</span>&#160;        <a class="code" href="class_parse_action.html">ParseAction</a> OpenActiondelay[] = {</div>
<div class="line"><a name="l02361"></a><span class="lineno"> 2361</span>&#160;            <a class="code" href="class_parse_action.html">ParseAction</a>(<a class="code" href="_stream_command_parser_8h.html#a21d5e8f8cdaa838586b31007df0a950ba8b9857852eaaa2816b407b5de9348565">MI</a>, oflag, RX_O_RSHARE),</div>
<div class="line"><a name="l02362"></a><span class="lineno"> 2362</span>&#160;            <a class="code" href="class_parse_action.html">ParseAction</a>(<a class="code" href="_stream_command_parser_8h.html#a21d5e8f8cdaa838586b31007df0a950ba8b9857852eaaa2816b407b5de9348565">MI</a>, oflag, RX_O_NSHARE),</div>
<div class="line"><a name="l02363"></a><span class="lineno"> 2363</span>&#160;            <a class="code" href="class_parse_action.html">ParseAction</a>(<a class="code" href="_stream_command_parser_8h.html#a21d5e8f8cdaa838586b31007df0a950ba9cc5f732de9ad61d2fbdc269ad8fd229">BitOr</a>, oflag, RX_O_DELAY),</div>
<div class="line"><a name="l02364"></a><span class="lineno"> 2364</span>&#160;            <a class="code" href="class_parse_action.html">ParseAction</a>()</div>
<div class="line"><a name="l02365"></a><span class="lineno"> 2365</span>&#160;        };</div>
<div class="line"><a name="l02366"></a><span class="lineno"> 2366</span>&#160;<span class="preprocessor">    #endif</span></div>
<div class="line"><a name="l02367"></a><span class="lineno"> 2367</span>&#160; </div>
<div class="line"><a name="l02368"></a><span class="lineno"> 2368</span>&#160;    <span class="comment">/* Token table for open parameters */</span></div>
<div class="line"><a name="l02369"></a><span class="lineno"> 2369</span>&#160;        <a class="code" href="class_token_definition.html">TokenDefinition</a>  tts[] = {</div>
<div class="line"><a name="l02370"></a><span class="lineno"> 2370</span>&#160;            <a class="code" href="class_token_definition.html">TokenDefinition</a>(<span class="stringliteral">&quot;READ&quot;</span>,3,      OpenActionread),</div>
<div class="line"><a name="l02371"></a><span class="lineno"> 2371</span>&#160;            <a class="code" href="class_token_definition.html">TokenDefinition</a>(<span class="stringliteral">&quot;WRITE&quot;</span>,1,     OpenActionwrite),</div>
<div class="line"><a name="l02372"></a><span class="lineno"> 2372</span>&#160;            <a class="code" href="class_token_definition.html">TokenDefinition</a>(<span class="stringliteral">&quot;BOTH&quot;</span>,2,      OpenActionboth),</div>
<div class="line"><a name="l02373"></a><span class="lineno"> 2373</span>&#160;            <a class="code" href="class_token_definition.html">TokenDefinition</a>(<span class="stringliteral">&quot;APPEND&quot;</span>,2,    OpenActionappend),</div>
<div class="line"><a name="l02374"></a><span class="lineno"> 2374</span>&#160;            <a class="code" href="class_token_definition.html">TokenDefinition</a>(<span class="stringliteral">&quot;REPLACE&quot;</span>,3,   OpenActionreplace),</div>
<div class="line"><a name="l02375"></a><span class="lineno"> 2375</span>&#160;            <a class="code" href="class_token_definition.html">TokenDefinition</a>(<span class="stringliteral">&quot;NOBUFFER&quot;</span>,3,  OpenActionnobuffer),</div>
<div class="line"><a name="l02376"></a><span class="lineno"> 2376</span>&#160;            <a class="code" href="class_token_definition.html">TokenDefinition</a>(<span class="stringliteral">&quot;BINARY&quot;</span>,2,    OpenActionbinary),</div>
<div class="line"><a name="l02377"></a><span class="lineno"> 2377</span>&#160;            <a class="code" href="class_token_definition.html">TokenDefinition</a>(<span class="stringliteral">&quot;RECLENGTH&quot;</span>,3, OpenActionreclength),</div>
<div class="line"><a name="l02378"></a><span class="lineno"> 2378</span>&#160;            <a class="code" href="class_token_definition.html">TokenDefinition</a>(<span class="stringliteral">&quot;SHARED&quot;</span>,6,    OpenActionshared),</div>
<div class="line"><a name="l02379"></a><span class="lineno"> 2379</span>&#160;            <a class="code" href="class_token_definition.html">TokenDefinition</a>(<span class="stringliteral">&quot;SHAREREAD&quot;</span>,6, OpenActionsharedread),</div>
<div class="line"><a name="l02380"></a><span class="lineno"> 2380</span>&#160;            <a class="code" href="class_token_definition.html">TokenDefinition</a>(<span class="stringliteral">&quot;SHAREWRITE&quot;</span>,6,OpenActionsharedwrite),</div>
<div class="line"><a name="l02381"></a><span class="lineno"> 2381</span>&#160; </div>
<div class="line"><a name="l02382"></a><span class="lineno"> 2382</span>&#160;<span class="preprocessor">    #ifdef STREAM_AUTOSYNC</span></div>
<div class="line"><a name="l02383"></a><span class="lineno"> 2383</span>&#160;            <a class="code" href="class_token_definition.html">TokenDefinition</a>(<span class="stringliteral">&quot;AUTOSYNC&quot;</span>,2, OpenActionautosync),</div>
<div class="line"><a name="l02384"></a><span class="lineno"> 2384</span>&#160;<span class="preprocessor">    #endif</span></div>
<div class="line"><a name="l02385"></a><span class="lineno"> 2385</span>&#160; </div>
<div class="line"><a name="l02386"></a><span class="lineno"> 2386</span>&#160;<span class="preprocessor">    #ifdef STREAM_SHAREDOPEN</span></div>
<div class="line"><a name="l02387"></a><span class="lineno"> 2387</span>&#160;            <a class="code" href="class_token_definition.html">TokenDefinition</a>(<span class="stringliteral">&quot;SHAREREAD&quot;</span>,1,OpenActionshareread),</div>
<div class="line"><a name="l02388"></a><span class="lineno"> 2388</span>&#160;            <a class="code" href="class_token_definition.html">TokenDefinition</a>(<span class="stringliteral">&quot;NOSHARE&quot;</span>,3,  OpenActionnoshare),</div>
<div class="line"><a name="l02389"></a><span class="lineno"> 2389</span>&#160;            <a class="code" href="class_token_definition.html">TokenDefinition</a>(<span class="stringliteral">&quot;DELAY&quot;</span>,1,    OpenActiondelay),</div>
<div class="line"><a name="l02390"></a><span class="lineno"> 2390</span>&#160;<span class="preprocessor">    #endif</span></div>
<div class="line"><a name="l02391"></a><span class="lineno"> 2391</span>&#160;            <a class="code" href="class_token_definition.html">TokenDefinition</a>(<a class="code" href="_stream_native_8cpp.html#a8e4e356b86dac886f097bf2f4431ee79">unknown_tr</a>)</div>
<div class="line"><a name="l02392"></a><span class="lineno"> 2392</span>&#160;        };</div>
<div class="line"><a name="l02393"></a><span class="lineno"> 2393</span>&#160; </div>
<div class="line"><a name="l02394"></a><span class="lineno"> 2394</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="_stream_command_parser_8h.html#ae192d5327e15853dda973ca14ebb72e3">parser</a>(tts, options, NULL) != 0)</div>
<div class="line"><a name="l02395"></a><span class="lineno"> 2395</span>&#160;        {</div>
<div class="line"><a name="l02396"></a><span class="lineno"> 2396</span>&#160;            <a class="code" href="class_stream_info.html#abf80be8acced099814a34b375353c2e3">raiseException</a>(<a class="code" href="oorexxerrors_8h.html#a43f122d08b1e4bd67b6f301029f72599">Rexx_Error_Incorrect_method</a>);</div>
<div class="line"><a name="l02397"></a><span class="lineno"> 2397</span>&#160;        }</div>
<div class="line"><a name="l02398"></a><span class="lineno"> 2398</span>&#160;    }</div>
<div class="line"><a name="l02399"></a><span class="lineno"> 2399</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l02400"></a><span class="lineno"> 2400</span>&#160;    {</div>
<div class="line"><a name="l02401"></a><span class="lineno"> 2401</span>&#160;        <span class="comment">// No options, set the defaults.</span></div>
<div class="line"><a name="l02402"></a><span class="lineno"> 2402</span>&#160;        <a class="code" href="class_stream_info.html#a3a49e7bc25fb6842edc8cc2d5fa95d20">read_write</a> = <span class="keyword">true</span>;</div>
<div class="line"><a name="l02403"></a><span class="lineno"> 2403</span>&#160;        <a class="code" href="class_stream_info.html#ae5d69a23a83ae44083babca8913b9295">append</a> = <span class="keyword">false</span>;</div>
<div class="line"><a name="l02404"></a><span class="lineno"> 2404</span>&#160;        oflag |= <a class="code" href="_stream_native_8cpp.html#a08cd1913f9a5a340f426fda11f00cef5">RDWR_CREAT</a>;</div>
<div class="line"><a name="l02405"></a><span class="lineno"> 2405</span>&#160;        pmode |= <a class="code" href="_stream_native_8cpp.html#a353d1c9fc19fe1dc044744c05df8dc9c">IREAD_IWRITE</a>;</div>
<div class="line"><a name="l02406"></a><span class="lineno"> 2406</span>&#160; </div>
<div class="line"><a name="l02407"></a><span class="lineno"> 2407</span>&#160;        <span class="comment">// TODO: note that the docs say the default shared mode is SHARED.  But,</span></div>
<div class="line"><a name="l02408"></a><span class="lineno"> 2408</span>&#160;        <span class="comment">// the code on entry sets the default to not shared.  Need to either fix</span></div>
<div class="line"><a name="l02409"></a><span class="lineno"> 2409</span>&#160;        <span class="comment">// the docs or the code.</span></div>
<div class="line"><a name="l02410"></a><span class="lineno"> 2410</span>&#160;    }</div>
<div class="line"><a name="l02411"></a><span class="lineno"> 2411</span>&#160; </div>
<div class="line"><a name="l02412"></a><span class="lineno"> 2412</span>&#160; </div>
<div class="line"><a name="l02413"></a><span class="lineno"> 2413</span>&#160;    <a class="code" href="class_stream_info.html#a031ca794b8ef189757f1e034e8d0d122">resolveStreamName</a>();                <span class="comment">/* get the fully qualified name      */</span></div>
<div class="line"><a name="l02414"></a><span class="lineno"> 2414</span>&#160; </div>
<div class="line"><a name="l02415"></a><span class="lineno"> 2415</span>&#160;                                        <span class="comment">/* if replace and binary specified,  */</span></div>
<div class="line"><a name="l02416"></a><span class="lineno"> 2416</span>&#160;                                        <span class="comment">/* but not reclength, give back a    */</span></div>
<div class="line"><a name="l02417"></a><span class="lineno"> 2417</span>&#160;                                        <span class="comment">/* syntax error - don&#39;t know what to */</span></div>
<div class="line"><a name="l02418"></a><span class="lineno"> 2418</span>&#160;                                        <span class="comment">/* do                                */</span></div>
<div class="line"><a name="l02419"></a><span class="lineno"> 2419</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="class_stream_info.html#a4f4b3f5f598efe6f91ee45cd6aadb065">record_based</a> &amp;&amp; (oflag &amp; <a class="code" href="unix_2_sys_file_8hpp.html#a363f215532814764f2f4b040eab7c919">RX_O_TRUNC</a>) &amp;&amp; !<a class="code" href="class_stream_info.html#a8fee3f8892f5e912d85d5a1621cdcc8a">binaryRecordLength</a>)</div>
<div class="line"><a name="l02420"></a><span class="lineno"> 2420</span>&#160;    {</div>
<div class="line"><a name="l02421"></a><span class="lineno"> 2421</span>&#160;        <a class="code" href="class_stream_info.html#abf80be8acced099814a34b375353c2e3">raiseException</a>(<a class="code" href="oorexxerrors_8h.html#a43f122d08b1e4bd67b6f301029f72599">Rexx_Error_Incorrect_method</a>);</div>
<div class="line"><a name="l02422"></a><span class="lineno"> 2422</span>&#160;    }</div>
<div class="line"><a name="l02423"></a><span class="lineno"> 2423</span>&#160; </div>
<div class="line"><a name="l02424"></a><span class="lineno"> 2424</span>&#160;    <span class="comment">// If read/write/both/append not specified, the default is BOTH, with the initial</span></div>
<div class="line"><a name="l02425"></a><span class="lineno"> 2425</span>&#160;    <span class="comment">// positioning at the end</span></div>
<div class="line"><a name="l02426"></a><span class="lineno"> 2426</span>&#160;    <span class="comment">// (According to the current doc.)</span></div>
<div class="line"><a name="l02427"></a><span class="lineno"> 2427</span>&#160;    <span class="keywordflow">if</span> (!(oflag &amp; (<a class="code" href="unix_2_sys_file_8hpp.html#a0e47e78ccdf29e3dcafec74bab8695a1">RX_O_WRONLY</a> | <a class="code" href="_stream_native_8cpp.html#a08cd1913f9a5a340f426fda11f00cef5">RDWR_CREAT</a> )) &amp;&amp; !<a class="code" href="class_stream_info.html#a7783763d6eec22176a9dfd2f537f6506">read_only</a>)</div>
<div class="line"><a name="l02428"></a><span class="lineno"> 2428</span>&#160;    {</div>
<div class="line"><a name="l02429"></a><span class="lineno"> 2429</span>&#160;        oflag |= <a class="code" href="unix_2_sys_file_8hpp.html#a52219ba0434d2d6649628fc9c1dc8969">RX_O_RDWR</a> | <a class="code" href="_stream_native_8cpp.html#a08cd1913f9a5a340f426fda11f00cef5">RDWR_CREAT</a>;    <span class="comment">/* set this up for read/write mode   */</span></div>
<div class="line"><a name="l02430"></a><span class="lineno"> 2430</span>&#160;        pmode = <a class="code" href="_stream_native_8cpp.html#a353d1c9fc19fe1dc044744c05df8dc9c">IREAD_IWRITE</a>;            <span class="comment">/* save the pmode info               */</span></div>
<div class="line"><a name="l02431"></a><span class="lineno"> 2431</span>&#160;        <a class="code" href="class_stream_info.html#a3a49e7bc25fb6842edc8cc2d5fa95d20">read_write</a> = <span class="keyword">true</span>;</div>
<div class="line"><a name="l02432"></a><span class="lineno"> 2432</span>&#160;        <span class="comment">// remember the append status</span></div>
<div class="line"><a name="l02433"></a><span class="lineno"> 2433</span>&#160;        <span class="keywordflow">if</span> ((oflag &amp; <a class="code" href="unix_2_sys_file_8hpp.html#a419ed61c34fd6bce28216d2ece437ff4">RX_O_APPEND</a>) != 0)</div>
<div class="line"><a name="l02434"></a><span class="lineno"> 2434</span>&#160;        {</div>
<div class="line"><a name="l02435"></a><span class="lineno"> 2435</span>&#160;            <a class="code" href="class_stream_info.html#ae5d69a23a83ae44083babca8913b9295">append</a> = <span class="keyword">true</span>;</div>
<div class="line"><a name="l02436"></a><span class="lineno"> 2436</span>&#160;        }</div>
<div class="line"><a name="l02437"></a><span class="lineno"> 2437</span>&#160;    }</div>
<div class="line"><a name="l02438"></a><span class="lineno"> 2438</span>&#160; </div>
<div class="line"><a name="l02439"></a><span class="lineno"> 2439</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="class_stream_info.html#a7783763d6eec22176a9dfd2f537f6506">read_only</a>)</div>
<div class="line"><a name="l02440"></a><span class="lineno"> 2440</span>&#160;    {                       <span class="comment">/* read-only stream?                 */</span></div>
<div class="line"><a name="l02441"></a><span class="lineno"> 2441</span>&#160;                            <span class="comment">/* check if the stream exists        */</span></div>
<div class="line"><a name="l02442"></a><span class="lineno"> 2442</span>&#160;        <span class="keywordflow">if</span> (!<a class="code" href="class_sys_file_system.html#a00065686fda60d5d8ae9a80149d2e583">SysFileSystem::fileExists</a>(<a class="code" href="class_stream_info.html#aa1824fb879c522d827a4c16dd2ff5ae4">qualified_name</a>))</div>
<div class="line"><a name="l02443"></a><span class="lineno"> 2443</span>&#160;        {</div>
<div class="line"><a name="l02444"></a><span class="lineno"> 2444</span>&#160;            <span class="keywordtype">char</span> <a class="code" href="unix_2rxqueue_8cpp.html#a2edfdad12ca19a7c81c5cf054cd2a12f">work</a>[32];</div>
<div class="line"><a name="l02445"></a><span class="lineno"> 2445</span>&#160; </div>
<div class="line"><a name="l02446"></a><span class="lineno"> 2446</span>&#160;            <span class="comment">/* format the error return           */</span></div>
<div class="line"><a name="l02447"></a><span class="lineno"> 2447</span>&#160;            sprintf(<a class="code" href="unix_2rxqueue_8cpp.html#a2edfdad12ca19a7c81c5cf054cd2a12f">work</a>, <span class="stringliteral">&quot;ERROR:%d&quot;</span>, ENOENT);</div>
<div class="line"><a name="l02448"></a><span class="lineno"> 2448</span>&#160;            <span class="comment">/* go raise a notready condition     */</span></div>
<div class="line"><a name="l02449"></a><span class="lineno"> 2449</span>&#160;            <a class="code" href="class_stream_info.html#a6f99538562048386f872fb1843462267">notreadyError</a>(ENOENT, <a class="code" href="class_stream_info.html#a6a5404d4b7ece722baef78b65cab52d2">context</a>-&gt;NewStringFromAsciiz(<a class="code" href="unix_2rxqueue_8cpp.html#a2edfdad12ca19a7c81c5cf054cd2a12f">work</a>));</div>
<div class="line"><a name="l02450"></a><span class="lineno"> 2450</span>&#160;        }</div>
<div class="line"><a name="l02451"></a><span class="lineno"> 2451</span>&#160;        <span class="comment">/* and clear all of the write        */</span></div>
<div class="line"><a name="l02452"></a><span class="lineno"> 2452</span>&#160;        <span class="comment">/* information                       */</span></div>
<div class="line"><a name="l02453"></a><span class="lineno"> 2453</span>&#160;        <a class="code" href="class_stream_info.html#a0ae0ea0f4fcc555c87d7e9be88bea96c">charWritePosition</a> = 0;</div>
<div class="line"><a name="l02454"></a><span class="lineno"> 2454</span>&#160;        <a class="code" href="class_stream_info.html#ac180477faedf3ab1f5f37376d545e916">lineWritePosition</a> = 0;</div>
<div class="line"><a name="l02455"></a><span class="lineno"> 2455</span>&#160;        <a class="code" href="class_stream_info.html#a520c92ac8d0d8c97c36fccdfdacb2c68">lineWriteCharPosition</a> = 0;</div>
<div class="line"><a name="l02456"></a><span class="lineno"> 2456</span>&#160;    }</div>
<div class="line"><a name="l02457"></a><span class="lineno"> 2457</span>&#160;    <span class="comment">/* if write only specified           */</span></div>
<div class="line"><a name="l02458"></a><span class="lineno"> 2458</span>&#160;    <span class="comment">/*      - try both first             */</span></div>
<div class="line"><a name="l02459"></a><span class="lineno"> 2459</span>&#160;    <span class="keywordflow">if</span> (oflag &amp; <a class="code" href="unix_2_sys_file_8hpp.html#a0e47e78ccdf29e3dcafec74bab8695a1">RX_O_WRONLY</a>)</div>
<div class="line"><a name="l02460"></a><span class="lineno"> 2460</span>&#160;    {</div>
<div class="line"><a name="l02461"></a><span class="lineno"> 2461</span>&#160;        <span class="comment">/* set both flags                    */</span></div>
<div class="line"><a name="l02462"></a><span class="lineno"> 2462</span>&#160;        <a class="code" href="class_stream_info.html#a3a49e7bc25fb6842edc8cc2d5fa95d20">read_write</a> = <span class="keyword">true</span>;</div>
<div class="line"><a name="l02463"></a><span class="lineno"> 2463</span>&#160;        <a class="code" href="class_stream_info.html#a3d4aeb7b07210713e68491c0c1370fff">write_only</a> = <span class="keyword">true</span>;</div>
<div class="line"><a name="l02464"></a><span class="lineno"> 2464</span>&#160; </div>
<div class="line"><a name="l02465"></a><span class="lineno"> 2465</span>&#160;        oflag &amp;= ~<a class="code" href="unix_2_sys_file_8hpp.html#a0e47e78ccdf29e3dcafec74bab8695a1">RX_O_WRONLY</a>;           <span class="comment">/* turn off the write only flag      */</span></div>
<div class="line"><a name="l02466"></a><span class="lineno"> 2466</span>&#160;        oflag |= <a class="code" href="_stream_native_8cpp.html#a08cd1913f9a5a340f426fda11f00cef5">RDWR_CREAT</a>;             <span class="comment">/* and turn on the read/write        */</span></div>
<div class="line"><a name="l02467"></a><span class="lineno"> 2467</span>&#160;        pmode = <a class="code" href="_stream_native_8cpp.html#a353d1c9fc19fe1dc044744c05df8dc9c">IREAD_IWRITE</a>;            <span class="comment">/* set the new pmode                 */</span></div>
<div class="line"><a name="l02468"></a><span class="lineno"> 2468</span>&#160;    }</div>
<div class="line"><a name="l02469"></a><span class="lineno"> 2469</span>&#160; </div>
<div class="line"><a name="l02470"></a><span class="lineno"> 2470</span>&#160;    <span class="comment">/* now open the stream               */</span></div>
<div class="line"><a name="l02471"></a><span class="lineno"> 2471</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="class_stream_info.html#a183f102dcfac11bbbbf5dd8df2e39e7a">open</a>(oflag, pmode, shared))</div>
<div class="line"><a name="l02472"></a><span class="lineno"> 2472</span>&#160;    {</div>
<div class="line"><a name="l02473"></a><span class="lineno"> 2473</span>&#160;        <span class="comment">// if this is some sort of device, it might be output only (i.e., a</span></div>
<div class="line"><a name="l02474"></a><span class="lineno"> 2474</span>&#160;        <span class="comment">// printer).  Try opening again write only</span></div>
<div class="line"><a name="l02475"></a><span class="lineno"> 2475</span>&#160;        <span class="comment">// bug 3274050 : no longer limited to device, a regular file can have write-only permissions</span></div>
<div class="line"><a name="l02476"></a><span class="lineno"> 2476</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="class_stream_info.html#a3d4aeb7b07210713e68491c0c1370fff">write_only</a> || <a class="code" href="class_stream_info.html#a35caea85b14b8f2b8b734c3b51eb7f4b">fileInfo</a>.<a class="code" href="class_sys_file.html#a4452c67b2e4b60b096f2c8f401a8332d">isDevice</a>())</div>
<div class="line"><a name="l02477"></a><span class="lineno"> 2477</span>&#160;        {</div>
<div class="line"><a name="l02478"></a><span class="lineno"> 2478</span>&#160;            <span class="keywordflow">if</span> (!<a class="code" href="class_stream_info.html#a183f102dcfac11bbbbf5dd8df2e39e7a">open</a>(<a class="code" href="_stream_native_8cpp.html#ac582219db81802c3e505c2135e225ca6">WR_CREAT</a>, <a class="code" href="unix_2_sys_file_8hpp.html#a0e4d18f8a0f213e2d8420dcb25b1f4a7">RX_S_IWRITE</a>, shared))</div>
<div class="line"><a name="l02479"></a><span class="lineno"> 2479</span>&#160;            {</div>
<div class="line"><a name="l02480"></a><span class="lineno"> 2480</span>&#160;                <span class="keywordtype">char</span> <a class="code" href="unix_2rxqueue_8cpp.html#a2edfdad12ca19a7c81c5cf054cd2a12f">work</a>[32];</div>
<div class="line"><a name="l02481"></a><span class="lineno"> 2481</span>&#160; </div>
<div class="line"><a name="l02482"></a><span class="lineno"> 2482</span>&#160;                sprintf(<a class="code" href="unix_2rxqueue_8cpp.html#a2edfdad12ca19a7c81c5cf054cd2a12f">work</a>, <span class="stringliteral">&quot;ERROR:%d&quot;</span>, <a class="code" href="class_stream_info.html#a35caea85b14b8f2b8b734c3b51eb7f4b">fileInfo</a>.<a class="code" href="class_sys_file.html#a0ccd495349312394f088f7716515a78e">errorInfo</a>()); <span class="comment">/* format the error return           */</span></div>
<div class="line"><a name="l02483"></a><span class="lineno"> 2483</span>&#160;                <span class="comment">/* go raise a notready condition     */</span></div>
<div class="line"><a name="l02484"></a><span class="lineno"> 2484</span>&#160;                <a class="code" href="class_stream_info.html#a6f99538562048386f872fb1843462267">notreadyError</a>(<a class="code" href="class_stream_info.html#a35caea85b14b8f2b8b734c3b51eb7f4b">fileInfo</a>.<a class="code" href="class_sys_file.html#a0ccd495349312394f088f7716515a78e">errorInfo</a>(), <a class="code" href="class_stream_info.html#a6a5404d4b7ece722baef78b65cab52d2">context</a>-&gt;NewStringFromAsciiz(<a class="code" href="unix_2rxqueue_8cpp.html#a2edfdad12ca19a7c81c5cf054cd2a12f">work</a>));</div>
<div class="line"><a name="l02485"></a><span class="lineno"> 2485</span>&#160;            }</div>
<div class="line"><a name="l02486"></a><span class="lineno"> 2486</span>&#160;            <a class="code" href="class_stream_info.html#a3a49e7bc25fb6842edc8cc2d5fa95d20">read_write</a> = 0;<span class="comment">/* turn off the read/write flag      */</span></div>
<div class="line"><a name="l02487"></a><span class="lineno"> 2487</span>&#160;            <a class="code" href="class_stream_info.html#a3d4aeb7b07210713e68491c0c1370fff">write_only</a> = 1;<span class="comment">/* turn on the write only flag       */</span></div>
<div class="line"><a name="l02488"></a><span class="lineno"> 2488</span>&#160;        }</div>
<div class="line"><a name="l02489"></a><span class="lineno"> 2489</span>&#160;        <span class="keywordflow">else</span></div>
<div class="line"><a name="l02490"></a><span class="lineno"> 2490</span>&#160;        {</div>
<div class="line"><a name="l02491"></a><span class="lineno"> 2491</span>&#160;            <span class="keywordtype">char</span> <a class="code" href="unix_2rxqueue_8cpp.html#a2edfdad12ca19a7c81c5cf054cd2a12f">work</a>[32];</div>
<div class="line"><a name="l02492"></a><span class="lineno"> 2492</span>&#160;            sprintf(<a class="code" href="unix_2rxqueue_8cpp.html#a2edfdad12ca19a7c81c5cf054cd2a12f">work</a>, <span class="stringliteral">&quot;ERROR:%d&quot;</span>, <a class="code" href="class_stream_info.html#a35caea85b14b8f2b8b734c3b51eb7f4b">fileInfo</a>.<a class="code" href="class_sys_file.html#a0ccd495349312394f088f7716515a78e">errorInfo</a>()); <span class="comment">/* format the error return           */</span></div>
<div class="line"><a name="l02493"></a><span class="lineno"> 2493</span>&#160;            <span class="comment">/* go raise a notready condition     */</span></div>
<div class="line"><a name="l02494"></a><span class="lineno"> 2494</span>&#160;            <a class="code" href="class_stream_info.html#a6f99538562048386f872fb1843462267">notreadyError</a>(<a class="code" href="class_stream_info.html#a35caea85b14b8f2b8b734c3b51eb7f4b">fileInfo</a>.<a class="code" href="class_sys_file.html#a0ccd495349312394f088f7716515a78e">errorInfo</a>(), <a class="code" href="class_stream_info.html#a6a5404d4b7ece722baef78b65cab52d2">context</a>-&gt;NewStringFromAsciiz(<a class="code" href="unix_2rxqueue_8cpp.html#a2edfdad12ca19a7c81c5cf054cd2a12f">work</a>));</div>
<div class="line"><a name="l02495"></a><span class="lineno"> 2495</span>&#160;        }</div>
<div class="line"><a name="l02496"></a><span class="lineno"> 2496</span>&#160;    }</div>
<div class="line"><a name="l02497"></a><span class="lineno"> 2497</span>&#160; </div>
<div class="line"><a name="l02498"></a><span class="lineno"> 2498</span>&#160;    <span class="comment">// turn off buffering if requested.</span></div>
<div class="line"><a name="l02499"></a><span class="lineno"> 2499</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="class_stream_info.html#ada2b25c7a5fc0a9c1fe9f63f432dfdd4">nobuffer</a>)</div>
<div class="line"><a name="l02500"></a><span class="lineno"> 2500</span>&#160;    {</div>
<div class="line"><a name="l02501"></a><span class="lineno"> 2501</span>&#160;        <a class="code" href="class_stream_info.html#a35caea85b14b8f2b8b734c3b51eb7f4b">fileInfo</a>.<a class="code" href="class_sys_file.html#a9960f0b73218853df65a100687c3952c">setBuffering</a>(<span class="keyword">false</span>, 0);</div>
<div class="line"><a name="l02502"></a><span class="lineno"> 2502</span>&#160;    }</div>
<div class="line"><a name="l02503"></a><span class="lineno"> 2503</span>&#160;    <span class="comment">// positioning the stream will test if this is open or not, so mark it open now</span></div>
<div class="line"><a name="l02504"></a><span class="lineno"> 2504</span>&#160;    <a class="code" href="class_stream_info.html#a69bc9580bb2e54426801fe6fca59c98e">isopen</a> = <span class="keyword">true</span>;</div>
<div class="line"><a name="l02505"></a><span class="lineno"> 2505</span>&#160; </div>
<div class="line"><a name="l02506"></a><span class="lineno"> 2506</span>&#160;<span class="comment">/********************************************************************************************/</span></div>
<div class="line"><a name="l02507"></a><span class="lineno"> 2507</span>&#160;<span class="comment">/*          if it is a persistant stream put the write character pointer at the end         */</span></div>
<div class="line"><a name="l02508"></a><span class="lineno"> 2508</span>&#160;<span class="comment">/*   need to check if the last character is end of file and if so write over it             */</span></div>
<div class="line"><a name="l02509"></a><span class="lineno"> 2509</span>&#160;<span class="comment">/*   if the stream was created it will have a size of 0 but this will mess up the logic     */</span></div>
<div class="line"><a name="l02510"></a><span class="lineno"> 2510</span>&#160;<span class="comment">/*          so set it to one                                                                */</span></div>
<div class="line"><a name="l02511"></a><span class="lineno"> 2511</span>&#160;<span class="comment">/********************************************************************************************/</span></div>
<div class="line"><a name="l02512"></a><span class="lineno"> 2512</span>&#160;                                        <span class="comment">/* persistent writeable stream?      */</span></div>
<div class="line"><a name="l02513"></a><span class="lineno"> 2513</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="class_stream_info.html#a35caea85b14b8f2b8b734c3b51eb7f4b">fileInfo</a>.<a class="code" href="class_sys_file.html#adfa0d4b71f91895b75ccb2347c42eb0f">isTransient</a>() &amp;&amp; (oflag &amp; (<a class="code" href="unix_2_sys_file_8hpp.html#a0e47e78ccdf29e3dcafec74bab8695a1">RX_O_WRONLY</a> | <a class="code" href="_stream_native_8cpp.html#a08cd1913f9a5a340f426fda11f00cef5">RDWR_CREAT</a>)))</div>
<div class="line"><a name="l02514"></a><span class="lineno"> 2514</span>&#160;    {</div>
<div class="line"><a name="l02515"></a><span class="lineno"> 2515</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="class_stream_info.html#af21ad8877a6411a69e033790ac94b299">size</a>() &gt; 0)</div>
<div class="line"><a name="l02516"></a><span class="lineno"> 2516</span>&#160;        {   <span class="comment">/* existing stream?                  */</span></div>
<div class="line"><a name="l02517"></a><span class="lineno"> 2517</span>&#160;            <span class="comment">// position at the end, and set the write position</span></div>
<div class="line"><a name="l02518"></a><span class="lineno"> 2518</span>&#160;            <a class="code" href="class_stream_info.html#acd9fe6516d390ecca12931ae2c1d7d20">setPosition</a>(<a class="code" href="class_stream_info.html#af21ad8877a6411a69e033790ac94b299">size</a>(), <a class="code" href="class_stream_info.html#a0ae0ea0f4fcc555c87d7e9be88bea96c">charWritePosition</a>);</div>
<div class="line"><a name="l02519"></a><span class="lineno"> 2519</span>&#160; </div>
<div class="line"><a name="l02520"></a><span class="lineno"> 2520</span>&#160;            <span class="keywordtype">char</span>   char_buffer = <span class="charliteral">&#39; &#39;</span>;</div>
<div class="line"><a name="l02521"></a><span class="lineno"> 2521</span>&#160;            <span class="keywordtype">size_t</span> bytesRead;</div>
<div class="line"><a name="l02522"></a><span class="lineno"> 2522</span>&#160;            <span class="comment">// read the last character of the buffer.</span></div>
<div class="line"><a name="l02523"></a><span class="lineno"> 2523</span>&#160;            <span class="comment">// we don&#39;t call readBuffer() for this because it</span></div>
<div class="line"><a name="l02524"></a><span class="lineno"> 2524</span>&#160;            <span class="comment">// moves the read pointer</span></div>
<div class="line"><a name="l02525"></a><span class="lineno"> 2525</span>&#160;            <span class="keywordflow">if</span> (!<a class="code" href="class_stream_info.html#a35caea85b14b8f2b8b734c3b51eb7f4b">fileInfo</a>.<a class="code" href="class_sys_file.html#ab96591dd7cfa1192a49c99eb8ab3ce9a">read</a>(&amp;char_buffer, 1, bytesRead))</div>
<div class="line"><a name="l02526"></a><span class="lineno"> 2526</span>&#160;            {</div>
<div class="line"><a name="l02527"></a><span class="lineno"> 2527</span>&#160;                <span class="keywordflow">if</span> (!<a class="code" href="class_stream_info.html#a3d4aeb7b07210713e68491c0c1370fff">write_only</a>) <a class="code" href="class_stream_info.html#a6f99538562048386f872fb1843462267">notreadyError</a>();</div>
<div class="line"><a name="l02528"></a><span class="lineno"> 2528</span>&#160;            }</div>
<div class="line"><a name="l02529"></a><span class="lineno"> 2529</span>&#160; </div>
<div class="line"><a name="l02530"></a><span class="lineno"> 2530</span>&#160;            <span class="comment">// if the last character is not a ctrl_z, we need to</span></div>
<div class="line"><a name="l02531"></a><span class="lineno"> 2531</span>&#160;            <span class="comment">// step past it.</span></div>
<div class="line"><a name="l02532"></a><span class="lineno"> 2532</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="_source_file_8cpp.html#a4aa83818e72d390465aa1549d66a09c1">ctrl_z</a> != char_buffer)</div>
<div class="line"><a name="l02533"></a><span class="lineno"> 2533</span>&#160;            {</div>
<div class="line"><a name="l02534"></a><span class="lineno"> 2534</span>&#160;                <a class="code" href="class_stream_info.html#a0ae0ea0f4fcc555c87d7e9be88bea96c">charWritePosition</a>++;</div>
<div class="line"><a name="l02535"></a><span class="lineno"> 2535</span>&#160;                <span class="comment">/* error on Windows so we had to put in that */</span></div>
<div class="line"><a name="l02536"></a><span class="lineno"> 2536</span>&#160;                <span class="comment">/* explicitly set the position       */</span></div>
<div class="line"><a name="l02537"></a><span class="lineno"> 2537</span>&#160;                <a class="code" href="class_stream_info.html#acd9fe6516d390ecca12931ae2c1d7d20">setPosition</a>(<a class="code" href="class_stream_info.html#a0ae0ea0f4fcc555c87d7e9be88bea96c">charWritePosition</a>, <a class="code" href="class_stream_info.html#a0ae0ea0f4fcc555c87d7e9be88bea96c">charWritePosition</a>);</div>
<div class="line"><a name="l02538"></a><span class="lineno"> 2538</span>&#160;            }</div>
<div class="line"><a name="l02539"></a><span class="lineno"> 2539</span>&#160;        }</div>
<div class="line"><a name="l02540"></a><span class="lineno"> 2540</span>&#160;        <span class="comment">/* set default line positioning      */</span></div>
<div class="line"><a name="l02541"></a><span class="lineno"> 2541</span>&#160;        <a class="code" href="class_stream_info.html#ac180477faedf3ab1f5f37376d545e916">lineWritePosition</a> = 0;</div>
<div class="line"><a name="l02542"></a><span class="lineno"> 2542</span>&#160;        <a class="code" href="class_stream_info.html#a520c92ac8d0d8c97c36fccdfdacb2c68">lineWriteCharPosition</a> = 0;</div>
<div class="line"><a name="l02543"></a><span class="lineno"> 2543</span>&#160;    }</div>
<div class="line"><a name="l02544"></a><span class="lineno"> 2544</span>&#160;    <span class="comment">/* this is now ready                 */</span></div>
<div class="line"><a name="l02545"></a><span class="lineno"> 2545</span>&#160;    <a class="code" href="class_stream_info.html#ab0c6d380b9704b6e305f881fc9fa1571">state</a> = <a class="code" href="class_stream_info.html#af8efe21cc9cb6d8da73907c4b6f573f7a4f89da370429a424003f1dc56d72526e">StreamReady</a>;</div>
<div class="line"><a name="l02546"></a><span class="lineno"> 2546</span>&#160;    <span class="comment">/* go process the stream type        */</span></div>
<div class="line"><a name="l02547"></a><span class="lineno"> 2547</span>&#160;    <a class="code" href="class_stream_info.html#a0039dd0ef9744576161528c01ab9061b">checkStreamType</a>();</div>
<div class="line"><a name="l02548"></a><span class="lineno"> 2548</span>&#160;    <span class="keywordflow">return</span> <span class="stringliteral">&quot;READY:&quot;</span>;                    <span class="comment">/* return success                    */</span></div>
<div class="line"><a name="l02549"></a><span class="lineno"> 2549</span>&#160;}</div>
<div class="line"><a name="l02550"></a><span class="lineno"> 2550</span>&#160; </div>
<div class="line"><a name="l02551"></a><span class="lineno"> 2551</span>&#160; </div>
<div class="line"><a name="l02552"></a><span class="lineno"> 2552</span>&#160;<span class="comment">/********************************************************************************************/</span></div>
<div class="line"><a name="l02553"></a><span class="lineno"> 2553</span>&#160;<span class="comment">/* stream_open - open a stream                                                              */</span></div>
<div class="line"><a name="l02554"></a><span class="lineno"> 2554</span>&#160;<span class="comment">/********************************************************************************************/</span></div>
<div class="line"><a name="l02555"></a><span class="lineno"><a class="line" href="_stream_native_8cpp.html#a311aea67ccebf8072346be2363f26039"> 2555</a></span>&#160;<a class="code" href="_stream_native_8cpp.html#a0132244173a5fe2980fd36a20185bc10">RexxMethod2</a>(<a class="code" href="rexx_8h.html#a581e376dc8d3b9132e29014c896b9e70">CSTRING</a>, stream_open, <a class="code" href="oorexxapi_8h.html#a3b5f38e088a2ba7f412c33f6d97f852a">CSELF</a>, streamPtr, OPTIONAL_CSTRING, options)</div>
<div class="line"><a name="l02556"></a><span class="lineno"> 2556</span>&#160;{</div>
<div class="line"><a name="l02557"></a><span class="lineno"> 2557</span>&#160;    <span class="keywordflow">try</span></div>
<div class="line"><a name="l02558"></a><span class="lineno"> 2558</span>&#160;    {</div>
<div class="line"><a name="l02559"></a><span class="lineno"> 2559</span>&#160;        <a class="code" href="class_stream_info.html">StreamInfo</a> *stream_info = <a class="code" href="_stream_native_8cpp.html#a1fbef9d1aba5e27b6754dda2d30239fa">checkStreamInfo</a>(context, streamPtr, context-&gt;NullString());</div>
<div class="line"><a name="l02560"></a><span class="lineno"> 2560</span>&#160;        <span class="keywordflow">return</span> stream_info-&gt;<a class="code" href="class_stream_info.html#a1068046147d3b99ab5c8e51b8ac8da75">streamOpen</a>(options);</div>
<div class="line"><a name="l02561"></a><span class="lineno"> 2561</span>&#160;    }</div>
<div class="line"><a name="l02562"></a><span class="lineno"> 2562</span>&#160;    <span class="comment">// this is thrown for any exceptions</span></div>
<div class="line"><a name="l02563"></a><span class="lineno"> 2563</span>&#160;    <span class="keywordflow">catch</span> (<span class="keywordtype">int</span>)</div>
<div class="line"><a name="l02564"></a><span class="lineno"> 2564</span>&#160;    {</div>
<div class="line"><a name="l02565"></a><span class="lineno"> 2565</span>&#160;        <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l02566"></a><span class="lineno"> 2566</span>&#160;    }</div>
<div class="line"><a name="l02567"></a><span class="lineno"> 2567</span>&#160;    <span class="keywordflow">catch</span> (<a class="code" href="class_stream_info.html">StreamInfo</a> *)</div>
<div class="line"><a name="l02568"></a><span class="lineno"> 2568</span>&#160;    {</div>
<div class="line"><a name="l02569"></a><span class="lineno"> 2569</span>&#160;    }</div>
<div class="line"><a name="l02570"></a><span class="lineno"> 2570</span>&#160;    <span class="keywordflow">return</span> 0;     <span class="comment">// return 0 for all exceptions...the result value has already been set.</span></div>
<div class="line"><a name="l02571"></a><span class="lineno"> 2571</span>&#160;}</div>
<div class="line"><a name="l02572"></a><span class="lineno"> 2572</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l02573"></a><span class="lineno"> 2573</span>&#160;<span class="comment">/**</span></div>
<div class="line"><a name="l02574"></a><span class="lineno"> 2574</span>&#160;<span class="comment"> * Set a stream to be opened with a specified handle.</span></div>
<div class="line"><a name="l02575"></a><span class="lineno"> 2575</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l02576"></a><span class="lineno"> 2576</span>&#160;<span class="comment"> * @param fh     The input file handle.</span></div>
<div class="line"><a name="l02577"></a><span class="lineno"> 2577</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l02578"></a><span class="lineno"><a class="line" href="class_stream_info.html#a0c405fcdafaa228868428ef4da200fe4"> 2578</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="class_stream_info.html#a0c405fcdafaa228868428ef4da200fe4">StreamInfo::setHandle</a>(<span class="keywordtype">int</span> fh)</div>
<div class="line"><a name="l02579"></a><span class="lineno"> 2579</span>&#160;{</div>
<div class="line"><a name="l02580"></a><span class="lineno"> 2580</span>&#160;    <a class="code" href="class_stream_info.html#a35caea85b14b8f2b8b734c3b51eb7f4b">fileInfo</a>.<a class="code" href="class_sys_file.html#ab59bfdafd28832d21a2b239174eec299">open</a>(fh);</div>
<div class="line"><a name="l02581"></a><span class="lineno"> 2581</span>&#160;    <a class="code" href="class_stream_info.html#a5f60cee21e71f36ba5126026cb3401f6">opened_as_handle</a> = 1;</div>
<div class="line"><a name="l02582"></a><span class="lineno"> 2582</span>&#160;}</div>
<div class="line"><a name="l02583"></a><span class="lineno"> 2583</span>&#160; </div>
<div class="line"><a name="l02584"></a><span class="lineno"> 2584</span>&#160;<span class="comment">/********************************************************************************************/</span></div>
<div class="line"><a name="l02585"></a><span class="lineno"> 2585</span>&#160;<span class="comment">/* handle_set                                                                               */</span></div>
<div class="line"><a name="l02586"></a><span class="lineno"> 2586</span>&#160;<span class="comment">/*           sets the handle into the stream info block                                     */</span></div>
<div class="line"><a name="l02587"></a><span class="lineno"> 2587</span>&#160;<span class="comment">/********************************************************************************************/</span></div>
<div class="line"><a name="l02588"></a><span class="lineno"><a class="line" href="_stream_native_8cpp.html#aaff2f87eeffb043455796cbfd45a082f"> 2588</a></span>&#160;<a class="code" href="_stream_native_8cpp.html#a0132244173a5fe2980fd36a20185bc10">RexxMethod2</a>(<span class="keywordtype">int</span>, handle_set, <a class="code" href="oorexxapi_8h.html#a3b5f38e088a2ba7f412c33f6d97f852a">CSELF</a>, streamPtr, <span class="keywordtype">int</span>, fh)</div>
<div class="line"><a name="l02589"></a><span class="lineno"> 2589</span>&#160;{</div>
<div class="line"><a name="l02590"></a><span class="lineno"> 2590</span>&#160;    <span class="keywordflow">try</span></div>
<div class="line"><a name="l02591"></a><span class="lineno"> 2591</span>&#160;    {</div>
<div class="line"><a name="l02592"></a><span class="lineno"> 2592</span>&#160;        <a class="code" href="class_stream_info.html">StreamInfo</a> *stream_info = <a class="code" href="_stream_native_8cpp.html#a1fbef9d1aba5e27b6754dda2d30239fa">checkStreamInfo</a>(context, streamPtr, context-&gt;NullString());</div>
<div class="line"><a name="l02593"></a><span class="lineno"> 2593</span>&#160;        stream_info-&gt;<a class="code" href="class_stream_info.html#a0c405fcdafaa228868428ef4da200fe4">setHandle</a>(fh);</div>
<div class="line"><a name="l02594"></a><span class="lineno"> 2594</span>&#160;    }</div>
<div class="line"><a name="l02595"></a><span class="lineno"> 2595</span>&#160;    <span class="comment">// this is thrown for any exceptions</span></div>
<div class="line"><a name="l02596"></a><span class="lineno"> 2596</span>&#160;    <span class="keywordflow">catch</span> (<span class="keywordtype">int</span>)</div>
<div class="line"><a name="l02597"></a><span class="lineno"> 2597</span>&#160;    {</div>
<div class="line"><a name="l02598"></a><span class="lineno"> 2598</span>&#160;    }</div>
<div class="line"><a name="l02599"></a><span class="lineno"> 2599</span>&#160;    <span class="keywordflow">catch</span> (<a class="code" href="class_stream_info.html">StreamInfo</a> *)</div>
<div class="line"><a name="l02600"></a><span class="lineno"> 2600</span>&#160;    {</div>
<div class="line"><a name="l02601"></a><span class="lineno"> 2601</span>&#160;    }</div>
<div class="line"><a name="l02602"></a><span class="lineno"> 2602</span>&#160;    <span class="keywordflow">return</span> 0;     <span class="comment">// return 0 for all exceptions...the result value has already been set.</span></div>
<div class="line"><a name="l02603"></a><span class="lineno"> 2603</span>&#160;}</div>
<div class="line"><a name="l02604"></a><span class="lineno"> 2604</span>&#160; </div>
<div class="line"><a name="l02605"></a><span class="lineno"> 2605</span>&#160;<span class="comment">/********************************************************************************************/</span></div>
<div class="line"><a name="l02606"></a><span class="lineno"> 2606</span>&#160;<span class="comment">/* std_set                                                                                  */</span></div>
<div class="line"><a name="l02607"></a><span class="lineno"> 2607</span>&#160;<span class="comment">/*           tags this as a standard I/O stream                                             */</span></div>
<div class="line"><a name="l02608"></a><span class="lineno"> 2608</span>&#160;<span class="comment">/********************************************************************************************/</span></div>
<div class="line"><a name="l02609"></a><span class="lineno"><a class="line" href="_stream_native_8cpp.html#ad447e9df9a8b327a0e2691dc29d89955"> 2609</a></span>&#160;<a class="code" href="_stream_native_8cpp.html#ac0de8e5ebdd5918f23e35b899691fbbe">RexxMethod1</a>(<span class="keywordtype">int</span>, std_set, <a class="code" href="oorexxapi_8h.html#a3b5f38e088a2ba7f412c33f6d97f852a">CSELF</a>, streamPtr)</div>
<div class="line"><a name="l02610"></a><span class="lineno"> 2610</span>&#160;{</div>
<div class="line"><a name="l02611"></a><span class="lineno"> 2611</span>&#160;    <a class="code" href="class_stream_info.html">StreamInfo</a> *stream_info = (<a class="code" href="class_stream_info.html">StreamInfo</a> *)streamPtr;</div>
<div class="line"><a name="l02612"></a><span class="lineno"> 2612</span>&#160;    stream_info-&gt;<a class="code" href="class_stream_info.html#ac5e597768cf60cb9edd62a100b486725">setStandard</a>();</div>
<div class="line"><a name="l02613"></a><span class="lineno"> 2613</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l02614"></a><span class="lineno"> 2614</span>&#160;}</div>
<div class="line"><a name="l02615"></a><span class="lineno"> 2615</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l02616"></a><span class="lineno"> 2616</span>&#160;<span class="comment">/**</span></div>
<div class="line"><a name="l02617"></a><span class="lineno"> 2617</span>&#160;<span class="comment"> * Set the stream position as determined by the options.</span></div>
<div class="line"><a name="l02618"></a><span class="lineno"> 2618</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l02619"></a><span class="lineno"> 2619</span>&#160;<span class="comment"> * @param options The stream command string for positioning.</span></div>
<div class="line"><a name="l02620"></a><span class="lineno"> 2620</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l02621"></a><span class="lineno"> 2621</span>&#160;<span class="comment"> * @return The updated position.</span></div>
<div class="line"><a name="l02622"></a><span class="lineno"> 2622</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l02623"></a><span class="lineno"><a class="line" href="class_stream_info.html#ade04415ccf0f974da911ad43458d115e"> 2623</a></span>&#160;<a class="code" href="windows_2rexxapitypes_8h.html#a414156feea104f8f75b4ed9e3121b2f6">int64_t</a> <a class="code" href="class_stream_info.html#ade04415ccf0f974da911ad43458d115e">StreamInfo::streamPosition</a>(<span class="keyword">const</span> <span class="keywordtype">char</span> *options)</div>
<div class="line"><a name="l02624"></a><span class="lineno"> 2624</span>&#160;{</div>
<div class="line"><a name="l02625"></a><span class="lineno"> 2625</span>&#160;    <span class="keywordtype">int</span> style = SEEK_SET;    <span class="comment">// default style is forward.</span></div>
<div class="line"><a name="l02626"></a><span class="lineno"> 2626</span>&#160;    <span class="keywordtype">bool</span> styleSet = <span class="keyword">false</span>;</div>
<div class="line"><a name="l02627"></a><span class="lineno"> 2627</span>&#160;    <span class="keywordtype">bool</span> seekBack = <span class="keyword">false</span>;</div>
<div class="line"><a name="l02628"></a><span class="lineno"> 2628</span>&#160;    <span class="keywordtype">int</span> position_flags = 0;</div>
<div class="line"><a name="l02629"></a><span class="lineno"> 2629</span>&#160; </div>
<div class="line"><a name="l02630"></a><span class="lineno"> 2630</span>&#160;    <a class="code" href="windows_2rexxapitypes_8h.html#a414156feea104f8f75b4ed9e3121b2f6">int64_t</a> offset = -1;</div>
<div class="line"><a name="l02631"></a><span class="lineno"> 2631</span>&#160; </div>
<div class="line"><a name="l02632"></a><span class="lineno"> 2632</span>&#160;    <span class="keywordflow">if</span> (options != NULL)</div>
<div class="line"><a name="l02633"></a><span class="lineno"> 2633</span>&#160;    {             <span class="comment">/* have parameters?                  */</span></div>
<div class="line"><a name="l02634"></a><span class="lineno"> 2634</span>&#160;    <span class="comment">/* Action table for position parameters */</span></div>
<div class="line"><a name="l02635"></a><span class="lineno"> 2635</span>&#160;        <a class="code" href="class_parse_action.html">ParseAction</a>  Direction_From_Start[] = {</div>
<div class="line"><a name="l02636"></a><span class="lineno"> 2636</span>&#160;            <a class="code" href="class_parse_action.html">ParseAction</a>(<a class="code" href="_stream_command_parser_8h.html#a21d5e8f8cdaa838586b31007df0a950ba1c73bf66bffc3067439c90f010b7b2d4">MEB</a>, styleSet),         <span class="comment">// anything set is bad</span></div>
<div class="line"><a name="l02637"></a><span class="lineno"> 2637</span>&#160;            <a class="code" href="class_parse_action.html">ParseAction</a>(<a class="code" href="_stream_command_parser_8h.html#a21d5e8f8cdaa838586b31007df0a950ba8b21e950b760f9939243c67524486aec">SetItem</a>, style, SEEK_SET),</div>
<div class="line"><a name="l02638"></a><span class="lineno"> 2638</span>&#160;            <a class="code" href="class_parse_action.html">ParseAction</a>(<a class="code" href="_stream_command_parser_8h.html#a21d5e8f8cdaa838586b31007df0a950ba89e3d82509617a35b919da37b9cf2d7b">SetBool</a>, styleSet, <span class="keyword">true</span>),</div>
<div class="line"><a name="l02639"></a><span class="lineno"> 2639</span>&#160;            <a class="code" href="class_parse_action.html">ParseAction</a>()</div>
<div class="line"><a name="l02640"></a><span class="lineno"> 2640</span>&#160;        };</div>
<div class="line"><a name="l02641"></a><span class="lineno"> 2641</span>&#160;        <a class="code" href="class_parse_action.html">ParseAction</a> Direction_From_End[] = {</div>
<div class="line"><a name="l02642"></a><span class="lineno"> 2642</span>&#160;            <a class="code" href="class_parse_action.html">ParseAction</a>(<a class="code" href="_stream_command_parser_8h.html#a21d5e8f8cdaa838586b31007df0a950ba1c73bf66bffc3067439c90f010b7b2d4">MEB</a>, styleSet),         <span class="comment">// anything set is bad</span></div>
<div class="line"><a name="l02643"></a><span class="lineno"> 2643</span>&#160;            <a class="code" href="class_parse_action.html">ParseAction</a>(<a class="code" href="_stream_command_parser_8h.html#a21d5e8f8cdaa838586b31007df0a950ba8b21e950b760f9939243c67524486aec">SetItem</a>, style, SEEK_END),</div>
<div class="line"><a name="l02644"></a><span class="lineno"> 2644</span>&#160;            <a class="code" href="class_parse_action.html">ParseAction</a>(<a class="code" href="_stream_command_parser_8h.html#a21d5e8f8cdaa838586b31007df0a950ba89e3d82509617a35b919da37b9cf2d7b">SetBool</a>, styleSet, <span class="keyword">true</span>),</div>
<div class="line"><a name="l02645"></a><span class="lineno"> 2645</span>&#160;            <a class="code" href="class_parse_action.html">ParseAction</a>()</div>
<div class="line"><a name="l02646"></a><span class="lineno"> 2646</span>&#160;        };</div>
<div class="line"><a name="l02647"></a><span class="lineno"> 2647</span>&#160;        <a class="code" href="class_parse_action.html">ParseAction</a> Direction_Forward[] = {</div>
<div class="line"><a name="l02648"></a><span class="lineno"> 2648</span>&#160;            <a class="code" href="class_parse_action.html">ParseAction</a>(<a class="code" href="_stream_command_parser_8h.html#a21d5e8f8cdaa838586b31007df0a950ba1c73bf66bffc3067439c90f010b7b2d4">MEB</a>, styleSet),         <span class="comment">// anything set is bad</span></div>
<div class="line"><a name="l02649"></a><span class="lineno"> 2649</span>&#160;            <a class="code" href="class_parse_action.html">ParseAction</a>(<a class="code" href="_stream_command_parser_8h.html#a21d5e8f8cdaa838586b31007df0a950ba8b21e950b760f9939243c67524486aec">SetItem</a>, style, SEEK_CUR),</div>
<div class="line"><a name="l02650"></a><span class="lineno"> 2650</span>&#160;            <a class="code" href="class_parse_action.html">ParseAction</a>(<a class="code" href="_stream_command_parser_8h.html#a21d5e8f8cdaa838586b31007df0a950ba89e3d82509617a35b919da37b9cf2d7b">SetBool</a>, styleSet, <span class="keyword">true</span>),</div>
<div class="line"><a name="l02651"></a><span class="lineno"> 2651</span>&#160;            <a class="code" href="class_parse_action.html">ParseAction</a>()</div>
<div class="line"><a name="l02652"></a><span class="lineno"> 2652</span>&#160;        };</div>
<div class="line"><a name="l02653"></a><span class="lineno"> 2653</span>&#160;        <a class="code" href="class_parse_action.html">ParseAction</a> Direction_Backward[] = {</div>
<div class="line"><a name="l02654"></a><span class="lineno"> 2654</span>&#160;            <a class="code" href="class_parse_action.html">ParseAction</a>(<a class="code" href="_stream_command_parser_8h.html#a21d5e8f8cdaa838586b31007df0a950ba1c73bf66bffc3067439c90f010b7b2d4">MEB</a>, styleSet),         <span class="comment">// anything set is bad</span></div>
<div class="line"><a name="l02655"></a><span class="lineno"> 2655</span>&#160;            <a class="code" href="class_parse_action.html">ParseAction</a>(<a class="code" href="_stream_command_parser_8h.html#a21d5e8f8cdaa838586b31007df0a950ba8b21e950b760f9939243c67524486aec">SetItem</a>, style, SEEK_CUR),</div>
<div class="line"><a name="l02656"></a><span class="lineno"> 2656</span>&#160;            <a class="code" href="class_parse_action.html">ParseAction</a>(<a class="code" href="_stream_command_parser_8h.html#a21d5e8f8cdaa838586b31007df0a950ba89e3d82509617a35b919da37b9cf2d7b">SetBool</a>, seekBack, <span class="keyword">true</span>),</div>
<div class="line"><a name="l02657"></a><span class="lineno"> 2657</span>&#160;            <a class="code" href="class_parse_action.html">ParseAction</a>(<a class="code" href="_stream_command_parser_8h.html#a21d5e8f8cdaa838586b31007df0a950ba89e3d82509617a35b919da37b9cf2d7b">SetBool</a>, styleSet, <span class="keyword">true</span>),</div>
<div class="line"><a name="l02658"></a><span class="lineno"> 2658</span>&#160;            <a class="code" href="class_parse_action.html">ParseAction</a>()</div>
<div class="line"><a name="l02659"></a><span class="lineno"> 2659</span>&#160;        };</div>
<div class="line"><a name="l02660"></a><span class="lineno"> 2660</span>&#160;        <a class="code" href="class_parse_action.html">ParseAction</a> Operation_Read[] = {</div>
<div class="line"><a name="l02661"></a><span class="lineno"> 2661</span>&#160;            <a class="code" href="class_parse_action.html">ParseAction</a>(<a class="code" href="_stream_command_parser_8h.html#a21d5e8f8cdaa838586b31007df0a950baf88e46564f67a88a18b9ba3af5792b02">ME</a>, position_flags, <a class="code" href="_stream_native_8cpp.html#ad4b70af3448dc43aedf984ad0d5aa710">operation_write</a>),</div>
<div class="line"><a name="l02662"></a><span class="lineno"> 2662</span>&#160;            <a class="code" href="class_parse_action.html">ParseAction</a>(<a class="code" href="_stream_command_parser_8h.html#a21d5e8f8cdaa838586b31007df0a950ba9cc5f732de9ad61d2fbdc269ad8fd229">BitOr</a>, position_flags, <a class="code" href="_stream_native_8cpp.html#ad7a9284bf8ea3b3039239acacb288e76">operation_read</a>),</div>
<div class="line"><a name="l02663"></a><span class="lineno"> 2663</span>&#160;            <a class="code" href="class_parse_action.html">ParseAction</a>()</div>
<div class="line"><a name="l02664"></a><span class="lineno"> 2664</span>&#160;        };</div>
<div class="line"><a name="l02665"></a><span class="lineno"> 2665</span>&#160;        <a class="code" href="class_parse_action.html">ParseAction</a> Operation_Write[] = {</div>
<div class="line"><a name="l02666"></a><span class="lineno"> 2666</span>&#160;            <a class="code" href="class_parse_action.html">ParseAction</a>(<a class="code" href="_stream_command_parser_8h.html#a21d5e8f8cdaa838586b31007df0a950baf88e46564f67a88a18b9ba3af5792b02">ME</a>, position_flags, <a class="code" href="_stream_native_8cpp.html#ad7a9284bf8ea3b3039239acacb288e76">operation_read</a>),</div>
<div class="line"><a name="l02667"></a><span class="lineno"> 2667</span>&#160;            <a class="code" href="class_parse_action.html">ParseAction</a>(<a class="code" href="_stream_command_parser_8h.html#a21d5e8f8cdaa838586b31007df0a950ba9cc5f732de9ad61d2fbdc269ad8fd229">BitOr</a>, position_flags, <a class="code" href="_stream_native_8cpp.html#ad4b70af3448dc43aedf984ad0d5aa710">operation_write</a>),</div>
<div class="line"><a name="l02668"></a><span class="lineno"> 2668</span>&#160;            <a class="code" href="class_parse_action.html">ParseAction</a>()</div>
<div class="line"><a name="l02669"></a><span class="lineno"> 2669</span>&#160;        };</div>
<div class="line"><a name="l02670"></a><span class="lineno"> 2670</span>&#160;        <a class="code" href="class_parse_action.html">ParseAction</a> Position_By_Char[] = {</div>
<div class="line"><a name="l02671"></a><span class="lineno"> 2671</span>&#160;            <a class="code" href="class_parse_action.html">ParseAction</a>(<a class="code" href="_stream_command_parser_8h.html#a21d5e8f8cdaa838586b31007df0a950baf88e46564f67a88a18b9ba3af5792b02">ME</a>, position_flags, <a class="code" href="_stream_native_8cpp.html#a0162d2a1a09558f0c938101981f1ef53">position_by_line</a>),</div>
<div class="line"><a name="l02672"></a><span class="lineno"> 2672</span>&#160;            <a class="code" href="class_parse_action.html">ParseAction</a>(<a class="code" href="_stream_command_parser_8h.html#a21d5e8f8cdaa838586b31007df0a950ba9cc5f732de9ad61d2fbdc269ad8fd229">BitOr</a>, position_flags, <a class="code" href="_stream_native_8cpp.html#a86e848bc27e31e94c9260216866344b3">position_by_char</a>),</div>
<div class="line"><a name="l02673"></a><span class="lineno"> 2673</span>&#160;            <a class="code" href="class_parse_action.html">ParseAction</a>()</div>
<div class="line"><a name="l02674"></a><span class="lineno"> 2674</span>&#160;        };</div>
<div class="line"><a name="l02675"></a><span class="lineno"> 2675</span>&#160;        <a class="code" href="class_parse_action.html">ParseAction</a> Position_By_Line[] = {</div>
<div class="line"><a name="l02676"></a><span class="lineno"> 2676</span>&#160;            <a class="code" href="class_parse_action.html">ParseAction</a>(<a class="code" href="_stream_command_parser_8h.html#a21d5e8f8cdaa838586b31007df0a950baf88e46564f67a88a18b9ba3af5792b02">ME</a>, position_flags, <a class="code" href="_stream_native_8cpp.html#a86e848bc27e31e94c9260216866344b3">position_by_char</a>),</div>
<div class="line"><a name="l02677"></a><span class="lineno"> 2677</span>&#160;            <a class="code" href="class_parse_action.html">ParseAction</a>(<a class="code" href="_stream_command_parser_8h.html#a21d5e8f8cdaa838586b31007df0a950ba9cc5f732de9ad61d2fbdc269ad8fd229">BitOr</a>, position_flags, <a class="code" href="_stream_native_8cpp.html#a0162d2a1a09558f0c938101981f1ef53">position_by_line</a>),</div>
<div class="line"><a name="l02678"></a><span class="lineno"> 2678</span>&#160;            <a class="code" href="class_parse_action.html">ParseAction</a>()</div>
<div class="line"><a name="l02679"></a><span class="lineno"> 2679</span>&#160;        };</div>
<div class="line"><a name="l02680"></a><span class="lineno"> 2680</span>&#160; </div>
<div class="line"><a name="l02681"></a><span class="lineno"> 2681</span>&#160;    <span class="comment">/* Token table for position parameters */</span></div>
<div class="line"><a name="l02682"></a><span class="lineno"> 2682</span>&#160;        <a class="code" href="class_token_definition.html">TokenDefinition</a>  tts[] = {</div>
<div class="line"><a name="l02683"></a><span class="lineno"> 2683</span>&#160;            <a class="code" href="class_token_definition.html">TokenDefinition</a>(<span class="stringliteral">&quot;=&quot;</span>,1,     Direction_From_Start),</div>
<div class="line"><a name="l02684"></a><span class="lineno"> 2684</span>&#160;            <a class="code" href="class_token_definition.html">TokenDefinition</a>(<span class="stringliteral">&quot;&lt;&quot;</span>,1,     Direction_From_End),</div>
<div class="line"><a name="l02685"></a><span class="lineno"> 2685</span>&#160;            <a class="code" href="class_token_definition.html">TokenDefinition</a>(<span class="stringliteral">&quot;+&quot;</span>,1,     Direction_Forward),</div>
<div class="line"><a name="l02686"></a><span class="lineno"> 2686</span>&#160;            <a class="code" href="class_token_definition.html">TokenDefinition</a>(<span class="stringliteral">&quot;-&quot;</span>,1,     Direction_Backward),</div>
<div class="line"><a name="l02687"></a><span class="lineno"> 2687</span>&#160;            <a class="code" href="class_token_definition.html">TokenDefinition</a>(<span class="stringliteral">&quot;READ&quot;</span>,1,  Operation_Read),</div>
<div class="line"><a name="l02688"></a><span class="lineno"> 2688</span>&#160;            <a class="code" href="class_token_definition.html">TokenDefinition</a>(<span class="stringliteral">&quot;WRITE&quot;</span>,1, Operation_Write),</div>
<div class="line"><a name="l02689"></a><span class="lineno"> 2689</span>&#160;            <a class="code" href="class_token_definition.html">TokenDefinition</a>(<span class="stringliteral">&quot;CHAR&quot;</span>,1,  Position_By_Char),</div>
<div class="line"><a name="l02690"></a><span class="lineno"> 2690</span>&#160;            <a class="code" href="class_token_definition.html">TokenDefinition</a>(<span class="stringliteral">&quot;LINE&quot;</span>,1,  Position_By_Line),</div>
<div class="line"><a name="l02691"></a><span class="lineno"> 2691</span>&#160;            <a class="code" href="class_token_definition.html">TokenDefinition</a>(<a class="code" href="_stream_native_8cpp.html#a3d3bd9f9797502eb5498fefc51a758b9">position_offset</a>)</div>
<div class="line"><a name="l02692"></a><span class="lineno"> 2692</span>&#160;        };</div>
<div class="line"><a name="l02693"></a><span class="lineno"> 2693</span>&#160; </div>
<div class="line"><a name="l02694"></a><span class="lineno"> 2694</span>&#160;                  <span class="comment">/* call the parser to fix up         */</span></div>
<div class="line"><a name="l02695"></a><span class="lineno"> 2695</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="_stream_command_parser_8h.html#ae192d5327e15853dda973ca14ebb72e3">parser</a>(tts, options, (<span class="keywordtype">void</span> *)(&amp;offset)) != 0)</div>
<div class="line"><a name="l02696"></a><span class="lineno"> 2696</span>&#160;        {</div>
<div class="line"><a name="l02697"></a><span class="lineno"> 2697</span>&#160;            <a class="code" href="class_stream_info.html#abf80be8acced099814a34b375353c2e3">raiseException</a>(<a class="code" href="oorexxerrors_8h.html#a43f122d08b1e4bd67b6f301029f72599">Rexx_Error_Incorrect_method</a>);</div>
<div class="line"><a name="l02698"></a><span class="lineno"> 2698</span>&#160;        }</div>
<div class="line"><a name="l02699"></a><span class="lineno"> 2699</span>&#160;    }</div>
<div class="line"><a name="l02700"></a><span class="lineno"> 2700</span>&#160; </div>
<div class="line"><a name="l02701"></a><span class="lineno"> 2701</span>&#160;    <span class="comment">// trying to move a transient stream?</span></div>
<div class="line"><a name="l02702"></a><span class="lineno"> 2702</span>&#160;    <span class="keywordflow">if</span> (<span class="keyword">transient</span>)</div>
<div class="line"><a name="l02703"></a><span class="lineno"> 2703</span>&#160;    {</div>
<div class="line"><a name="l02704"></a><span class="lineno"> 2704</span>&#160;        <span class="comment">/* this is an error                  */</span></div>
<div class="line"><a name="l02705"></a><span class="lineno"> 2705</span>&#160;        <a class="code" href="class_stream_info.html#abf80be8acced099814a34b375353c2e3">raiseException</a>(<a class="code" href="oorexxerrors_8h.html#aba194bb31fb4e07a463542cdeff0d373">Rexx_Error_Incorrect_method_stream_type</a>);</div>
<div class="line"><a name="l02706"></a><span class="lineno"> 2706</span>&#160;    }</div>
<div class="line"><a name="l02707"></a><span class="lineno"> 2707</span>&#160; </div>
<div class="line"><a name="l02708"></a><span class="lineno"> 2708</span>&#160;    <span class="comment">/* position offset must be specified */</span></div>
<div class="line"><a name="l02709"></a><span class="lineno"> 2709</span>&#160;    <span class="keywordflow">if</span> (offset == -1)</div>
<div class="line"><a name="l02710"></a><span class="lineno"> 2710</span>&#160;    {</div>
<div class="line"><a name="l02711"></a><span class="lineno"> 2711</span>&#160;        <a class="code" href="class_stream_info.html#abf80be8acced099814a34b375353c2e3">raiseException</a>(<a class="code" href="oorexxerrors_8h.html#a2c7c3fa4d6a576b5cf85176ea712cbfb">Rexx_Error_Incorrect_method_noarg</a>, <a class="code" href="class_stream_info.html#a6a5404d4b7ece722baef78b65cab52d2">context</a>-&gt;String(<a class="code" href="_stream_native_8cpp.html#ad9c140fb679fc05ead46bb922e5d0873">CHAR_positional</a>), <a class="code" href="class_stream_info.html#a6a5404d4b7ece722baef78b65cab52d2">context</a>-&gt;NewStringFromAsciiz(<span class="stringliteral">&quot;SEEK&quot;</span>), <a class="code" href="class_stream_info.html#a6a5404d4b7ece722baef78b65cab52d2">context</a>-&gt;NewStringFromAsciiz(<span class="stringliteral">&quot;offset&quot;</span>));</div>
<div class="line"><a name="l02712"></a><span class="lineno"> 2712</span>&#160;    }</div>
<div class="line"><a name="l02713"></a><span class="lineno"> 2713</span>&#160;    <span class="comment">// clear any error state...the positioning operation might clear other</span></div>
<div class="line"><a name="l02714"></a><span class="lineno"> 2714</span>&#160;    <span class="comment">// status, such as EOF conditions</span></div>
<div class="line"><a name="l02715"></a><span class="lineno"> 2715</span>&#160;    <a class="code" href="class_stream_info.html#ab0c6d380b9704b6e305f881fc9fa1571">state</a> = <a class="code" href="class_stream_info.html#af8efe21cc9cb6d8da73907c4b6f573f7a4f89da370429a424003f1dc56d72526e">StreamReady</a>;</div>
<div class="line"><a name="l02716"></a><span class="lineno"> 2716</span>&#160;    <span class="comment">/* if read or write was not specified*/</span></div>
<div class="line"><a name="l02717"></a><span class="lineno"> 2717</span>&#160;    <span class="comment">/* check the open flags for read and */</span></div>
<div class="line"><a name="l02718"></a><span class="lineno"> 2718</span>&#160;    <span class="comment">/* set read. check for write and set */</span></div>
<div class="line"><a name="l02719"></a><span class="lineno"> 2719</span>&#160;    <span class="comment">/* write. if open both then set both */</span></div>
<div class="line"><a name="l02720"></a><span class="lineno"> 2720</span>&#160;    <span class="comment">/* flags                             */</span></div>
<div class="line"><a name="l02721"></a><span class="lineno"> 2721</span>&#160;    <span class="keywordflow">if</span> (!(position_flags &amp; <a class="code" href="_stream_native_8cpp.html#ad7a9284bf8ea3b3039239acacb288e76">operation_read</a>) &amp;&amp; !(position_flags &amp; <a class="code" href="_stream_native_8cpp.html#ad4b70af3448dc43aedf984ad0d5aa710">operation_write</a>))</div>
<div class="line"><a name="l02722"></a><span class="lineno"> 2722</span>&#160;    {</div>
<div class="line"><a name="l02723"></a><span class="lineno"> 2723</span>&#160;        <span class="comment">// if this is a read only stream, only one thing we can read</span></div>
<div class="line"><a name="l02724"></a><span class="lineno"> 2724</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="class_stream_info.html#a7783763d6eec22176a9dfd2f537f6506">read_only</a>)</div>
<div class="line"><a name="l02725"></a><span class="lineno"> 2725</span>&#160;        {</div>
<div class="line"><a name="l02726"></a><span class="lineno"> 2726</span>&#160;            position_flags |= <a class="code" href="_stream_native_8cpp.html#ad7a9284bf8ea3b3039239acacb288e76">operation_read</a>;</div>
<div class="line"><a name="l02727"></a><span class="lineno"> 2727</span>&#160;        }</div>
<div class="line"><a name="l02728"></a><span class="lineno"> 2728</span>&#160;        <span class="comment">/* opened write only?                */</span></div>
<div class="line"><a name="l02729"></a><span class="lineno"> 2729</span>&#160;        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="class_stream_info.html#a3d4aeb7b07210713e68491c0c1370fff">write_only</a>)</div>
<div class="line"><a name="l02730"></a><span class="lineno"> 2730</span>&#160;        {</div>
<div class="line"><a name="l02731"></a><span class="lineno"> 2731</span>&#160;            position_flags |= <a class="code" href="_stream_native_8cpp.html#ad4b70af3448dc43aedf984ad0d5aa710">operation_write</a>;</div>
<div class="line"><a name="l02732"></a><span class="lineno"> 2732</span>&#160;        }</div>
<div class="line"><a name="l02733"></a><span class="lineno"> 2733</span>&#160;        <span class="keywordflow">else</span></div>
<div class="line"><a name="l02734"></a><span class="lineno"> 2734</span>&#160;        {</div>
<div class="line"><a name="l02735"></a><span class="lineno"> 2735</span>&#160;            position_flags |= <a class="code" href="_stream_native_8cpp.html#ad7a9284bf8ea3b3039239acacb288e76">operation_read</a> | <a class="code" href="_stream_native_8cpp.html#ad4b70af3448dc43aedf984ad0d5aa710">operation_write</a>;</div>
<div class="line"><a name="l02736"></a><span class="lineno"> 2736</span>&#160; </div>
<div class="line"><a name="l02737"></a><span class="lineno"> 2737</span>&#160;            <span class="comment">//TODO:  make sure the last op was recorded.</span></div>
<div class="line"><a name="l02738"></a><span class="lineno"> 2738</span>&#160;            <span class="comment">/* set both stream pointers to last active position          */</span></div>
<div class="line"><a name="l02739"></a><span class="lineno"> 2739</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="class_stream_info.html#ad07a90a21f1116a83b681e8f1e966986">last_op_was_read</a>)</div>
<div class="line"><a name="l02740"></a><span class="lineno"> 2740</span>&#160;            {</div>
<div class="line"><a name="l02741"></a><span class="lineno"> 2741</span>&#160;                <a class="code" href="class_stream_info.html#a0ae0ea0f4fcc555c87d7e9be88bea96c">charWritePosition</a> = <a class="code" href="class_stream_info.html#a7c85128d9aed9f7c648206ad364fb80c">charReadPosition</a>;</div>
<div class="line"><a name="l02742"></a><span class="lineno"> 2742</span>&#160;                <a class="code" href="class_stream_info.html#ac180477faedf3ab1f5f37376d545e916">lineWritePosition</a> = <a class="code" href="class_stream_info.html#a08f5a0d7420eceed7503fce2d5b0917b">lineReadPosition</a>;</div>
<div class="line"><a name="l02743"></a><span class="lineno"> 2743</span>&#160;            }</div>
<div class="line"><a name="l02744"></a><span class="lineno"> 2744</span>&#160;            <span class="keywordflow">else</span></div>
<div class="line"><a name="l02745"></a><span class="lineno"> 2745</span>&#160;            {</div>
<div class="line"><a name="l02746"></a><span class="lineno"> 2746</span>&#160;                <a class="code" href="class_stream_info.html#a7c85128d9aed9f7c648206ad364fb80c">charReadPosition</a> = <a class="code" href="class_stream_info.html#a0ae0ea0f4fcc555c87d7e9be88bea96c">charWritePosition</a>;</div>
<div class="line"><a name="l02747"></a><span class="lineno"> 2747</span>&#160;                <a class="code" href="class_stream_info.html#a08f5a0d7420eceed7503fce2d5b0917b">lineReadPosition</a> = <a class="code" href="class_stream_info.html#ac180477faedf3ab1f5f37376d545e916">lineWritePosition</a>;</div>
<div class="line"><a name="l02748"></a><span class="lineno"> 2748</span>&#160;            }</div>
<div class="line"><a name="l02749"></a><span class="lineno"> 2749</span>&#160;        }</div>
<div class="line"><a name="l02750"></a><span class="lineno"> 2750</span>&#160;    }</div>
<div class="line"><a name="l02751"></a><span class="lineno"> 2751</span>&#160; </div>
<div class="line"><a name="l02752"></a><span class="lineno"> 2752</span>&#160;    <span class="comment">// if not open yet, open now, but don&#39;t create this if doesn&#39;t</span></div>
<div class="line"><a name="l02753"></a><span class="lineno"> 2753</span>&#160;    <span class="comment">// already exist.</span></div>
<div class="line"><a name="l02754"></a><span class="lineno"> 2754</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="class_stream_info.html#a69bc9580bb2e54426801fe6fca59c98e">isopen</a>)</div>
<div class="line"><a name="l02755"></a><span class="lineno"> 2755</span>&#160;    {</div>
<div class="line"><a name="l02756"></a><span class="lineno"> 2756</span>&#160;        <a class="code" href="class_stream_info.html#a327c44fa31870eeee0ceffca3ea7f006">implicitOpen</a>(<a class="code" href="_stream_native_8cpp.html#a4279da1660023acc95b42250b2e613ca">operation_nocreate</a>);</div>
<div class="line"><a name="l02757"></a><span class="lineno"> 2757</span>&#160;    }</div>
<div class="line"><a name="l02758"></a><span class="lineno"> 2758</span>&#160; </div>
<div class="line"><a name="l02759"></a><span class="lineno"> 2759</span>&#160;    <span class="comment">/* if the write stream is being      */</span></div>
<div class="line"><a name="l02760"></a><span class="lineno"> 2760</span>&#160;    <span class="comment">/* repositioned                      */</span></div>
<div class="line"><a name="l02761"></a><span class="lineno"> 2761</span>&#160;    <span class="keywordflow">if</span> (position_flags &amp; <a class="code" href="_stream_native_8cpp.html#ad4b70af3448dc43aedf984ad0d5aa710">operation_write</a>)</div>
<div class="line"><a name="l02762"></a><span class="lineno"> 2762</span>&#160;    {</div>
<div class="line"><a name="l02763"></a><span class="lineno"> 2763</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="class_stream_info.html#ae5d69a23a83ae44083babca8913b9295">append</a>)    <span class="comment">/* opened append?                    */</span></div>
<div class="line"><a name="l02764"></a><span class="lineno"> 2764</span>&#160;        {</div>
<div class="line"><a name="l02765"></a><span class="lineno"> 2765</span>&#160; </div>
<div class="line"><a name="l02766"></a><span class="lineno"> 2766</span>&#160;            <a class="code" href="class_stream_info.html#a6f99538562048386f872fb1843462267">notreadyError</a>(0);             <span class="comment">// cause a notready condition</span></div>
<div class="line"><a name="l02767"></a><span class="lineno"> 2767</span>&#160;            <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l02768"></a><span class="lineno"> 2768</span>&#160;        }</div>
<div class="line"><a name="l02769"></a><span class="lineno"> 2769</span>&#160;    }</div>
<div class="line"><a name="l02770"></a><span class="lineno"> 2770</span>&#160;                                          <span class="comment">/* if moving the read position -     */</span></div>
<div class="line"><a name="l02771"></a><span class="lineno"> 2771</span>&#160;    <span class="keywordflow">if</span> (position_flags &amp; <a class="code" href="_stream_native_8cpp.html#ad7a9284bf8ea3b3039239acacb288e76">operation_read</a>)</div>
<div class="line"><a name="l02772"></a><span class="lineno"> 2772</span>&#160;    {</div>
<div class="line"><a name="l02773"></a><span class="lineno"> 2773</span>&#160;        <a class="code" href="class_stream_info.html#ac4e90641d1e2c5b6a30b512e37a7458c">stream_line_size</a> = 0;    <span class="comment">/* reset the pseudo lines            */</span></div>
<div class="line"><a name="l02774"></a><span class="lineno"> 2774</span>&#160;    }                                   <span class="comment">/* if char or line not specified -   */</span></div>
<div class="line"><a name="l02775"></a><span class="lineno"> 2775</span>&#160; </div>
<div class="line"><a name="l02776"></a><span class="lineno"> 2776</span>&#160;    <span class="comment">/* default to char                   */</span></div>
<div class="line"><a name="l02777"></a><span class="lineno"> 2777</span>&#160;    <span class="keywordflow">if</span> (!(position_flags &amp; (<a class="code" href="_stream_native_8cpp.html#a86e848bc27e31e94c9260216866344b3">position_by_char</a> | <a class="code" href="_stream_native_8cpp.html#a0162d2a1a09558f0c938101981f1ef53">position_by_line</a>)))</div>
<div class="line"><a name="l02778"></a><span class="lineno"> 2778</span>&#160;    {</div>
<div class="line"><a name="l02779"></a><span class="lineno"> 2779</span>&#160;        position_flags |= <a class="code" href="_stream_native_8cpp.html#a86e848bc27e31e94c9260216866344b3">position_by_char</a>;</div>
<div class="line"><a name="l02780"></a><span class="lineno"> 2780</span>&#160;    }</div>
<div class="line"><a name="l02781"></a><span class="lineno"> 2781</span>&#160; </div>
<div class="line"><a name="l02782"></a><span class="lineno"> 2782</span>&#160;    <span class="comment">// if this is a backward seek from the current position, we need to negate</span></div>
<div class="line"><a name="l02783"></a><span class="lineno"> 2783</span>&#160;    <span class="comment">// the offset.</span></div>
<div class="line"><a name="l02784"></a><span class="lineno"> 2784</span>&#160;    <span class="keywordflow">if</span> (seekBack)</div>
<div class="line"><a name="l02785"></a><span class="lineno"> 2785</span>&#160;    {</div>
<div class="line"><a name="l02786"></a><span class="lineno"> 2786</span>&#160;        offset = -offset;</div>
<div class="line"><a name="l02787"></a><span class="lineno"> 2787</span>&#160;    }</div>
<div class="line"><a name="l02788"></a><span class="lineno"> 2788</span>&#160; </div>
<div class="line"><a name="l02789"></a><span class="lineno"> 2789</span>&#160;    <span class="comment">// character positioning</span></div>
<div class="line"><a name="l02790"></a><span class="lineno"> 2790</span>&#160;    <span class="keywordflow">if</span> (position_flags &amp; <a class="code" href="_stream_native_8cpp.html#a86e848bc27e31e94c9260216866344b3">position_by_char</a>)</div>
<div class="line"><a name="l02791"></a><span class="lineno"> 2791</span>&#160;    {</div>
<div class="line"><a name="l02792"></a><span class="lineno"> 2792</span>&#160;        <a class="code" href="class_stream_info.html#a76bfce967cb2779165750bda09ba2402">resetLinePositions</a>();             <span class="comment">/* reset all line positioning        */</span></div>
<div class="line"><a name="l02793"></a><span class="lineno"> 2793</span>&#160;        <span class="comment">// moving the read pointer?</span></div>
<div class="line"><a name="l02794"></a><span class="lineno"> 2794</span>&#160;        <span class="keywordflow">if</span> (position_flags &amp; <a class="code" href="_stream_native_8cpp.html#ad7a9284bf8ea3b3039239acacb288e76">operation_read</a>)</div>
<div class="line"><a name="l02795"></a><span class="lineno"> 2795</span>&#160;        {</div>
<div class="line"><a name="l02796"></a><span class="lineno"> 2796</span>&#160;            <span class="comment">// make sure the file pointer is positioned appropriately.</span></div>
<div class="line"><a name="l02797"></a><span class="lineno"> 2797</span>&#160;            <a class="code" href="class_stream_info.html#acd9fe6516d390ecca12931ae2c1d7d20">setPosition</a>(offset, style, <a class="code" href="class_stream_info.html#a7c85128d9aed9f7c648206ad364fb80c">charReadPosition</a>);</div>
<div class="line"><a name="l02798"></a><span class="lineno"> 2798</span>&#160; </div>
<div class="line"><a name="l02799"></a><span class="lineno"> 2799</span>&#160;            <span class="comment">// record the one-based position, and if moving both, update the</span></div>
<div class="line"><a name="l02800"></a><span class="lineno"> 2800</span>&#160;            <span class="comment">// write position too.</span></div>
<div class="line"><a name="l02801"></a><span class="lineno"> 2801</span>&#160;            <span class="keywordflow">if</span> (position_flags &amp; <a class="code" href="_stream_native_8cpp.html#ad4b70af3448dc43aedf984ad0d5aa710">operation_write</a>)</div>
<div class="line"><a name="l02802"></a><span class="lineno"> 2802</span>&#160;            {</div>
<div class="line"><a name="l02803"></a><span class="lineno"> 2803</span>&#160;                <a class="code" href="class_stream_info.html#a0ae0ea0f4fcc555c87d7e9be88bea96c">charWritePosition</a> = <a class="code" href="class_stream_info.html#a7c85128d9aed9f7c648206ad364fb80c">charReadPosition</a>;</div>
<div class="line"><a name="l02804"></a><span class="lineno"> 2804</span>&#160;            }</div>
<div class="line"><a name="l02805"></a><span class="lineno"> 2805</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="class_stream_info.html#a7c85128d9aed9f7c648206ad364fb80c">charReadPosition</a>;</div>
<div class="line"><a name="l02806"></a><span class="lineno"> 2806</span>&#160;        }</div>
<div class="line"><a name="l02807"></a><span class="lineno"> 2807</span>&#160;        <span class="keywordflow">else</span></div>
<div class="line"><a name="l02808"></a><span class="lineno"> 2808</span>&#160;        {</div>
<div class="line"><a name="l02809"></a><span class="lineno"> 2809</span>&#160;            <span class="comment">// make sure the file pointer is positioned appropriately.</span></div>
<div class="line"><a name="l02810"></a><span class="lineno"> 2810</span>&#160;            <a class="code" href="class_stream_info.html#acd9fe6516d390ecca12931ae2c1d7d20">setPosition</a>(offset, style, <a class="code" href="class_stream_info.html#a0ae0ea0f4fcc555c87d7e9be88bea96c">charWritePosition</a>);</div>
<div class="line"><a name="l02811"></a><span class="lineno"> 2811</span>&#160; </div>
<div class="line"><a name="l02812"></a><span class="lineno"> 2812</span>&#160;            <span class="comment">// We don&#39;t need to handle the</span></div>
<div class="line"><a name="l02813"></a><span class="lineno"> 2813</span>&#160;            <span class="comment">// read position here, since the case above catches both.</span></div>
<div class="line"><a name="l02814"></a><span class="lineno"> 2814</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="class_stream_info.html#a0ae0ea0f4fcc555c87d7e9be88bea96c">charWritePosition</a>;</div>
<div class="line"><a name="l02815"></a><span class="lineno"> 2815</span>&#160;        }</div>
<div class="line"><a name="l02816"></a><span class="lineno"> 2816</span>&#160;    }</div>
<div class="line"><a name="l02817"></a><span class="lineno"> 2817</span>&#160;    <span class="keywordflow">else</span>   <span class="comment">// line positioning</span></div>
<div class="line"><a name="l02818"></a><span class="lineno"> 2818</span>&#160;    {</div>
<div class="line"><a name="l02819"></a><span class="lineno"> 2819</span>&#160;        <span class="comment">/* if positioning by line and write  */</span></div>
<div class="line"><a name="l02820"></a><span class="lineno"> 2820</span>&#160;        <span class="comment">/* only stream, raise notready       */</span></div>
<div class="line"><a name="l02821"></a><span class="lineno"> 2821</span>&#160;        <span class="comment">/* because we can&#39;t do reads         */</span></div>
<div class="line"><a name="l02822"></a><span class="lineno"> 2822</span>&#160;        <span class="keywordflow">if</span> (!(<a class="code" href="class_stream_info.html#a3a49e7bc25fb6842edc8cc2d5fa95d20">read_write</a> || <a class="code" href="class_stream_info.html#a7783763d6eec22176a9dfd2f537f6506">read_only</a>))</div>
<div class="line"><a name="l02823"></a><span class="lineno"> 2823</span>&#160;        {</div>
<div class="line"><a name="l02824"></a><span class="lineno"> 2824</span>&#160;            <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l02825"></a><span class="lineno"> 2825</span>&#160;        }</div>
<div class="line"><a name="l02826"></a><span class="lineno"> 2826</span>&#160; </div>
<div class="line"><a name="l02827"></a><span class="lineno"> 2827</span>&#160;        <span class="comment">// moving the read pointer?</span></div>
<div class="line"><a name="l02828"></a><span class="lineno"> 2828</span>&#160;        <span class="keywordflow">if</span> (position_flags &amp; <a class="code" href="_stream_native_8cpp.html#ad7a9284bf8ea3b3039239acacb288e76">operation_read</a>)</div>
<div class="line"><a name="l02829"></a><span class="lineno"> 2829</span>&#160;        {</div>
<div class="line"><a name="l02830"></a><span class="lineno"> 2830</span>&#160;            <span class="comment">// make sure the file pointer is positioned appropriately.</span></div>
<div class="line"><a name="l02831"></a><span class="lineno"> 2831</span>&#160;            <a class="code" href="class_stream_info.html#acd9fe6516d390ecca12931ae2c1d7d20">setPosition</a>(<a class="code" href="class_stream_info.html#a7c85128d9aed9f7c648206ad364fb80c">charReadPosition</a>, <a class="code" href="class_stream_info.html#a7c85128d9aed9f7c648206ad364fb80c">charReadPosition</a>);</div>
<div class="line"><a name="l02832"></a><span class="lineno"> 2832</span>&#160;            <a class="code" href="class_stream_info.html#a5ae6982f27535ba3e0c300356238b80f">seekLinePosition</a>(offset, style, <a class="code" href="class_stream_info.html#a08f5a0d7420eceed7503fce2d5b0917b">lineReadPosition</a>, <a class="code" href="class_stream_info.html#a44ecba6621790a306f4c08ee99af5e48">lineReadCharPosition</a>);</div>
<div class="line"><a name="l02833"></a><span class="lineno"> 2833</span>&#160; </div>
<div class="line"><a name="l02834"></a><span class="lineno"> 2834</span>&#160;            <span class="comment">// update the charReadPosition</span></div>
<div class="line"><a name="l02835"></a><span class="lineno"> 2835</span>&#160;            <a class="code" href="class_stream_info.html#a7c85128d9aed9f7c648206ad364fb80c">charReadPosition</a> = <a class="code" href="class_stream_info.html#a44ecba6621790a306f4c08ee99af5e48">lineReadCharPosition</a>;</div>
<div class="line"><a name="l02836"></a><span class="lineno"> 2836</span>&#160; </div>
<div class="line"><a name="l02837"></a><span class="lineno"> 2837</span>&#160;            <span class="keywordflow">if</span> (position_flags &amp; <a class="code" href="_stream_native_8cpp.html#ad4b70af3448dc43aedf984ad0d5aa710">operation_write</a>)</div>
<div class="line"><a name="l02838"></a><span class="lineno"> 2838</span>&#160;            {</div>
<div class="line"><a name="l02839"></a><span class="lineno"> 2839</span>&#160;                <a class="code" href="class_stream_info.html#a0ae0ea0f4fcc555c87d7e9be88bea96c">charWritePosition</a> = <a class="code" href="class_stream_info.html#a7c85128d9aed9f7c648206ad364fb80c">charReadPosition</a>;</div>
<div class="line"><a name="l02840"></a><span class="lineno"> 2840</span>&#160;                <a class="code" href="class_stream_info.html#a520c92ac8d0d8c97c36fccdfdacb2c68">lineWriteCharPosition</a> = <a class="code" href="class_stream_info.html#a44ecba6621790a306f4c08ee99af5e48">lineReadCharPosition</a>;</div>
<div class="line"><a name="l02841"></a><span class="lineno"> 2841</span>&#160;                <a class="code" href="class_stream_info.html#ac180477faedf3ab1f5f37376d545e916">lineWritePosition</a> = <a class="code" href="class_stream_info.html#a08f5a0d7420eceed7503fce2d5b0917b">lineReadPosition</a>;</div>
<div class="line"><a name="l02842"></a><span class="lineno"> 2842</span>&#160;            }</div>
<div class="line"><a name="l02843"></a><span class="lineno"> 2843</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="class_stream_info.html#a08f5a0d7420eceed7503fce2d5b0917b">lineReadPosition</a>;</div>
<div class="line"><a name="l02844"></a><span class="lineno"> 2844</span>&#160;        }</div>
<div class="line"><a name="l02845"></a><span class="lineno"> 2845</span>&#160;        <span class="keywordflow">else</span></div>
<div class="line"><a name="l02846"></a><span class="lineno"> 2846</span>&#160;        {</div>
<div class="line"><a name="l02847"></a><span class="lineno"> 2847</span>&#160;            <span class="comment">// make sure the file pointer is positioned appropriately.</span></div>
<div class="line"><a name="l02848"></a><span class="lineno"> 2848</span>&#160;            <a class="code" href="class_stream_info.html#acd9fe6516d390ecca12931ae2c1d7d20">setPosition</a>(<a class="code" href="class_stream_info.html#a0ae0ea0f4fcc555c87d7e9be88bea96c">charWritePosition</a>, <a class="code" href="class_stream_info.html#a0ae0ea0f4fcc555c87d7e9be88bea96c">charWritePosition</a>);</div>
<div class="line"><a name="l02849"></a><span class="lineno"> 2849</span>&#160;            <a class="code" href="class_stream_info.html#a5ae6982f27535ba3e0c300356238b80f">seekLinePosition</a>(offset, style, <a class="code" href="class_stream_info.html#ac180477faedf3ab1f5f37376d545e916">lineWritePosition</a>, <a class="code" href="class_stream_info.html#a520c92ac8d0d8c97c36fccdfdacb2c68">lineWriteCharPosition</a>);</div>
<div class="line"><a name="l02850"></a><span class="lineno"> 2850</span>&#160; </div>
<div class="line"><a name="l02851"></a><span class="lineno"> 2851</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="class_stream_info.html#ac180477faedf3ab1f5f37376d545e916">lineWritePosition</a>;</div>
<div class="line"><a name="l02852"></a><span class="lineno"> 2852</span>&#160;        }</div>
<div class="line"><a name="l02853"></a><span class="lineno"> 2853</span>&#160;    }</div>
<div class="line"><a name="l02854"></a><span class="lineno"> 2854</span>&#160;}</div>
<div class="line"><a name="l02855"></a><span class="lineno"> 2855</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l02856"></a><span class="lineno"> 2856</span>&#160;<span class="comment">/**</span></div>
<div class="line"><a name="l02857"></a><span class="lineno"> 2857</span>&#160;<span class="comment"> * Get the line size for this stream.  If we&#39;re using fixed</span></div>
<div class="line"><a name="l02858"></a><span class="lineno"> 2858</span>&#160;<span class="comment"> * length records, we can calculate this directly from the</span></div>
<div class="line"><a name="l02859"></a><span class="lineno"> 2859</span>&#160;<span class="comment"> * size.  If it is a variable-line stream, we might have</span></div>
<div class="line"><a name="l02860"></a><span class="lineno"> 2860</span>&#160;<span class="comment"> * already calculated the size and kept the information.  If</span></div>
<div class="line"><a name="l02861"></a><span class="lineno"> 2861</span>&#160;<span class="comment"> * not, we&#39;re going to have go and count every line.</span></div>
<div class="line"><a name="l02862"></a><span class="lineno"> 2862</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l02863"></a><span class="lineno"> 2863</span>&#160;<span class="comment"> * @return The number of lines in the stream.</span></div>
<div class="line"><a name="l02864"></a><span class="lineno"> 2864</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l02865"></a><span class="lineno"><a class="line" href="class_stream_info.html#af2801de94648255620db11f16d3040e2"> 2865</a></span>&#160;<a class="code" href="windows_2rexxapitypes_8h.html#a414156feea104f8f75b4ed9e3121b2f6">int64_t</a> <a class="code" href="class_stream_info.html#af2801de94648255620db11f16d3040e2">StreamInfo::getLineSize</a>()</div>
<div class="line"><a name="l02866"></a><span class="lineno"> 2866</span>&#160;{</div>
<div class="line"><a name="l02867"></a><span class="lineno"> 2867</span>&#160;    <span class="comment">//  using fixed length records?</span></div>
<div class="line"><a name="l02868"></a><span class="lineno"> 2868</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="class_stream_info.html#a4f4b3f5f598efe6f91ee45cd6aadb065">record_based</a>)</div>
<div class="line"><a name="l02869"></a><span class="lineno"> 2869</span>&#160;    {</div>
<div class="line"><a name="l02870"></a><span class="lineno"> 2870</span>&#160;        <span class="comment">// this one is fairly simple.  Just get the size, and we can calculate</span></div>
<div class="line"><a name="l02871"></a><span class="lineno"> 2871</span>&#160;        <span class="comment">// the end position from that.</span></div>
<div class="line"><a name="l02872"></a><span class="lineno"> 2872</span>&#160;        <a class="code" href="windows_2rexxapitypes_8h.html#a414156feea104f8f75b4ed9e3121b2f6">int64_t</a> currentSize = <a class="code" href="class_stream_info.html#af21ad8877a6411a69e033790ac94b299">size</a>();</div>
<div class="line"><a name="l02873"></a><span class="lineno"> 2873</span>&#160;        <a class="code" href="windows_2rexxapitypes_8h.html#a414156feea104f8f75b4ed9e3121b2f6">int64_t</a> lastLine = currentSize / <a class="code" href="class_stream_info.html#a8fee3f8892f5e912d85d5a1621cdcc8a">binaryRecordLength</a>;</div>
<div class="line"><a name="l02874"></a><span class="lineno"> 2874</span>&#160;        <span class="comment">// if the current size doesn&#39;t have an exact fit, bump the line</span></div>
<div class="line"><a name="l02875"></a><span class="lineno"> 2875</span>&#160;        <span class="comment">// count up one.</span></div>
<div class="line"><a name="l02876"></a><span class="lineno"> 2876</span>&#160;        <span class="keywordflow">if</span> ((currentSize % <a class="code" href="class_stream_info.html#a8fee3f8892f5e912d85d5a1621cdcc8a">binaryRecordLength</a>) &gt; 0)</div>
<div class="line"><a name="l02877"></a><span class="lineno"> 2877</span>&#160;        {</div>
<div class="line"><a name="l02878"></a><span class="lineno"> 2878</span>&#160;            lastLine++;</div>
<div class="line"><a name="l02879"></a><span class="lineno"> 2879</span>&#160;        }</div>
<div class="line"><a name="l02880"></a><span class="lineno"> 2880</span>&#160;        <span class="keywordflow">return</span> lastLine;</div>
<div class="line"><a name="l02881"></a><span class="lineno"> 2881</span>&#160;    }</div>
<div class="line"><a name="l02882"></a><span class="lineno"> 2882</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l02883"></a><span class="lineno"> 2883</span>&#160;    {</div>
<div class="line"><a name="l02884"></a><span class="lineno"> 2884</span>&#160;        <span class="comment">// get a count from the beginning.  If we have full information</span></div>
<div class="line"><a name="l02885"></a><span class="lineno"> 2885</span>&#160;        <span class="comment">// already, this will just return that.</span></div>
<div class="line"><a name="l02886"></a><span class="lineno"> 2886</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="class_stream_info.html#ab0ea1081e0badef5a78483510df7fca3">countStreamLines</a>(1, 1);</div>
<div class="line"><a name="l02887"></a><span class="lineno"> 2887</span>&#160;    }</div>
<div class="line"><a name="l02888"></a><span class="lineno"> 2888</span>&#160;}</div>
<div class="line"><a name="l02889"></a><span class="lineno"> 2889</span>&#160; </div>
<div class="line"><a name="l02890"></a><span class="lineno"> 2890</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l02891"></a><span class="lineno"> 2891</span>&#160;<span class="comment">/**</span></div>
<div class="line"><a name="l02892"></a><span class="lineno"> 2892</span>&#160;<span class="comment"> * Perform a seek operation by line position instead of</span></div>
<div class="line"><a name="l02893"></a><span class="lineno"> 2893</span>&#160;<span class="comment"> * character.  The seek can be relative to either the front,</span></div>
<div class="line"><a name="l02894"></a><span class="lineno"> 2894</span>&#160;<span class="comment"> * end, or current positions.</span></div>
<div class="line"><a name="l02895"></a><span class="lineno"> 2895</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l02896"></a><span class="lineno"> 2896</span>&#160;<span class="comment"> * @param offset    The offset to move.  This can be negative for SEEK_CUR.</span></div>
<div class="line"><a name="l02897"></a><span class="lineno"> 2897</span>&#160;<span class="comment"> * @param direction The position to seek from.  This can be SEEK_SET, SEEK_CUR,</span></div>
<div class="line"><a name="l02898"></a><span class="lineno"> 2898</span>&#160;<span class="comment"> *                  or SEEK_END (using the stdio.h constants directly).</span></div>
<div class="line"><a name="l02899"></a><span class="lineno"> 2899</span>&#160;<span class="comment"> * @param current_line</span></div>
<div class="line"><a name="l02900"></a><span class="lineno"> 2900</span>&#160;<span class="comment"> *                  The current line position we&#39;re seeking from.  This can</span></div>
<div class="line"><a name="l02901"></a><span class="lineno"> 2901</span>&#160;<span class="comment"> *                  be either the stream read or write position.  This value</span></div>
<div class="line"><a name="l02902"></a><span class="lineno"> 2902</span>&#160;<span class="comment"> *                  is updated on completion of the seek.</span></div>
<div class="line"><a name="l02903"></a><span class="lineno"> 2903</span>&#160;<span class="comment"> * @param current_position</span></div>
<div class="line"><a name="l02904"></a><span class="lineno"> 2904</span>&#160;<span class="comment"> *                  The current character position associated with this</span></div>
<div class="line"><a name="l02905"></a><span class="lineno"> 2905</span>&#160;<span class="comment"> *                  operation.  This is also updated with the seek.</span></div>
<div class="line"><a name="l02906"></a><span class="lineno"> 2906</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l02907"></a><span class="lineno"> 2907</span>&#160;<span class="comment"> * @return The new line position.</span></div>
<div class="line"><a name="l02908"></a><span class="lineno"> 2908</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l02909"></a><span class="lineno"><a class="line" href="class_stream_info.html#a5ae6982f27535ba3e0c300356238b80f"> 2909</a></span>&#160;<a class="code" href="windows_2rexxapitypes_8h.html#a414156feea104f8f75b4ed9e3121b2f6">int64_t</a> <a class="code" href="class_stream_info.html#a5ae6982f27535ba3e0c300356238b80f">StreamInfo::seekLinePosition</a>(<a class="code" href="windows_2rexxapitypes_8h.html#a414156feea104f8f75b4ed9e3121b2f6">int64_t</a> offset, <span class="keywordtype">int</span> direction, <a class="code" href="windows_2rexxapitypes_8h.html#a414156feea104f8f75b4ed9e3121b2f6">int64_t</a> &amp;current_line, <a class="code" href="windows_2rexxapitypes_8h.html#a414156feea104f8f75b4ed9e3121b2f6">int64_t</a> &amp;current_position)</div>
<div class="line"><a name="l02910"></a><span class="lineno"> 2910</span>&#160;{</div>
<div class="line"><a name="l02911"></a><span class="lineno"> 2911</span>&#160;    <a class="code" href="windows_2rexxapitypes_8h.html#a414156feea104f8f75b4ed9e3121b2f6">int64_t</a> newLinePosition = 0;</div>
<div class="line"><a name="l02912"></a><span class="lineno"> 2912</span>&#160; </div>
<div class="line"><a name="l02913"></a><span class="lineno"> 2913</span>&#160;    <span class="keywordflow">switch</span> (direction)</div>
<div class="line"><a name="l02914"></a><span class="lineno"> 2914</span>&#160;    {</div>
<div class="line"><a name="l02915"></a><span class="lineno"> 2915</span>&#160;        <span class="keywordflow">case</span> SEEK_END:</div>
<div class="line"><a name="l02916"></a><span class="lineno"> 2916</span>&#160;        {</div>
<div class="line"><a name="l02917"></a><span class="lineno"> 2917</span>&#160;            <span class="comment">// end is a little more complicated.  We need to find the record #</span></div>
<div class="line"><a name="l02918"></a><span class="lineno"> 2918</span>&#160;            <span class="comment">// of the end position, and go from there.</span></div>
<div class="line"><a name="l02919"></a><span class="lineno"> 2919</span>&#160;            <a class="code" href="windows_2rexxapitypes_8h.html#a414156feea104f8f75b4ed9e3121b2f6">int64_t</a> lastLine = <a class="code" href="class_stream_info.html#af2801de94648255620db11f16d3040e2">getLineSize</a>();</div>
<div class="line"><a name="l02920"></a><span class="lineno"> 2920</span>&#160;            newLinePosition = lastLine - offset;</div>
<div class="line"><a name="l02921"></a><span class="lineno"> 2921</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l02922"></a><span class="lineno"> 2922</span>&#160;        }</div>
<div class="line"><a name="l02923"></a><span class="lineno"> 2923</span>&#160; </div>
<div class="line"><a name="l02924"></a><span class="lineno"> 2924</span>&#160;        <span class="keywordflow">case</span> SEEK_SET:</div>
<div class="line"><a name="l02925"></a><span class="lineno"> 2925</span>&#160;        {</div>
<div class="line"><a name="l02926"></a><span class="lineno"> 2926</span>&#160;            <span class="comment">// set is easy, the offset is the new line position.  Handle</span></div>
<div class="line"><a name="l02927"></a><span class="lineno"> 2927</span>&#160;            <span class="comment">// everthing from there.</span></div>
<div class="line"><a name="l02928"></a><span class="lineno"> 2928</span>&#160;            newLinePosition = offset;</div>
<div class="line"><a name="l02929"></a><span class="lineno"> 2929</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l02930"></a><span class="lineno"> 2930</span>&#160;        }</div>
<div class="line"><a name="l02931"></a><span class="lineno"> 2931</span>&#160; </div>
<div class="line"><a name="l02932"></a><span class="lineno"> 2932</span>&#160;        <span class="keywordflow">case</span> SEEK_CUR:</div>
<div class="line"><a name="l02933"></a><span class="lineno"> 2933</span>&#160;        {</div>
<div class="line"><a name="l02934"></a><span class="lineno"> 2934</span>&#160;            <span class="comment">// just add the offset to the current position.</span></div>
<div class="line"><a name="l02935"></a><span class="lineno"> 2935</span>&#160;            <span class="comment">// The offset can be either positive or negative.</span></div>
<div class="line"><a name="l02936"></a><span class="lineno"> 2936</span>&#160;            newLinePosition = offset + current_line;</div>
<div class="line"><a name="l02937"></a><span class="lineno"> 2937</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l02938"></a><span class="lineno"> 2938</span>&#160;        }</div>
<div class="line"><a name="l02939"></a><span class="lineno"> 2939</span>&#160;    }</div>
<div class="line"><a name="l02940"></a><span class="lineno"> 2940</span>&#160; </div>
<div class="line"><a name="l02941"></a><span class="lineno"> 2941</span>&#160;    <span class="comment">// we can&#39;t seek past the first line.</span></div>
<div class="line"><a name="l02942"></a><span class="lineno"> 2942</span>&#160;    <span class="keywordflow">if</span> (newLinePosition &lt; 1)</div>
<div class="line"><a name="l02943"></a><span class="lineno"> 2943</span>&#160;    {</div>
<div class="line"><a name="l02944"></a><span class="lineno"> 2944</span>&#160;        newLinePosition = 1;</div>
<div class="line"><a name="l02945"></a><span class="lineno"> 2945</span>&#160;    }</div>
<div class="line"><a name="l02946"></a><span class="lineno"> 2946</span>&#160; </div>
<div class="line"><a name="l02947"></a><span class="lineno"> 2947</span>&#160;    <span class="comment">// now go directly and set this.</span></div>
<div class="line"><a name="l02948"></a><span class="lineno"> 2948</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="class_stream_info.html#ad969f8a485a8785a3afa0bfd35286aee">setLinePosition</a>(newLinePosition, current_line, current_position);</div>
<div class="line"><a name="l02949"></a><span class="lineno"> 2949</span>&#160;}</div>
<div class="line"><a name="l02950"></a><span class="lineno"> 2950</span>&#160; </div>
<div class="line"><a name="l02951"></a><span class="lineno"> 2951</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l02952"></a><span class="lineno"> 2952</span>&#160;<span class="comment">/**</span></div>
<div class="line"><a name="l02953"></a><span class="lineno"> 2953</span>&#160;<span class="comment"> * Set a line position to an explicit line number.  This takes</span></div>
<div class="line"><a name="l02954"></a><span class="lineno"> 2954</span>&#160;<span class="comment"> * into account differences between record and variable line</span></div>
<div class="line"><a name="l02955"></a><span class="lineno"> 2955</span>&#160;<span class="comment"> * streams.</span></div>
<div class="line"><a name="l02956"></a><span class="lineno"> 2956</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l02957"></a><span class="lineno"> 2957</span>&#160;<span class="comment"> * @param new_line The target new_line position.</span></div>
<div class="line"><a name="l02958"></a><span class="lineno"> 2958</span>&#160;<span class="comment"> * @param current_line</span></div>
<div class="line"><a name="l02959"></a><span class="lineno"> 2959</span>&#160;<span class="comment"> *                 The current line position we&#39;re seeking from.</span></div>
<div class="line"><a name="l02960"></a><span class="lineno"> 2960</span>&#160;<span class="comment"> * @param current_position</span></div>
<div class="line"><a name="l02961"></a><span class="lineno"> 2961</span>&#160;<span class="comment"> *                 The current character position we&#39;re seeking from.</span></div>
<div class="line"><a name="l02962"></a><span class="lineno"> 2962</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l02963"></a><span class="lineno"> 2963</span>&#160;<span class="comment"> * @return The new line position.</span></div>
<div class="line"><a name="l02964"></a><span class="lineno"> 2964</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l02965"></a><span class="lineno"><a class="line" href="class_stream_info.html#ad969f8a485a8785a3afa0bfd35286aee"> 2965</a></span>&#160;<a class="code" href="windows_2rexxapitypes_8h.html#a414156feea104f8f75b4ed9e3121b2f6">int64_t</a> <a class="code" href="class_stream_info.html#ad969f8a485a8785a3afa0bfd35286aee">StreamInfo::setLinePosition</a>(<a class="code" href="windows_2rexxapitypes_8h.html#a414156feea104f8f75b4ed9e3121b2f6">int64_t</a> new_line, <a class="code" href="windows_2rexxapitypes_8h.html#a414156feea104f8f75b4ed9e3121b2f6">int64_t</a> &amp;current_line, <a class="code" href="windows_2rexxapitypes_8h.html#a414156feea104f8f75b4ed9e3121b2f6">int64_t</a> &amp;current_position)</div>
<div class="line"><a name="l02966"></a><span class="lineno"> 2966</span>&#160;{</div>
<div class="line"><a name="l02967"></a><span class="lineno"> 2967</span>&#160;    <span class="keywordflow">if</span> (new_line &lt;= 1)</div>
<div class="line"><a name="l02968"></a><span class="lineno"> 2968</span>&#160;    {</div>
<div class="line"><a name="l02969"></a><span class="lineno"> 2969</span>&#160;        <span class="comment">/* set the position to the beginning */</span></div>
<div class="line"><a name="l02970"></a><span class="lineno"> 2970</span>&#160;        current_position = 1;</div>
<div class="line"><a name="l02971"></a><span class="lineno"> 2971</span>&#160;        current_line = 1;</div>
<div class="line"><a name="l02972"></a><span class="lineno"> 2972</span>&#160;        <span class="keywordflow">return</span> current_line;</div>
<div class="line"><a name="l02973"></a><span class="lineno"> 2973</span>&#160;    }</div>
<div class="line"><a name="l02974"></a><span class="lineno"> 2974</span>&#160; </div>
<div class="line"><a name="l02975"></a><span class="lineno"> 2975</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="class_stream_info.html#a4f4b3f5f598efe6f91ee45cd6aadb065">record_based</a>)</div>
<div class="line"><a name="l02976"></a><span class="lineno"> 2976</span>&#160;    {</div>
<div class="line"><a name="l02977"></a><span class="lineno"> 2977</span>&#160;        <span class="comment">// calculate the character position using the record length.  +1 is</span></div>
<div class="line"><a name="l02978"></a><span class="lineno"> 2978</span>&#160;        <span class="comment">// added because we&#39;re not origin zero for Rexx streams.</span></div>
<div class="line"><a name="l02979"></a><span class="lineno"> 2979</span>&#160;        current_position = <a class="code" href="class_stream_info.html#a8fee3f8892f5e912d85d5a1621cdcc8a">binaryRecordLength</a> * (new_line - 1) + 1;</div>
<div class="line"><a name="l02980"></a><span class="lineno"> 2980</span>&#160;        current_line = new_line;</div>
<div class="line"><a name="l02981"></a><span class="lineno"> 2981</span>&#160;        <span class="keywordflow">return</span> current_line;</div>
<div class="line"><a name="l02982"></a><span class="lineno"> 2982</span>&#160;    }</div>
<div class="line"><a name="l02983"></a><span class="lineno"> 2983</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l02984"></a><span class="lineno"> 2984</span>&#160;    {</div>
<div class="line"><a name="l02985"></a><span class="lineno"> 2985</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="class_stream_info.html#a9787a73d6593741e2d85f6130e22a5d5">seekToVariableLine</a>(new_line, current_line, current_position);</div>
<div class="line"><a name="l02986"></a><span class="lineno"> 2986</span>&#160;    }</div>
<div class="line"><a name="l02987"></a><span class="lineno"> 2987</span>&#160;}</div>
<div class="line"><a name="l02988"></a><span class="lineno"> 2988</span>&#160; </div>
<div class="line"><a name="l02989"></a><span class="lineno"> 2989</span>&#160; </div>
<div class="line"><a name="l02990"></a><span class="lineno"> 2990</span>&#160;<span class="comment">/********************************************************************************************/</span></div>
<div class="line"><a name="l02991"></a><span class="lineno"> 2991</span>&#160;<span class="comment">/* stream_position                                                                          */</span></div>
<div class="line"><a name="l02992"></a><span class="lineno"> 2992</span>&#160;<span class="comment">/********************************************************************************************/</span></div>
<div class="line"><a name="l02993"></a><span class="lineno"><a class="line" href="_stream_native_8cpp.html#aa64b9ded2177cd5e3f617ed29dc258d7"> 2993</a></span>&#160;<a class="code" href="_stream_native_8cpp.html#a0132244173a5fe2980fd36a20185bc10">RexxMethod2</a>(<a class="code" href="windows_2rexxapitypes_8h.html#a414156feea104f8f75b4ed9e3121b2f6">int64_t</a>, stream_position, <a class="code" href="oorexxapi_8h.html#a3b5f38e088a2ba7f412c33f6d97f852a">CSELF</a>, streamPtr, <a class="code" href="rexx_8h.html#a581e376dc8d3b9132e29014c896b9e70">CSTRING</a>, options)</div>
<div class="line"><a name="l02994"></a><span class="lineno"> 2994</span>&#160;{</div>
<div class="line"><a name="l02995"></a><span class="lineno"> 2995</span>&#160;    <span class="keywordflow">try</span></div>
<div class="line"><a name="l02996"></a><span class="lineno"> 2996</span>&#160;    {</div>
<div class="line"><a name="l02997"></a><span class="lineno"> 2997</span>&#160;        <a class="code" href="class_stream_info.html">StreamInfo</a> *stream_info = <a class="code" href="_stream_native_8cpp.html#a1fbef9d1aba5e27b6754dda2d30239fa">checkStreamInfo</a>(context, streamPtr, context-&gt;False());</div>
<div class="line"><a name="l02998"></a><span class="lineno"> 2998</span>&#160;        <span class="keywordflow">return</span> stream_info-&gt;<a class="code" href="class_stream_info.html#ade04415ccf0f974da911ad43458d115e">streamPosition</a>(options);</div>
<div class="line"><a name="l02999"></a><span class="lineno"> 2999</span>&#160;    }</div>
<div class="line"><a name="l03000"></a><span class="lineno"> 3000</span>&#160;    <span class="comment">// this is thrown for any exceptions</span></div>
<div class="line"><a name="l03001"></a><span class="lineno"> 3001</span>&#160;    <span class="keywordflow">catch</span> (<span class="keywordtype">int</span>)</div>
<div class="line"><a name="l03002"></a><span class="lineno"> 3002</span>&#160;    {</div>
<div class="line"><a name="l03003"></a><span class="lineno"> 3003</span>&#160;        <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l03004"></a><span class="lineno"> 3004</span>&#160;    }</div>
<div class="line"><a name="l03005"></a><span class="lineno"> 3005</span>&#160;    <span class="keywordflow">catch</span> (<a class="code" href="class_stream_info.html">StreamInfo</a> *)</div>
<div class="line"><a name="l03006"></a><span class="lineno"> 3006</span>&#160;    {</div>
<div class="line"><a name="l03007"></a><span class="lineno"> 3007</span>&#160;    }</div>
<div class="line"><a name="l03008"></a><span class="lineno"> 3008</span>&#160;    <span class="keywordflow">return</span> 0;     <span class="comment">// return 0 for all exceptions...the result value has already been set.</span></div>
<div class="line"><a name="l03009"></a><span class="lineno"> 3009</span>&#160;}</div>
<div class="line"><a name="l03010"></a><span class="lineno"> 3010</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l03011"></a><span class="lineno"> 3011</span>&#160;<span class="comment">/**</span></div>
<div class="line"><a name="l03012"></a><span class="lineno"> 3012</span>&#160;<span class="comment"> * Determine the count of lines from the file beginning to</span></div>
<div class="line"><a name="l03013"></a><span class="lineno"> 3013</span>&#160;<span class="comment"> * specified stream location.</span></div>
<div class="line"><a name="l03014"></a><span class="lineno"> 3014</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l03015"></a><span class="lineno"> 3015</span>&#160;<span class="comment"> * @param current_position</span></div>
<div class="line"><a name="l03016"></a><span class="lineno"> 3016</span>&#160;<span class="comment"> *               The target position we&#39;re trying to convert for a char</span></div>
<div class="line"><a name="l03017"></a><span class="lineno"> 3017</span>&#160;<span class="comment"> *               position into a line position.</span></div>
<div class="line"><a name="l03018"></a><span class="lineno"> 3018</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l03019"></a><span class="lineno"> 3019</span>&#160;<span class="comment"> * @return A count indicating which logical line current_position lies</span></div>
<div class="line"><a name="l03020"></a><span class="lineno"> 3020</span>&#160;<span class="comment"> *         within.</span></div>
<div class="line"><a name="l03021"></a><span class="lineno"> 3021</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l03022"></a><span class="lineno"><a class="line" href="class_stream_info.html#aac348ef7bdc171beca73c115218ed072"> 3022</a></span>&#160;<a class="code" href="windows_2rexxapitypes_8h.html#a414156feea104f8f75b4ed9e3121b2f6">int64_t</a> <a class="code" href="class_stream_info.html#aac348ef7bdc171beca73c115218ed072">StreamInfo::queryLinePosition</a>(<a class="code" href="windows_2rexxapitypes_8h.html#a414156feea104f8f75b4ed9e3121b2f6">int64_t</a> current_position)</div>
<div class="line"><a name="l03023"></a><span class="lineno"> 3023</span>&#160;{</div>
<div class="line"><a name="l03024"></a><span class="lineno"> 3024</span>&#160;    <span class="keywordflow">if</span> (current_position == 0)            <span class="comment">/* at the beginning?                 */</span></div>
<div class="line"><a name="l03025"></a><span class="lineno"> 3025</span>&#160;    {</div>
<div class="line"><a name="l03026"></a><span class="lineno"> 3026</span>&#160;        current_position = 1;             <span class="comment">/* this is actually the start        */</span></div>
<div class="line"><a name="l03027"></a><span class="lineno"> 3027</span>&#160;    }</div>
<div class="line"><a name="l03028"></a><span class="lineno"> 3028</span>&#160; </div>
<div class="line"><a name="l03029"></a><span class="lineno"> 3029</span>&#160;    <a class="code" href="windows_2rexxapitypes_8h.html#a414156feea104f8f75b4ed9e3121b2f6">int64_t</a> lastLine;</div>
<div class="line"><a name="l03030"></a><span class="lineno"> 3030</span>&#160;    <a class="code" href="windows_2rexxapitypes_8h.html#a414156feea104f8f75b4ed9e3121b2f6">int64_t</a> count;</div>
<div class="line"><a name="l03031"></a><span class="lineno"> 3031</span>&#160;    <span class="comment">// try to count...raise notready if unable to</span></div>
<div class="line"><a name="l03032"></a><span class="lineno"> 3032</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="class_stream_info.html#a35caea85b14b8f2b8b734c3b51eb7f4b">fileInfo</a>.<a class="code" href="class_sys_file.html#ac73da0cab42257e4f05ce625c848b144">countLines</a>(0, current_position - 1, lastLine, count))</div>
<div class="line"><a name="l03033"></a><span class="lineno"> 3033</span>&#160;    {</div>
<div class="line"><a name="l03034"></a><span class="lineno"> 3034</span>&#160;        <a class="code" href="class_stream_info.html#a6f99538562048386f872fb1843462267">notreadyError</a>();</div>
<div class="line"><a name="l03035"></a><span class="lineno"> 3035</span>&#160;    }</div>
<div class="line"><a name="l03036"></a><span class="lineno"> 3036</span>&#160;    <span class="keywordflow">return</span> count;   <span class="comment">// return the line count</span></div>
<div class="line"><a name="l03037"></a><span class="lineno"> 3037</span>&#160;}</div>
<div class="line"><a name="l03038"></a><span class="lineno"> 3038</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l03039"></a><span class="lineno"> 3039</span>&#160;<span class="comment">/**</span></div>
<div class="line"><a name="l03040"></a><span class="lineno"> 3040</span>&#160;<span class="comment"> * process a method-level stream query call.</span></div>
<div class="line"><a name="l03041"></a><span class="lineno"> 3041</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l03042"></a><span class="lineno"> 3042</span>&#160;<span class="comment"> * @param options The string options that determine the requested options.</span></div>
<div class="line"><a name="l03043"></a><span class="lineno"> 3043</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l03044"></a><span class="lineno"> 3044</span>&#160;<span class="comment"> * @return The numeric position value as either a line or char position.</span></div>
<div class="line"><a name="l03045"></a><span class="lineno"> 3045</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l03046"></a><span class="lineno"><a class="line" href="class_stream_info.html#abef89fa4829d60e7995e76319179eb47"> 3046</a></span>&#160;<a class="code" href="rexx_8h.html#a96e0cc5eda42aed364b05f3c493e07e8">RexxObjectPtr</a> <a class="code" href="class_stream_info.html#abef89fa4829d60e7995e76319179eb47">StreamInfo::queryStreamPosition</a>(<span class="keyword">const</span> <span class="keywordtype">char</span> *options)</div>
<div class="line"><a name="l03047"></a><span class="lineno"> 3047</span>&#160;{</div>
<div class="line"><a name="l03048"></a><span class="lineno"> 3048</span>&#160;    <span class="keywordtype">int</span> position_flags = 0;           <span class="comment">/* clear the parseParms.position_flags          */</span></div>
<div class="line"><a name="l03049"></a><span class="lineno"> 3049</span>&#160; </div>
<div class="line"><a name="l03050"></a><span class="lineno"> 3050</span>&#160;    <span class="comment">// if we have options, parse them into the flag values.</span></div>
<div class="line"><a name="l03051"></a><span class="lineno"> 3051</span>&#160;    <span class="keywordflow">if</span> (options != NULL)</div>
<div class="line"><a name="l03052"></a><span class="lineno"> 3052</span>&#160;    {</div>
<div class="line"><a name="l03053"></a><span class="lineno"> 3053</span>&#160;    <span class="comment">/* Action table for query position parameters */</span></div>
<div class="line"><a name="l03054"></a><span class="lineno"> 3054</span>&#160; </div>
<div class="line"><a name="l03055"></a><span class="lineno"> 3055</span>&#160;        <a class="code" href="class_parse_action.html">ParseAction</a> Query_System_Position[] = {</div>
<div class="line"><a name="l03056"></a><span class="lineno"> 3056</span>&#160;            <a class="code" href="class_parse_action.html">ParseAction</a>(<a class="code" href="_stream_command_parser_8h.html#a21d5e8f8cdaa838586b31007df0a950baf88e46564f67a88a18b9ba3af5792b02">ME</a>, position_flags, <a class="code" href="_stream_native_8cpp.html#a45f4375c6d2176610424f82043637fec">query_write_position</a>),</div>
<div class="line"><a name="l03057"></a><span class="lineno"> 3057</span>&#160;            <a class="code" href="class_parse_action.html">ParseAction</a>(<a class="code" href="_stream_command_parser_8h.html#a21d5e8f8cdaa838586b31007df0a950baf88e46564f67a88a18b9ba3af5792b02">ME</a>, position_flags, <a class="code" href="_stream_native_8cpp.html#a22f07646483ddd8a3f873f5efff082c9">query_read_position</a>),</div>
<div class="line"><a name="l03058"></a><span class="lineno"> 3058</span>&#160;            <a class="code" href="class_parse_action.html">ParseAction</a>(<a class="code" href="_stream_command_parser_8h.html#a21d5e8f8cdaa838586b31007df0a950ba9cc5f732de9ad61d2fbdc269ad8fd229">BitOr</a>, position_flags, <a class="code" href="_stream_native_8cpp.html#a637640c370dba16a8cc1e9a77d781966">query_system_position</a>),</div>
<div class="line"><a name="l03059"></a><span class="lineno"> 3059</span>&#160;            <a class="code" href="class_parse_action.html">ParseAction</a>()</div>
<div class="line"><a name="l03060"></a><span class="lineno"> 3060</span>&#160;        };</div>
<div class="line"><a name="l03061"></a><span class="lineno"> 3061</span>&#160;        <a class="code" href="class_parse_action.html">ParseAction</a> Query_Read_Position[] = {</div>
<div class="line"><a name="l03062"></a><span class="lineno"> 3062</span>&#160;            <a class="code" href="class_parse_action.html">ParseAction</a>(<a class="code" href="_stream_command_parser_8h.html#a21d5e8f8cdaa838586b31007df0a950baf88e46564f67a88a18b9ba3af5792b02">ME</a>, position_flags, <a class="code" href="_stream_native_8cpp.html#a45f4375c6d2176610424f82043637fec">query_write_position</a>),</div>
<div class="line"><a name="l03063"></a><span class="lineno"> 3063</span>&#160;            <a class="code" href="class_parse_action.html">ParseAction</a>(<a class="code" href="_stream_command_parser_8h.html#a21d5e8f8cdaa838586b31007df0a950baf88e46564f67a88a18b9ba3af5792b02">ME</a>, position_flags, <a class="code" href="_stream_native_8cpp.html#a637640c370dba16a8cc1e9a77d781966">query_system_position</a>),</div>
<div class="line"><a name="l03064"></a><span class="lineno"> 3064</span>&#160;            <a class="code" href="class_parse_action.html">ParseAction</a>(<a class="code" href="_stream_command_parser_8h.html#a21d5e8f8cdaa838586b31007df0a950ba9cc5f732de9ad61d2fbdc269ad8fd229">BitOr</a>, position_flags, <a class="code" href="_stream_native_8cpp.html#a22f07646483ddd8a3f873f5efff082c9">query_read_position</a>),</div>
<div class="line"><a name="l03065"></a><span class="lineno"> 3065</span>&#160;            <a class="code" href="class_parse_action.html">ParseAction</a>()</div>
<div class="line"><a name="l03066"></a><span class="lineno"> 3066</span>&#160;        };</div>
<div class="line"><a name="l03067"></a><span class="lineno"> 3067</span>&#160;        <a class="code" href="class_parse_action.html">ParseAction</a> Query_Write_Position[] = {</div>
<div class="line"><a name="l03068"></a><span class="lineno"> 3068</span>&#160;            <a class="code" href="class_parse_action.html">ParseAction</a>(<a class="code" href="_stream_command_parser_8h.html#a21d5e8f8cdaa838586b31007df0a950baf88e46564f67a88a18b9ba3af5792b02">ME</a>, position_flags, <a class="code" href="_stream_native_8cpp.html#a22f07646483ddd8a3f873f5efff082c9">query_read_position</a>),</div>
<div class="line"><a name="l03069"></a><span class="lineno"> 3069</span>&#160;            <a class="code" href="class_parse_action.html">ParseAction</a>(<a class="code" href="_stream_command_parser_8h.html#a21d5e8f8cdaa838586b31007df0a950baf88e46564f67a88a18b9ba3af5792b02">ME</a>, position_flags, <a class="code" href="_stream_native_8cpp.html#a637640c370dba16a8cc1e9a77d781966">query_system_position</a>),</div>
<div class="line"><a name="l03070"></a><span class="lineno"> 3070</span>&#160;            <a class="code" href="class_parse_action.html">ParseAction</a>(<a class="code" href="_stream_command_parser_8h.html#a21d5e8f8cdaa838586b31007df0a950ba9cc5f732de9ad61d2fbdc269ad8fd229">BitOr</a>, position_flags, <a class="code" href="_stream_native_8cpp.html#a45f4375c6d2176610424f82043637fec">query_write_position</a>),</div>
<div class="line"><a name="l03071"></a><span class="lineno"> 3071</span>&#160;            <a class="code" href="class_parse_action.html">ParseAction</a>()</div>
<div class="line"><a name="l03072"></a><span class="lineno"> 3072</span>&#160;        };</div>
<div class="line"><a name="l03073"></a><span class="lineno"> 3073</span>&#160;        <a class="code" href="class_parse_action.html">ParseAction</a> Query_Char_Position[] = {</div>
<div class="line"><a name="l03074"></a><span class="lineno"> 3074</span>&#160;            <a class="code" href="class_parse_action.html">ParseAction</a>(<a class="code" href="_stream_command_parser_8h.html#a21d5e8f8cdaa838586b31007df0a950baf88e46564f67a88a18b9ba3af5792b02">ME</a>, position_flags, <a class="code" href="_stream_native_8cpp.html#a3a39eb84e90cc7bd3c6f556def50ab95">query_line_position</a>),</div>
<div class="line"><a name="l03075"></a><span class="lineno"> 3075</span>&#160;            <a class="code" href="class_parse_action.html">ParseAction</a>(<a class="code" href="_stream_command_parser_8h.html#a21d5e8f8cdaa838586b31007df0a950ba9cc5f732de9ad61d2fbdc269ad8fd229">BitOr</a>, position_flags, <a class="code" href="_stream_native_8cpp.html#acab3d74e84fbb9470e5f1485847ff823">query_char_position</a>),</div>
<div class="line"><a name="l03076"></a><span class="lineno"> 3076</span>&#160;            <a class="code" href="class_parse_action.html">ParseAction</a>()</div>
<div class="line"><a name="l03077"></a><span class="lineno"> 3077</span>&#160;        };</div>
<div class="line"><a name="l03078"></a><span class="lineno"> 3078</span>&#160;        <a class="code" href="class_parse_action.html">ParseAction</a> Query_Line_Position[] = {</div>
<div class="line"><a name="l03079"></a><span class="lineno"> 3079</span>&#160;            <a class="code" href="class_parse_action.html">ParseAction</a>(<a class="code" href="_stream_command_parser_8h.html#a21d5e8f8cdaa838586b31007df0a950baf88e46564f67a88a18b9ba3af5792b02">ME</a>, position_flags, <a class="code" href="_stream_native_8cpp.html#acab3d74e84fbb9470e5f1485847ff823">query_char_position</a>),</div>
<div class="line"><a name="l03080"></a><span class="lineno"> 3080</span>&#160;            <a class="code" href="class_parse_action.html">ParseAction</a>(<a class="code" href="_stream_command_parser_8h.html#a21d5e8f8cdaa838586b31007df0a950ba9cc5f732de9ad61d2fbdc269ad8fd229">BitOr</a>, position_flags, <a class="code" href="_stream_native_8cpp.html#a3a39eb84e90cc7bd3c6f556def50ab95">query_line_position</a>),</div>
<div class="line"><a name="l03081"></a><span class="lineno"> 3081</span>&#160;            <a class="code" href="class_parse_action.html">ParseAction</a>()</div>
<div class="line"><a name="l03082"></a><span class="lineno"> 3082</span>&#160;        };</div>
<div class="line"><a name="l03083"></a><span class="lineno"> 3083</span>&#160; </div>
<div class="line"><a name="l03084"></a><span class="lineno"> 3084</span>&#160;    <span class="comment">/* Token table for open parameters */</span></div>
<div class="line"><a name="l03085"></a><span class="lineno"> 3085</span>&#160;        <a class="code" href="class_token_definition.html">TokenDefinition</a>  tts[] = {</div>
<div class="line"><a name="l03086"></a><span class="lineno"> 3086</span>&#160;            <a class="code" href="class_token_definition.html">TokenDefinition</a>(<span class="stringliteral">&quot;SYS&quot;</span>,1,   Query_System_Position),</div>
<div class="line"><a name="l03087"></a><span class="lineno"> 3087</span>&#160;            <a class="code" href="class_token_definition.html">TokenDefinition</a>(<span class="stringliteral">&quot;READ&quot;</span>,1,  Query_Read_Position),</div>
<div class="line"><a name="l03088"></a><span class="lineno"> 3088</span>&#160;            <a class="code" href="class_token_definition.html">TokenDefinition</a>(<span class="stringliteral">&quot;WRITE&quot;</span>,1, Query_Write_Position),</div>
<div class="line"><a name="l03089"></a><span class="lineno"> 3089</span>&#160;            <a class="code" href="class_token_definition.html">TokenDefinition</a>(<span class="stringliteral">&quot;CHAR&quot;</span>,1,  Query_Char_Position),</div>
<div class="line"><a name="l03090"></a><span class="lineno"> 3090</span>&#160;            <a class="code" href="class_token_definition.html">TokenDefinition</a>(<span class="stringliteral">&quot;LINE&quot;</span>,1,  Query_Line_Position),</div>
<div class="line"><a name="l03091"></a><span class="lineno"> 3091</span>&#160;            <a class="code" href="class_token_definition.html">TokenDefinition</a>(<a class="code" href="_stream_native_8cpp.html#a8e4e356b86dac886f097bf2f4431ee79">unknown_tr</a>)</div>
<div class="line"><a name="l03092"></a><span class="lineno"> 3092</span>&#160;        };</div>
<div class="line"><a name="l03093"></a><span class="lineno"> 3093</span>&#160;                  <span class="comment">/* parse the command string          */</span></div>
<div class="line"><a name="l03094"></a><span class="lineno"> 3094</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="_stream_command_parser_8h.html#ae192d5327e15853dda973ca14ebb72e3">parser</a>(tts, options, NULL) != 0)</div>
<div class="line"><a name="l03095"></a><span class="lineno"> 3095</span>&#160;        {</div>
<div class="line"><a name="l03096"></a><span class="lineno"> 3096</span>&#160;            <a class="code" href="class_stream_info.html#abf80be8acced099814a34b375353c2e3">raiseException</a>(<a class="code" href="oorexxerrors_8h.html#a43f122d08b1e4bd67b6f301029f72599">Rexx_Error_Incorrect_method</a>);</div>
<div class="line"><a name="l03097"></a><span class="lineno"> 3097</span>&#160;        }</div>
<div class="line"><a name="l03098"></a><span class="lineno"> 3098</span>&#160;    }</div>
<div class="line"><a name="l03099"></a><span class="lineno"> 3099</span>&#160; </div>
<div class="line"><a name="l03100"></a><span class="lineno"> 3100</span>&#160;    <span class="comment">// the position of an unopened stream is a null string.</span></div>
<div class="line"><a name="l03101"></a><span class="lineno"> 3101</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="class_stream_info.html#a69bc9580bb2e54426801fe6fca59c98e">isopen</a>)</div>
<div class="line"><a name="l03102"></a><span class="lineno"> 3102</span>&#160;    {</div>
<div class="line"><a name="l03103"></a><span class="lineno"> 3103</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="class_stream_info.html#a6a5404d4b7ece722baef78b65cab52d2">context</a>-&gt;NullString();</div>
<div class="line"><a name="l03104"></a><span class="lineno"> 3104</span>&#160;    }</div>
<div class="line"><a name="l03105"></a><span class="lineno"> 3105</span>&#160; </div>
<div class="line"><a name="l03106"></a><span class="lineno"> 3106</span>&#160;    <span class="comment">// transient streams alwasy return 1</span></div>
<div class="line"><a name="l03107"></a><span class="lineno"> 3107</span>&#160;    <span class="keywordflow">if</span> (<span class="keyword">transient</span>)</div>
<div class="line"><a name="l03108"></a><span class="lineno"> 3108</span>&#160;    {</div>
<div class="line"><a name="l03109"></a><span class="lineno"> 3109</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="class_stream_info.html#a6a5404d4b7ece722baef78b65cab52d2">context</a>-&gt;WholeNumberToObject(1);   <span class="comment">// always a position one</span></div>
<div class="line"><a name="l03110"></a><span class="lineno"> 3110</span>&#160;    }</div>
<div class="line"><a name="l03111"></a><span class="lineno"> 3111</span>&#160;    <span class="comment">// querying the system position?</span></div>
<div class="line"><a name="l03112"></a><span class="lineno"> 3112</span>&#160;    <span class="keywordflow">if</span> (position_flags &amp; <a class="code" href="_stream_native_8cpp.html#a637640c370dba16a8cc1e9a77d781966">query_system_position</a>)</div>
<div class="line"><a name="l03113"></a><span class="lineno"> 3113</span>&#160;    {</div>
<div class="line"><a name="l03114"></a><span class="lineno"> 3114</span>&#160;        <a class="code" href="windows_2rexxapitypes_8h.html#a414156feea104f8f75b4ed9e3121b2f6">int64_t</a> position;</div>
<div class="line"><a name="l03115"></a><span class="lineno"> 3115</span>&#160;        <span class="comment">// just get the stream position, raising not ready if it fails.</span></div>
<div class="line"><a name="l03116"></a><span class="lineno"> 3116</span>&#160;        <span class="keywordflow">if</span> (!<a class="code" href="class_stream_info.html#a35caea85b14b8f2b8b734c3b51eb7f4b">fileInfo</a>.<a class="code" href="class_sys_file.html#a8c77a233d2b05cf4d300785fc23abcc7">getPosition</a>(position))</div>
<div class="line"><a name="l03117"></a><span class="lineno"> 3117</span>&#160;        {</div>
<div class="line"><a name="l03118"></a><span class="lineno"> 3118</span>&#160;            <a class="code" href="class_stream_info.html#a6f99538562048386f872fb1843462267">notreadyError</a>();</div>
<div class="line"><a name="l03119"></a><span class="lineno"> 3119</span>&#160;        }</div>
<div class="line"><a name="l03120"></a><span class="lineno"> 3120</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="class_stream_info.html#a6a5404d4b7ece722baef78b65cab52d2">context</a>-&gt;Int64ToObject(position);</div>
<div class="line"><a name="l03121"></a><span class="lineno"> 3121</span>&#160;    }</div>
<div class="line"><a name="l03122"></a><span class="lineno"> 3122</span>&#160;    <span class="comment">// no method specified?</span></div>
<div class="line"><a name="l03123"></a><span class="lineno"> 3123</span>&#160;    <span class="keywordflow">if</span> (!(position_flags &amp; (<a class="code" href="_stream_native_8cpp.html#a22f07646483ddd8a3f873f5efff082c9">query_read_position</a> | <a class="code" href="_stream_native_8cpp.html#a45f4375c6d2176610424f82043637fec">query_write_position</a>)))</div>
<div class="line"><a name="l03124"></a><span class="lineno"> 3124</span>&#160;    {</div>
<div class="line"><a name="l03125"></a><span class="lineno"> 3125</span>&#160;        <span class="comment">// is this a write-only stream?  Return that</span></div>
<div class="line"><a name="l03126"></a><span class="lineno"> 3126</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="class_stream_info.html#a3d4aeb7b07210713e68491c0c1370fff">write_only</a>)</div>
<div class="line"><a name="l03127"></a><span class="lineno"> 3127</span>&#160;        {</div>
<div class="line"><a name="l03128"></a><span class="lineno"> 3128</span>&#160;            position_flags |= <a class="code" href="_stream_native_8cpp.html#a45f4375c6d2176610424f82043637fec">query_write_position</a>;</div>
<div class="line"><a name="l03129"></a><span class="lineno"> 3129</span>&#160;        }</div>
<div class="line"><a name="l03130"></a><span class="lineno"> 3130</span>&#160;        <span class="keywordflow">else</span>  <span class="comment">// query the read position by default</span></div>
<div class="line"><a name="l03131"></a><span class="lineno"> 3131</span>&#160;        {</div>
<div class="line"><a name="l03132"></a><span class="lineno"> 3132</span>&#160;            position_flags |= <a class="code" href="_stream_native_8cpp.html#a22f07646483ddd8a3f873f5efff082c9">query_read_position</a>;</div>
<div class="line"><a name="l03133"></a><span class="lineno"> 3133</span>&#160;        }</div>
<div class="line"><a name="l03134"></a><span class="lineno"> 3134</span>&#160;    }</div>
<div class="line"><a name="l03135"></a><span class="lineno"> 3135</span>&#160;        <span class="comment">/* asking for the write position?    */</span></div>
<div class="line"><a name="l03136"></a><span class="lineno"> 3136</span>&#160;    <span class="keywordflow">if</span> (position_flags &amp; <a class="code" href="_stream_native_8cpp.html#a45f4375c6d2176610424f82043637fec">query_write_position</a>)</div>
<div class="line"><a name="l03137"></a><span class="lineno"> 3137</span>&#160;    {</div>
<div class="line"><a name="l03138"></a><span class="lineno"> 3138</span>&#160;        <span class="comment">/* check if line or char             */</span></div>
<div class="line"><a name="l03139"></a><span class="lineno"> 3139</span>&#160;        <span class="keywordflow">if</span> (position_flags &amp; <a class="code" href="_stream_native_8cpp.html#a3a39eb84e90cc7bd3c6f556def50ab95">query_line_position</a>)</div>
<div class="line"><a name="l03140"></a><span class="lineno"> 3140</span>&#160;        {</div>
<div class="line"><a name="l03141"></a><span class="lineno"> 3141</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="class_stream_info.html#a6a5404d4b7ece722baef78b65cab52d2">context</a>-&gt;Int64ToObject(<a class="code" href="class_stream_info.html#a67cccd9fe6779258ab665f936fd7b3e0">getLineWritePosition</a>());</div>
<div class="line"><a name="l03142"></a><span class="lineno"> 3142</span>&#160;        }</div>
<div class="line"><a name="l03143"></a><span class="lineno"> 3143</span>&#160;        <span class="keywordflow">else</span></div>
<div class="line"><a name="l03144"></a><span class="lineno"> 3144</span>&#160;        {</div>
<div class="line"><a name="l03145"></a><span class="lineno"> 3145</span>&#160;            <span class="comment">// just return the character write pointer</span></div>
<div class="line"><a name="l03146"></a><span class="lineno"> 3146</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="class_stream_info.html#a6a5404d4b7ece722baef78b65cab52d2">context</a>-&gt;Int64ToObject(<a class="code" href="class_stream_info.html#a0ae0ea0f4fcc555c87d7e9be88bea96c">charWritePosition</a>);</div>
<div class="line"><a name="l03147"></a><span class="lineno"> 3147</span>&#160;        }</div>
<div class="line"><a name="l03148"></a><span class="lineno"> 3148</span>&#160;    }</div>
<div class="line"><a name="l03149"></a><span class="lineno"> 3149</span>&#160;    <span class="keywordflow">else</span>  <span class="comment">// read position</span></div>
<div class="line"><a name="l03150"></a><span class="lineno"> 3150</span>&#160;    {</div>
<div class="line"><a name="l03151"></a><span class="lineno"> 3151</span>&#160;        <span class="keywordflow">if</span> (position_flags &amp; <a class="code" href="_stream_native_8cpp.html#a3a39eb84e90cc7bd3c6f556def50ab95">query_line_position</a>)</div>
<div class="line"><a name="l03152"></a><span class="lineno"> 3152</span>&#160;        {</div>
<div class="line"><a name="l03153"></a><span class="lineno"> 3153</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="class_stream_info.html#a6a5404d4b7ece722baef78b65cab52d2">context</a>-&gt;Int64ToObject(<a class="code" href="class_stream_info.html#aa1ec4453ab911203f33828bb7b1622c3">getLineReadPosition</a>());</div>
<div class="line"><a name="l03154"></a><span class="lineno"> 3154</span>&#160;        }</div>
<div class="line"><a name="l03155"></a><span class="lineno"> 3155</span>&#160;        <span class="keywordflow">else</span></div>
<div class="line"><a name="l03156"></a><span class="lineno"> 3156</span>&#160;        {</div>
<div class="line"><a name="l03157"></a><span class="lineno"> 3157</span>&#160;            <span class="comment">// just return the character write pointer</span></div>
<div class="line"><a name="l03158"></a><span class="lineno"> 3158</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="class_stream_info.html#a6a5404d4b7ece722baef78b65cab52d2">context</a>-&gt;Int64ToObject(<a class="code" href="class_stream_info.html#a7c85128d9aed9f7c648206ad364fb80c">charReadPosition</a>);</div>
<div class="line"><a name="l03159"></a><span class="lineno"> 3159</span>&#160;        }</div>
<div class="line"><a name="l03160"></a><span class="lineno"> 3160</span>&#160;    }</div>
<div class="line"><a name="l03161"></a><span class="lineno"> 3161</span>&#160;}</div>
<div class="line"><a name="l03162"></a><span class="lineno"> 3162</span>&#160; </div>
<div class="line"><a name="l03163"></a><span class="lineno"> 3163</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l03164"></a><span class="lineno"> 3164</span>&#160;<span class="comment">/**</span></div>
<div class="line"><a name="l03165"></a><span class="lineno"> 3165</span>&#160;<span class="comment"> * Calculate the line position of the stream based on the</span></div>
<div class="line"><a name="l03166"></a><span class="lineno"> 3166</span>&#160;<span class="comment"> * position and the type.</span></div>
<div class="line"><a name="l03167"></a><span class="lineno"> 3167</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l03168"></a><span class="lineno"> 3168</span>&#160;<span class="comment"> * @return The 64-bit line position of the stream.</span></div>
<div class="line"><a name="l03169"></a><span class="lineno"> 3169</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l03170"></a><span class="lineno"><a class="line" href="class_stream_info.html#aa1ec4453ab911203f33828bb7b1622c3"> 3170</a></span>&#160;<a class="code" href="windows_2rexxapitypes_8h.html#a414156feea104f8f75b4ed9e3121b2f6">int64_t</a> <a class="code" href="class_stream_info.html#aa1ec4453ab911203f33828bb7b1622c3">StreamInfo::getLineReadPosition</a>()</div>
<div class="line"><a name="l03171"></a><span class="lineno"> 3171</span>&#160;{</div>
<div class="line"><a name="l03172"></a><span class="lineno"> 3172</span>&#160;    <span class="comment">// record-based I/O?</span></div>
<div class="line"><a name="l03173"></a><span class="lineno"> 3173</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="class_stream_info.html#a4f4b3f5f598efe6f91ee45cd6aadb065">record_based</a>)</div>
<div class="line"><a name="l03174"></a><span class="lineno"> 3174</span>&#160;    {</div>
<div class="line"><a name="l03175"></a><span class="lineno"> 3175</span>&#160;        <span class="comment">// calculate this using the record length</span></div>
<div class="line"><a name="l03176"></a><span class="lineno"> 3176</span>&#160;        <span class="keywordflow">return</span> (<a class="code" href="class_stream_info.html#a7c85128d9aed9f7c648206ad364fb80c">charReadPosition</a> / <a class="code" href="class_stream_info.html#a8fee3f8892f5e912d85d5a1621cdcc8a">binaryRecordLength</a>) + (<a class="code" href="class_stream_info.html#a7c85128d9aed9f7c648206ad364fb80c">charReadPosition</a> % <a class="code" href="class_stream_info.html#a8fee3f8892f5e912d85d5a1621cdcc8a">binaryRecordLength</a> ? 1 : 0);</div>
<div class="line"><a name="l03177"></a><span class="lineno"> 3177</span>&#160;    }</div>
<div class="line"><a name="l03178"></a><span class="lineno"> 3178</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l03179"></a><span class="lineno"> 3179</span>&#160;    {</div>
<div class="line"><a name="l03180"></a><span class="lineno"> 3180</span>&#160;        <span class="comment">// no up-to-date line position?  Recalc this based on the character position.</span></div>
<div class="line"><a name="l03181"></a><span class="lineno"> 3181</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="class_stream_info.html#a08f5a0d7420eceed7503fce2d5b0917b">lineReadPosition</a> == 0)</div>
<div class="line"><a name="l03182"></a><span class="lineno"> 3182</span>&#160;        {</div>
<div class="line"><a name="l03183"></a><span class="lineno"> 3183</span>&#160;            <a class="code" href="class_stream_info.html#a08f5a0d7420eceed7503fce2d5b0917b">lineReadPosition</a> = <a class="code" href="class_stream_info.html#aac348ef7bdc171beca73c115218ed072">queryLinePosition</a>(<a class="code" href="class_stream_info.html#a7c85128d9aed9f7c648206ad364fb80c">charReadPosition</a>);</div>
<div class="line"><a name="l03184"></a><span class="lineno"> 3184</span>&#160;        }</div>
<div class="line"><a name="l03185"></a><span class="lineno"> 3185</span>&#160;        <span class="comment">// set the character position</span></div>
<div class="line"><a name="l03186"></a><span class="lineno"> 3186</span>&#160;        <a class="code" href="class_stream_info.html#a44ecba6621790a306f4c08ee99af5e48">lineReadCharPosition</a> = <a class="code" href="class_stream_info.html#a7c85128d9aed9f7c648206ad364fb80c">charReadPosition</a>;</div>
<div class="line"><a name="l03187"></a><span class="lineno"> 3187</span>&#160;        <span class="comment">// return the position.</span></div>
<div class="line"><a name="l03188"></a><span class="lineno"> 3188</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="class_stream_info.html#a08f5a0d7420eceed7503fce2d5b0917b">lineReadPosition</a>;</div>
<div class="line"><a name="l03189"></a><span class="lineno"> 3189</span>&#160;    }</div>
<div class="line"><a name="l03190"></a><span class="lineno"> 3190</span>&#160;}</div>
<div class="line"><a name="l03191"></a><span class="lineno"> 3191</span>&#160; </div>
<div class="line"><a name="l03192"></a><span class="lineno"> 3192</span>&#160; </div>
<div class="line"><a name="l03193"></a><span class="lineno"> 3193</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l03194"></a><span class="lineno"> 3194</span>&#160;<span class="comment">/**</span></div>
<div class="line"><a name="l03195"></a><span class="lineno"> 3195</span>&#160;<span class="comment"> * Calculate the line position of the stream based on the</span></div>
<div class="line"><a name="l03196"></a><span class="lineno"> 3196</span>&#160;<span class="comment"> * defined I/O type.</span></div>
<div class="line"><a name="l03197"></a><span class="lineno"> 3197</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l03198"></a><span class="lineno"> 3198</span>&#160;<span class="comment"> * @return Calculated 64-bit stream line position.</span></div>
<div class="line"><a name="l03199"></a><span class="lineno"> 3199</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l03200"></a><span class="lineno"><a class="line" href="class_stream_info.html#a67cccd9fe6779258ab665f936fd7b3e0"> 3200</a></span>&#160;<a class="code" href="windows_2rexxapitypes_8h.html#a414156feea104f8f75b4ed9e3121b2f6">int64_t</a> <a class="code" href="class_stream_info.html#a67cccd9fe6779258ab665f936fd7b3e0">StreamInfo::getLineWritePosition</a>()</div>
<div class="line"><a name="l03201"></a><span class="lineno"> 3201</span>&#160;{</div>
<div class="line"><a name="l03202"></a><span class="lineno"> 3202</span>&#160;    <span class="comment">// using fixed length records?</span></div>
<div class="line"><a name="l03203"></a><span class="lineno"> 3203</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="class_stream_info.html#a4f4b3f5f598efe6f91ee45cd6aadb065">record_based</a>)</div>
<div class="line"><a name="l03204"></a><span class="lineno"> 3204</span>&#160;    {</div>
<div class="line"><a name="l03205"></a><span class="lineno"> 3205</span>&#160;        <span class="comment">// the position is based on the size of the records.</span></div>
<div class="line"><a name="l03206"></a><span class="lineno"> 3206</span>&#160;        <span class="keywordflow">return</span> (<a class="code" href="class_stream_info.html#a0ae0ea0f4fcc555c87d7e9be88bea96c">charWritePosition</a> / <a class="code" href="class_stream_info.html#a8fee3f8892f5e912d85d5a1621cdcc8a">binaryRecordLength</a>) +</div>
<div class="line"><a name="l03207"></a><span class="lineno"> 3207</span>&#160;            (<a class="code" href="class_stream_info.html#a0ae0ea0f4fcc555c87d7e9be88bea96c">charWritePosition</a> % <a class="code" href="class_stream_info.html#a8fee3f8892f5e912d85d5a1621cdcc8a">binaryRecordLength</a> ? 1 : 0);</div>
<div class="line"><a name="l03208"></a><span class="lineno"> 3208</span>&#160;    }</div>
<div class="line"><a name="l03209"></a><span class="lineno"> 3209</span>&#160;    <span class="comment">// standard line-oriented text stream</span></div>
<div class="line"><a name="l03210"></a><span class="lineno"> 3210</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l03211"></a><span class="lineno"> 3211</span>&#160;    {</div>
<div class="line"><a name="l03212"></a><span class="lineno"> 3212</span>&#160;        <span class="comment">// if our line write position has been invalidated, we need to</span></div>
<div class="line"><a name="l03213"></a><span class="lineno"> 3213</span>&#160;        <span class="comment">// recalculate (a real pain!).</span></div>
<div class="line"><a name="l03214"></a><span class="lineno"> 3214</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="class_stream_info.html#ac180477faedf3ab1f5f37376d545e916">lineWritePosition</a> == 0)</div>
<div class="line"><a name="l03215"></a><span class="lineno"> 3215</span>&#160;        {</div>
<div class="line"><a name="l03216"></a><span class="lineno"> 3216</span>&#160;            <span class="comment">// update the position based on the current character position</span></div>
<div class="line"><a name="l03217"></a><span class="lineno"> 3217</span>&#160;            <a class="code" href="class_stream_info.html#ac180477faedf3ab1f5f37376d545e916">lineWritePosition</a> = <a class="code" href="class_stream_info.html#aac348ef7bdc171beca73c115218ed072">queryLinePosition</a>(<a class="code" href="class_stream_info.html#a0ae0ea0f4fcc555c87d7e9be88bea96c">charWritePosition</a>) + 1;</div>
<div class="line"><a name="l03218"></a><span class="lineno"> 3218</span>&#160;        }</div>
<div class="line"><a name="l03219"></a><span class="lineno"> 3219</span>&#160;        <span class="comment">// synch up the character positioning</span></div>
<div class="line"><a name="l03220"></a><span class="lineno"> 3220</span>&#160;        <a class="code" href="class_stream_info.html#a520c92ac8d0d8c97c36fccdfdacb2c68">lineWriteCharPosition</a> = <a class="code" href="class_stream_info.html#a0ae0ea0f4fcc555c87d7e9be88bea96c">charWritePosition</a>;</div>
<div class="line"><a name="l03221"></a><span class="lineno"> 3221</span>&#160;        <span class="comment">// and return the position.</span></div>
<div class="line"><a name="l03222"></a><span class="lineno"> 3222</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="class_stream_info.html#ac180477faedf3ab1f5f37376d545e916">lineWritePosition</a>;</div>
<div class="line"><a name="l03223"></a><span class="lineno"> 3223</span>&#160;    }</div>
<div class="line"><a name="l03224"></a><span class="lineno"> 3224</span>&#160;}</div>
<div class="line"><a name="l03225"></a><span class="lineno"> 3225</span>&#160; </div>
<div class="line"><a name="l03226"></a><span class="lineno"> 3226</span>&#160;<span class="comment">/********************************************************************************************/</span></div>
<div class="line"><a name="l03227"></a><span class="lineno"> 3227</span>&#160;<span class="comment">/* stream_query_position                                                                    */</span></div>
<div class="line"><a name="l03228"></a><span class="lineno"> 3228</span>&#160;<span class="comment">/********************************************************************************************/</span></div>
<div class="line"><a name="l03229"></a><span class="lineno"><a class="line" href="_stream_native_8cpp.html#a8303713af4b089b523d36b3aa4d0dca7"> 3229</a></span>&#160;<a class="code" href="_stream_native_8cpp.html#a0132244173a5fe2980fd36a20185bc10">RexxMethod2</a>(<a class="code" href="rexx_8h.html#a96e0cc5eda42aed364b05f3c493e07e8">RexxObjectPtr</a>, stream_query_position, <a class="code" href="oorexxapi_8h.html#a3b5f38e088a2ba7f412c33f6d97f852a">CSELF</a>, streamPtr, OPTIONAL_CSTRING, options)</div>
<div class="line"><a name="l03230"></a><span class="lineno"> 3230</span>&#160;{</div>
<div class="line"><a name="l03231"></a><span class="lineno"> 3231</span>&#160;    <span class="keywordflow">try</span></div>
<div class="line"><a name="l03232"></a><span class="lineno"> 3232</span>&#160;    {</div>
<div class="line"><a name="l03233"></a><span class="lineno"> 3233</span>&#160;        <a class="code" href="class_stream_info.html">StreamInfo</a> *stream_info = <a class="code" href="_stream_native_8cpp.html#a1fbef9d1aba5e27b6754dda2d30239fa">checkStreamInfo</a>(context, streamPtr, context-&gt;NullString());</div>
<div class="line"><a name="l03234"></a><span class="lineno"> 3234</span>&#160;        <span class="keywordflow">return</span> stream_info-&gt;<a class="code" href="class_stream_info.html#abef89fa4829d60e7995e76319179eb47">queryStreamPosition</a>(options);</div>
<div class="line"><a name="l03235"></a><span class="lineno"> 3235</span>&#160;    }</div>
<div class="line"><a name="l03236"></a><span class="lineno"> 3236</span>&#160;    <span class="comment">// this is thrown for any exceptions</span></div>
<div class="line"><a name="l03237"></a><span class="lineno"> 3237</span>&#160;    <span class="keywordflow">catch</span> (<span class="keywordtype">int</span>)</div>
<div class="line"><a name="l03238"></a><span class="lineno"> 3238</span>&#160;    {</div>
<div class="line"><a name="l03239"></a><span class="lineno"> 3239</span>&#160;        <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l03240"></a><span class="lineno"> 3240</span>&#160;    }</div>
<div class="line"><a name="l03241"></a><span class="lineno"> 3241</span>&#160;    <span class="keywordflow">catch</span> (<a class="code" href="class_stream_info.html">StreamInfo</a> *)</div>
<div class="line"><a name="l03242"></a><span class="lineno"> 3242</span>&#160;    {</div>
<div class="line"><a name="l03243"></a><span class="lineno"> 3243</span>&#160;    }</div>
<div class="line"><a name="l03244"></a><span class="lineno"> 3244</span>&#160;    <span class="keywordflow">return</span> 0;     <span class="comment">// return 0 for all exceptions...the result value has already been set.</span></div>
<div class="line"><a name="l03245"></a><span class="lineno"> 3245</span>&#160;}</div>
<div class="line"><a name="l03246"></a><span class="lineno"> 3246</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l03247"></a><span class="lineno"> 3247</span>&#160;<span class="comment">/**</span></div>
<div class="line"><a name="l03248"></a><span class="lineno"> 3248</span>&#160;<span class="comment"> * Move forward the specified number of lines in the file.</span></div>
<div class="line"><a name="l03249"></a><span class="lineno"> 3249</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l03250"></a><span class="lineno"> 3250</span>&#160;<span class="comment"> * @param offset Number of lines to move.</span></div>
<div class="line"><a name="l03251"></a><span class="lineno"> 3251</span>&#160;<span class="comment"> * @param current_line</span></div>
<div class="line"><a name="l03252"></a><span class="lineno"> 3252</span>&#160;<span class="comment"> *               Current line position in the file.</span></div>
<div class="line"><a name="l03253"></a><span class="lineno"> 3253</span>&#160;<span class="comment"> * @param current_position</span></div>
<div class="line"><a name="l03254"></a><span class="lineno"> 3254</span>&#160;<span class="comment"> *               The current character position to read from.</span></div>
<div class="line"><a name="l03255"></a><span class="lineno"> 3255</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l03256"></a><span class="lineno"> 3256</span>&#160;<span class="comment"> * @return The new current line position.</span></div>
<div class="line"><a name="l03257"></a><span class="lineno"> 3257</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l03258"></a><span class="lineno"><a class="line" href="class_stream_info.html#a47c8a5407f7e4ed96f546c513e88e658"> 3258</a></span>&#160;<a class="code" href="windows_2rexxapitypes_8h.html#a414156feea104f8f75b4ed9e3121b2f6">int64_t</a> <a class="code" href="class_stream_info.html#a47c8a5407f7e4ed96f546c513e88e658">StreamInfo::readForwardByLine</a>(<a class="code" href="windows_2rexxapitypes_8h.html#a414156feea104f8f75b4ed9e3121b2f6">int64_t</a> offset, <a class="code" href="windows_2rexxapitypes_8h.html#a414156feea104f8f75b4ed9e3121b2f6">int64_t</a> &amp;current_line, <a class="code" href="windows_2rexxapitypes_8h.html#a414156feea104f8f75b4ed9e3121b2f6">int64_t</a> &amp;current_position)</div>
<div class="line"><a name="l03259"></a><span class="lineno"> 3259</span>&#160;{</div>
<div class="line"><a name="l03260"></a><span class="lineno"> 3260</span>&#160;    <a class="code" href="class_stream_info.html#a1cea3fe0284cc4761746767d4c302fcb">readSetup</a>();                      <span class="comment">/* do additional setup               */</span></div>
<div class="line"><a name="l03261"></a><span class="lineno"> 3261</span>&#160; </div>
<div class="line"><a name="l03262"></a><span class="lineno"> 3262</span>&#160;    <span class="comment">// make sure we&#39;re reading from the correct position</span></div>
<div class="line"><a name="l03263"></a><span class="lineno"> 3263</span>&#160;    <a class="code" href="class_stream_info.html#acd9fe6516d390ecca12931ae2c1d7d20">setPosition</a>(current_position, current_position);</div>
<div class="line"><a name="l03264"></a><span class="lineno"> 3264</span>&#160; </div>
<div class="line"><a name="l03265"></a><span class="lineno"> 3265</span>&#160;    <span class="comment">// track how many lines are actually moved (move is decremented by seekForwardLines())</span></div>
<div class="line"><a name="l03266"></a><span class="lineno"> 3266</span>&#160;    <a class="code" href="windows_2rexxapitypes_8h.html#a414156feea104f8f75b4ed9e3121b2f6">int64_t</a> move = offset;</div>
<div class="line"><a name="l03267"></a><span class="lineno"> 3267</span>&#160; </div>
<div class="line"><a name="l03268"></a><span class="lineno"> 3268</span>&#160;    <span class="comment">// remember to do the 1-based / 0-based conversions</span></div>
<div class="line"><a name="l03269"></a><span class="lineno"> 3269</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="class_stream_info.html#a35caea85b14b8f2b8b734c3b51eb7f4b">fileInfo</a>.<a class="code" href="class_sys_file.html#a50385d5b509309a88309938d8c021fd2">seekForwardLines</a>(current_position - 1, move, current_position))</div>
<div class="line"><a name="l03270"></a><span class="lineno"> 3270</span>&#160;    {</div>
<div class="line"><a name="l03271"></a><span class="lineno"> 3271</span>&#160;        <span class="comment">// no good, raise an error</span></div>
<div class="line"><a name="l03272"></a><span class="lineno"> 3272</span>&#160;        <a class="code" href="class_stream_info.html#a6f99538562048386f872fb1843462267">notreadyError</a>();</div>
<div class="line"><a name="l03273"></a><span class="lineno"> 3273</span>&#160;    }</div>
<div class="line"><a name="l03274"></a><span class="lineno"> 3274</span>&#160; </div>
<div class="line"><a name="l03275"></a><span class="lineno"> 3275</span>&#160;    <span class="comment">// back to 1-based</span></div>
<div class="line"><a name="l03276"></a><span class="lineno"> 3276</span>&#160;    current_position++;</div>
<div class="line"><a name="l03277"></a><span class="lineno"> 3277</span>&#160; </div>
<div class="line"><a name="l03278"></a><span class="lineno"> 3278</span>&#160;    <span class="comment">// set this according to the number of lines actually moved</span></div>
<div class="line"><a name="l03279"></a><span class="lineno"> 3279</span>&#160;    current_line += offset - move;</div>
<div class="line"><a name="l03280"></a><span class="lineno"> 3280</span>&#160;    <span class="comment">// unable to read everything?  Then the current line is also the line size</span></div>
<div class="line"><a name="l03281"></a><span class="lineno"> 3281</span>&#160;    <span class="keywordflow">if</span> (move != 0)</div>
<div class="line"><a name="l03282"></a><span class="lineno"> 3282</span>&#160;    {</div>
<div class="line"><a name="l03283"></a><span class="lineno"> 3283</span>&#160;        <a class="code" href="class_stream_info.html#ac4e90641d1e2c5b6a30b512e37a7458c">stream_line_size</a> = current_line;</div>
<div class="line"><a name="l03284"></a><span class="lineno"> 3284</span>&#160;    }</div>
<div class="line"><a name="l03285"></a><span class="lineno"> 3285</span>&#160;    <span class="keywordflow">return</span> current_line;                <span class="comment">// return current line</span></div>
<div class="line"><a name="l03286"></a><span class="lineno"> 3286</span>&#160;}</div>
<div class="line"><a name="l03287"></a><span class="lineno"> 3287</span>&#160; </div>
<div class="line"><a name="l03288"></a><span class="lineno"> 3288</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l03289"></a><span class="lineno"> 3289</span>&#160;<span class="comment">/**</span></div>
<div class="line"><a name="l03290"></a><span class="lineno"> 3290</span>&#160;<span class="comment"> * Seek to a specific line position</span></div>
<div class="line"><a name="l03291"></a><span class="lineno"> 3291</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l03292"></a><span class="lineno"> 3292</span>&#160;<span class="comment"> * @param offset The new target position</span></div>
<div class="line"><a name="l03293"></a><span class="lineno"> 3293</span>&#160;<span class="comment"> * @param current_line</span></div>
<div class="line"><a name="l03294"></a><span class="lineno"> 3294</span>&#160;<span class="comment"> *               The starting line position</span></div>
<div class="line"><a name="l03295"></a><span class="lineno"> 3295</span>&#160;<span class="comment"> * @param current_position</span></div>
<div class="line"><a name="l03296"></a><span class="lineno"> 3296</span>&#160;<span class="comment"> *               The starting character position.</span></div>
<div class="line"><a name="l03297"></a><span class="lineno"> 3297</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l03298"></a><span class="lineno"> 3298</span>&#160;<span class="comment"> * @return</span></div>
<div class="line"><a name="l03299"></a><span class="lineno"> 3299</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l03300"></a><span class="lineno"><a class="line" href="class_stream_info.html#a9787a73d6593741e2d85f6130e22a5d5"> 3300</a></span>&#160;<a class="code" href="windows_2rexxapitypes_8h.html#a414156feea104f8f75b4ed9e3121b2f6">int64_t</a> <a class="code" href="class_stream_info.html#a9787a73d6593741e2d85f6130e22a5d5">StreamInfo::seekToVariableLine</a>(<a class="code" href="windows_2rexxapitypes_8h.html#a414156feea104f8f75b4ed9e3121b2f6">int64_t</a> offset, <a class="code" href="windows_2rexxapitypes_8h.html#a414156feea104f8f75b4ed9e3121b2f6">int64_t</a> &amp;current_line, <a class="code" href="windows_2rexxapitypes_8h.html#a414156feea104f8f75b4ed9e3121b2f6">int64_t</a> &amp;current_position)</div>
<div class="line"><a name="l03301"></a><span class="lineno"> 3301</span>&#160;{</div>
<div class="line"><a name="l03302"></a><span class="lineno"> 3302</span>&#160;    <span class="keywordflow">if</span> (current_line == offset)</div>
<div class="line"><a name="l03303"></a><span class="lineno"> 3303</span>&#160;    {</div>
<div class="line"><a name="l03304"></a><span class="lineno"> 3304</span>&#160;        <span class="keywordflow">return</span> current_line;</div>
<div class="line"><a name="l03305"></a><span class="lineno"> 3305</span>&#160;    }</div>
<div class="line"><a name="l03306"></a><span class="lineno"> 3306</span>&#160;    <span class="comment">// not possible to reach there by going forward or we don&#39;t have</span></div>
<div class="line"><a name="l03307"></a><span class="lineno"> 3307</span>&#160;    <span class="comment">// valid line positioning information?</span></div>
<div class="line"><a name="l03308"></a><span class="lineno"> 3308</span>&#160;    <span class="keywordflow">if</span> (current_line &gt; offset || current_line &lt;= 0)</div>
<div class="line"><a name="l03309"></a><span class="lineno"> 3309</span>&#160;    {</div>
<div class="line"><a name="l03310"></a><span class="lineno"> 3310</span>&#160;        <span class="comment">// then read forward from the beginning</span></div>
<div class="line"><a name="l03311"></a><span class="lineno"> 3311</span>&#160;        current_line = 1;</div>
<div class="line"><a name="l03312"></a><span class="lineno"> 3312</span>&#160;        current_position = 1;</div>
<div class="line"><a name="l03313"></a><span class="lineno"> 3313</span>&#160;    }</div>
<div class="line"><a name="l03314"></a><span class="lineno"> 3314</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="class_stream_info.html#a47c8a5407f7e4ed96f546c513e88e658">readForwardByLine</a>(offset - current_line, current_line, current_position);</div>
<div class="line"><a name="l03315"></a><span class="lineno"> 3315</span>&#160;}</div>
<div class="line"><a name="l03316"></a><span class="lineno"> 3316</span>&#160; </div>
<div class="line"><a name="l03317"></a><span class="lineno"> 3317</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l03318"></a><span class="lineno"> 3318</span>&#160;<span class="comment">/**</span></div>
<div class="line"><a name="l03319"></a><span class="lineno"> 3319</span>&#160;<span class="comment"> * Make sure we have valid line positions set.  If we&#39;ve just</span></div>
<div class="line"><a name="l03320"></a><span class="lineno"> 3320</span>&#160;<span class="comment"> * been doing character operations up to this point, our</span></div>
<div class="line"><a name="l03321"></a><span class="lineno"> 3321</span>&#160;<span class="comment"> * line positions will not be set.  This may require reading</span></div>
<div class="line"><a name="l03322"></a><span class="lineno"> 3322</span>&#160;<span class="comment"> * the file and counting up to the positions.</span></div>
<div class="line"><a name="l03323"></a><span class="lineno"> 3323</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l03324"></a><span class="lineno"> 3324</span>&#160;<span class="comment"> * @return</span></div>
<div class="line"><a name="l03325"></a><span class="lineno"> 3325</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l03326"></a><span class="lineno"><a class="line" href="class_stream_info.html#a3b9afdf03b73983e6d6a74248578fd28"> 3326</a></span>&#160;<a class="code" href="windows_2rexxapitypes_8h.html#a414156feea104f8f75b4ed9e3121b2f6">int64_t</a> <a class="code" href="class_stream_info.html#a3b9afdf03b73983e6d6a74248578fd28">StreamInfo::setLinePositions</a>()</div>
<div class="line"><a name="l03327"></a><span class="lineno"> 3327</span>&#160;{</div>
<div class="line"><a name="l03328"></a><span class="lineno"> 3328</span>&#160;   <span class="comment">// already have information?</span></div>
<div class="line"><a name="l03329"></a><span class="lineno"> 3329</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="class_stream_info.html#a08f5a0d7420eceed7503fce2d5b0917b">lineReadPosition</a> != 0 &amp;&amp; <a class="code" href="class_stream_info.html#ac180477faedf3ab1f5f37376d545e916">lineWritePosition</a> != 0)</div>
<div class="line"><a name="l03330"></a><span class="lineno"> 3330</span>&#160;   {</div>
<div class="line"><a name="l03331"></a><span class="lineno"> 3331</span>&#160;       <span class="comment">// just return the</span></div>
<div class="line"><a name="l03332"></a><span class="lineno"> 3332</span>&#160;       <span class="keywordflow">return</span> <a class="code" href="class_stream_info.html#a08f5a0d7420eceed7503fce2d5b0917b">lineReadPosition</a>;</div>
<div class="line"><a name="l03333"></a><span class="lineno"> 3333</span>&#160;   }</div>
<div class="line"><a name="l03334"></a><span class="lineno"> 3334</span>&#160;   <a class="code" href="class_stream_info.html#a1cea3fe0284cc4761746767d4c302fcb">readSetup</a>();                        <span class="comment">// prepare to do reading</span></div>
<div class="line"><a name="l03335"></a><span class="lineno"> 3335</span>&#160;   <span class="comment">// still at the beginning?</span></div>
<div class="line"><a name="l03336"></a><span class="lineno"> 3336</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="class_stream_info.html#a7c85128d9aed9f7c648206ad364fb80c">charReadPosition</a> == 1)</div>
<div class="line"><a name="l03337"></a><span class="lineno"> 3337</span>&#160;   {</div>
<div class="line"><a name="l03338"></a><span class="lineno"> 3338</span>&#160;      <span class="comment">// set the line counts to match.</span></div>
<div class="line"><a name="l03339"></a><span class="lineno"> 3339</span>&#160;      <a class="code" href="class_stream_info.html#a08f5a0d7420eceed7503fce2d5b0917b">lineReadPosition</a> = 1;</div>
<div class="line"><a name="l03340"></a><span class="lineno"> 3340</span>&#160;      <a class="code" href="class_stream_info.html#a44ecba6621790a306f4c08ee99af5e48">lineReadCharPosition</a> = 1;</div>
<div class="line"><a name="l03341"></a><span class="lineno"> 3341</span>&#160;   }</div>
<div class="line"><a name="l03342"></a><span class="lineno"> 3342</span>&#160;   <span class="keywordflow">else</span></div>
<div class="line"><a name="l03343"></a><span class="lineno"> 3343</span>&#160;   {</div>
<div class="line"><a name="l03344"></a><span class="lineno"> 3344</span>&#160;       <span class="keywordflow">if</span> (!<a class="code" href="class_stream_info.html#a35caea85b14b8f2b8b734c3b51eb7f4b">fileInfo</a>.<a class="code" href="class_sys_file.html#ac73da0cab42257e4f05ce625c848b144">countLines</a>(0, <a class="code" href="class_stream_info.html#a7c85128d9aed9f7c648206ad364fb80c">charReadPosition</a> - 1, <a class="code" href="class_stream_info.html#a44ecba6621790a306f4c08ee99af5e48">lineReadCharPosition</a>, <a class="code" href="class_stream_info.html#a08f5a0d7420eceed7503fce2d5b0917b">lineReadPosition</a>))</div>
<div class="line"><a name="l03345"></a><span class="lineno"> 3345</span>&#160;       {</div>
<div class="line"><a name="l03346"></a><span class="lineno"> 3346</span>&#160;           <a class="code" href="class_stream_info.html#a6f99538562048386f872fb1843462267">notreadyError</a>();</div>
<div class="line"><a name="l03347"></a><span class="lineno"> 3347</span>&#160;       }</div>
<div class="line"><a name="l03348"></a><span class="lineno"> 3348</span>&#160;       <span class="comment">// system positions are origin 0...Rexx ones are origin 1.</span></div>
<div class="line"><a name="l03349"></a><span class="lineno"> 3349</span>&#160;       <a class="code" href="class_stream_info.html#a44ecba6621790a306f4c08ee99af5e48">lineReadCharPosition</a>++;</div>
<div class="line"><a name="l03350"></a><span class="lineno"> 3350</span>&#160;   }</div>
<div class="line"><a name="l03351"></a><span class="lineno"> 3351</span>&#160;   <span class="comment">// now try the write position</span></div>
<div class="line"><a name="l03352"></a><span class="lineno"> 3352</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="class_stream_info.html#a0ae0ea0f4fcc555c87d7e9be88bea96c">charWritePosition</a> == 1)</div>
<div class="line"><a name="l03353"></a><span class="lineno"> 3353</span>&#160;   {</div>
<div class="line"><a name="l03354"></a><span class="lineno"> 3354</span>&#160;     <a class="code" href="class_stream_info.html#ac180477faedf3ab1f5f37376d545e916">lineWritePosition</a> = 1;</div>
<div class="line"><a name="l03355"></a><span class="lineno"> 3355</span>&#160;     <a class="code" href="class_stream_info.html#a520c92ac8d0d8c97c36fccdfdacb2c68">lineWriteCharPosition</a> = 1;</div>
<div class="line"><a name="l03356"></a><span class="lineno"> 3356</span>&#160;   }</div>
<div class="line"><a name="l03357"></a><span class="lineno"> 3357</span>&#160;   <span class="keywordflow">else</span></div>
<div class="line"><a name="l03358"></a><span class="lineno"> 3358</span>&#160;   {</div>
<div class="line"><a name="l03359"></a><span class="lineno"> 3359</span>&#160;       <span class="keywordflow">if</span> (!<a class="code" href="class_stream_info.html#a35caea85b14b8f2b8b734c3b51eb7f4b">fileInfo</a>.<a class="code" href="class_sys_file.html#ac73da0cab42257e4f05ce625c848b144">countLines</a>(0, <a class="code" href="class_stream_info.html#a0ae0ea0f4fcc555c87d7e9be88bea96c">charWritePosition</a> - 1, <a class="code" href="class_stream_info.html#a520c92ac8d0d8c97c36fccdfdacb2c68">lineWriteCharPosition</a>, <a class="code" href="class_stream_info.html#ac180477faedf3ab1f5f37376d545e916">lineWritePosition</a>))</div>
<div class="line"><a name="l03360"></a><span class="lineno"> 3360</span>&#160;       {</div>
<div class="line"><a name="l03361"></a><span class="lineno"> 3361</span>&#160;           <a class="code" href="class_stream_info.html#a6f99538562048386f872fb1843462267">notreadyError</a>();</div>
<div class="line"><a name="l03362"></a><span class="lineno"> 3362</span>&#160;       }</div>
<div class="line"><a name="l03363"></a><span class="lineno"> 3363</span>&#160;       <span class="comment">// system positions are origin 0...Rexx ones are origin 1.</span></div>
<div class="line"><a name="l03364"></a><span class="lineno"> 3364</span>&#160;       <a class="code" href="class_stream_info.html#a520c92ac8d0d8c97c36fccdfdacb2c68">lineWriteCharPosition</a>++;</div>
<div class="line"><a name="l03365"></a><span class="lineno"> 3365</span>&#160;   }</div>
<div class="line"><a name="l03366"></a><span class="lineno"> 3366</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="class_stream_info.html#a08f5a0d7420eceed7503fce2d5b0917b">lineReadPosition</a>;</div>
<div class="line"><a name="l03367"></a><span class="lineno"> 3367</span>&#160;}</div>
<div class="line"><a name="l03368"></a><span class="lineno"> 3368</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l03369"></a><span class="lineno"> 3369</span>&#160;<span class="comment">/**</span></div>
<div class="line"><a name="l03370"></a><span class="lineno"> 3370</span>&#160;<span class="comment"> * Return the qualified name of a stream.</span></div>
<div class="line"><a name="l03371"></a><span class="lineno"> 3371</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l03372"></a><span class="lineno"> 3372</span>&#160;<span class="comment"> * @return The character string qualified name.</span></div>
<div class="line"><a name="l03373"></a><span class="lineno"> 3373</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l03374"></a><span class="lineno"><a class="line" href="class_stream_info.html#af87ad1c8e0ca6a885b07cf19d85688e5"> 3374</a></span>&#160;<span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="class_stream_info.html#af87ad1c8e0ca6a885b07cf19d85688e5">StreamInfo::getQualifiedName</a>()</div>
<div class="line"><a name="l03375"></a><span class="lineno"> 3375</span>&#160;{</div>
<div class="line"><a name="l03376"></a><span class="lineno"> 3376</span>&#160;    <span class="comment">// resolve the stream name, if necesary, and return the fully qualified</span></div>
<div class="line"><a name="l03377"></a><span class="lineno"> 3377</span>&#160;    <span class="comment">// name.</span></div>
<div class="line"><a name="l03378"></a><span class="lineno"> 3378</span>&#160;    <a class="code" href="class_stream_info.html#a031ca794b8ef189757f1e034e8d0d122">resolveStreamName</a>();</div>
<div class="line"><a name="l03379"></a><span class="lineno"> 3379</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="class_stream_info.html#aa1824fb879c522d827a4c16dd2ff5ae4">qualified_name</a>;</div>
<div class="line"><a name="l03380"></a><span class="lineno"> 3380</span>&#160;}</div>
<div class="line"><a name="l03381"></a><span class="lineno"> 3381</span>&#160; </div>
<div class="line"><a name="l03382"></a><span class="lineno"> 3382</span>&#160;<span class="comment">/********************************************************************************************/</span></div>
<div class="line"><a name="l03383"></a><span class="lineno"> 3383</span>&#160;<span class="comment">/* qualify                                                                                  */</span></div>
<div class="line"><a name="l03384"></a><span class="lineno"> 3384</span>&#160;<span class="comment">/********************************************************************************************/</span></div>
<div class="line"><a name="l03385"></a><span class="lineno"><a class="line" href="_stream_native_8cpp.html#a2ffd4fdadab2df48ee908cf110f13fba"> 3385</a></span>&#160;<a class="code" href="_stream_native_8cpp.html#ac0de8e5ebdd5918f23e35b899691fbbe">RexxMethod1</a>(<a class="code" href="rexx_8h.html#a581e376dc8d3b9132e29014c896b9e70">CSTRING</a>, qualify, <a class="code" href="oorexxapi_8h.html#a3b5f38e088a2ba7f412c33f6d97f852a">CSELF</a>, streamPtr)</div>
<div class="line"><a name="l03386"></a><span class="lineno"> 3386</span>&#160;{</div>
<div class="line"><a name="l03387"></a><span class="lineno"> 3387</span>&#160;    <a class="code" href="class_stream_info.html">StreamInfo</a> *stream_info = (<a class="code" href="class_stream_info.html">StreamInfo</a> *)streamPtr;</div>
<div class="line"><a name="l03388"></a><span class="lineno"> 3388</span>&#160;    stream_info-&gt;<a class="code" href="class_stream_info.html#a7bd9bdab0ad76acbdd5d0e020879b561">setContext</a>(context, context-&gt;NullString());</div>
<div class="line"><a name="l03389"></a><span class="lineno"> 3389</span>&#160; </div>
<div class="line"><a name="l03390"></a><span class="lineno"> 3390</span>&#160;    <span class="keywordflow">return</span> stream_info-&gt;<a class="code" href="class_stream_info.html#af87ad1c8e0ca6a885b07cf19d85688e5">getQualifiedName</a>();</div>
<div class="line"><a name="l03391"></a><span class="lineno"> 3391</span>&#160;}</div>
<div class="line"><a name="l03392"></a><span class="lineno"> 3392</span>&#160; </div>
<div class="line"><a name="l03393"></a><span class="lineno"> 3393</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l03394"></a><span class="lineno"> 3394</span>&#160;<span class="comment">/**</span></div>
<div class="line"><a name="l03395"></a><span class="lineno"> 3395</span>&#160;<span class="comment"> * Check if a stream exists.  If it does, the qualified name</span></div>
<div class="line"><a name="l03396"></a><span class="lineno"> 3396</span>&#160;<span class="comment"> * is returned.  This does not need to be an open stream for</span></div>
<div class="line"><a name="l03397"></a><span class="lineno"> 3397</span>&#160;<span class="comment"> * this to succeed.</span></div>
<div class="line"><a name="l03398"></a><span class="lineno"> 3398</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l03399"></a><span class="lineno"> 3399</span>&#160;<span class="comment"> * @return The resolved stream name, or &quot;&quot; if not resolvable.</span></div>
<div class="line"><a name="l03400"></a><span class="lineno"> 3400</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l03401"></a><span class="lineno"><a class="line" href="class_stream_info.html#a5d678c49a35a19d401e929a5b9b89d8c"> 3401</a></span>&#160;<span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="class_stream_info.html#a5d678c49a35a19d401e929a5b9b89d8c">StreamInfo::streamExists</a>()</div>
<div class="line"><a name="l03402"></a><span class="lineno"> 3402</span>&#160;{</div>
<div class="line"><a name="l03403"></a><span class="lineno"> 3403</span>&#160;    <span class="comment">// opened with a provided handle?  We have no name.</span></div>
<div class="line"><a name="l03404"></a><span class="lineno"> 3404</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="class_stream_info.html#a5f60cee21e71f36ba5126026cb3401f6">opened_as_handle</a>)</div>
<div class="line"><a name="l03405"></a><span class="lineno"> 3405</span>&#160;    {</div>
<div class="line"><a name="l03406"></a><span class="lineno"> 3406</span>&#160;        <span class="keywordflow">return</span> <span class="stringliteral">&quot;&quot;</span>;</div>
<div class="line"><a name="l03407"></a><span class="lineno"> 3407</span>&#160;    }</div>
<div class="line"><a name="l03408"></a><span class="lineno"> 3408</span>&#160; </div>
<div class="line"><a name="l03409"></a><span class="lineno"> 3409</span>&#160;    <span class="comment">// are we successfully open?  We&#39;ve already resolved this then</span></div>
<div class="line"><a name="l03410"></a><span class="lineno"> 3410</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="class_stream_info.html#a69bc9580bb2e54426801fe6fca59c98e">isopen</a>)</div>
<div class="line"><a name="l03411"></a><span class="lineno"> 3411</span>&#160;    {</div>
<div class="line"><a name="l03412"></a><span class="lineno"> 3412</span>&#160;        <span class="comment">// is this a device of some sort?  result is the original name</span></div>
<div class="line"><a name="l03413"></a><span class="lineno"> 3413</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="class_stream_info.html#a35caea85b14b8f2b8b734c3b51eb7f4b">fileInfo</a>.<a class="code" href="class_sys_file.html#a4452c67b2e4b60b096f2c8f401a8332d">isDevice</a>())</div>
<div class="line"><a name="l03414"></a><span class="lineno"> 3414</span>&#160;        {</div>
<div class="line"><a name="l03415"></a><span class="lineno"> 3415</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="class_stream_info.html#a6a85550447a4ca095412f9b630504ae9">stream_name</a>;</div>
<div class="line"><a name="l03416"></a><span class="lineno"> 3416</span>&#160;        }</div>
<div class="line"><a name="l03417"></a><span class="lineno"> 3417</span>&#160;        <span class="keywordflow">else</span>  <span class="comment">// return the fully qualified stream name.</span></div>
<div class="line"><a name="l03418"></a><span class="lineno"> 3418</span>&#160;        {</div>
<div class="line"><a name="l03419"></a><span class="lineno"> 3419</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="class_stream_info.html#aa1824fb879c522d827a4c16dd2ff5ae4">qualified_name</a>;</div>
<div class="line"><a name="l03420"></a><span class="lineno"> 3420</span>&#160;        }</div>
<div class="line"><a name="l03421"></a><span class="lineno"> 3421</span>&#160;    }</div>
<div class="line"><a name="l03422"></a><span class="lineno"> 3422</span>&#160; </div>
<div class="line"><a name="l03423"></a><span class="lineno"> 3423</span>&#160;    <span class="comment">// make sure we have the fully resolved stream name.</span></div>
<div class="line"><a name="l03424"></a><span class="lineno"> 3424</span>&#160;    <a class="code" href="class_stream_info.html#a031ca794b8ef189757f1e034e8d0d122">resolveStreamName</a>();</div>
<div class="line"><a name="l03425"></a><span class="lineno"> 3425</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="class_sys_file_system.html#a00065686fda60d5d8ae9a80149d2e583">SysFileSystem::fileExists</a>(<a class="code" href="class_stream_info.html#aa1824fb879c522d827a4c16dd2ff5ae4">qualified_name</a>))</div>
<div class="line"><a name="l03426"></a><span class="lineno"> 3426</span>&#160;    {</div>
<div class="line"><a name="l03427"></a><span class="lineno"> 3427</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="class_stream_info.html#aa1824fb879c522d827a4c16dd2ff5ae4">qualified_name</a>;</div>
<div class="line"><a name="l03428"></a><span class="lineno"> 3428</span>&#160;    }</div>
<div class="line"><a name="l03429"></a><span class="lineno"> 3429</span>&#160;    <span class="comment">// can&#39;t find this, sorry.</span></div>
<div class="line"><a name="l03430"></a><span class="lineno"> 3430</span>&#160;    <span class="keywordflow">return</span> <span class="stringliteral">&quot;&quot;</span>;</div>
<div class="line"><a name="l03431"></a><span class="lineno"> 3431</span>&#160;}</div>
<div class="line"><a name="l03432"></a><span class="lineno"> 3432</span>&#160; </div>
<div class="line"><a name="l03433"></a><span class="lineno"> 3433</span>&#160;<span class="comment">/********************************************************************************************/</span></div>
<div class="line"><a name="l03434"></a><span class="lineno"> 3434</span>&#160;<span class="comment">/* query_exists                                                                             */</span></div>
<div class="line"><a name="l03435"></a><span class="lineno"> 3435</span>&#160;<span class="comment">/********************************************************************************************/</span></div>
<div class="line"><a name="l03436"></a><span class="lineno"><a class="line" href="_stream_native_8cpp.html#a8e6fb9646a6d7eb7ea66247a6beec768"> 3436</a></span>&#160;<a class="code" href="_stream_native_8cpp.html#ac0de8e5ebdd5918f23e35b899691fbbe">RexxMethod1</a>(<a class="code" href="rexx_8h.html#a581e376dc8d3b9132e29014c896b9e70">CSTRING</a>, query_exists, <a class="code" href="oorexxapi_8h.html#a3b5f38e088a2ba7f412c33f6d97f852a">CSELF</a>, streamPtr)</div>
<div class="line"><a name="l03437"></a><span class="lineno"> 3437</span>&#160;{</div>
<div class="line"><a name="l03438"></a><span class="lineno"> 3438</span>&#160;    <a class="code" href="class_stream_info.html">StreamInfo</a> *stream_info = (<a class="code" href="class_stream_info.html">StreamInfo</a> *)streamPtr;</div>
<div class="line"><a name="l03439"></a><span class="lineno"> 3439</span>&#160;    stream_info-&gt;<a class="code" href="class_stream_info.html#a7bd9bdab0ad76acbdd5d0e020879b561">setContext</a>(context, context-&gt;NullString());</div>
<div class="line"><a name="l03440"></a><span class="lineno"> 3440</span>&#160; </div>
<div class="line"><a name="l03441"></a><span class="lineno"> 3441</span>&#160;    <span class="keywordflow">return</span> stream_info-&gt;<a class="code" href="class_stream_info.html#a5d678c49a35a19d401e929a5b9b89d8c">streamExists</a>();</div>
<div class="line"><a name="l03442"></a><span class="lineno"> 3442</span>&#160;}</div>
<div class="line"><a name="l03443"></a><span class="lineno"> 3443</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l03444"></a><span class="lineno"> 3444</span>&#160;<span class="comment">/**</span></div>
<div class="line"><a name="l03445"></a><span class="lineno"> 3445</span>&#160;<span class="comment"> * Return the handle value for the stream.</span></div>
<div class="line"><a name="l03446"></a><span class="lineno"> 3446</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l03447"></a><span class="lineno"> 3447</span>&#160;<span class="comment"> * @return The binary handle for the stream.</span></div>
<div class="line"><a name="l03448"></a><span class="lineno"> 3448</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l03449"></a><span class="lineno"><a class="line" href="class_stream_info.html#abb78844cda9ce9df456f945c3715c501"> 3449</a></span>&#160;<a class="code" href="rexx_8h.html#a96e0cc5eda42aed364b05f3c493e07e8">RexxObjectPtr</a> <a class="code" href="class_stream_info.html#abb78844cda9ce9df456f945c3715c501">StreamInfo::queryHandle</a>()</div>
<div class="line"><a name="l03450"></a><span class="lineno"> 3450</span>&#160;{</div>
<div class="line"><a name="l03451"></a><span class="lineno"> 3451</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="class_stream_info.html#a69bc9580bb2e54426801fe6fca59c98e">isopen</a>)       <span class="comment">/* unopened stream?                  */</span></div>
<div class="line"><a name="l03452"></a><span class="lineno"> 3452</span>&#160;    {</div>
<div class="line"><a name="l03453"></a><span class="lineno"> 3453</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="class_stream_info.html#a6a5404d4b7ece722baef78b65cab52d2">context</a>-&gt;NullString();</div>
<div class="line"><a name="l03454"></a><span class="lineno"> 3454</span>&#160;    }</div>
<div class="line"><a name="l03455"></a><span class="lineno"> 3455</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="class_stream_info.html#a6a5404d4b7ece722baef78b65cab52d2">context</a>-&gt;Uintptr(<a class="code" href="class_stream_info.html#a35caea85b14b8f2b8b734c3b51eb7f4b">fileInfo</a>.<a class="code" href="class_sys_file.html#a988b06c3ab6e3335f0909ab26e5dafc6">getHandle</a>());</div>
<div class="line"><a name="l03456"></a><span class="lineno"> 3456</span>&#160;}</div>
<div class="line"><a name="l03457"></a><span class="lineno"> 3457</span>&#160; </div>
<div class="line"><a name="l03458"></a><span class="lineno"> 3458</span>&#160;<span class="comment">/********************************************************************************************/</span></div>
<div class="line"><a name="l03459"></a><span class="lineno"> 3459</span>&#160;<span class="comment">/* query_handle                                                                             */</span></div>
<div class="line"><a name="l03460"></a><span class="lineno"> 3460</span>&#160;<span class="comment">/********************************************************************************************/</span></div>
<div class="line"><a name="l03461"></a><span class="lineno"><a class="line" href="_stream_native_8cpp.html#ad7b3f5076b555d0280ebac47d928f009"> 3461</a></span>&#160;<a class="code" href="_stream_native_8cpp.html#ac0de8e5ebdd5918f23e35b899691fbbe">RexxMethod1</a>(<a class="code" href="rexx_8h.html#a96e0cc5eda42aed364b05f3c493e07e8">RexxObjectPtr</a>, query_handle, <a class="code" href="oorexxapi_8h.html#a3b5f38e088a2ba7f412c33f6d97f852a">CSELF</a>, streamPtr)</div>
<div class="line"><a name="l03462"></a><span class="lineno"> 3462</span>&#160;{</div>
<div class="line"><a name="l03463"></a><span class="lineno"> 3463</span>&#160;    <a class="code" href="class_stream_info.html">StreamInfo</a> *stream_info = (<a class="code" href="class_stream_info.html">StreamInfo</a> *)streamPtr;</div>
<div class="line"><a name="l03464"></a><span class="lineno"> 3464</span>&#160;    stream_info-&gt;<a class="code" href="class_stream_info.html#a7bd9bdab0ad76acbdd5d0e020879b561">setContext</a>(context, context-&gt;NullString());</div>
<div class="line"><a name="l03465"></a><span class="lineno"> 3465</span>&#160;    <span class="keywordflow">return</span> stream_info-&gt;<a class="code" href="class_stream_info.html#abb78844cda9ce9df456f945c3715c501">queryHandle</a>();</div>
<div class="line"><a name="l03466"></a><span class="lineno"> 3466</span>&#160;}</div>
<div class="line"><a name="l03467"></a><span class="lineno"> 3467</span>&#160; </div>
<div class="line"><a name="l03468"></a><span class="lineno"> 3468</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l03469"></a><span class="lineno"> 3469</span>&#160;<span class="comment">/**</span></div>
<div class="line"><a name="l03470"></a><span class="lineno"> 3470</span>&#160;<span class="comment"> * Return the type of stream (persistent or transient).</span></div>
<div class="line"><a name="l03471"></a><span class="lineno"> 3471</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l03472"></a><span class="lineno"> 3472</span>&#160;<span class="comment"> * @return String value of the type.  Returns either &quot;PERSISTENT&quot;,</span></div>
<div class="line"><a name="l03473"></a><span class="lineno"> 3473</span>&#160;<span class="comment"> *         &quot;TRANSIENT&quot;, or &quot;UNKNOWN&quot;, if the stream is not open.</span></div>
<div class="line"><a name="l03474"></a><span class="lineno"> 3474</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l03475"></a><span class="lineno"><a class="line" href="class_stream_info.html#ab723138aeb3810a80d75735d00362b5c"> 3475</a></span>&#160;<span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="class_stream_info.html#ab723138aeb3810a80d75735d00362b5c">StreamInfo::getStreamType</a>()</div>
<div class="line"><a name="l03476"></a><span class="lineno"> 3476</span>&#160;{</div>
<div class="line"><a name="l03477"></a><span class="lineno"> 3477</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="class_stream_info.html#a69bc9580bb2e54426801fe6fca59c98e">isopen</a>)       <span class="comment">/* not open?                         */</span></div>
<div class="line"><a name="l03478"></a><span class="lineno"> 3478</span>&#160;    {</div>
<div class="line"><a name="l03479"></a><span class="lineno"> 3479</span>&#160;        <span class="keywordflow">return</span> <span class="stringliteral">&quot;UNKNOWN&quot;</span>;                 <span class="comment">/* don&#39;t know the type               */</span></div>
<div class="line"><a name="l03480"></a><span class="lineno"> 3480</span>&#160;    }</div>
<div class="line"><a name="l03481"></a><span class="lineno"> 3481</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<span class="keyword">transient</span>)</div>
<div class="line"><a name="l03482"></a><span class="lineno"> 3482</span>&#160;    {</div>
<div class="line"><a name="l03483"></a><span class="lineno"> 3483</span>&#160;        <span class="keywordflow">return</span> <span class="stringliteral">&quot;TRANSIENT&quot;</span>;               <span class="comment">/* return the transient type         */</span></div>
<div class="line"><a name="l03484"></a><span class="lineno"> 3484</span>&#160;    }</div>
<div class="line"><a name="l03485"></a><span class="lineno"> 3485</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l03486"></a><span class="lineno"> 3486</span>&#160;    {</div>
<div class="line"><a name="l03487"></a><span class="lineno"> 3487</span>&#160;        <span class="keywordflow">return</span> <span class="stringliteral">&quot;PERSISTENT&quot;</span>;              <span class="comment">/* this is a persistent stream       */</span></div>
<div class="line"><a name="l03488"></a><span class="lineno"> 3488</span>&#160;    }</div>
<div class="line"><a name="l03489"></a><span class="lineno"> 3489</span>&#160;}</div>
<div class="line"><a name="l03490"></a><span class="lineno"> 3490</span>&#160; </div>
<div class="line"><a name="l03491"></a><span class="lineno"> 3491</span>&#160;<span class="comment">/********************************************************************************************/</span></div>
<div class="line"><a name="l03492"></a><span class="lineno"> 3492</span>&#160;<span class="comment">/* query_streamtype                                                                         */</span></div>
<div class="line"><a name="l03493"></a><span class="lineno"> 3493</span>&#160;<span class="comment">/********************************************************************************************/</span></div>
<div class="line"><a name="l03494"></a><span class="lineno"><a class="line" href="_stream_native_8cpp.html#a9a9e2aa3cd50b5a074bd71a30faad08f"> 3494</a></span>&#160;<a class="code" href="_stream_native_8cpp.html#ac0de8e5ebdd5918f23e35b899691fbbe">RexxMethod1</a>(<a class="code" href="rexx_8h.html#a581e376dc8d3b9132e29014c896b9e70">CSTRING</a>, query_streamtype, <a class="code" href="oorexxapi_8h.html#a3b5f38e088a2ba7f412c33f6d97f852a">CSELF</a>, streamPtr)</div>
<div class="line"><a name="l03495"></a><span class="lineno"> 3495</span>&#160;{</div>
<div class="line"><a name="l03496"></a><span class="lineno"> 3496</span>&#160;    <a class="code" href="class_stream_info.html">StreamInfo</a> *stream_info = (<a class="code" href="class_stream_info.html">StreamInfo</a> *)streamPtr;</div>
<div class="line"><a name="l03497"></a><span class="lineno"> 3497</span>&#160; </div>
<div class="line"><a name="l03498"></a><span class="lineno"> 3498</span>&#160;    <span class="keywordflow">return</span> stream_info-&gt;<a class="code" href="class_stream_info.html#ab723138aeb3810a80d75735d00362b5c">getStreamType</a>();</div>
<div class="line"><a name="l03499"></a><span class="lineno"> 3499</span>&#160;}</div>
<div class="line"><a name="l03500"></a><span class="lineno"> 3500</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l03501"></a><span class="lineno"> 3501</span>&#160;<span class="comment">/**</span></div>
<div class="line"><a name="l03502"></a><span class="lineno"> 3502</span>&#160;<span class="comment"> * Get the size of the stream, regardless of whether it is</span></div>
<div class="line"><a name="l03503"></a><span class="lineno"> 3503</span>&#160;<span class="comment"> * open or not.</span></div>
<div class="line"><a name="l03504"></a><span class="lineno"> 3504</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l03505"></a><span class="lineno"> 3505</span>&#160;<span class="comment"> * @return The int64_t size of the stream.  Devices return a 0 size.</span></div>
<div class="line"><a name="l03506"></a><span class="lineno"> 3506</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l03507"></a><span class="lineno"><a class="line" href="class_stream_info.html#aaf4a2195203003e04c8a7ed424c53bb0"> 3507</a></span>&#160;<a class="code" href="rexx_8h.html#a96e0cc5eda42aed364b05f3c493e07e8">RexxObjectPtr</a> <a class="code" href="class_stream_info.html#aaf4a2195203003e04c8a7ed424c53bb0">StreamInfo::getStreamSize</a>()</div>
<div class="line"><a name="l03508"></a><span class="lineno"> 3508</span>&#160;{</div>
<div class="line"><a name="l03509"></a><span class="lineno"> 3509</span>&#160;    <span class="comment">// if we&#39;re open, return the current fstat() information,</span></div>
<div class="line"><a name="l03510"></a><span class="lineno"> 3510</span>&#160;    <span class="comment">// otherwise, we do this without a handle</span></div>
<div class="line"><a name="l03511"></a><span class="lineno"> 3511</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="class_stream_info.html#a69bc9580bb2e54426801fe6fca59c98e">isopen</a>)</div>
<div class="line"><a name="l03512"></a><span class="lineno"> 3512</span>&#160;    {</div>
<div class="line"><a name="l03513"></a><span class="lineno"> 3513</span>&#160;        <a class="code" href="windows_2rexxapitypes_8h.html#a414156feea104f8f75b4ed9e3121b2f6">int64_t</a> streamsize;</div>
<div class="line"><a name="l03514"></a><span class="lineno"> 3514</span>&#160;        <a class="code" href="class_stream_info.html#a35caea85b14b8f2b8b734c3b51eb7f4b">fileInfo</a>.<a class="code" href="class_sys_file.html#a4b8eb988e7662d8500b4a7ce31cc78cd">getSize</a>(streamsize);</div>
<div class="line"><a name="l03515"></a><span class="lineno"> 3515</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="class_stream_info.html#a6a5404d4b7ece722baef78b65cab52d2">context</a>-&gt;Int64ToObject(streamsize);</div>
<div class="line"><a name="l03516"></a><span class="lineno"> 3516</span>&#160;    }</div>
<div class="line"><a name="l03517"></a><span class="lineno"> 3517</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l03518"></a><span class="lineno"> 3518</span>&#160;    {</div>
<div class="line"><a name="l03519"></a><span class="lineno"> 3519</span>&#160;        <a class="code" href="class_stream_info.html#a031ca794b8ef189757f1e034e8d0d122">resolveStreamName</a>();</div>
<div class="line"><a name="l03520"></a><span class="lineno"> 3520</span>&#160;        <a class="code" href="windows_2rexxapitypes_8h.html#a414156feea104f8f75b4ed9e3121b2f6">int64_t</a> streamsize;</div>
<div class="line"><a name="l03521"></a><span class="lineno"> 3521</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="class_stream_info.html#a35caea85b14b8f2b8b734c3b51eb7f4b">fileInfo</a>.<a class="code" href="class_sys_file.html#a4b8eb988e7662d8500b4a7ce31cc78cd">getSize</a>(<a class="code" href="class_stream_info.html#aa1824fb879c522d827a4c16dd2ff5ae4">qualified_name</a>, streamsize))</div>
<div class="line"><a name="l03522"></a><span class="lineno"> 3522</span>&#160;        {</div>
<div class="line"><a name="l03523"></a><span class="lineno"> 3523</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="class_stream_info.html#a6a5404d4b7ece722baef78b65cab52d2">context</a>-&gt;Int64ToObject(streamsize);</div>
<div class="line"><a name="l03524"></a><span class="lineno"> 3524</span>&#160;        }</div>
<div class="line"><a name="l03525"></a><span class="lineno"> 3525</span>&#160;        <span class="comment">// return a null string if this doesn&#39;t exist</span></div>
<div class="line"><a name="l03526"></a><span class="lineno"> 3526</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="class_stream_info.html#a6a5404d4b7ece722baef78b65cab52d2">context</a>-&gt;NullString();</div>
<div class="line"><a name="l03527"></a><span class="lineno"> 3527</span>&#160;    }</div>
<div class="line"><a name="l03528"></a><span class="lineno"> 3528</span>&#160;}</div>
<div class="line"><a name="l03529"></a><span class="lineno"> 3529</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l03530"></a><span class="lineno"> 3530</span>&#160;<span class="comment">/**</span></div>
<div class="line"><a name="l03531"></a><span class="lineno"> 3531</span>&#160;<span class="comment"> * Get the time stamp of the stream (in character form),</span></div>
<div class="line"><a name="l03532"></a><span class="lineno"> 3532</span>&#160;<span class="comment"> * regardless of whether it is open or not.</span></div>
<div class="line"><a name="l03533"></a><span class="lineno"> 3533</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l03534"></a><span class="lineno"> 3534</span>&#160;<span class="comment"> * @return A character string time stamp for the stream.  Returns &quot;&quot;</span></div>
<div class="line"><a name="l03535"></a><span class="lineno"> 3535</span>&#160;<span class="comment"> *         for streams where a time stamp is meaningless.</span></div>
<div class="line"><a name="l03536"></a><span class="lineno"> 3536</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l03537"></a><span class="lineno"><a class="line" href="class_stream_info.html#a04a7e4a108163b53f75a674e5249166b"> 3537</a></span>&#160;<span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="class_stream_info.html#a04a7e4a108163b53f75a674e5249166b">StreamInfo::getTimeStamp</a>()</div>
<div class="line"><a name="l03538"></a><span class="lineno"> 3538</span>&#160;{</div>
<div class="line"><a name="l03539"></a><span class="lineno"> 3539</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">char</span> *time;</div>
<div class="line"><a name="l03540"></a><span class="lineno"> 3540</span>&#160;    <span class="comment">// if we&#39;re open, return the current fstat() information,</span></div>
<div class="line"><a name="l03541"></a><span class="lineno"> 3541</span>&#160;    <span class="comment">// otherwise, we do this without a handle</span></div>
<div class="line"><a name="l03542"></a><span class="lineno"> 3542</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="class_stream_info.html#a69bc9580bb2e54426801fe6fca59c98e">isopen</a>)</div>
<div class="line"><a name="l03543"></a><span class="lineno"> 3543</span>&#160;    {</div>
<div class="line"><a name="l03544"></a><span class="lineno"> 3544</span>&#160;        <a class="code" href="class_stream_info.html#a35caea85b14b8f2b8b734c3b51eb7f4b">fileInfo</a>.<a class="code" href="class_sys_file.html#aad4feede6e1b0d2196132753bd917f54">getTimeStamp</a>(time);</div>
<div class="line"><a name="l03545"></a><span class="lineno"> 3545</span>&#160;        <span class="keywordflow">return</span> time;</div>
<div class="line"><a name="l03546"></a><span class="lineno"> 3546</span>&#160;    }</div>
<div class="line"><a name="l03547"></a><span class="lineno"> 3547</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l03548"></a><span class="lineno"> 3548</span>&#160;    {</div>
<div class="line"><a name="l03549"></a><span class="lineno"> 3549</span>&#160;        <a class="code" href="class_stream_info.html#a031ca794b8ef189757f1e034e8d0d122">resolveStreamName</a>();</div>
<div class="line"><a name="l03550"></a><span class="lineno"> 3550</span>&#160;        <a class="code" href="class_stream_info.html#a35caea85b14b8f2b8b734c3b51eb7f4b">fileInfo</a>.<a class="code" href="class_sys_file.html#aad4feede6e1b0d2196132753bd917f54">getTimeStamp</a>(<a class="code" href="class_stream_info.html#aa1824fb879c522d827a4c16dd2ff5ae4">qualified_name</a>, time);</div>
<div class="line"><a name="l03551"></a><span class="lineno"> 3551</span>&#160;        <span class="keywordflow">return</span> time;</div>
<div class="line"><a name="l03552"></a><span class="lineno"> 3552</span>&#160;    }</div>
<div class="line"><a name="l03553"></a><span class="lineno"> 3553</span>&#160;}</div>
<div class="line"><a name="l03554"></a><span class="lineno"> 3554</span>&#160; </div>
<div class="line"><a name="l03555"></a><span class="lineno"> 3555</span>&#160; </div>
<div class="line"><a name="l03556"></a><span class="lineno"> 3556</span>&#160;<span class="comment">/********************************************************************************************/</span></div>
<div class="line"><a name="l03557"></a><span class="lineno"> 3557</span>&#160;<span class="comment">/* query_size                                                                               */</span></div>
<div class="line"><a name="l03558"></a><span class="lineno"> 3558</span>&#160;<span class="comment">/********************************************************************************************/</span></div>
<div class="line"><a name="l03559"></a><span class="lineno"><a class="line" href="_stream_native_8cpp.html#a826a137393a77a66dc12c975afb40237"> 3559</a></span>&#160;<a class="code" href="_stream_native_8cpp.html#ac0de8e5ebdd5918f23e35b899691fbbe">RexxMethod1</a>(<a class="code" href="rexx_8h.html#a96e0cc5eda42aed364b05f3c493e07e8">RexxObjectPtr</a>, query_size, <a class="code" href="oorexxapi_8h.html#a3b5f38e088a2ba7f412c33f6d97f852a">CSELF</a>, streamPtr)</div>
<div class="line"><a name="l03560"></a><span class="lineno"> 3560</span>&#160;{</div>
<div class="line"><a name="l03561"></a><span class="lineno"> 3561</span>&#160;    <a class="code" href="class_stream_info.html">StreamInfo</a> *stream_info = (<a class="code" href="class_stream_info.html">StreamInfo</a> *)streamPtr;</div>
<div class="line"><a name="l03562"></a><span class="lineno"> 3562</span>&#160;    stream_info-&gt;<a class="code" href="class_stream_info.html#a7bd9bdab0ad76acbdd5d0e020879b561">setContext</a>(context, context-&gt;NullString());</div>
<div class="line"><a name="l03563"></a><span class="lineno"> 3563</span>&#160; </div>
<div class="line"><a name="l03564"></a><span class="lineno"> 3564</span>&#160;    <span class="keywordflow">return</span> stream_info-&gt;<a class="code" href="class_stream_info.html#aaf4a2195203003e04c8a7ed424c53bb0">getStreamSize</a>();</div>
<div class="line"><a name="l03565"></a><span class="lineno"> 3565</span>&#160;}</div>
<div class="line"><a name="l03566"></a><span class="lineno"> 3566</span>&#160; </div>
<div class="line"><a name="l03567"></a><span class="lineno"> 3567</span>&#160; </div>
<div class="line"><a name="l03568"></a><span class="lineno"> 3568</span>&#160;<span class="comment">/********************************************************************************************/</span></div>
<div class="line"><a name="l03569"></a><span class="lineno"> 3569</span>&#160;<span class="comment">/* query_time                                                                               */</span></div>
<div class="line"><a name="l03570"></a><span class="lineno"> 3570</span>&#160;<span class="comment">/********************************************************************************************/</span></div>
<div class="line"><a name="l03571"></a><span class="lineno"><a class="line" href="_stream_native_8cpp.html#a87cd3fec865fd1d60bb6e93bd9ff880c"> 3571</a></span>&#160;<a class="code" href="_stream_native_8cpp.html#ac0de8e5ebdd5918f23e35b899691fbbe">RexxMethod1</a>(<a class="code" href="rexx_8h.html#a581e376dc8d3b9132e29014c896b9e70">CSTRING</a>, query_time, <a class="code" href="oorexxapi_8h.html#a3b5f38e088a2ba7f412c33f6d97f852a">CSELF</a>, streamPtr)</div>
<div class="line"><a name="l03572"></a><span class="lineno"> 3572</span>&#160;{</div>
<div class="line"><a name="l03573"></a><span class="lineno"> 3573</span>&#160;    <a class="code" href="class_stream_info.html">StreamInfo</a> *stream_info = (<a class="code" href="class_stream_info.html">StreamInfo</a> *)streamPtr;</div>
<div class="line"><a name="l03574"></a><span class="lineno"> 3574</span>&#160;    stream_info-&gt;<a class="code" href="class_stream_info.html#a7bd9bdab0ad76acbdd5d0e020879b561">setContext</a>(context, context-&gt;NullString());</div>
<div class="line"><a name="l03575"></a><span class="lineno"> 3575</span>&#160; </div>
<div class="line"><a name="l03576"></a><span class="lineno"> 3576</span>&#160;    <span class="keywordflow">return</span> stream_info-&gt;<a class="code" href="class_stream_info.html#a04a7e4a108163b53f75a674e5249166b">getTimeStamp</a>();</div>
<div class="line"><a name="l03577"></a><span class="lineno"> 3577</span>&#160;}</div>
<div class="line"><a name="l03578"></a><span class="lineno"> 3578</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l03579"></a><span class="lineno"> 3579</span>&#160;<span class="comment">/**</span></div>
<div class="line"><a name="l03580"></a><span class="lineno"> 3580</span>&#160;<span class="comment"> * Get the stream state as a string.  This value is a constant,</span></div>
<div class="line"><a name="l03581"></a><span class="lineno"> 3581</span>&#160;<span class="comment"> * and does not contain any addtional information.</span></div>
<div class="line"><a name="l03582"></a><span class="lineno"> 3582</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l03583"></a><span class="lineno"> 3583</span>&#160;<span class="comment"> * @return A string token with the stream state.</span></div>
<div class="line"><a name="l03584"></a><span class="lineno"> 3584</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l03585"></a><span class="lineno"><a class="line" href="class_stream_info.html#ad74fbaf46efe005989b42ab55ab738de"> 3585</a></span>&#160;<span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="class_stream_info.html#ad74fbaf46efe005989b42ab55ab738de">StreamInfo::getState</a>()</div>
<div class="line"><a name="l03586"></a><span class="lineno"> 3586</span>&#160;{</div>
<div class="line"><a name="l03587"></a><span class="lineno"> 3587</span>&#160;    <span class="keywordflow">switch</span> (<a class="code" href="class_stream_info.html#ab0c6d380b9704b6e305f881fc9fa1571">state</a>)</div>
<div class="line"><a name="l03588"></a><span class="lineno"> 3588</span>&#160;    {        <span class="comment">/* process the different states      */</span></div>
<div class="line"><a name="l03589"></a><span class="lineno"> 3589</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="class_stream_info.html#af8efe21cc9cb6d8da73907c4b6f573f7ac1d3d26e8755c0a3317ad47740f8f0a5">StreamUnknown</a>:                <span class="comment">/* unknown stream status             */</span></div>
<div class="line"><a name="l03590"></a><span class="lineno"> 3590</span>&#160;            <span class="keywordflow">return</span> <span class="stringliteral">&quot;UNKNOWN&quot;</span>;</div>
<div class="line"><a name="l03591"></a><span class="lineno"> 3591</span>&#160; </div>
<div class="line"><a name="l03592"></a><span class="lineno"> 3592</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="class_stream_info.html#af8efe21cc9cb6d8da73907c4b6f573f7a1583efa03c35219696cb030c3c3d6ede">StreamNotready</a>:               <span class="comment">/* both notready and an eof condition*/</span></div>
<div class="line"><a name="l03593"></a><span class="lineno"> 3593</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="class_stream_info.html#af8efe21cc9cb6d8da73907c4b6f573f7ac1ad97d4ba149f0a0c0074996bcb41e8">StreamEof</a>:                    <span class="comment">/* return the same thing             */</span></div>
<div class="line"><a name="l03594"></a><span class="lineno"> 3594</span>&#160;            <span class="keywordflow">return</span> <span class="stringliteral">&quot;NOTREADY&quot;</span>;</div>
<div class="line"><a name="l03595"></a><span class="lineno"> 3595</span>&#160; </div>
<div class="line"><a name="l03596"></a><span class="lineno"> 3596</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="class_stream_info.html#af8efe21cc9cb6d8da73907c4b6f573f7a5f13f69e16d45d7e37f1c97a86c5fa1f">StreamError</a>:                  <span class="comment">/* had a stream error                */</span></div>
<div class="line"><a name="l03597"></a><span class="lineno"> 3597</span>&#160;            <span class="keywordflow">return</span> <span class="stringliteral">&quot;ERROR&quot;</span>;</div>
<div class="line"><a name="l03598"></a><span class="lineno"> 3598</span>&#160; </div>
<div class="line"><a name="l03599"></a><span class="lineno"> 3599</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="class_stream_info.html#af8efe21cc9cb6d8da73907c4b6f573f7a4f89da370429a424003f1dc56d72526e">StreamReady</a>:                  <span class="comment">/* stream is ready to roll           */</span></div>
<div class="line"><a name="l03600"></a><span class="lineno"> 3600</span>&#160;            <span class="keywordflow">return</span> <span class="stringliteral">&quot;READY&quot;</span>;</div>
<div class="line"><a name="l03601"></a><span class="lineno"> 3601</span>&#160;    }</div>
<div class="line"><a name="l03602"></a><span class="lineno"> 3602</span>&#160;    <span class="keywordflow">return</span> <span class="stringliteral">&quot;&quot;</span>;</div>
<div class="line"><a name="l03603"></a><span class="lineno"> 3603</span>&#160;}</div>
<div class="line"><a name="l03604"></a><span class="lineno"> 3604</span>&#160; </div>
<div class="line"><a name="l03605"></a><span class="lineno"> 3605</span>&#160;<span class="comment">/********************************************************************************************/</span></div>
<div class="line"><a name="l03606"></a><span class="lineno"> 3606</span>&#160;<span class="comment">/* stream_state -- return state of the stream                                               */</span></div>
<div class="line"><a name="l03607"></a><span class="lineno"> 3607</span>&#160;<span class="comment">/********************************************************************************************/</span></div>
<div class="line"><a name="l03608"></a><span class="lineno"><a class="line" href="_stream_native_8cpp.html#ad4d2326a1b7b0568e7991abb93894a86"> 3608</a></span>&#160;<a class="code" href="_stream_native_8cpp.html#ac0de8e5ebdd5918f23e35b899691fbbe">RexxMethod1</a>(<a class="code" href="rexx_8h.html#a581e376dc8d3b9132e29014c896b9e70">CSTRING</a>, stream_state, <a class="code" href="oorexxapi_8h.html#a3b5f38e088a2ba7f412c33f6d97f852a">CSELF</a>, streamPtr)</div>
<div class="line"><a name="l03609"></a><span class="lineno"> 3609</span>&#160;{</div>
<div class="line"><a name="l03610"></a><span class="lineno"> 3610</span>&#160;    <a class="code" href="class_stream_info.html">StreamInfo</a> *stream_info = (<a class="code" href="class_stream_info.html">StreamInfo</a> *)streamPtr;</div>
<div class="line"><a name="l03611"></a><span class="lineno"> 3611</span>&#160;    stream_info-&gt;<a class="code" href="class_stream_info.html#a7bd9bdab0ad76acbdd5d0e020879b561">setContext</a>(context, context-&gt;NullString());</div>
<div class="line"><a name="l03612"></a><span class="lineno"> 3612</span>&#160; </div>
<div class="line"><a name="l03613"></a><span class="lineno"> 3613</span>&#160;    <span class="keywordflow">return</span> stream_info-&gt;<a class="code" href="class_stream_info.html#ad74fbaf46efe005989b42ab55ab738de">getState</a>();</div>
<div class="line"><a name="l03614"></a><span class="lineno"> 3614</span>&#160;}</div>
<div class="line"><a name="l03615"></a><span class="lineno"> 3615</span>&#160; </div>
<div class="line"><a name="l03616"></a><span class="lineno"> 3616</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l03617"></a><span class="lineno"> 3617</span>&#160;<span class="comment">/**</span></div>
<div class="line"><a name="l03618"></a><span class="lineno"> 3618</span>&#160;<span class="comment"> * Retrieve a description string for the stream.</span></div>
<div class="line"><a name="l03619"></a><span class="lineno"> 3619</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l03620"></a><span class="lineno"> 3620</span>&#160;<span class="comment"> * @return A string describing the stream state and error information.</span></div>
<div class="line"><a name="l03621"></a><span class="lineno"> 3621</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l03622"></a><span class="lineno"><a class="line" href="class_stream_info.html#aacc914656e98046777c98c4368e20bda"> 3622</a></span>&#160;<a class="code" href="rexx_8h.html#a64dfe004825692637e2075467179fcd9">RexxStringObject</a> <a class="code" href="class_stream_info.html#aacc914656e98046777c98c4368e20bda">StreamInfo::getDescription</a>()</div>
<div class="line"><a name="l03623"></a><span class="lineno"> 3623</span>&#160;{</div>
<div class="line"><a name="l03624"></a><span class="lineno"> 3624</span>&#160;    <span class="keywordtype">char</span> <a class="code" href="unix_2rxqueue_8cpp.html#a2edfdad12ca19a7c81c5cf054cd2a12f">work</a>[100];</div>
<div class="line"><a name="l03625"></a><span class="lineno"> 3625</span>&#160; </div>
<div class="line"><a name="l03626"></a><span class="lineno"> 3626</span>&#160;    <span class="keywordflow">switch</span> (<a class="code" href="class_stream_info.html#ab0c6d380b9704b6e305f881fc9fa1571">state</a>) {        <span class="comment">/* process the different states      */</span></div>
<div class="line"><a name="l03627"></a><span class="lineno"> 3627</span>&#160; </div>
<div class="line"><a name="l03628"></a><span class="lineno"> 3628</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="class_stream_info.html#af8efe21cc9cb6d8da73907c4b6f573f7ac1d3d26e8755c0a3317ad47740f8f0a5">StreamUnknown</a>:                <span class="comment">/* unknown stream status             */</span></div>
<div class="line"><a name="l03629"></a><span class="lineno"> 3629</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="class_stream_info.html#a6a5404d4b7ece722baef78b65cab52d2">context</a>-&gt;NewStringFromAsciiz(<span class="stringliteral">&quot;UNKNOWN:&quot;</span>);</div>
<div class="line"><a name="l03630"></a><span class="lineno"> 3630</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l03631"></a><span class="lineno"> 3631</span>&#160; </div>
<div class="line"><a name="l03632"></a><span class="lineno"> 3632</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="class_stream_info.html#af8efe21cc9cb6d8da73907c4b6f573f7ac1ad97d4ba149f0a0c0074996bcb41e8">StreamEof</a>:                    <span class="comment">/* had an end-of-file condition      */</span></div>
<div class="line"><a name="l03633"></a><span class="lineno"> 3633</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="class_stream_info.html#a6a5404d4b7ece722baef78b65cab52d2">context</a>-&gt;NewStringFromAsciiz(<span class="stringliteral">&quot;NOTREADY:EOF&quot;</span>);</div>
<div class="line"><a name="l03634"></a><span class="lineno"> 3634</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l03635"></a><span class="lineno"> 3635</span>&#160; </div>
<div class="line"><a name="l03636"></a><span class="lineno"> 3636</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="class_stream_info.html#af8efe21cc9cb6d8da73907c4b6f573f7a1583efa03c35219696cb030c3c3d6ede">StreamNotready</a>:               <span class="comment">/* had some sort of notready         */</span></div>
<div class="line"><a name="l03637"></a><span class="lineno"> 3637</span>&#160;        {</div>
<div class="line"><a name="l03638"></a><span class="lineno"> 3638</span>&#160;            <span class="keyword">const</span> <span class="keywordtype">char</span> *errorString = NULL;</div>
<div class="line"><a name="l03639"></a><span class="lineno"> 3639</span>&#160; </div>
<div class="line"><a name="l03640"></a><span class="lineno"> 3640</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="class_stream_info.html#aa718ca3a7bf31a0d6a490db4ce3d4ef0">errorInfo</a> != 0)</div>
<div class="line"><a name="l03641"></a><span class="lineno"> 3641</span>&#160;            {</div>
<div class="line"><a name="l03642"></a><span class="lineno"> 3642</span>&#160;                errorString = strerror(<a class="code" href="class_stream_info.html#aa718ca3a7bf31a0d6a490db4ce3d4ef0">errorInfo</a>);</div>
<div class="line"><a name="l03643"></a><span class="lineno"> 3643</span>&#160;            }</div>
<div class="line"><a name="l03644"></a><span class="lineno"> 3644</span>&#160; </div>
<div class="line"><a name="l03645"></a><span class="lineno"> 3645</span>&#160;            <span class="keywordflow">if</span> (errorString != NULL)</div>
<div class="line"><a name="l03646"></a><span class="lineno"> 3646</span>&#160;            {</div>
<div class="line"><a name="l03647"></a><span class="lineno"> 3647</span>&#160;                                                 <span class="comment">/* format the result string          */</span></div>
<div class="line"><a name="l03648"></a><span class="lineno"> 3648</span>&#160;                sprintf(<a class="code" href="unix_2rxqueue_8cpp.html#a2edfdad12ca19a7c81c5cf054cd2a12f">work</a>, <span class="stringliteral">&quot;NOTREADY:%d %s&quot;</span>, <a class="code" href="class_stream_info.html#aa718ca3a7bf31a0d6a490db4ce3d4ef0">errorInfo</a>, errorString);</div>
<div class="line"><a name="l03649"></a><span class="lineno"> 3649</span>&#160;            }</div>
<div class="line"><a name="l03650"></a><span class="lineno"> 3650</span>&#160;            <span class="keywordflow">else</span></div>
<div class="line"><a name="l03651"></a><span class="lineno"> 3651</span>&#160;            {</div>
<div class="line"><a name="l03652"></a><span class="lineno"> 3652</span>&#160;                                                 <span class="comment">/* format the result string          */</span></div>
<div class="line"><a name="l03653"></a><span class="lineno"> 3653</span>&#160;                sprintf(<a class="code" href="unix_2rxqueue_8cpp.html#a2edfdad12ca19a7c81c5cf054cd2a12f">work</a>, <span class="stringliteral">&quot;NOTREADY:%d&quot;</span>, <a class="code" href="class_stream_info.html#aa718ca3a7bf31a0d6a490db4ce3d4ef0">errorInfo</a>);</div>
<div class="line"><a name="l03654"></a><span class="lineno"> 3654</span>&#160; </div>
<div class="line"><a name="l03655"></a><span class="lineno"> 3655</span>&#160;            }</div>
<div class="line"><a name="l03656"></a><span class="lineno"> 3656</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="class_stream_info.html#a6a5404d4b7ece722baef78b65cab52d2">context</a>-&gt;NewStringFromAsciiz(<a class="code" href="unix_2rxqueue_8cpp.html#a2edfdad12ca19a7c81c5cf054cd2a12f">work</a>);</div>
<div class="line"><a name="l03657"></a><span class="lineno"> 3657</span>&#160;        }</div>
<div class="line"><a name="l03658"></a><span class="lineno"> 3658</span>&#160; </div>
<div class="line"><a name="l03659"></a><span class="lineno"> 3659</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="class_stream_info.html#af8efe21cc9cb6d8da73907c4b6f573f7a5f13f69e16d45d7e37f1c97a86c5fa1f">StreamError</a>:                  <span class="comment">/* had a stream error                */</span></div>
<div class="line"><a name="l03660"></a><span class="lineno"> 3660</span>&#160;        {</div>
<div class="line"><a name="l03661"></a><span class="lineno"> 3661</span>&#160;            <span class="keyword">const</span> <span class="keywordtype">char</span> *errorString = NULL;</div>
<div class="line"><a name="l03662"></a><span class="lineno"> 3662</span>&#160; </div>
<div class="line"><a name="l03663"></a><span class="lineno"> 3663</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="class_stream_info.html#aa718ca3a7bf31a0d6a490db4ce3d4ef0">errorInfo</a> != 0)</div>
<div class="line"><a name="l03664"></a><span class="lineno"> 3664</span>&#160;            {</div>
<div class="line"><a name="l03665"></a><span class="lineno"> 3665</span>&#160;                errorString = strerror(<a class="code" href="class_stream_info.html#aa718ca3a7bf31a0d6a490db4ce3d4ef0">errorInfo</a>);</div>
<div class="line"><a name="l03666"></a><span class="lineno"> 3666</span>&#160;            }</div>
<div class="line"><a name="l03667"></a><span class="lineno"> 3667</span>&#160;            <span class="keywordflow">if</span> (errorString != NULL)</div>
<div class="line"><a name="l03668"></a><span class="lineno"> 3668</span>&#160;            {</div>
<div class="line"><a name="l03669"></a><span class="lineno"> 3669</span>&#160;                                                 <span class="comment">/* format the result string          */</span></div>
<div class="line"><a name="l03670"></a><span class="lineno"> 3670</span>&#160;                sprintf(<a class="code" href="unix_2rxqueue_8cpp.html#a2edfdad12ca19a7c81c5cf054cd2a12f">work</a>, <span class="stringliteral">&quot;ERROR:%d %s&quot;</span>, <a class="code" href="class_stream_info.html#aa718ca3a7bf31a0d6a490db4ce3d4ef0">errorInfo</a>, errorString);</div>
<div class="line"><a name="l03671"></a><span class="lineno"> 3671</span>&#160;            }</div>
<div class="line"><a name="l03672"></a><span class="lineno"> 3672</span>&#160;            <span class="keywordflow">else</span></div>
<div class="line"><a name="l03673"></a><span class="lineno"> 3673</span>&#160;            {</div>
<div class="line"><a name="l03674"></a><span class="lineno"> 3674</span>&#160;                                                 <span class="comment">/* format the result string          */</span></div>
<div class="line"><a name="l03675"></a><span class="lineno"> 3675</span>&#160;                sprintf(<a class="code" href="unix_2rxqueue_8cpp.html#a2edfdad12ca19a7c81c5cf054cd2a12f">work</a>, <span class="stringliteral">&quot;ERROR:%d&quot;</span>, <a class="code" href="class_stream_info.html#aa718ca3a7bf31a0d6a490db4ce3d4ef0">errorInfo</a>);</div>
<div class="line"><a name="l03676"></a><span class="lineno"> 3676</span>&#160; </div>
<div class="line"><a name="l03677"></a><span class="lineno"> 3677</span>&#160;            }</div>
<div class="line"><a name="l03678"></a><span class="lineno"> 3678</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="class_stream_info.html#a6a5404d4b7ece722baef78b65cab52d2">context</a>-&gt;NewStringFromAsciiz(<a class="code" href="unix_2rxqueue_8cpp.html#a2edfdad12ca19a7c81c5cf054cd2a12f">work</a>);</div>
<div class="line"><a name="l03679"></a><span class="lineno"> 3679</span>&#160;        }</div>
<div class="line"><a name="l03680"></a><span class="lineno"> 3680</span>&#160; </div>
<div class="line"><a name="l03681"></a><span class="lineno"> 3681</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="class_stream_info.html#af8efe21cc9cb6d8da73907c4b6f573f7a4f89da370429a424003f1dc56d72526e">StreamReady</a>:                  <span class="comment">/* stream is ready to roll           */</span></div>
<div class="line"><a name="l03682"></a><span class="lineno"> 3682</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="class_stream_info.html#a6a5404d4b7ece722baef78b65cab52d2">context</a>-&gt;NewStringFromAsciiz(<span class="stringliteral">&quot;READY:&quot;</span>);</div>
<div class="line"><a name="l03683"></a><span class="lineno"> 3683</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l03684"></a><span class="lineno"> 3684</span>&#160;    }</div>
<div class="line"><a name="l03685"></a><span class="lineno"> 3685</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="rexx_8h.html#a9a119fa1e31a4af78dee3c12225b240a">NULLOBJECT</a>;</div>
<div class="line"><a name="l03686"></a><span class="lineno"> 3686</span>&#160;}</div>
<div class="line"><a name="l03687"></a><span class="lineno"> 3687</span>&#160; </div>
<div class="line"><a name="l03688"></a><span class="lineno"> 3688</span>&#160;<span class="comment">/********************************************************************************************/</span></div>
<div class="line"><a name="l03689"></a><span class="lineno"> 3689</span>&#160;<span class="comment">/* stream_description -- return description of the stream                                   */</span></div>
<div class="line"><a name="l03690"></a><span class="lineno"> 3690</span>&#160;<span class="comment">/********************************************************************************************/</span></div>
<div class="line"><a name="l03691"></a><span class="lineno"> 3691</span>&#160; </div>
<div class="line"><a name="l03692"></a><span class="lineno"><a class="line" href="_stream_native_8cpp.html#a439f02bf9b409392678459844156889e"> 3692</a></span>&#160;<a class="code" href="_stream_native_8cpp.html#ac0de8e5ebdd5918f23e35b899691fbbe">RexxMethod1</a>(<a class="code" href="rexx_8h.html#a64dfe004825692637e2075467179fcd9">RexxStringObject</a>, stream_description, <a class="code" href="oorexxapi_8h.html#a3b5f38e088a2ba7f412c33f6d97f852a">CSELF</a>, streamPtr)</div>
<div class="line"><a name="l03693"></a><span class="lineno"> 3693</span>&#160;{</div>
<div class="line"><a name="l03694"></a><span class="lineno"> 3694</span>&#160;    <a class="code" href="class_stream_info.html">StreamInfo</a> *stream_info = (<a class="code" href="class_stream_info.html">StreamInfo</a> *)streamPtr;</div>
<div class="line"><a name="l03695"></a><span class="lineno"> 3695</span>&#160;    stream_info-&gt;<a class="code" href="class_stream_info.html#a7bd9bdab0ad76acbdd5d0e020879b561">setContext</a>(context, context-&gt;NullString());</div>
<div class="line"><a name="l03696"></a><span class="lineno"> 3696</span>&#160; </div>
<div class="line"><a name="l03697"></a><span class="lineno"> 3697</span>&#160;    <span class="keywordflow">return</span> stream_info-&gt;<a class="code" href="class_stream_info.html#aacc914656e98046777c98c4368e20bda">getDescription</a>();</div>
<div class="line"><a name="l03698"></a><span class="lineno"> 3698</span>&#160;}</div>
<div class="line"><a name="l03699"></a><span class="lineno"> 3699</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l03700"></a><span class="lineno"> 3700</span>&#160;<span class="comment">/**</span></div>
<div class="line"><a name="l03701"></a><span class="lineno"> 3701</span>&#160;<span class="comment"> * Constructor for a StreamInfo object.</span></div>
<div class="line"><a name="l03702"></a><span class="lineno"> 3702</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l03703"></a><span class="lineno"> 3703</span>&#160;<span class="comment"> * @param s         The Stream object this is attached to.</span></div>
<div class="line"><a name="l03704"></a><span class="lineno"> 3704</span>&#160;<span class="comment"> * @param inputName The initial input name specified on the new call.</span></div>
<div class="line"><a name="l03705"></a><span class="lineno"> 3705</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l03706"></a><span class="lineno"><a class="line" href="class_stream_info.html#a31518d7918f85c728f1355d236d7866f"> 3706</a></span>&#160;<a class="code" href="class_stream_info.html#a31518d7918f85c728f1355d236d7866f">StreamInfo::StreamInfo</a>(<a class="code" href="rexx_8h.html#a96e0cc5eda42aed364b05f3c493e07e8">RexxObjectPtr</a> s, <span class="keyword">const</span> <span class="keywordtype">char</span> *inputName)</div>
<div class="line"><a name="l03707"></a><span class="lineno"> 3707</span>&#160;{</div>
<div class="line"><a name="l03708"></a><span class="lineno"> 3708</span>&#160;    <span class="keyword">self</span> = s;</div>
<div class="line"><a name="l03709"></a><span class="lineno"> 3709</span>&#160; </div>
<div class="line"><a name="l03710"></a><span class="lineno"> 3710</span>&#160;    <span class="comment">// buffer needs to be allocated</span></div>
<div class="line"><a name="l03711"></a><span class="lineno"> 3711</span>&#160;    <a class="code" href="class_stream_info.html#ad2b1b1271c87dde90e1f0398a14e680c">bufferAddress</a> = NULL;</div>
<div class="line"><a name="l03712"></a><span class="lineno"> 3712</span>&#160;    <a class="code" href="class_stream_info.html#ac25dd7e08d42d5de9e5f0854a0084811">bufferLength</a> = 0;</div>
<div class="line"><a name="l03713"></a><span class="lineno"> 3713</span>&#160; </div>
<div class="line"><a name="l03714"></a><span class="lineno"> 3714</span>&#160;    <span class="comment">// initialize the default values</span></div>
<div class="line"><a name="l03715"></a><span class="lineno"> 3715</span>&#160;    <a class="code" href="class_stream_info.html#a0a8b2d8b6be32314f2b5ee4013bab4a3">resetFields</a>();</div>
<div class="line"><a name="l03716"></a><span class="lineno"> 3716</span>&#160;    strncpy(<a class="code" href="class_stream_info.html#a6a85550447a4ca095412f9b630504ae9">stream_name</a>, inputName, <a class="code" href="class_sys_file_system.html#a5fd6ffa48ce2cec28f56c775bd3b4ae8a9c9cd233cbc33a5fd4c1a56ba3ea90ae">SysFileSystem::MaximumPathLength</a>);</div>
<div class="line"><a name="l03717"></a><span class="lineno"> 3717</span>&#160;    <span class="comment">// this stream is in an unknown state now.</span></div>
<div class="line"><a name="l03718"></a><span class="lineno"> 3718</span>&#160;    <a class="code" href="class_stream_info.html#ab0c6d380b9704b6e305f881fc9fa1571">state</a> = <a class="code" href="class_stream_info.html#af8efe21cc9cb6d8da73907c4b6f573f7ac1d3d26e8755c0a3317ad47740f8f0a5">StreamUnknown</a>;</div>
<div class="line"><a name="l03719"></a><span class="lineno"> 3719</span>&#160;}</div>
<div class="line"><a name="l03720"></a><span class="lineno"> 3720</span>&#160; </div>
<div class="line"><a name="l03721"></a><span class="lineno"> 3721</span>&#160;<span class="comment">/********************************************************************************************/</span></div>
<div class="line"><a name="l03722"></a><span class="lineno"> 3722</span>&#160;<span class="comment">/* stream_init                                                                              */</span></div>
<div class="line"><a name="l03723"></a><span class="lineno"> 3723</span>&#160;<span class="comment">/********************************************************************************************/</span></div>
<div class="line"><a name="l03724"></a><span class="lineno"> 3724</span>&#160; </div>
<div class="line"><a name="l03725"></a><span class="lineno"><a class="line" href="_stream_native_8cpp.html#af7849b77269773d0658d23e53fb993af"> 3725</a></span>&#160;<a class="code" href="_stream_native_8cpp.html#a0132244173a5fe2980fd36a20185bc10">RexxMethod2</a>(<a class="code" href="rexx_8h.html#a96e0cc5eda42aed364b05f3c493e07e8">RexxObjectPtr</a>, stream_init, <a class="code" href="oorexxapi_8h.html#a1c59a195fdd6270b4519d7496f3fcc8c">OSELF</a>, <span class="keyword">self</span>, <a class="code" href="rexx_8h.html#a581e376dc8d3b9132e29014c896b9e70">CSTRING</a>, name)</div>
<div class="line"><a name="l03726"></a><span class="lineno"> 3726</span>&#160;{</div>
<div class="line"><a name="l03727"></a><span class="lineno"> 3727</span>&#160;    <span class="comment">// create a new stream info member</span></div>
<div class="line"><a name="l03728"></a><span class="lineno"> 3728</span>&#160;    <a class="code" href="class_stream_info.html">StreamInfo</a> *stream_info = <span class="keyword">new</span> <a class="code" href="class_stream_info.html">StreamInfo</a>(<span class="keyword">self</span>, name);</div>
<div class="line"><a name="l03729"></a><span class="lineno"> 3729</span>&#160;    <a class="code" href="rexx_8h.html#aebdf384b016ed3ba91995946dbce0d55">RexxPointerObject</a> streamPtr = context-&gt;NewPointer(stream_info);</div>
<div class="line"><a name="l03730"></a><span class="lineno"> 3730</span>&#160;    context-&gt;SetObjectVariable(<span class="stringliteral">&quot;CSELF&quot;</span>, streamPtr);</div>
<div class="line"><a name="l03731"></a><span class="lineno"> 3731</span>&#160; </div>
<div class="line"><a name="l03732"></a><span class="lineno"> 3732</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="rexx_8h.html#a9a119fa1e31a4af78dee3c12225b240a">NULLOBJECT</a>;</div>
<div class="line"><a name="l03733"></a><span class="lineno"> 3733</span>&#160;}</div>
<div class="line"><a name="l03734"></a><span class="lineno"> 3734</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l03735"></a><span class="lineno"> 3735</span>&#160;<span class="comment">/**</span></div>
<div class="line"><a name="l03736"></a><span class="lineno"> 3736</span>&#160;<span class="comment"> * Count the number of lines in the file.  If we already have</span></div>
<div class="line"><a name="l03737"></a><span class="lineno"> 3737</span>&#160;<span class="comment"> * a pseudo line count, we can just return that.</span></div>
<div class="line"><a name="l03738"></a><span class="lineno"> 3738</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l03739"></a><span class="lineno"> 3739</span>&#160;<span class="comment"> * @param currentLinePosition</span></div>
<div class="line"><a name="l03740"></a><span class="lineno"> 3740</span>&#160;<span class="comment"> *               The current line position we&#39;re scanning from.</span></div>
<div class="line"><a name="l03741"></a><span class="lineno"> 3741</span>&#160;<span class="comment"> * @param currentPosition</span></div>
<div class="line"><a name="l03742"></a><span class="lineno"> 3742</span>&#160;<span class="comment"> *               The position to start counting from.</span></div>
<div class="line"><a name="l03743"></a><span class="lineno"> 3743</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l03744"></a><span class="lineno"> 3744</span>&#160;<span class="comment"> * @return The number of lines in the file.</span></div>
<div class="line"><a name="l03745"></a><span class="lineno"> 3745</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l03746"></a><span class="lineno"><a class="line" href="class_stream_info.html#ab0ea1081e0badef5a78483510df7fca3"> 3746</a></span>&#160;<a class="code" href="windows_2rexxapitypes_8h.html#a414156feea104f8f75b4ed9e3121b2f6">int64_t</a> <a class="code" href="class_stream_info.html#ab0ea1081e0badef5a78483510df7fca3">StreamInfo::countStreamLines</a>(<a class="code" href="windows_2rexxapitypes_8h.html#a414156feea104f8f75b4ed9e3121b2f6">int64_t</a> currentLinePosition, <a class="code" href="windows_2rexxapitypes_8h.html#a414156feea104f8f75b4ed9e3121b2f6">int64_t</a> currentPosition)</div>
<div class="line"><a name="l03747"></a><span class="lineno"> 3747</span>&#160;{</div>
<div class="line"><a name="l03748"></a><span class="lineno"> 3748</span>&#160;    <span class="comment">// we already had to calculate this...just return the previous value.</span></div>
<div class="line"><a name="l03749"></a><span class="lineno"> 3749</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="class_stream_info.html#ac4e90641d1e2c5b6a30b512e37a7458c">stream_line_size</a> &gt; 0)</div>
<div class="line"><a name="l03750"></a><span class="lineno"> 3750</span>&#160;    {</div>
<div class="line"><a name="l03751"></a><span class="lineno"> 3751</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="class_stream_info.html#ac4e90641d1e2c5b6a30b512e37a7458c">stream_line_size</a>;</div>
<div class="line"><a name="l03752"></a><span class="lineno"> 3752</span>&#160;    }</div>
<div class="line"><a name="l03753"></a><span class="lineno"> 3753</span>&#160;    <span class="comment">// go to the current position</span></div>
<div class="line"><a name="l03754"></a><span class="lineno"> 3754</span>&#160;    <a class="code" href="class_stream_info.html#acd9fe6516d390ecca12931ae2c1d7d20">setPosition</a>(currentPosition, currentPosition);</div>
<div class="line"><a name="l03755"></a><span class="lineno"> 3755</span>&#160; </div>
<div class="line"><a name="l03756"></a><span class="lineno"> 3756</span>&#160;    <a class="code" href="windows_2rexxapitypes_8h.html#a414156feea104f8f75b4ed9e3121b2f6">int64_t</a> count;</div>
<div class="line"><a name="l03757"></a><span class="lineno"> 3757</span>&#160;    <span class="comment">// ask for the count from this point.</span></div>
<div class="line"><a name="l03758"></a><span class="lineno"> 3758</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="class_stream_info.html#a35caea85b14b8f2b8b734c3b51eb7f4b">fileInfo</a>.<a class="code" href="class_sys_file.html#ac73da0cab42257e4f05ce625c848b144">countLines</a>(count))</div>
<div class="line"><a name="l03759"></a><span class="lineno"> 3759</span>&#160;    {</div>
<div class="line"><a name="l03760"></a><span class="lineno"> 3760</span>&#160;        <a class="code" href="class_stream_info.html#a6f99538562048386f872fb1843462267">notreadyError</a>();</div>
<div class="line"><a name="l03761"></a><span class="lineno"> 3761</span>&#160;    }</div>
<div class="line"><a name="l03762"></a><span class="lineno"> 3762</span>&#160; </div>
<div class="line"><a name="l03763"></a><span class="lineno"> 3763</span>&#160;    <span class="comment">// update the position and also set the pseudo line count, since we know this now.</span></div>
<div class="line"><a name="l03764"></a><span class="lineno"> 3764</span>&#160;    <a class="code" href="class_stream_info.html#ac4e90641d1e2c5b6a30b512e37a7458c">stream_line_size</a> = count + currentLinePosition - 1;</div>
<div class="line"><a name="l03765"></a><span class="lineno"> 3765</span>&#160;    <span class="keywordflow">return</span> count;</div>
<div class="line"><a name="l03766"></a><span class="lineno"> 3766</span>&#160;}</div>
<div class="ttc" id="a_source_file_8cpp_html_a4aa83818e72d390465aa1549d66a09c1"><div class="ttname"><a href="_source_file_8cpp.html#a4aa83818e72d390465aa1549d66a09c1">ctrl_z</a></div><div class="ttdeci">#define ctrl_z</div><div class="ttdef"><b>Definition:</b> <a href="_source_file_8cpp_source.html#l00103">SourceFile.cpp:103</a></div></div>
<div class="ttc" id="a_stream_command_parser_8h_html"><div class="ttname"><a href="_stream_command_parser_8h.html">StreamCommandParser.h</a></div></div>
<div class="ttc" id="a_stream_command_parser_8h_html_a21d5e8f8cdaa838586b31007df0a950ba1c73bf66bffc3067439c90f010b7b2d4"><div class="ttname"><a href="_stream_command_parser_8h.html#a21d5e8f8cdaa838586b31007df0a950ba1c73bf66bffc3067439c90f010b7b2d4">MEB</a></div><div class="ttdeci">@ MEB</div><div class="ttdef"><b>Definition:</b> <a href="_stream_command_parser_8h_source.html#l00064">StreamCommandParser.h:64</a></div></div>
<div class="ttc" id="a_stream_command_parser_8h_html_a21d5e8f8cdaa838586b31007df0a950ba79a143049110a823b7db1f0e289fbcbf"><div class="ttname"><a href="_stream_command_parser_8h.html#a21d5e8f8cdaa838586b31007df0a950ba79a143049110a823b7db1f0e289fbcbf">CallItem</a></div><div class="ttdeci">@ CallItem</div><div class="ttdef"><b>Definition:</b> <a href="_stream_command_parser_8h_source.html#l00068">StreamCommandParser.h:68</a></div></div>
<div class="ttc" id="a_stream_command_parser_8h_html_a21d5e8f8cdaa838586b31007df0a950ba89e3d82509617a35b919da37b9cf2d7b"><div class="ttname"><a href="_stream_command_parser_8h.html#a21d5e8f8cdaa838586b31007df0a950ba89e3d82509617a35b919da37b9cf2d7b">SetBool</a></div><div class="ttdeci">@ SetBool</div><div class="ttdef"><b>Definition:</b> <a href="_stream_command_parser_8h_source.html#l00066">StreamCommandParser.h:66</a></div></div>
<div class="ttc" id="a_stream_command_parser_8h_html_a21d5e8f8cdaa838586b31007df0a950ba8b21e950b760f9939243c67524486aec"><div class="ttname"><a href="_stream_command_parser_8h.html#a21d5e8f8cdaa838586b31007df0a950ba8b21e950b760f9939243c67524486aec">SetItem</a></div><div class="ttdeci">@ SetItem</div><div class="ttdef"><b>Definition:</b> <a href="_stream_command_parser_8h_source.html#l00067">StreamCommandParser.h:67</a></div></div>
<div class="ttc" id="a_stream_command_parser_8h_html_a21d5e8f8cdaa838586b31007df0a950ba8b9857852eaaa2816b407b5de9348565"><div class="ttname"><a href="_stream_command_parser_8h.html#a21d5e8f8cdaa838586b31007df0a950ba8b9857852eaaa2816b407b5de9348565">MI</a></div><div class="ttdeci">@ MI</div><div class="ttdef"><b>Definition:</b> <a href="_stream_command_parser_8h_source.html#l00063">StreamCommandParser.h:63</a></div></div>
<div class="ttc" id="a_stream_command_parser_8h_html_a21d5e8f8cdaa838586b31007df0a950ba9cc5f732de9ad61d2fbdc269ad8fd229"><div class="ttname"><a href="_stream_command_parser_8h.html#a21d5e8f8cdaa838586b31007df0a950ba9cc5f732de9ad61d2fbdc269ad8fd229">BitOr</a></div><div class="ttdeci">@ BitOr</div><div class="ttdef"><b>Definition:</b> <a href="_stream_command_parser_8h_source.html#l00059">StreamCommandParser.h:59</a></div></div>
<div class="ttc" id="a_stream_command_parser_8h_html_a21d5e8f8cdaa838586b31007df0a950badd355a90ae4b9c19afc7ef69c70b3915"><div class="ttname"><a href="_stream_command_parser_8h.html#a21d5e8f8cdaa838586b31007df0a950badd355a90ae4b9c19afc7ef69c70b3915">MIB</a></div><div class="ttdeci">@ MIB</div><div class="ttdef"><b>Definition:</b> <a href="_stream_command_parser_8h_source.html#l00065">StreamCommandParser.h:65</a></div></div>
<div class="ttc" id="a_stream_command_parser_8h_html_a21d5e8f8cdaa838586b31007df0a950baf88e46564f67a88a18b9ba3af5792b02"><div class="ttname"><a href="_stream_command_parser_8h.html#a21d5e8f8cdaa838586b31007df0a950baf88e46564f67a88a18b9ba3af5792b02">ME</a></div><div class="ttdeci">@ ME</div><div class="ttdef"><b>Definition:</b> <a href="_stream_command_parser_8h_source.html#l00062">StreamCommandParser.h:62</a></div></div>
<div class="ttc" id="a_stream_command_parser_8h_html_ae192d5327e15853dda973ca14ebb72e3"><div class="ttname"><a href="_stream_command_parser_8h.html#ae192d5327e15853dda973ca14ebb72e3">parser</a></div><div class="ttdeci">int parser(TokenDefinition *ttsp, const char *TokenString, void *userparms)</div><div class="ttdef"><b>Definition:</b> <a href="_stream_command_parser_8cpp_source.html#l00121">StreamCommandParser.cpp:121</a></div></div>
<div class="ttc" id="a_stream_native_8cpp_html_a0132244173a5fe2980fd36a20185bc10"><div class="ttname"><a href="_stream_native_8cpp.html#a0132244173a5fe2980fd36a20185bc10">RexxMethod2</a></div><div class="ttdeci">RexxMethod2(int, stream_arrayin, CSELF, streamPtr, RexxArrayObject, result)</div><div class="ttdef"><b>Definition:</b> <a href="_stream_native_8cpp_source.html#l01788">StreamNative.cpp:1788</a></div></div>
<div class="ttc" id="a_stream_native_8cpp_html_a0162d2a1a09558f0c938101981f1ef53"><div class="ttname"><a href="_stream_native_8cpp.html#a0162d2a1a09558f0c938101981f1ef53">position_by_line</a></div><div class="ttdeci">const int position_by_line</div><div class="ttdef"><b>Definition:</b> <a href="_stream_native_8cpp_source.html#l00074">StreamNative.cpp:74</a></div></div>
<div class="ttc" id="a_stream_native_8cpp_html_a064f2721e7691023309ffc3d6072b5a6"><div class="ttname"><a href="_stream_native_8cpp.html#a064f2721e7691023309ffc3d6072b5a6">StreamInfoProperty</a></div><div class="ttdeci">const char * StreamInfoProperty</div><div class="ttdef"><b>Definition:</b> <a href="_stream_native_8cpp_source.html#l00064">StreamNative.cpp:64</a></div></div>
<div class="ttc" id="a_stream_native_8cpp_html_a08cd1913f9a5a340f426fda11f00cef5"><div class="ttname"><a href="_stream_native_8cpp.html#a08cd1913f9a5a340f426fda11f00cef5">RDWR_CREAT</a></div><div class="ttdeci">#define RDWR_CREAT</div><div class="ttdef"><b>Definition:</b> <a href="_stream_native_8cpp_source.html#l00089">StreamNative.cpp:89</a></div></div>
<div class="ttc" id="a_stream_native_8cpp_html_a1fbef9d1aba5e27b6754dda2d30239fa"><div class="ttname"><a href="_stream_native_8cpp.html#a1fbef9d1aba5e27b6754dda2d30239fa">checkStreamInfo</a></div><div class="ttdeci">StreamInfo * checkStreamInfo(RexxMethodContext *context, void *streamPtr, RexxObjectPtr result)</div><div class="ttdef"><b>Definition:</b> <a href="_stream_native_8cpp_source.html#l00106">StreamNative.cpp:106</a></div></div>
<div class="ttc" id="a_stream_native_8cpp_html_a22f07646483ddd8a3f873f5efff082c9"><div class="ttname"><a href="_stream_native_8cpp.html#a22f07646483ddd8a3f873f5efff082c9">query_read_position</a></div><div class="ttdeci">const int query_read_position</div><div class="ttdef"><b>Definition:</b> <a href="_stream_native_8cpp_source.html#l00081">StreamNative.cpp:81</a></div></div>
<div class="ttc" id="a_stream_native_8cpp_html_a353d1c9fc19fe1dc044744c05df8dc9c"><div class="ttname"><a href="_stream_native_8cpp.html#a353d1c9fc19fe1dc044744c05df8dc9c">IREAD_IWRITE</a></div><div class="ttdeci">#define IREAD_IWRITE</div><div class="ttdef"><b>Definition:</b> <a href="_stream_native_8cpp_source.html#l00091">StreamNative.cpp:91</a></div></div>
<div class="ttc" id="a_stream_native_8cpp_html_a3637b35bfa0f9a5b95da0b5cac07b60c"><div class="ttname"><a href="_stream_native_8cpp.html#a3637b35bfa0f9a5b95da0b5cac07b60c">position_offset_specified</a></div><div class="ttdeci">const int position_offset_specified</div><div class="ttdef"><b>Definition:</b> <a href="_stream_native_8cpp_source.html#l00075">StreamNative.cpp:75</a></div></div>
<div class="ttc" id="a_stream_native_8cpp_html_a3a39eb84e90cc7bd3c6f556def50ab95"><div class="ttname"><a href="_stream_native_8cpp.html#a3a39eb84e90cc7bd3c6f556def50ab95">query_line_position</a></div><div class="ttdeci">const int query_line_position</div><div class="ttdef"><b>Definition:</b> <a href="_stream_native_8cpp_source.html#l00084">StreamNative.cpp:84</a></div></div>
<div class="ttc" id="a_stream_native_8cpp_html_a3d3bd9f9797502eb5498fefc51a758b9"><div class="ttname"><a href="_stream_native_8cpp.html#a3d3bd9f9797502eb5498fefc51a758b9">position_offset</a></div><div class="ttdeci">int position_offset(TokenDefinition *ttsp, StreamToken &amp;tokenizer, void *userparms)</div><div class="ttdef"><b>Definition:</b> <a href="_stream_native_8cpp_source.html#l00160">StreamNative.cpp:160</a></div></div>
<div class="ttc" id="a_stream_native_8cpp_html_a4279da1660023acc95b42250b2e613ca"><div class="ttname"><a href="_stream_native_8cpp.html#a4279da1660023acc95b42250b2e613ca">operation_nocreate</a></div><div class="ttdeci">const int operation_nocreate</div><div class="ttdef"><b>Definition:</b> <a href="_stream_native_8cpp_source.html#l00072">StreamNative.cpp:72</a></div></div>
<div class="ttc" id="a_stream_native_8cpp_html_a45f4375c6d2176610424f82043637fec"><div class="ttname"><a href="_stream_native_8cpp.html#a45f4375c6d2176610424f82043637fec">query_write_position</a></div><div class="ttdeci">const int query_write_position</div><div class="ttdef"><b>Definition:</b> <a href="_stream_native_8cpp_source.html#l00082">StreamNative.cpp:82</a></div></div>
<div class="ttc" id="a_stream_native_8cpp_html_a637640c370dba16a8cc1e9a77d781966"><div class="ttname"><a href="_stream_native_8cpp.html#a637640c370dba16a8cc1e9a77d781966">query_system_position</a></div><div class="ttdeci">const int query_system_position</div><div class="ttdef"><b>Definition:</b> <a href="_stream_native_8cpp_source.html#l00085">StreamNative.cpp:85</a></div></div>
<div class="ttc" id="a_stream_native_8cpp_html_a86e848bc27e31e94c9260216866344b3"><div class="ttname"><a href="_stream_native_8cpp.html#a86e848bc27e31e94c9260216866344b3">position_by_char</a></div><div class="ttdeci">const int position_by_char</div><div class="ttdef"><b>Definition:</b> <a href="_stream_native_8cpp_source.html#l00073">StreamNative.cpp:73</a></div></div>
<div class="ttc" id="a_stream_native_8cpp_html_a8e4e356b86dac886f097bf2f4431ee79"><div class="ttname"><a href="_stream_native_8cpp.html#a8e4e356b86dac886f097bf2f4431ee79">unknown_tr</a></div><div class="ttdeci">int unknown_tr(TokenDefinition *ttsp, StreamToken &amp;tokenizer, void *userparms)</div><div class="ttdef"><b>Definition:</b> <a href="_stream_native_8cpp_source.html#l00190">StreamNative.cpp:190</a></div></div>
<div class="ttc" id="a_stream_native_8cpp_html_aadad8d91bf46dcb0b8e74d74240fc2a6"><div class="ttname"><a href="_stream_native_8cpp.html#aadad8d91bf46dcb0b8e74d74240fc2a6">reclength_token</a></div><div class="ttdeci">int reclength_token(TokenDefinition *ttsp, StreamToken &amp;tokenizer, void *userparms)</div><div class="ttdef"><b>Definition:</b> <a href="_stream_native_8cpp_source.html#l00129">StreamNative.cpp:129</a></div></div>
<div class="ttc" id="a_stream_native_8cpp_html_ac0de8e5ebdd5918f23e35b899691fbbe"><div class="ttname"><a href="_stream_native_8cpp.html#ac0de8e5ebdd5918f23e35b899691fbbe">RexxMethod1</a></div><div class="ttdeci">RexxMethod1(int64_t, stream_chars, CSELF, streamPtr)</div><div class="ttdef"><b>Definition:</b> <a href="_stream_native_8cpp_source.html#l01968">StreamNative.cpp:1968</a></div></div>
<div class="ttc" id="a_stream_native_8cpp_html_ac2e3186d442bd54d85b0dfeef17959eb"><div class="ttname"><a href="_stream_native_8cpp.html#ac2e3186d442bd54d85b0dfeef17959eb">hasNoBufferOption</a></div><div class="ttdeci">bool hasNoBufferOption(const char *opts)</div><div class="ttdef"><b>Definition:</b> <a href="_stream_native_8cpp_source.html#l00558">StreamNative.cpp:558</a></div></div>
<div class="ttc" id="a_stream_native_8cpp_html_ac582219db81802c3e505c2135e225ca6"><div class="ttname"><a href="_stream_native_8cpp.html#ac582219db81802c3e505c2135e225ca6">WR_CREAT</a></div><div class="ttdeci">#define WR_CREAT</div><div class="ttdef"><b>Definition:</b> <a href="_stream_native_8cpp_source.html#l00090">StreamNative.cpp:90</a></div></div>
<div class="ttc" id="a_stream_native_8cpp_html_acab3d74e84fbb9470e5f1485847ff823"><div class="ttname"><a href="_stream_native_8cpp.html#acab3d74e84fbb9470e5f1485847ff823">query_char_position</a></div><div class="ttdeci">const int query_char_position</div><div class="ttdef"><b>Definition:</b> <a href="_stream_native_8cpp_source.html#l00083">StreamNative.cpp:83</a></div></div>
<div class="ttc" id="a_stream_native_8cpp_html_ad4b70af3448dc43aedf984ad0d5aa710"><div class="ttname"><a href="_stream_native_8cpp.html#ad4b70af3448dc43aedf984ad0d5aa710">operation_write</a></div><div class="ttdeci">const int operation_write</div><div class="ttdef"><b>Definition:</b> <a href="_stream_native_8cpp_source.html#l00071">StreamNative.cpp:71</a></div></div>
<div class="ttc" id="a_stream_native_8cpp_html_ad7a9284bf8ea3b3039239acacb288e76"><div class="ttname"><a href="_stream_native_8cpp.html#ad7a9284bf8ea3b3039239acacb288e76">operation_read</a></div><div class="ttdeci">const int operation_read</div><div class="ttdef"><b>Definition:</b> <a href="_stream_native_8cpp_source.html#l00070">StreamNative.cpp:70</a></div></div>
<div class="ttc" id="a_stream_native_8cpp_html_ad9c140fb679fc05ead46bb922e5d0873"><div class="ttname"><a href="_stream_native_8cpp.html#ad9c140fb679fc05ead46bb922e5d0873">CHAR_positional</a></div><div class="ttdeci">#define CHAR_positional</div><div class="ttdef"><b>Definition:</b> <a href="_stream_native_8cpp_source.html#l00055">StreamNative.cpp:55</a></div></div>
<div class="ttc" id="a_stream_native_8cpp_html_ae7f9b5a15d54057c1cebabeff85b2ac8"><div class="ttname"><a href="_stream_native_8cpp.html#ae7f9b5a15d54057c1cebabeff85b2ac8">RexxMethod3</a></div><div class="ttdeci">RexxMethod3(RexxStringObject, stream_charin, CSELF, streamPtr, OPTIONAL_int64_t, position, OPTIONAL_size_t, read_length)</div><div class="ttdef"><b>Definition:</b> <a href="_stream_native_8cpp_source.html#l01549">StreamNative.cpp:1549</a></div></div>
<div class="ttc" id="a_stream_native_8hpp_html"><div class="ttname"><a href="_stream_native_8hpp.html">StreamNative.hpp</a></div></div>
<div class="ttc" id="a_utilities_8hpp_html"><div class="ttname"><a href="_utilities_8hpp.html">Utilities.hpp</a></div></div>
<div class="ttc" id="aclass_parse_action_html"><div class="ttname"><a href="class_parse_action.html">ParseAction</a></div><div class="ttdef"><b>Definition:</b> <a href="_stream_command_parser_8h_source.html#l00199">StreamCommandParser.h:200</a></div></div>
<div class="ttc" id="aclass_stream_info_html"><div class="ttname"><a href="class_stream_info.html">StreamInfo</a></div><div class="ttdef"><b>Definition:</b> <a href="_stream_native_8hpp_source.html#l00065">StreamNative.hpp:66</a></div></div>
<div class="ttc" id="aclass_stream_info_html_a0039dd0ef9744576161528c01ab9061b"><div class="ttname"><a href="class_stream_info.html#a0039dd0ef9744576161528c01ab9061b">StreamInfo::checkStreamType</a></div><div class="ttdeci">void checkStreamType()</div><div class="ttdef"><b>Definition:</b> <a href="_stream_native_8cpp_source.html#l00489">StreamNative.cpp:489</a></div></div>
<div class="ttc" id="aclass_stream_info_html_a02eb025b59624a43c189673c78f72cf4"><div class="ttname"><a href="class_stream_info.html#a02eb025b59624a43c189673c78f72cf4">StreamInfo::setLineReadPosition</a></div><div class="ttdeci">void setLineReadPosition(int64_t position)</div><div class="ttdef"><b>Definition:</b> <a href="_stream_native_8cpp_source.html#l01290">StreamNative.cpp:1290</a></div></div>
<div class="ttc" id="aclass_stream_info_html_a031ca794b8ef189757f1e034e8d0d122"><div class="ttname"><a href="class_stream_info.html#a031ca794b8ef189757f1e034e8d0d122">StreamInfo::resolveStreamName</a></div><div class="ttdeci">void resolveStreamName()</div><div class="ttdef"><b>Definition:</b> <a href="_stream_native_8cpp_source.html#l01044">StreamNative.cpp:1044</a></div></div>
<div class="ttc" id="aclass_stream_info_html_a04a7e4a108163b53f75a674e5249166b"><div class="ttname"><a href="class_stream_info.html#a04a7e4a108163b53f75a674e5249166b">StreamInfo::getTimeStamp</a></div><div class="ttdeci">const char * getTimeStamp()</div><div class="ttdef"><b>Definition:</b> <a href="_stream_native_8cpp_source.html#l03537">StreamNative.cpp:3537</a></div></div>
<div class="ttc" id="aclass_stream_info_html_a08f5a0d7420eceed7503fce2d5b0917b"><div class="ttname"><a href="class_stream_info.html#a08f5a0d7420eceed7503fce2d5b0917b">StreamInfo::lineReadPosition</a></div><div class="ttdeci">int64_t lineReadPosition</div><div class="ttdef"><b>Definition:</b> <a href="_stream_native_8hpp_source.html#l00177">StreamNative.hpp:177</a></div></div>
<div class="ttc" id="aclass_stream_info_html_a0a8b2d8b6be32314f2b5ee4013bab4a3"><div class="ttname"><a href="class_stream_info.html#a0a8b2d8b6be32314f2b5ee4013bab4a3">StreamInfo::resetFields</a></div><div class="ttdeci">void resetFields()</div><div class="ttdef"><b>Definition:</b> <a href="_stream_native_8cpp_source.html#l00774">StreamNative.cpp:774</a></div></div>
<div class="ttc" id="aclass_stream_info_html_a0ae0ea0f4fcc555c87d7e9be88bea96c"><div class="ttname"><a href="class_stream_info.html#a0ae0ea0f4fcc555c87d7e9be88bea96c">StreamInfo::charWritePosition</a></div><div class="ttdeci">int64_t charWritePosition</div><div class="ttdef"><b>Definition:</b> <a href="_stream_native_8hpp_source.html#l00176">StreamNative.hpp:176</a></div></div>
<div class="ttc" id="aclass_stream_info_html_a0c405fcdafaa228868428ef4da200fe4"><div class="ttname"><a href="class_stream_info.html#a0c405fcdafaa228868428ef4da200fe4">StreamInfo::setHandle</a></div><div class="ttdeci">void setHandle(int fh)</div><div class="ttdef"><b>Definition:</b> <a href="_stream_native_8cpp_source.html#l02578">StreamNative.cpp:2578</a></div></div>
<div class="ttc" id="aclass_stream_info_html_a1068046147d3b99ab5c8e51b8ac8da75"><div class="ttname"><a href="class_stream_info.html#a1068046147d3b99ab5c8e51b8ac8da75">StreamInfo::streamOpen</a></div><div class="ttdeci">const char * streamOpen(const char *options)</div><div class="ttdef"><b>Definition:</b> <a href="_stream_native_8cpp_source.html#l02240">StreamNative.cpp:2240</a></div></div>
<div class="ttc" id="aclass_stream_info_html_a11a2c85501fe84a94096f6488d119bf3"><div class="ttname"><a href="class_stream_info.html#a11a2c85501fe84a94096f6488d119bf3">StreamInfo::freeBuffer</a></div><div class="ttdeci">void freeBuffer()</div><div class="ttdef"><b>Definition:</b> <a href="_stream_native_8cpp_source.html#l00273">StreamNative.cpp:273</a></div></div>
<div class="ttc" id="aclass_stream_info_html_a183f102dcfac11bbbbf5dd8df2e39e7a"><div class="ttname"><a href="class_stream_info.html#a183f102dcfac11bbbbf5dd8df2e39e7a">StreamInfo::open</a></div><div class="ttdeci">bool open(int openFlags, int openMode, int sharedFlag)</div><div class="ttdef"><b>Definition:</b> <a href="_stream_native_8cpp_source.html#l00294">StreamNative.cpp:294</a></div></div>
<div class="ttc" id="aclass_stream_info_html_a1b2b9fc5ae93374cf7593ea60f3749e3"><div class="ttname"><a href="class_stream_info.html#a1b2b9fc5ae93374cf7593ea60f3749e3">StreamInfo::writeSetup</a></div><div class="ttdeci">void writeSetup()</div><div class="ttdef"><b>Definition:</b> <a href="_stream_native_8cpp_source.html#l00961">StreamNative.cpp:961</a></div></div>
<div class="ttc" id="aclass_stream_info_html_a1cea3fe0284cc4761746767d4c302fcb"><div class="ttname"><a href="class_stream_info.html#a1cea3fe0284cc4761746767d4c302fcb">StreamInfo::readSetup</a></div><div class="ttdeci">void readSetup()</div><div class="ttdef"><b>Definition:</b> <a href="_stream_native_8cpp_source.html#l00933">StreamNative.cpp:933</a></div></div>
<div class="ttc" id="aclass_stream_info_html_a31518d7918f85c728f1355d236d7866f"><div class="ttname"><a href="class_stream_info.html#a31518d7918f85c728f1355d236d7866f">StreamInfo::StreamInfo</a></div><div class="ttdeci">StreamInfo(RexxObjectPtr s, const char *inputName)</div><div class="ttdef"><b>Definition:</b> <a href="_stream_native_8cpp_source.html#l03706">StreamNative.cpp:3706</a></div></div>
<div class="ttc" id="aclass_stream_info_html_a327c44fa31870eeee0ceffca3ea7f006"><div class="ttname"><a href="class_stream_info.html#a327c44fa31870eeee0ceffca3ea7f006">StreamInfo::implicitOpen</a></div><div class="ttdeci">void implicitOpen(int type)</div><div class="ttdef"><b>Definition:</b> <a href="_stream_native_8cpp_source.html#l00813">StreamNative.cpp:813</a></div></div>
<div class="ttc" id="aclass_stream_info_html_a35caea85b14b8f2b8b734c3b51eb7f4b"><div class="ttname"><a href="class_stream_info.html#a35caea85b14b8f2b8b734c3b51eb7f4b">StreamInfo::fileInfo</a></div><div class="ttdeci">SysFile fileInfo</div><div class="ttdef"><b>Definition:</b> <a href="_stream_native_8hpp_source.html#l00189">StreamNative.hpp:189</a></div></div>
<div class="ttc" id="aclass_stream_info_html_a37008c68746b1e391b61f2f8da6b5e80"><div class="ttname"><a href="class_stream_info.html#a37008c68746b1e391b61f2f8da6b5e80">StreamInfo::lineReadIncrement</a></div><div class="ttdeci">void lineReadIncrement()</div><div class="ttdef"><b>Definition:</b> <a href="_stream_native_8cpp_source.html#l01462">StreamNative.cpp:1462</a></div></div>
<div class="ttc" id="aclass_stream_info_html_a397cd3ca9e8626c2623ddd2036bc2334"><div class="ttname"><a href="class_stream_info.html#a397cd3ca9e8626c2623ddd2036bc2334">StreamInfo::readVariableLine</a></div><div class="ttdeci">RexxStringObject readVariableLine()</div><div class="ttdef"><b>Definition:</b> <a href="_stream_native_8cpp_source.html#l01361">StreamNative.cpp:1361</a></div></div>
<div class="ttc" id="aclass_stream_info_html_a3a49e7bc25fb6842edc8cc2d5fa95d20"><div class="ttname"><a href="class_stream_info.html#a3a49e7bc25fb6842edc8cc2d5fa95d20">StreamInfo::read_write</a></div><div class="ttdeci">bool read_write</div><div class="ttdef"><b>Definition:</b> <a href="_stream_native_8hpp_source.html#l00194">StreamNative.hpp:194</a></div></div>
<div class="ttc" id="aclass_stream_info_html_a3b9afdf03b73983e6d6a74248578fd28"><div class="ttname"><a href="class_stream_info.html#a3b9afdf03b73983e6d6a74248578fd28">StreamInfo::setLinePositions</a></div><div class="ttdeci">int64_t setLinePositions()</div><div class="ttdef"><b>Definition:</b> <a href="_stream_native_8cpp_source.html#l03326">StreamNative.cpp:3326</a></div></div>
<div class="ttc" id="aclass_stream_info_html_a3d4aeb7b07210713e68491c0c1370fff"><div class="ttname"><a href="class_stream_info.html#a3d4aeb7b07210713e68491c0c1370fff">StreamInfo::write_only</a></div><div class="ttdeci">bool write_only</div><div class="ttdef"><b>Definition:</b> <a href="_stream_native_8hpp_source.html#l00193">StreamNative.hpp:193</a></div></div>
<div class="ttc" id="aclass_stream_info_html_a41fea76cafb2f48513f675360d91f19b"><div class="ttname"><a href="class_stream_info.html#a41fea76cafb2f48513f675360d91f19b">StreamInfo::allocateBuffer</a></div><div class="ttdeci">char * allocateBuffer(size_t length)</div><div class="ttdef"><b>Definition:</b> <a href="_stream_native_8cpp_source.html#l00204">StreamNative.cpp:204</a></div></div>
<div class="ttc" id="aclass_stream_info_html_a44ecba6621790a306f4c08ee99af5e48"><div class="ttname"><a href="class_stream_info.html#a44ecba6621790a306f4c08ee99af5e48">StreamInfo::lineReadCharPosition</a></div><div class="ttdeci">int64_t lineReadCharPosition</div><div class="ttdef"><b>Definition:</b> <a href="_stream_native_8hpp_source.html#l00179">StreamNative.hpp:179</a></div></div>
<div class="ttc" id="aclass_stream_info_html_a47c8a5407f7e4ed96f546c513e88e658"><div class="ttname"><a href="class_stream_info.html#a47c8a5407f7e4ed96f546c513e88e658">StreamInfo::readForwardByLine</a></div><div class="ttdeci">int64_t readForwardByLine(int64_t offset, int64_t &amp;current_line, int64_t &amp;current_position)</div><div class="ttdef"><b>Definition:</b> <a href="_stream_native_8cpp_source.html#l03258">StreamNative.cpp:3258</a></div></div>
<div class="ttc" id="aclass_stream_info_html_a4f4b3f5f598efe6f91ee45cd6aadb065"><div class="ttname"><a href="class_stream_info.html#a4f4b3f5f598efe6f91ee45cd6aadb065">StreamInfo::record_based</a></div><div class="ttdeci">bool record_based</div><div class="ttdef"><b>Definition:</b> <a href="_stream_native_8hpp_source.html#l00201">StreamNative.hpp:201</a></div></div>
<div class="ttc" id="aclass_stream_info_html_a520c92ac8d0d8c97c36fccdfdacb2c68"><div class="ttname"><a href="class_stream_info.html#a520c92ac8d0d8c97c36fccdfdacb2c68">StreamInfo::lineWriteCharPosition</a></div><div class="ttdeci">int64_t lineWriteCharPosition</div><div class="ttdef"><b>Definition:</b> <a href="_stream_native_8hpp_source.html#l00180">StreamNative.hpp:180</a></div></div>
<div class="ttc" id="aclass_stream_info_html_a5ae6982f27535ba3e0c300356238b80f"><div class="ttname"><a href="class_stream_info.html#a5ae6982f27535ba3e0c300356238b80f">StreamInfo::seekLinePosition</a></div><div class="ttdeci">int64_t seekLinePosition(int64_t offset, int direction, int64_t &amp;current_line, int64_t &amp;current_position)</div><div class="ttdef"><b>Definition:</b> <a href="_stream_native_8cpp_source.html#l02909">StreamNative.cpp:2909</a></div></div>
<div class="ttc" id="aclass_stream_info_html_a5d678c49a35a19d401e929a5b9b89d8c"><div class="ttname"><a href="class_stream_info.html#a5d678c49a35a19d401e929a5b9b89d8c">StreamInfo::streamExists</a></div><div class="ttdeci">const char * streamExists()</div><div class="ttdef"><b>Definition:</b> <a href="_stream_native_8cpp_source.html#l03401">StreamNative.cpp:3401</a></div></div>
<div class="ttc" id="aclass_stream_info_html_a5f60cee21e71f36ba5126026cb3401f6"><div class="ttname"><a href="class_stream_info.html#a5f60cee21e71f36ba5126026cb3401f6">StreamInfo::opened_as_handle</a></div><div class="ttdeci">bool opened_as_handle</div><div class="ttdef"><b>Definition:</b> <a href="_stream_native_8hpp_source.html#l00199">StreamNative.hpp:199</a></div></div>
<div class="ttc" id="aclass_stream_info_html_a67cccd9fe6779258ab665f936fd7b3e0"><div class="ttname"><a href="class_stream_info.html#a67cccd9fe6779258ab665f936fd7b3e0">StreamInfo::getLineWritePosition</a></div><div class="ttdeci">int64_t getLineWritePosition()</div><div class="ttdef"><b>Definition:</b> <a href="_stream_native_8cpp_source.html#l03200">StreamNative.cpp:3200</a></div></div>
<div class="ttc" id="aclass_stream_info_html_a69bc9580bb2e54426801fe6fca59c98e"><div class="ttname"><a href="class_stream_info.html#a69bc9580bb2e54426801fe6fca59c98e">StreamInfo::isopen</a></div><div class="ttdeci">bool isopen</div><div class="ttdef"><b>Definition:</b> <a href="_stream_native_8hpp_source.html#l00202">StreamNative.hpp:202</a></div></div>
<div class="ttc" id="aclass_stream_info_html_a6a5404d4b7ece722baef78b65cab52d2"><div class="ttname"><a href="class_stream_info.html#a6a5404d4b7ece722baef78b65cab52d2">StreamInfo::context</a></div><div class="ttdeci">RexxMethodContext * context</div><div class="ttdef"><b>Definition:</b> <a href="_stream_native_8hpp_source.html#l00168">StreamNative.hpp:168</a></div></div>
<div class="ttc" id="aclass_stream_info_html_a6a85550447a4ca095412f9b630504ae9"><div class="ttname"><a href="class_stream_info.html#a6a85550447a4ca095412f9b630504ae9">StreamInfo::stream_name</a></div><div class="ttdeci">char stream_name[SysFileSystem::MaximumFileNameBuffer]</div><div class="ttdef"><b>Definition:</b> <a href="_stream_native_8hpp_source.html#l00172">StreamNative.hpp:172</a></div></div>
<div class="ttc" id="aclass_stream_info_html_a6f99538562048386f872fb1843462267"><div class="ttname"><a href="class_stream_info.html#a6f99538562048386f872fb1843462267">StreamInfo::notreadyError</a></div><div class="ttdeci">void notreadyError()</div><div class="ttdef"><b>Definition:</b> <a href="_stream_native_8cpp_source.html#l00315">StreamNative.cpp:315</a></div></div>
<div class="ttc" id="aclass_stream_info_html_a6fd463e10f51648420f870bca5d465e0"><div class="ttname"><a href="class_stream_info.html#a6fd463e10f51648420f870bca5d465e0">StreamInfo::close</a></div><div class="ttdeci">void close()</div><div class="ttdef"><b>Definition:</b> <a href="_stream_native_8cpp_source.html#l00534">StreamNative.cpp:534</a></div></div>
<div class="ttc" id="aclass_stream_info_html_a734bb28c3531a07f32c04bc60a920449"><div class="ttname"><a href="class_stream_info.html#a734bb28c3531a07f32c04bc60a920449">StreamInfo::handleOpen</a></div><div class="ttdeci">const char * handleOpen(const char *options)</div><div class="ttdef"><b>Definition:</b> <a href="_stream_native_8cpp_source.html#l00654">StreamNative.cpp:654</a></div></div>
<div class="ttc" id="aclass_stream_info_html_a764822b890bf76de1237d91485a80de8"><div class="ttname"><a href="class_stream_info.html#a764822b890bf76de1237d91485a80de8">StreamInfo::charin</a></div><div class="ttdeci">RexxStringObject charin(bool setPosition, int64_t position, size_t read_length)</div><div class="ttdef"><b>Definition:</b> <a href="_stream_native_8cpp_source.html#l01507">StreamNative.cpp:1507</a></div></div>
<div class="ttc" id="aclass_stream_info_html_a76bfce967cb2779165750bda09ba2402"><div class="ttname"><a href="class_stream_info.html#a76bfce967cb2779165750bda09ba2402">StreamInfo::resetLinePositions</a></div><div class="ttdeci">void resetLinePositions()</div><div class="ttdef"><b>Definition:</b> <a href="_stream_native_8cpp_source.html#l01487">StreamNative.cpp:1487</a></div></div>
<div class="ttc" id="aclass_stream_info_html_a7783763d6eec22176a9dfd2f537f6506"><div class="ttname"><a href="class_stream_info.html#a7783763d6eec22176a9dfd2f537f6506">StreamInfo::read_only</a></div><div class="ttdeci">bool read_only</div><div class="ttdef"><b>Definition:</b> <a href="_stream_native_8hpp_source.html#l00192">StreamNative.hpp:192</a></div></div>
<div class="ttc" id="aclass_stream_info_html_a7bd9bdab0ad76acbdd5d0e020879b561"><div class="ttname"><a href="class_stream_info.html#a7bd9bdab0ad76acbdd5d0e020879b561">StreamInfo::setContext</a></div><div class="ttdeci">void setContext(RexxMethodContext *c, RexxObjectPtr d)</div><div class="ttdef"><b>Definition:</b> <a href="_stream_native_8hpp_source.html#l00084">StreamNative.hpp:84</a></div></div>
<div class="ttc" id="aclass_stream_info_html_a7c85128d9aed9f7c648206ad364fb80c"><div class="ttname"><a href="class_stream_info.html#a7c85128d9aed9f7c648206ad364fb80c">StreamInfo::charReadPosition</a></div><div class="ttdeci">int64_t charReadPosition</div><div class="ttdef"><b>Definition:</b> <a href="_stream_native_8hpp_source.html#l00175">StreamNative.hpp:175</a></div></div>
<div class="ttc" id="aclass_stream_info_html_a80fec83823509c1c203aefcf9078937d"><div class="ttname"><a href="class_stream_info.html#a80fec83823509c1c203aefcf9078937d">StreamInfo::writeBuffer</a></div><div class="ttdeci">void writeBuffer(const char *data, size_t length, size_t &amp;bytesWritten)</div><div class="ttdef"><b>Definition:</b> <a href="_stream_native_8cpp_source.html#l01061">StreamNative.cpp:1061</a></div></div>
<div class="ttc" id="aclass_stream_info_html_a81f3f32504e823d7a38eec923360e696"><div class="ttname"><a href="class_stream_info.html#a81f3f32504e823d7a38eec923360e696">StreamInfo::lineout</a></div><div class="ttdeci">int lineout(RexxStringObject data, bool setPosition, int64_t position)</div><div class="ttdef"><b>Definition:</b> <a href="_stream_native_8cpp_source.html#l01998">StreamNative.cpp:1998</a></div></div>
<div class="ttc" id="aclass_stream_info_html_a825f1cc4635482e2dbd7c1166532ee54"><div class="ttname"><a href="class_stream_info.html#a825f1cc4635482e2dbd7c1166532ee54">StreamInfo::defaultResult</a></div><div class="ttdeci">RexxObjectPtr defaultResult</div><div class="ttdef"><b>Definition:</b> <a href="_stream_native_8hpp_source.html#l00170">StreamNative.hpp:170</a></div></div>
<div class="ttc" id="aclass_stream_info_html_a841a460b1c724355c504bd21fe9382fc"><div class="ttname"><a href="class_stream_info.html#a841a460b1c724355c504bd21fe9382fc">StreamInfo::checkEof</a></div><div class="ttdeci">void checkEof()</div><div class="ttdef"><b>Definition:</b> <a href="_stream_native_8cpp_source.html#l00467">StreamNative.cpp:467</a></div></div>
<div class="ttc" id="aclass_stream_info_html_a8e0a7fcb718af8e94350aa728e2d22bb"><div class="ttname"><a href="class_stream_info.html#a8e0a7fcb718af8e94350aa728e2d22bb">StreamInfo::streamFlush</a></div><div class="ttdeci">const char * streamFlush()</div><div class="ttdef"><b>Definition:</b> <a href="_stream_native_8cpp_source.html#l02197">StreamNative.cpp:2197</a></div></div>
<div class="ttc" id="aclass_stream_info_html_a8fee3f8892f5e912d85d5a1621cdcc8a"><div class="ttname"><a href="class_stream_info.html#a8fee3f8892f5e912d85d5a1621cdcc8a">StreamInfo::binaryRecordLength</a></div><div class="ttdeci">size_t binaryRecordLength</div><div class="ttdef"><b>Definition:</b> <a href="_stream_native_8hpp_source.html#l00184">StreamNative.hpp:184</a></div></div>
<div class="ttc" id="aclass_stream_info_html_a9787a73d6593741e2d85f6130e22a5d5"><div class="ttname"><a href="class_stream_info.html#a9787a73d6593741e2d85f6130e22a5d5">StreamInfo::seekToVariableLine</a></div><div class="ttdeci">int64_t seekToVariableLine(int64_t offset, int64_t &amp;current_line, int64_t &amp;current_position)</div><div class="ttdef"><b>Definition:</b> <a href="_stream_native_8cpp_source.html#l03300">StreamNative.cpp:3300</a></div></div>
<div class="ttc" id="aclass_stream_info_html_a9d9fb2a06b11c9e3d1430e46e0817dd7"><div class="ttname"><a href="class_stream_info.html#a9d9fb2a06b11c9e3d1430e46e0817dd7">StreamInfo::openStd</a></div><div class="ttdeci">const char * openStd(const char *options)</div><div class="ttdef"><b>Definition:</b> <a href="_stream_native_8cpp_source.html#l00582">StreamNative.cpp:582</a></div></div>
<div class="ttc" id="aclass_stream_info_html_aa1824fb879c522d827a4c16dd2ff5ae4"><div class="ttname"><a href="class_stream_info.html#aa1824fb879c522d827a4c16dd2ff5ae4">StreamInfo::qualified_name</a></div><div class="ttdeci">char qualified_name[SysFileSystem::MaximumFileNameLength]</div><div class="ttdef"><b>Definition:</b> <a href="_stream_native_8hpp_source.html#l00174">StreamNative.hpp:174</a></div></div>
<div class="ttc" id="aclass_stream_info_html_aa1ec4453ab911203f33828bb7b1622c3"><div class="ttname"><a href="class_stream_info.html#aa1ec4453ab911203f33828bb7b1622c3">StreamInfo::getLineReadPosition</a></div><div class="ttdeci">int64_t getLineReadPosition()</div><div class="ttdef"><b>Definition:</b> <a href="_stream_native_8cpp_source.html#l03170">StreamNative.cpp:3170</a></div></div>
<div class="ttc" id="aclass_stream_info_html_aa718ca3a7bf31a0d6a490db4ce3d4ef0"><div class="ttname"><a href="class_stream_info.html#aa718ca3a7bf31a0d6a490db4ce3d4ef0">StreamInfo::errorInfo</a></div><div class="ttdeci">int errorInfo</div><div class="ttdef"><b>Definition:</b> <a href="_stream_native_8hpp_source.html#l00183">StreamNative.hpp:183</a></div></div>
<div class="ttc" id="aclass_stream_info_html_aaa8212d63b5021ee66ae024e71e9a5dd"><div class="ttname"><a href="class_stream_info.html#aaa8212d63b5021ee66ae024e71e9a5dd">StreamInfo::setCharWritePosition</a></div><div class="ttdeci">void setCharWritePosition(int64_t position)</div><div class="ttdef"><b>Definition:</b> <a href="_stream_native_8cpp_source.html#l01313">StreamNative.cpp:1313</a></div></div>
<div class="ttc" id="aclass_stream_info_html_aac348ef7bdc171beca73c115218ed072"><div class="ttname"><a href="class_stream_info.html#aac348ef7bdc171beca73c115218ed072">StreamInfo::queryLinePosition</a></div><div class="ttdeci">int64_t queryLinePosition(int64_t current_position)</div><div class="ttdef"><b>Definition:</b> <a href="_stream_native_8cpp_source.html#l03022">StreamNative.cpp:3022</a></div></div>
<div class="ttc" id="aclass_stream_info_html_aacc914656e98046777c98c4368e20bda"><div class="ttname"><a href="class_stream_info.html#aacc914656e98046777c98c4368e20bda">StreamInfo::getDescription</a></div><div class="ttdeci">RexxStringObject getDescription()</div><div class="ttdef"><b>Definition:</b> <a href="_stream_native_8cpp_source.html#l03622">StreamNative.cpp:3622</a></div></div>
<div class="ttc" id="aclass_stream_info_html_aad4c8e3e1f02de1840276b794663000f"><div class="ttname"><a href="class_stream_info.html#aad4c8e3e1f02de1840276b794663000f">StreamInfo::setCharReadPosition</a></div><div class="ttdeci">void setCharReadPosition(int64_t position)</div><div class="ttdef"><b>Definition:</b> <a href="_stream_native_8cpp_source.html#l01260">StreamNative.cpp:1260</a></div></div>
<div class="ttc" id="aclass_stream_info_html_aaf3d7a79c48b481b299eca8d178e45ed"><div class="ttname"><a href="class_stream_info.html#aaf3d7a79c48b481b299eca8d178e45ed">StreamInfo::writeFixedLine</a></div><div class="ttdeci">void writeFixedLine(const char *data, size_t length)</div><div class="ttdef"><b>Definition:</b> <a href="_stream_native_8cpp_source.html#l01157">StreamNative.cpp:1157</a></div></div>
<div class="ttc" id="aclass_stream_info_html_aaf4a2195203003e04c8a7ed424c53bb0"><div class="ttname"><a href="class_stream_info.html#aaf4a2195203003e04c8a7ed424c53bb0">StreamInfo::getStreamSize</a></div><div class="ttdeci">RexxObjectPtr getStreamSize()</div><div class="ttdef"><b>Definition:</b> <a href="_stream_native_8cpp_source.html#l03507">StreamNative.cpp:3507</a></div></div>
<div class="ttc" id="aclass_stream_info_html_ab0c6d380b9704b6e305f881fc9fa1571"><div class="ttname"><a href="class_stream_info.html#ab0c6d380b9704b6e305f881fc9fa1571">StreamInfo::state</a></div><div class="ttdeci">StreamState state</div><div class="ttdef"><b>Definition:</b> <a href="_stream_native_8hpp_source.html#l00182">StreamNative.hpp:182</a></div></div>
<div class="ttc" id="aclass_stream_info_html_ab0d43c59700af0f30458d0105a3dc792"><div class="ttname"><a href="class_stream_info.html#ab0d43c59700af0f30458d0105a3dc792">StreamInfo::getDefaultBuffer</a></div><div class="ttdeci">char * getDefaultBuffer(size_t &amp;length)</div><div class="ttdef"><b>Definition:</b> <a href="_stream_native_8cpp_source.html#l00242">StreamNative.cpp:242</a></div></div>
<div class="ttc" id="aclass_stream_info_html_ab0ea1081e0badef5a78483510df7fca3"><div class="ttname"><a href="class_stream_info.html#ab0ea1081e0badef5a78483510df7fca3">StreamInfo::countStreamLines</a></div><div class="ttdeci">int64_t countStreamLines(int64_t currentLinePosition, int64_t currentPosition)</div><div class="ttdef"><b>Definition:</b> <a href="_stream_native_8cpp_source.html#l03746">StreamNative.cpp:3746</a></div></div>
<div class="ttc" id="aclass_stream_info_html_ab1115bdc0204f808879ef4d79d1e1b47ae102242096e006b9c0ee0b8fbb80c64f"><div class="ttname"><a href="class_stream_info.html#ab1115bdc0204f808879ef4d79d1e1b47ae102242096e006b9c0ee0b8fbb80c64f">StreamInfo::DefaultBufferSize</a></div><div class="ttdeci">@ DefaultBufferSize</div><div class="ttdef"><b>Definition:</b> <a href="_stream_native_8hpp_source.html#l00072">StreamNative.hpp:71</a></div></div>
<div class="ttc" id="aclass_stream_info_html_ab63b31212a2404f52534a7ee890efdb6"><div class="ttname"><a href="class_stream_info.html#ab63b31212a2404f52534a7ee890efdb6">StreamInfo::setLineWritePosition</a></div><div class="ttdeci">void setLineWritePosition(int64_t position)</div><div class="ttdef"><b>Definition:</b> <a href="_stream_native_8cpp_source.html#l01333">StreamNative.cpp:1333</a></div></div>
<div class="ttc" id="aclass_stream_info_html_ab723138aeb3810a80d75735d00362b5c"><div class="ttname"><a href="class_stream_info.html#ab723138aeb3810a80d75735d00362b5c">StreamInfo::getStreamType</a></div><div class="ttdeci">const char * getStreamType()</div><div class="ttdef"><b>Definition:</b> <a href="_stream_native_8cpp_source.html#l03475">StreamNative.cpp:3475</a></div></div>
<div class="ttc" id="aclass_stream_info_html_abb78844cda9ce9df456f945c3715c501"><div class="ttname"><a href="class_stream_info.html#abb78844cda9ce9df456f945c3715c501">StreamInfo::queryHandle</a></div><div class="ttdeci">RexxObjectPtr queryHandle()</div><div class="ttdef"><b>Definition:</b> <a href="_stream_native_8cpp_source.html#l03449">StreamNative.cpp:3449</a></div></div>
<div class="ttc" id="aclass_stream_info_html_abe511e95dadd82f3135c71bf22f7b378"><div class="ttname"><a href="class_stream_info.html#abe511e95dadd82f3135c71bf22f7b378">StreamInfo::appendVariableLine</a></div><div class="ttdeci">void appendVariableLine(RexxArrayObject r)</div><div class="ttdef"><b>Definition:</b> <a href="_stream_native_8cpp_source.html#l01412">StreamNative.cpp:1412</a></div></div>
<div class="ttc" id="aclass_stream_info_html_abef89fa4829d60e7995e76319179eb47"><div class="ttname"><a href="class_stream_info.html#abef89fa4829d60e7995e76319179eb47">StreamInfo::queryStreamPosition</a></div><div class="ttdeci">RexxObjectPtr queryStreamPosition(const char *options)</div><div class="ttdef"><b>Definition:</b> <a href="_stream_native_8cpp_source.html#l03046">StreamNative.cpp:3046</a></div></div>
<div class="ttc" id="aclass_stream_info_html_abf80be8acced099814a34b375353c2e3"><div class="ttname"><a href="class_stream_info.html#abf80be8acced099814a34b375353c2e3">StreamInfo::raiseException</a></div><div class="ttdeci">void raiseException(int err)</div><div class="ttdef"><b>Definition:</b> <a href="_stream_native_8cpp_source.html#l00349">StreamNative.cpp:349</a></div></div>
<div class="ttc" id="aclass_stream_info_html_ac180477faedf3ab1f5f37376d545e916"><div class="ttname"><a href="class_stream_info.html#ac180477faedf3ab1f5f37376d545e916">StreamInfo::lineWritePosition</a></div><div class="ttdeci">int64_t lineWritePosition</div><div class="ttdef"><b>Definition:</b> <a href="_stream_native_8hpp_source.html#l00178">StreamNative.hpp:178</a></div></div>
<div class="ttc" id="aclass_stream_info_html_ac25dd7e08d42d5de9e5f0854a0084811"><div class="ttname"><a href="class_stream_info.html#ac25dd7e08d42d5de9e5f0854a0084811">StreamInfo::bufferLength</a></div><div class="ttdeci">size_t bufferLength</div><div class="ttdef"><b>Definition:</b> <a href="_stream_native_8hpp_source.html#l00187">StreamNative.hpp:187</a></div></div>
<div class="ttc" id="aclass_stream_info_html_ac2630a55973b80d4d9fe31c5747aca45"><div class="ttname"><a href="class_stream_info.html#ac2630a55973b80d4d9fe31c5747aca45">StreamInfo::readLine</a></div><div class="ttdeci">RexxStringObject readLine(char *buffer, size_t length, bool update_position)</div><div class="ttdef"><b>Definition:</b> <a href="_stream_native_8cpp_source.html#l01005">StreamNative.cpp:1005</a></div></div>
<div class="ttc" id="aclass_stream_info_html_ac4e90641d1e2c5b6a30b512e37a7458c"><div class="ttname"><a href="class_stream_info.html#ac4e90641d1e2c5b6a30b512e37a7458c">StreamInfo::stream_line_size</a></div><div class="ttdeci">int64_t stream_line_size</div><div class="ttdef"><b>Definition:</b> <a href="_stream_native_8hpp_source.html#l00181">StreamNative.hpp:181</a></div></div>
<div class="ttc" id="aclass_stream_info_html_ac53710ab6d501f9cf93970b22fe7219f"><div class="ttname"><a href="class_stream_info.html#ac53710ab6d501f9cf93970b22fe7219f">StreamInfo::completeLine</a></div><div class="ttdeci">void completeLine(size_t writeLength)</div><div class="ttdef"><b>Definition:</b> <a href="_stream_native_8cpp_source.html#l01134">StreamNative.cpp:1134</a></div></div>
<div class="ttc" id="aclass_stream_info_html_ac5e597768cf60cb9edd62a100b486725"><div class="ttname"><a href="class_stream_info.html#ac5e597768cf60cb9edd62a100b486725">StreamInfo::setStandard</a></div><div class="ttdeci">void setStandard()</div><div class="ttdef"><b>Definition:</b> <a href="_stream_native_8hpp_source.html#l00164">StreamNative.hpp:164</a></div></div>
<div class="ttc" id="aclass_stream_info_html_acd9fe6516d390ecca12931ae2c1d7d20"><div class="ttname"><a href="class_stream_info.html#acd9fe6516d390ecca12931ae2c1d7d20">StreamInfo::setPosition</a></div><div class="ttdeci">void setPosition(int64_t position, int64_t &amp;newPosition)</div><div class="ttdef"><b>Definition:</b> <a href="_stream_native_8cpp_source.html#l01181">StreamNative.cpp:1181</a></div></div>
<div class="ttc" id="aclass_stream_info_html_ad07a90a21f1116a83b681e8f1e966986"><div class="ttname"><a href="class_stream_info.html#ad07a90a21f1116a83b681e8f1e966986">StreamInfo::last_op_was_read</a></div><div class="ttdeci">bool last_op_was_read</div><div class="ttdef"><b>Definition:</b> <a href="_stream_native_8hpp_source.html#l00198">StreamNative.hpp:198</a></div></div>
<div class="ttc" id="aclass_stream_info_html_ad2b1b1271c87dde90e1f0398a14e680c"><div class="ttname"><a href="class_stream_info.html#ad2b1b1271c87dde90e1f0398a14e680c">StreamInfo::bufferAddress</a></div><div class="ttdeci">char * bufferAddress</div><div class="ttdef"><b>Definition:</b> <a href="_stream_native_8hpp_source.html#l00186">StreamNative.hpp:186</a></div></div>
<div class="ttc" id="aclass_stream_info_html_ad74fbaf46efe005989b42ab55ab738de"><div class="ttname"><a href="class_stream_info.html#ad74fbaf46efe005989b42ab55ab738de">StreamInfo::getState</a></div><div class="ttdeci">const char * getState()</div><div class="ttdef"><b>Definition:</b> <a href="_stream_native_8cpp_source.html#l03585">StreamNative.cpp:3585</a></div></div>
<div class="ttc" id="aclass_stream_info_html_ad7f0af292aa094aec51e43972a5c5c8b"><div class="ttname"><a href="class_stream_info.html#ad7f0af292aa094aec51e43972a5c5c8b">StreamInfo::eof</a></div><div class="ttdeci">void eof()</div><div class="ttdef"><b>Definition:</b> <a href="_stream_native_8cpp_source.html#l00438">StreamNative.cpp:438</a></div></div>
<div class="ttc" id="aclass_stream_info_html_ad808617f7b9bb4fa36eebd7e52ced5ff"><div class="ttname"><a href="class_stream_info.html#ad808617f7b9bb4fa36eebd7e52ced5ff">StreamInfo::chars</a></div><div class="ttdeci">int64_t chars()</div><div class="ttdef"><b>Definition:</b> <a href="_stream_native_8cpp_source.html#l01940">StreamNative.cpp:1940</a></div></div>
<div class="ttc" id="aclass_stream_info_html_ad969f8a485a8785a3afa0bfd35286aee"><div class="ttname"><a href="class_stream_info.html#ad969f8a485a8785a3afa0bfd35286aee">StreamInfo::setLinePosition</a></div><div class="ttdeci">int64_t setLinePosition(int64_t new_line, int64_t &amp;current_line, int64_t &amp;current_position)</div><div class="ttdef"><b>Definition:</b> <a href="_stream_native_8cpp_source.html#l02965">StreamNative.cpp:2965</a></div></div>
<div class="ttc" id="aclass_stream_info_html_ada2b25c7a5fc0a9c1fe9f63f432dfdd4"><div class="ttname"><a href="class_stream_info.html#ada2b25c7a5fc0a9c1fe9f63f432dfdd4">StreamInfo::nobuffer</a></div><div class="ttdeci">bool nobuffer</div><div class="ttdef"><b>Definition:</b> <a href="_stream_native_8hpp_source.html#l00196">StreamNative.hpp:196</a></div></div>
<div class="ttc" id="aclass_stream_info_html_ade04415ccf0f974da911ad43458d115e"><div class="ttname"><a href="class_stream_info.html#ade04415ccf0f974da911ad43458d115e">StreamInfo::streamPosition</a></div><div class="ttdeci">int64_t streamPosition(const char *options)</div><div class="ttdef"><b>Definition:</b> <a href="_stream_native_8cpp_source.html#l02623">StreamNative.cpp:2623</a></div></div>
<div class="ttc" id="aclass_stream_info_html_ade427513480a51eb0a313e8162415bfb"><div class="ttname"><a href="class_stream_info.html#ade427513480a51eb0a313e8162415bfb">StreamInfo::arrayin</a></div><div class="ttdeci">int arrayin(RexxArrayObject r)</div><div class="ttdef"><b>Definition:</b> <a href="_stream_native_8cpp_source.html#l01743">StreamNative.cpp:1743</a></div></div>
<div class="ttc" id="aclass_stream_info_html_ae5d69a23a83ae44083babca8913b9295"><div class="ttname"><a href="class_stream_info.html#ae5d69a23a83ae44083babca8913b9295">StreamInfo::append</a></div><div class="ttdeci">bool append</div><div class="ttdef"><b>Definition:</b> <a href="_stream_native_8hpp_source.html#l00195">StreamNative.hpp:195</a></div></div>
<div class="ttc" id="aclass_stream_info_html_ae5ffc9e04621a6ad29c979e1d38ab244"><div class="ttname"><a href="class_stream_info.html#ae5ffc9e04621a6ad29c979e1d38ab244">StreamInfo::extendBuffer</a></div><div class="ttdeci">char * extendBuffer(size_t &amp;length)</div><div class="ttdef"><b>Definition:</b> <a href="_stream_native_8cpp_source.html#l00260">StreamNative.cpp:260</a></div></div>
<div class="ttc" id="aclass_stream_info_html_ae8d7e2c837a87802e9f1b4c73117003c"><div class="ttname"><a href="class_stream_info.html#ae8d7e2c837a87802e9f1b4c73117003c">StreamInfo::stdstream</a></div><div class="ttdeci">bool stdstream</div><div class="ttdef"><b>Definition:</b> <a href="_stream_native_8hpp_source.html#l00197">StreamNative.hpp:197</a></div></div>
<div class="ttc" id="aclass_stream_info_html_aec46c954315c6782a9e1414af191ef07"><div class="ttname"><a href="class_stream_info.html#aec46c954315c6782a9e1414af191ef07">StreamInfo::setWritePosition</a></div><div class="ttdeci">void setWritePosition(int64_t position)</div><div class="ttdef"><b>Definition:</b> <a href="_stream_native_8cpp_source.html#l01246">StreamNative.cpp:1246</a></div></div>
<div class="ttc" id="aclass_stream_info_html_af08fcca727639931f393769a8761df24"><div class="ttname"><a href="class_stream_info.html#af08fcca727639931f393769a8761df24">StreamInfo::lines</a></div><div class="ttdeci">int64_t lines(bool quick)</div><div class="ttdef"><b>Definition:</b> <a href="_stream_native_8cpp_source.html#l01817">StreamNative.cpp:1817</a></div></div>
<div class="ttc" id="aclass_stream_info_html_af12895c61e9458a31e3fcd632cbc96e9"><div class="ttname"><a href="class_stream_info.html#af12895c61e9458a31e3fcd632cbc96e9">StreamInfo::writeLine</a></div><div class="ttdeci">void writeLine(const char *data, size_t length, size_t &amp;bytesWritten)</div><div class="ttdef"><b>Definition:</b> <a href="_stream_native_8cpp_source.html#l01090">StreamNative.cpp:1090</a></div></div>
<div class="ttc" id="aclass_stream_info_html_af21ad8877a6411a69e033790ac94b299"><div class="ttname"><a href="class_stream_info.html#af21ad8877a6411a69e033790ac94b299">StreamInfo::size</a></div><div class="ttdeci">int64_t size()</div><div class="ttdef"><b>Definition:</b> <a href="_stream_native_8cpp_source.html#l00304">StreamNative.cpp:304</a></div></div>
<div class="ttc" id="aclass_stream_info_html_af2801de94648255620db11f16d3040e2"><div class="ttname"><a href="class_stream_info.html#af2801de94648255620db11f16d3040e2">StreamInfo::getLineSize</a></div><div class="ttdeci">int64_t getLineSize()</div><div class="ttdef"><b>Definition:</b> <a href="_stream_native_8cpp_source.html#l02865">StreamNative.cpp:2865</a></div></div>
<div class="ttc" id="aclass_stream_info_html_af3e03da2091e7b4b1beb8eb969114d43"><div class="ttname"><a href="class_stream_info.html#af3e03da2091e7b4b1beb8eb969114d43">StreamInfo::linein</a></div><div class="ttdeci">RexxStringObject linein(bool setPosition, int64_t position, size_t count)</div><div class="ttdef"><b>Definition:</b> <a href="_stream_native_8cpp_source.html#l01661">StreamNative.cpp:1661</a></div></div>
<div class="ttc" id="aclass_stream_info_html_af6a6171af162ebfe3338bf423735b96d"><div class="ttname"><a href="class_stream_info.html#af6a6171af162ebfe3338bf423735b96d">StreamInfo::readBuffer</a></div><div class="ttdeci">void readBuffer(char *data, size_t length, size_t &amp;bytesRead)</div><div class="ttdef"><b>Definition:</b> <a href="_stream_native_8cpp_source.html#l01119">StreamNative.cpp:1119</a></div></div>
<div class="ttc" id="aclass_stream_info_html_af73bad913ef56b7aceefda90551f07b1"><div class="ttname"><a href="class_stream_info.html#af73bad913ef56b7aceefda90551f07b1">StreamInfo::charout</a></div><div class="ttdeci">size_t charout(RexxStringObject data, bool setPosition, int64_t position)</div><div class="ttdef"><b>Definition:</b> <a href="_stream_native_8cpp_source.html#l01579">StreamNative.cpp:1579</a></div></div>
<div class="ttc" id="aclass_stream_info_html_af87ad1c8e0ca6a885b07cf19d85688e5"><div class="ttname"><a href="class_stream_info.html#af87ad1c8e0ca6a885b07cf19d85688e5">StreamInfo::getQualifiedName</a></div><div class="ttdeci">const char * getQualifiedName()</div><div class="ttdef"><b>Definition:</b> <a href="_stream_native_8cpp_source.html#l03374">StreamNative.cpp:3374</a></div></div>
<div class="ttc" id="aclass_stream_info_html_af8efe21cc9cb6d8da73907c4b6f573f7a1583efa03c35219696cb030c3c3d6ede"><div class="ttname"><a href="class_stream_info.html#af8efe21cc9cb6d8da73907c4b6f573f7a1583efa03c35219696cb030c3c3d6ede">StreamInfo::StreamNotready</a></div><div class="ttdeci">@ StreamNotready</div><div class="ttdef"><b>Definition:</b> <a href="_stream_native_8hpp_source.html#l00078">StreamNative.hpp:78</a></div></div>
<div class="ttc" id="aclass_stream_info_html_af8efe21cc9cb6d8da73907c4b6f573f7a4f89da370429a424003f1dc56d72526e"><div class="ttname"><a href="class_stream_info.html#af8efe21cc9cb6d8da73907c4b6f573f7a4f89da370429a424003f1dc56d72526e">StreamInfo::StreamReady</a></div><div class="ttdeci">@ StreamReady</div><div class="ttdef"><b>Definition:</b> <a href="_stream_native_8hpp_source.html#l00077">StreamNative.hpp:77</a></div></div>
<div class="ttc" id="aclass_stream_info_html_af8efe21cc9cb6d8da73907c4b6f573f7a5f13f69e16d45d7e37f1c97a86c5fa1f"><div class="ttname"><a href="class_stream_info.html#af8efe21cc9cb6d8da73907c4b6f573f7a5f13f69e16d45d7e37f1c97a86c5fa1f">StreamInfo::StreamError</a></div><div class="ttdeci">@ StreamError</div><div class="ttdef"><b>Definition:</b> <a href="_stream_native_8hpp_source.html#l00080">StreamNative.hpp:80</a></div></div>
<div class="ttc" id="aclass_stream_info_html_af8efe21cc9cb6d8da73907c4b6f573f7ac1ad97d4ba149f0a0c0074996bcb41e8"><div class="ttname"><a href="class_stream_info.html#af8efe21cc9cb6d8da73907c4b6f573f7ac1ad97d4ba149f0a0c0074996bcb41e8">StreamInfo::StreamEof</a></div><div class="ttdeci">@ StreamEof</div><div class="ttdef"><b>Definition:</b> <a href="_stream_native_8hpp_source.html#l00079">StreamNative.hpp:79</a></div></div>
<div class="ttc" id="aclass_stream_info_html_af8efe21cc9cb6d8da73907c4b6f573f7ac1d3d26e8755c0a3317ad47740f8f0a5"><div class="ttname"><a href="class_stream_info.html#af8efe21cc9cb6d8da73907c4b6f573f7ac1d3d26e8755c0a3317ad47740f8f0a5">StreamInfo::StreamUnknown</a></div><div class="ttdeci">@ StreamUnknown</div><div class="ttdef"><b>Definition:</b> <a href="_stream_native_8hpp_source.html#l00076">StreamNative.hpp:76</a></div></div>
<div class="ttc" id="aclass_stream_info_html_af91849960253aa6fb5e0df914c6057a0"><div class="ttname"><a href="class_stream_info.html#af91849960253aa6fb5e0df914c6057a0">StreamInfo::streamClose</a></div><div class="ttdeci">const char * streamClose()</div><div class="ttdef"><b>Definition:</b> <a href="_stream_native_8cpp_source.html#l02107">StreamNative.cpp:2107</a></div></div>
<div class="ttc" id="aclass_stream_info_html_afbda41cfa60155b0abc38125e0b99318"><div class="ttname"><a href="class_stream_info.html#afbda41cfa60155b0abc38125e0b99318">StreamInfo::setReadPosition</a></div><div class="ttdeci">void setReadPosition(int64_t position)</div><div class="ttdef"><b>Definition:</b> <a href="_stream_native_8cpp_source.html#l01234">StreamNative.cpp:1234</a></div></div>
<div class="ttc" id="aclass_stream_token_html"><div class="ttname"><a href="class_stream_token.html">StreamToken</a></div><div class="ttdef"><b>Definition:</b> <a href="_stream_command_parser_8h_source.html#l00076">StreamCommandParser.h:77</a></div></div>
<div class="ttc" id="aclass_stream_token_html_a50fdd938406ee0fc01783c4b93d5f97e"><div class="ttname"><a href="class_stream_token.html#a50fdd938406ee0fc01783c4b93d5f97e">StreamToken::nextToken</a></div><div class="ttdeci">bool nextToken()</div><div class="ttdef"><b>Definition:</b> <a href="_stream_command_parser_8cpp_source.html#l00056">StreamCommandParser.cpp:56</a></div></div>
<div class="ttc" id="aclass_stream_token_html_a9c139f24865115edfae72846319e2c80"><div class="ttname"><a href="class_stream_token.html#a9c139f24865115edfae72846319e2c80">StreamToken::toNumber</a></div><div class="ttdeci">bool toNumber(int64_t &amp;num)</div><div class="ttdef"><b>Definition:</b> <a href="_stream_command_parser_8h_source.html#l00105">StreamCommandParser.h:105</a></div></div>
<div class="ttc" id="aclass_stream_token_html_aebbc825f26b8148535a9029880343900"><div class="ttname"><a href="class_stream_token.html#aebbc825f26b8148535a9029880343900">StreamToken::previousToken</a></div><div class="ttdeci">void previousToken()</div><div class="ttdef"><b>Definition:</b> <a href="_stream_command_parser_8cpp_source.html#l00105">StreamCommandParser.cpp:105</a></div></div>
<div class="ttc" id="aclass_sys_file_html_a05554fb9d7f6e2d797357d915e1d939a"><div class="ttname"><a href="class_sys_file.html#a05554fb9d7f6e2d797357d915e1d939a">SysFile::setStdIn</a></div><div class="ttdeci">void setStdIn()</div><div class="ttdef"><b>Definition:</b> <a href="unix_2_sys_file_8cpp_source.html#l01141">unix/SysFile.cpp:1141</a></div></div>
<div class="ttc" id="aclass_sys_file_html_a0ab7fddc5eaa83ee52dbb18e3ac2ff8c"><div class="ttname"><a href="class_sys_file.html#a0ab7fddc5eaa83ee52dbb18e3ac2ff8c">SysFile::putLine</a></div><div class="ttdeci">bool putLine(const char *buffer, size_t len, size_t &amp;bytesWritten)</div><div class="ttdef"><b>Definition:</b> <a href="unix_2_sys_file_8cpp_source.html#l00608">unix/SysFile.cpp:608</a></div></div>
<div class="ttc" id="aclass_sys_file_html_a0c81c32e9f82071be0d1cb57ccd064c8"><div class="ttname"><a href="class_sys_file.html#a0c81c32e9f82071be0d1cb57ccd064c8">SysFile::clearErrors</a></div><div class="ttdeci">void clearErrors()</div><div class="ttdef"><b>Definition:</b> <a href="unix_2_sys_file_8hpp_source.html#l00127">unix/SysFile.hpp:127</a></div></div>
<div class="ttc" id="aclass_sys_file_html_a0ccd495349312394f088f7716515a78e"><div class="ttname"><a href="class_sys_file.html#a0ccd495349312394f088f7716515a78e">SysFile::errorInfo</a></div><div class="ttdeci">int errorInfo()</div><div class="ttdef"><b>Definition:</b> <a href="unix_2_sys_file_8hpp_source.html#l00126">unix/SysFile.hpp:126</a></div></div>
<div class="ttc" id="aclass_sys_file_html_a2da4b6f857ccd665bbb0653d895fe33d"><div class="ttname"><a href="class_sys_file.html#a2da4b6f857ccd665bbb0653d895fe33d">SysFile::atEof</a></div><div class="ttdeci">bool atEof()</div><div class="ttdef"><b>Definition:</b> <a href="unix_2_sys_file_8hpp_source.html#l00128">unix/SysFile.hpp:128</a></div></div>
<div class="ttc" id="aclass_sys_file_html_a3eb0135940e889a9db1717e868f24a08"><div class="ttname"><a href="class_sys_file.html#a3eb0135940e889a9db1717e868f24a08">SysFile::setStdErr</a></div><div class="ttdeci">void setStdErr()</div><div class="ttdef"><b>Definition:</b> <a href="unix_2_sys_file_8cpp_source.html#l01176">unix/SysFile.cpp:1176</a></div></div>
<div class="ttc" id="aclass_sys_file_html_a4452c67b2e4b60b096f2c8f401a8332d"><div class="ttname"><a href="class_sys_file.html#a4452c67b2e4b60b096f2c8f401a8332d">SysFile::isDevice</a></div><div class="ttdeci">bool isDevice()</div><div class="ttdef"><b>Definition:</b> <a href="unix_2_sys_file_8hpp_source.html#l00119">unix/SysFile.hpp:119</a></div></div>
<div class="ttc" id="aclass_sys_file_html_a48ce2e3345bf0b3d2ab875dacd326b8f"><div class="ttname"><a href="class_sys_file.html#a48ce2e3345bf0b3d2ab875dacd326b8f">SysFile::gets</a></div><div class="ttdeci">bool gets(char *buffer, size_t len, size_t &amp;bytesRead)</div><div class="ttdef"><b>Definition:</b> <a href="unix_2_sys_file_8cpp_source.html#l00628">unix/SysFile.cpp:628</a></div></div>
<div class="ttc" id="aclass_sys_file_html_a4b8eb988e7662d8500b4a7ce31cc78cd"><div class="ttname"><a href="class_sys_file.html#a4b8eb988e7662d8500b4a7ce31cc78cd">SysFile::getSize</a></div><div class="ttdeci">bool getSize(int64_t &amp;size)</div><div class="ttdef"><b>Definition:</b> <a href="unix_2_sys_file_8cpp_source.html#l00984">unix/SysFile.cpp:984</a></div></div>
<div class="ttc" id="aclass_sys_file_html_a4cc14e33be3be5d8e89c6aa872eb4381"><div class="ttname"><a href="class_sys_file.html#a4cc14e33be3be5d8e89c6aa872eb4381">SysFile::seek</a></div><div class="ttdeci">bool seek(int64_t offset, int direction, int64_t &amp;position)</div><div class="ttdef"><b>Definition:</b> <a href="unix_2_sys_file_8cpp_source.html#l00899">unix/SysFile.cpp:899</a></div></div>
<div class="ttc" id="aclass_sys_file_html_a50385d5b509309a88309938d8c021fd2"><div class="ttname"><a href="class_sys_file.html#a50385d5b509309a88309938d8c021fd2">SysFile::seekForwardLines</a></div><div class="ttdeci">bool seekForwardLines(int64_t startPosition, int64_t &amp;lineCount, int64_t &amp;endPosition)</div><div class="ttdef"><b>Definition:</b> <a href="unix_2_sys_file_8cpp_source.html#l00779">unix/SysFile.cpp:779</a></div></div>
<div class="ttc" id="aclass_sys_file_html_a5cb87e26700f6dd8244bfb4bd2bf07c9"><div class="ttname"><a href="class_sys_file.html#a5cb87e26700f6dd8244bfb4bd2bf07c9">SysFile::flush</a></div><div class="ttdeci">bool flush()</div><div class="ttdef"><b>Definition:</b> <a href="unix_2_sys_file_8cpp_source.html#l00304">unix/SysFile.cpp:304</a></div></div>
<div class="ttc" id="aclass_sys_file_html_a86c4fbec300dc5f68d7387e8621a6185"><div class="ttname"><a href="class_sys_file.html#a86c4fbec300dc5f68d7387e8621a6185">SysFile::close</a></div><div class="ttdeci">bool close()</div><div class="ttdef"><b>Definition:</b> <a href="unix_2_sys_file_8cpp_source.html#l00257">unix/SysFile.cpp:257</a></div></div>
<div class="ttc" id="aclass_sys_file_html_a8c77a233d2b05cf4d300785fc23abcc7"><div class="ttname"><a href="class_sys_file.html#a8c77a233d2b05cf4d300785fc23abcc7">SysFile::getPosition</a></div><div class="ttdeci">bool getPosition(int64_t &amp;position)</div><div class="ttdef"><b>Definition:</b> <a href="unix_2_sys_file_8cpp_source.html#l00954">unix/SysFile.cpp:954</a></div></div>
<div class="ttc" id="aclass_sys_file_html_a988b06c3ab6e3335f0909ab26e5dafc6"><div class="ttname"><a href="class_sys_file.html#a988b06c3ab6e3335f0909ab26e5dafc6">SysFile::getHandle</a></div><div class="ttdeci">uintptr_t getHandle()</div><div class="ttdef"><b>Definition:</b> <a href="unix_2_sys_file_8hpp_source.html#l00130">unix/SysFile.hpp:130</a></div></div>
<div class="ttc" id="aclass_sys_file_html_a9960f0b73218853df65a100687c3952c"><div class="ttname"><a href="class_sys_file.html#a9960f0b73218853df65a100687c3952c">SysFile::setBuffering</a></div><div class="ttdeci">void setBuffering(bool buffer, size_t length)</div><div class="ttdef"><b>Definition:</b> <a href="unix_2_sys_file_8cpp_source.html#l00221">unix/SysFile.cpp:221</a></div></div>
<div class="ttc" id="aclass_sys_file_html_aad4feede6e1b0d2196132753bd917f54"><div class="ttname"><a href="class_sys_file.html#aad4feede6e1b0d2196132753bd917f54">SysFile::getTimeStamp</a></div><div class="ttdeci">bool getTimeStamp(const char *&amp;time)</div><div class="ttdef"><b>Definition:</b> <a href="unix_2_sys_file_8cpp_source.html#l01047">unix/SysFile.cpp:1047</a></div></div>
<div class="ttc" id="aclass_sys_file_html_ab59bfdafd28832d21a2b239174eec299"><div class="ttname"><a href="class_sys_file.html#ab59bfdafd28832d21a2b239174eec299">SysFile::open</a></div><div class="ttdeci">bool open(const char *name, int openFlags, int openMode, int shareMode)</div><div class="ttdef"><b>Definition:</b> <a href="unix_2_sys_file_8cpp_source.html#l00121">unix/SysFile.cpp:121</a></div></div>
<div class="ttc" id="aclass_sys_file_html_ab96591dd7cfa1192a49c99eb8ab3ce9a"><div class="ttname"><a href="class_sys_file.html#ab96591dd7cfa1192a49c99eb8ab3ce9a">SysFile::read</a></div><div class="ttdeci">bool read(char *buf, size_t len, size_t &amp;bytesRead)</div><div class="ttdef"><b>Definition:</b> <a href="unix_2_sys_file_8cpp_source.html#l00338">unix/SysFile.cpp:338</a></div></div>
<div class="ttc" id="aclass_sys_file_html_ac73da0cab42257e4f05ce625c848b144"><div class="ttname"><a href="class_sys_file.html#ac73da0cab42257e4f05ce625c848b144">SysFile::countLines</a></div><div class="ttdeci">bool countLines(int64_t &amp;count)</div><div class="ttdef"><b>Definition:</b> <a href="unix_2_sys_file_8cpp_source.html#l00684">unix/SysFile.cpp:684</a></div></div>
<div class="ttc" id="aclass_sys_file_html_ad1b4b4f0b7d69f8daaf33243a17916b5"><div class="ttname"><a href="class_sys_file.html#ad1b4b4f0b7d69f8daaf33243a17916b5">SysFile::write</a></div><div class="ttdeci">bool write(const char *data, size_t len, size_t &amp;bytesWritten)</div><div class="ttdef"><b>Definition:</b> <a href="unix_2_sys_file_8cpp_source.html#l00463">unix/SysFile.cpp:463</a></div></div>
<div class="ttc" id="aclass_sys_file_html_ada9d719671c79d677dfdffb61eea4dc8"><div class="ttname"><a href="class_sys_file.html#ada9d719671c79d677dfdffb61eea4dc8">SysFile::hasData</a></div><div class="ttdeci">bool hasData()</div><div class="ttdef"><b>Definition:</b> <a href="unix_2_sys_file_8cpp_source.html#l01200">unix/SysFile.cpp:1200</a></div></div>
<div class="ttc" id="aclass_sys_file_html_adfa0d4b71f91895b75ccb2347c42eb0f"><div class="ttname"><a href="class_sys_file.html#adfa0d4b71f91895b75ccb2347c42eb0f">SysFile::isTransient</a></div><div class="ttdeci">bool isTransient()</div><div class="ttdef"><b>Definition:</b> <a href="unix_2_sys_file_8hpp_source.html#l00118">unix/SysFile.hpp:118</a></div></div>
<div class="ttc" id="aclass_sys_file_html_afbc58dba3f5409d7faa7ddfc2467a648"><div class="ttname"><a href="class_sys_file.html#afbc58dba3f5409d7faa7ddfc2467a648">SysFile::setStdOut</a></div><div class="ttdeci">void setStdOut()</div><div class="ttdef"><b>Definition:</b> <a href="unix_2_sys_file_8cpp_source.html#l01158">unix/SysFile.cpp:1158</a></div></div>
<div class="ttc" id="aclass_sys_file_html_afc799bb3c9bcb7a727bbbbf84d58d7f0"><div class="ttname"><a href="class_sys_file.html#afc799bb3c9bcb7a727bbbbf84d58d7f0">SysFile::reset</a></div><div class="ttdeci">void reset()</div><div class="ttdef"><b>Definition:</b> <a href="unix_2_sys_file_8cpp_source.html#l00204">unix/SysFile.cpp:204</a></div></div>
<div class="ttc" id="aclass_sys_file_html_afd36518b797efed0477e9ae15cec65e6"><div class="ttname"><a href="class_sys_file.html#afd36518b797efed0477e9ae15cec65e6">SysFile::isOpen</a></div><div class="ttdeci">bool isOpen()</div><div class="ttdef"><b>Definition:</b> <a href="unix_2_sys_file_8hpp_source.html#l00122">unix/SysFile.hpp:122</a></div></div>
<div class="ttc" id="aclass_sys_file_system_html_a00065686fda60d5d8ae9a80149d2e583"><div class="ttname"><a href="class_sys_file_system.html#a00065686fda60d5d8ae9a80149d2e583">SysFileSystem::fileExists</a></div><div class="ttdeci">static bool fileExists(const char *name)</div><div class="ttdef"><b>Definition:</b> <a href="unix_2_sys_file_system_8cpp_source.html#l00221">unix/SysFileSystem.cpp:221</a></div></div>
<div class="ttc" id="aclass_sys_file_system_html_a5fd6ffa48ce2cec28f56c775bd3b4ae8a9c9cd233cbc33a5fd4c1a56ba3ea90ae"><div class="ttname"><a href="class_sys_file_system.html#a5fd6ffa48ce2cec28f56c775bd3b4ae8a9c9cd233cbc33a5fd4c1a56ba3ea90ae">SysFileSystem::MaximumPathLength</a></div><div class="ttdeci">@ MaximumPathLength</div><div class="ttdef"><b>Definition:</b> <a href="unix_2_sys_file_system_8hpp_source.html#l00080">unix/SysFileSystem.hpp:80</a></div></div>
<div class="ttc" id="aclass_sys_file_system_html_acc4db7ab3f7129157783511592a3963d"><div class="ttname"><a href="class_sys_file_system.html#acc4db7ab3f7129157783511592a3963d">SysFileSystem::qualifyStreamName</a></div><div class="ttdeci">static void qualifyStreamName(const char *unqualifiedName, char *qualifiedName, size_t bufferSize)</div><div class="ttdef"><b>Definition:</b> <a href="unix_2_sys_file_system_8cpp_source.html#l00177">unix/SysFileSystem.cpp:177</a></div></div>
<div class="ttc" id="aclass_token_definition_html"><div class="ttname"><a href="class_token_definition.html">TokenDefinition</a></div><div class="ttdef"><b>Definition:</b> <a href="_stream_command_parser_8h_source.html#l00163">StreamCommandParser.h:164</a></div></div>
<div class="ttc" id="aclass_utilities_html_a48f8b5eee5a201ee55dcd874206189b4"><div class="ttname"><a href="class_utilities.html#a48f8b5eee5a201ee55dcd874206189b4">Utilities::strupper</a></div><div class="ttdeci">static void strupper(char *str)</div><div class="ttdef"><b>Definition:</b> <a href="_utilities_8cpp_source.html#l00132">Utilities.cpp:132</a></div></div>
<div class="ttc" id="aclass_utilities_html_a99155cc671bfd7846467c1a7fdc7fe80"><div class="ttname"><a href="class_utilities.html#a99155cc671bfd7846467c1a7fdc7fe80">Utilities::strCaselessCompare</a></div><div class="ttdeci">static int strCaselessCompare(const char *opt1, const char *opt2)</div><div class="ttdef"><b>Definition:</b> <a href="_utilities_8cpp_source.html#l00082">Utilities.cpp:82</a></div></div>
<div class="ttc" id="acmdparse_8cpp_html_ac765329451135abec74c45e1897abf26"><div class="ttname"><a href="cmdparse_8cpp.html#ac765329451135abec74c45e1897abf26">type</a></div><div class="ttdeci">int type</div><div class="ttdef"><b>Definition:</b> <a href="cmdparse_8cpp_source.html#l00383">cmdparse.cpp:383</a></div></div>
<div class="ttc" id="aoorexxapi_8h_html"><div class="ttname"><a href="oorexxapi_8h.html">oorexxapi.h</a></div></div>
<div class="ttc" id="aoorexxapi_8h_html_a15c340ee5245f15f32265d54a1e5a3f5"><div class="ttname"><a href="oorexxapi_8h.html#a15c340ee5245f15f32265d54a1e5a3f5">argumentExists</a></div><div class="ttdeci">#define argumentExists(i)</div><div class="ttdef"><b>Definition:</b> <a href="oorexxapi_8h_source.html#l03777">oorexxapi.h:3777</a></div></div>
<div class="ttc" id="aoorexxapi_8h_html_a1c59a195fdd6270b4519d7496f3fcc8c"><div class="ttname"><a href="oorexxapi_8h.html#a1c59a195fdd6270b4519d7496f3fcc8c">OSELF</a></div><div class="ttdeci">RexxObjectPtr OSELF</div><div class="ttdef"><b>Definition:</b> <a href="oorexxapi_8h_source.html#l04328">oorexxapi.h:4328</a></div></div>
<div class="ttc" id="aoorexxapi_8h_html_a3b5f38e088a2ba7f412c33f6d97f852a"><div class="ttname"><a href="oorexxapi_8h.html#a3b5f38e088a2ba7f412c33f6d97f852a">CSELF</a></div><div class="ttdeci">void * CSELF</div><div class="ttdef"><b>Definition:</b> <a href="oorexxapi_8h_source.html#l04329">oorexxapi.h:4329</a></div></div>
<div class="ttc" id="aoorexxapi_8h_html_a895bccfb4968ae24b153351beadd50f7"><div class="ttname"><a href="oorexxapi_8h.html#a895bccfb4968ae24b153351beadd50f7">argumentOmitted</a></div><div class="ttdeci">#define argumentOmitted(i)</div><div class="ttdef"><b>Definition:</b> <a href="oorexxapi_8h_source.html#l03778">oorexxapi.h:3778</a></div></div>
<div class="ttc" id="aoorexxerrors_8h_html_a2c7c3fa4d6a576b5cf85176ea712cbfb"><div class="ttname"><a href="oorexxerrors_8h.html#a2c7c3fa4d6a576b5cf85176ea712cbfb">Rexx_Error_Incorrect_method_noarg</a></div><div class="ttdeci">#define Rexx_Error_Incorrect_method_noarg</div><div class="ttdef"><b>Definition:</b> <a href="oorexxerrors_8h_source.html#l00465">oorexxerrors.h:465</a></div></div>
<div class="ttc" id="aoorexxerrors_8h_html_a43f122d08b1e4bd67b6f301029f72599"><div class="ttname"><a href="oorexxerrors_8h.html#a43f122d08b1e4bd67b6f301029f72599">Rexx_Error_Incorrect_method</a></div><div class="ttdeci">#define Rexx_Error_Incorrect_method</div><div class="ttdef"><b>Definition:</b> <a href="oorexxerrors_8h_source.html#l00460">oorexxerrors.h:460</a></div></div>
<div class="ttc" id="aoorexxerrors_8h_html_a4ef7c54dc948f65ea68d42ab536bf048"><div class="ttname"><a href="oorexxerrors_8h.html#a4ef7c54dc948f65ea68d42ab536bf048">Rexx_Error_Incorrect_method_positive</a></div><div class="ttdeci">#define Rexx_Error_Incorrect_method_positive</div><div class="ttdef"><b>Definition:</b> <a href="oorexxerrors_8h_source.html#l00469">oorexxerrors.h:469</a></div></div>
<div class="ttc" id="aoorexxerrors_8h_html_aba194bb31fb4e07a463542cdeff0d373"><div class="ttname"><a href="oorexxerrors_8h.html#aba194bb31fb4e07a463542cdeff0d373">Rexx_Error_Incorrect_method_stream_type</a></div><div class="ttdeci">#define Rexx_Error_Incorrect_method_stream_type</div><div class="ttdef"><b>Definition:</b> <a href="oorexxerrors_8h_source.html#l00463">oorexxerrors.h:463</a></div></div>
<div class="ttc" id="aoorexxerrors_8h_html_abfb697037766bb11720aa2333c70c36a"><div class="ttname"><a href="oorexxerrors_8h.html#abfb697037766bb11720aa2333c70c36a">Rexx_Error_System_service</a></div><div class="ttdeci">#define Rexx_Error_System_service</div><div class="ttdef"><b>Definition:</b> <a href="oorexxerrors_8h_source.html#l00402">oorexxerrors.h:402</a></div></div>
<div class="ttc" id="arexx_8h_html_a581e376dc8d3b9132e29014c896b9e70"><div class="ttname"><a href="rexx_8h.html#a581e376dc8d3b9132e29014c896b9e70">CSTRING</a></div><div class="ttdeci">const char * CSTRING</div><div class="ttdef"><b>Definition:</b> <a href="rexx_8h_source.html#l00078">rexx.h:78</a></div></div>
<div class="ttc" id="arexx_8h_html_a64dfe004825692637e2075467179fcd9"><div class="ttname"><a href="rexx_8h.html#a64dfe004825692637e2075467179fcd9">RexxStringObject</a></div><div class="ttdeci">struct _RexxStringObject * RexxStringObject</div><div class="ttdef"><b>Definition:</b> <a href="rexx_8h_source.html#l00128">rexx.h:128</a></div></div>
<div class="ttc" id="arexx_8h_html_a67754d7374685ba954286d7268debd80"><div class="ttname"><a href="rexx_8h.html#a67754d7374685ba954286d7268debd80">RexxArrayObject</a></div><div class="ttdeci">struct _RexxArrayObject * RexxArrayObject</div><div class="ttdef"><b>Definition:</b> <a href="rexx_8h_source.html#l00130">rexx.h:130</a></div></div>
<div class="ttc" id="arexx_8h_html_a7b083927909eb2c01187f82602161d11"><div class="ttname"><a href="rexx_8h.html#a7b083927909eb2c01187f82602161d11">RexxBufferStringObject</a></div><div class="ttdeci">struct _RexxBufferStringObject * RexxBufferStringObject</div><div class="ttdef"><b>Definition:</b> <a href="rexx_8h_source.html#l00129">rexx.h:129</a></div></div>
<div class="ttc" id="arexx_8h_html_a96e0cc5eda42aed364b05f3c493e07e8"><div class="ttname"><a href="rexx_8h.html#a96e0cc5eda42aed364b05f3c493e07e8">RexxObjectPtr</a></div><div class="ttdeci">struct _RexxObjectPtr * RexxObjectPtr</div><div class="ttdef"><b>Definition:</b> <a href="rexx_8h_source.html#l00127">rexx.h:127</a></div></div>
<div class="ttc" id="arexx_8h_html_a9a119fa1e31a4af78dee3c12225b240a"><div class="ttname"><a href="rexx_8h.html#a9a119fa1e31a4af78dee3c12225b240a">NULLOBJECT</a></div><div class="ttdeci">#define NULLOBJECT</div><div class="ttdef"><b>Definition:</b> <a href="rexx_8h_source.html#l00147">rexx.h:147</a></div></div>
<div class="ttc" id="arexx_8h_html_aebdf384b016ed3ba91995946dbce0d55"><div class="ttname"><a href="rexx_8h.html#aebdf384b016ed3ba91995946dbce0d55">RexxPointerObject</a></div><div class="ttdeci">struct _RexxPointerObject * RexxPointerObject</div><div class="ttdef"><b>Definition:</b> <a href="rexx_8h_source.html#l00132">rexx.h:132</a></div></div>
<div class="ttc" id="astruct_rexx_method_context___html"><div class="ttname"><a href="struct_rexx_method_context__.html">RexxMethodContext_</a></div><div class="ttdef"><b>Definition:</b> <a href="oorexxapi_8h_source.html#l01428">oorexxapi.h:1429</a></div></div>
<div class="ttc" id="aunix_2_sys_file_8hpp_html_a0e47e78ccdf29e3dcafec74bab8695a1"><div class="ttname"><a href="unix_2_sys_file_8hpp.html#a0e47e78ccdf29e3dcafec74bab8695a1">RX_O_WRONLY</a></div><div class="ttdeci">#define RX_O_WRONLY</div><div class="ttdef"><b>Definition:</b> <a href="unix_2_sys_file_8hpp_source.html#l00057">unix/SysFile.hpp:57</a></div></div>
<div class="ttc" id="aunix_2_sys_file_8hpp_html_a0e4d18f8a0f213e2d8420dcb25b1f4a7"><div class="ttname"><a href="unix_2_sys_file_8hpp.html#a0e4d18f8a0f213e2d8420dcb25b1f4a7">RX_S_IWRITE</a></div><div class="ttdeci">#define RX_S_IWRITE</div><div class="ttdef"><b>Definition:</b> <a href="unix_2_sys_file_8hpp_source.html#l00069">unix/SysFile.hpp:69</a></div></div>
<div class="ttc" id="aunix_2_sys_file_8hpp_html_a363f215532814764f2f4b040eab7c919"><div class="ttname"><a href="unix_2_sys_file_8hpp.html#a363f215532814764f2f4b040eab7c919">RX_O_TRUNC</a></div><div class="ttdeci">#define RX_O_TRUNC</div><div class="ttdef"><b>Definition:</b> <a href="unix_2_sys_file_8hpp_source.html#l00061">unix/SysFile.hpp:61</a></div></div>
<div class="ttc" id="aunix_2_sys_file_8hpp_html_a419ed61c34fd6bce28216d2ece437ff4"><div class="ttname"><a href="unix_2_sys_file_8hpp.html#a419ed61c34fd6bce28216d2ece437ff4">RX_O_APPEND</a></div><div class="ttdeci">#define RX_O_APPEND</div><div class="ttdef"><b>Definition:</b> <a href="unix_2_sys_file_8hpp_source.html#l00062">unix/SysFile.hpp:62</a></div></div>
<div class="ttc" id="aunix_2_sys_file_8hpp_html_a4c7585605dc0ab0ed2730a48d4e63f51"><div class="ttname"><a href="unix_2_sys_file_8hpp.html#a4c7585605dc0ab0ed2730a48d4e63f51">RX_S_IREAD</a></div><div class="ttdeci">#define RX_S_IREAD</div><div class="ttdef"><b>Definition:</b> <a href="unix_2_sys_file_8hpp_source.html#l00070">unix/SysFile.hpp:70</a></div></div>
<div class="ttc" id="aunix_2_sys_file_8hpp_html_a517ccdfde2dc2189825304291b428f42"><div class="ttname"><a href="unix_2_sys_file_8hpp.html#a517ccdfde2dc2189825304291b428f42">RX_O_RDONLY</a></div><div class="ttdeci">#define RX_O_RDONLY</div><div class="ttdef"><b>Definition:</b> <a href="unix_2_sys_file_8hpp_source.html#l00056">unix/SysFile.hpp:56</a></div></div>
<div class="ttc" id="aunix_2_sys_file_8hpp_html_a52219ba0434d2d6649628fc9c1dc8969"><div class="ttname"><a href="unix_2_sys_file_8hpp.html#a52219ba0434d2d6649628fc9c1dc8969">RX_O_RDWR</a></div><div class="ttdeci">#define RX_O_RDWR</div><div class="ttdef"><b>Definition:</b> <a href="unix_2_sys_file_8hpp_source.html#l00058">unix/SysFile.hpp:58</a></div></div>
<div class="ttc" id="aunix_2_sys_file_8hpp_html_a58257d847f32cc235506950910167db1"><div class="ttname"><a href="unix_2_sys_file_8hpp.html#a58257d847f32cc235506950910167db1">RX_SH_DENYRW</a></div><div class="ttdeci">#define RX_SH_DENYRW</div><div class="ttdef"><b>Definition:</b> <a href="unix_2_sys_file_8hpp_source.html#l00066">unix/SysFile.hpp:66</a></div></div>
<div class="ttc" id="aunix_2_sys_file_8hpp_html_a5d6a52000f2d86a1583eeb84cea9cd16"><div class="ttname"><a href="unix_2_sys_file_8hpp.html#a5d6a52000f2d86a1583eeb84cea9cd16">RX_SH_DENYWR</a></div><div class="ttdeci">#define RX_SH_DENYWR</div><div class="ttdef"><b>Definition:</b> <a href="unix_2_sys_file_8hpp_source.html#l00064">unix/SysFile.hpp:64</a></div></div>
<div class="ttc" id="aunix_2_sys_file_8hpp_html_aa9690b9c4b5f76310990f0f67766ddf3"><div class="ttname"><a href="unix_2_sys_file_8hpp.html#aa9690b9c4b5f76310990f0f67766ddf3">RX_SH_DENYNO</a></div><div class="ttdeci">#define RX_SH_DENYNO</div><div class="ttdef"><b>Definition:</b> <a href="unix_2_sys_file_8hpp_source.html#l00067">unix/SysFile.hpp:67</a></div></div>
<div class="ttc" id="aunix_2_sys_file_8hpp_html_aeeb5f1ad006eedc1fc37f12380b15598"><div class="ttname"><a href="unix_2_sys_file_8hpp.html#aeeb5f1ad006eedc1fc37f12380b15598">RX_SH_DENYRD</a></div><div class="ttdeci">#define RX_SH_DENYRD</div><div class="ttdef"><b>Definition:</b> <a href="unix_2_sys_file_8hpp_source.html#l00065">unix/SysFile.hpp:65</a></div></div>
<div class="ttc" id="aunix_2rxqueue_8cpp_html_a2edfdad12ca19a7c81c5cf054cd2a12f"><div class="ttname"><a href="unix_2rxqueue_8cpp.html#a2edfdad12ca19a7c81c5cf054cd2a12f">work</a></div><div class="ttdeci">char work[256]</div><div class="ttdef"><b>Definition:</b> <a href="unix_2rxqueue_8cpp_source.html#l00082">unix/rxqueue.cpp:82</a></div></div>
<div class="ttc" id="awindows_2rexxapitypes_8h_html_a414156feea104f8f75b4ed9e3121b2f6"><div class="ttname"><a href="windows_2rexxapitypes_8h.html#a414156feea104f8f75b4ed9e3121b2f6">int64_t</a></div><div class="ttdeci">signed __int64 int64_t</div><div class="ttdef"><b>Definition:</b> <a href="windows_2rexxapitypes_8h_source.html#l00076">windows/rexxapitypes.h:76</a></div></div>
</div><!-- fragment --></div><!-- contents -->
</div><!-- doc-content -->
<!-- HTML footer for doxygen 1.9.2-->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_2b8d323c7289fed1299e6f1b6909d41b.html">oorexx</a></li><li class="navelem"><a class="el" href="dir_8b29bd360d363874c010699c0e4edfe4.html">executor</a></li><li class="navelem"><a class="el" href="dir_b12c9cdd073ecc75d378afe044a8807c.html">sandbox</a></li><li class="navelem"><a class="el" href="dir_6f8e204b311fad1e21be914fb6af8fc9.html">jlf</a></li><li class="navelem"><a class="el" href="dir_4796bfee7d29ff8f3ba63e631cf48035.html">trunk</a></li><li class="navelem"><a class="el" href="dir_568b253ddbf98cea92a6c65945d41c59.html">interpreter</a></li><li class="navelem"><a class="el" href="dir_d7fbbfbed36c6ded299606a60fe0c65c.html">streamLibrary</a></li><li class="navelem"><a class="el" href="_stream_native_8cpp.html">StreamNative.cpp</a></li>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.2 </li>
  </ul>
</div>
<!-- javascript code to insert the title in the condensed index (tabs) -->
<!-- See the function initMenu in menu.js:
     The condensed index is a list <ul> of several items <li>: Main Page, Classes, Files.
     I append a new item <li> which display the project name. -->
<script type="text/javascript">
$(function() {
  $('#main-menu').append('<li class="title" style="margin-left:3mm">executor.master</li>')
});
</script>
<!-- end of javascript code -->
</body>
</html>
